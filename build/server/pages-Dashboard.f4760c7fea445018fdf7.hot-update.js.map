{"version":3,"file":"pages-Dashboard.f4760c7fea445018fdf7.hot-update.js","sources":["webpack://@alifd/scaffold-lite/./src/components/IssueEditor/index.tsx","webpack://@alifd/scaffold-lite/./src/pages/Dashboard/index.tsx","webpack://@alifd/scaffold-lite/./src/components/IssueEditor/index.scss"],"sourcesContent":["// @ts-nocheck\nimport './index.scss';\n\nimport React, { useEffect, useState } from 'react';\n\n// import { issueDetailStore } from '@/domain/application/store';\n// import { DescriptionFormatType } from '@/domain/interface/issue';\n\n// import MarkdownEditor from './components/markdown';\n// import DingdingEditor from './components/weEditor';\n\nexport interface AoneEditorProps {\n  defaultValue?: string;\n  defaultType?: 'md' | 'richText';\n  onChange?: (value: string, docType: 'md' | 'richText') => void;\n  onAtUser?: (user: any) => void;\n  minHeight?: number;\n  placeholder?: string;\n  readOnly?: boolean;\n  viewClassName?: string;\n  editClassName?: string;\n  className?: string;\n  viewStyle?: any;\n  insertThirdPartyPlugins?: [];\n  toolbar?: {\n    md?: string[];\n    richText?: string[];\n  };\n  userConfig: {\n    getUserLink: (user: any) => void;\n    queryUser: (query: string) => any;\n  };\n  uploadImgConfig: {\n    maxSize: number;\n    multiple: boolean;\n    accept: string;\n    uploadImage: (files: any) => any;\n  };\n  getInstance?: (ins: any) => void;\n  onThirdPluginClick?: (item?: any) => void;\n  onChangeFullScreen?: (isFullScreen: boolean) => void;\n  pastePlainWithImgEnable?: boolean;\n  editorKey?: string;\n  contentStyle?: object;\n  handlePreviewFile?: any;\n}\nconst AoneEditor = (props: AoneEditorProps) => {\n  console.log('props: ', props);\n  debugger; \n  // const [disabledChangeBtn, setDisabledChangeBtn] = useState(!!props.defaultValue);\n  // const [editType, setEditType] = useState('md');\n  // const [defaultValue, setDefaultValue] = useState('');\n\n  // const markdownToolbar = ['fullscreen', 'bold', 'italic', 'ordered-list', 'unordered-list', 'heading-1',\n  //   'heading-2', 'heading-3', 'link', 'upload-image', 'table', 'side-by-side', 'preview', 'toggleType'];\n  // useEffect(() => {\n  //   setAoneEditorValue(props.defaultValue);\n  // }, []);\n  // useEffect(() => {\n  //   setDefaultValue(props.defaultValue);\n  //   setEditType(props.defaultType);\n  // }, [props.defaultType, props.defaultValue]);\n  // // 用于保存\n  // useEffect(() => {\n  //   setDefaultValue(props.defaultValue);\n  // }, [props.defaultValue]);\n  // useEffect(() => {\n  //   runPropsOnChange();\n  // }, [editType, defaultValue]);\n  // const runPropsOnChange = () => {\n  //   props.onChange(defaultValue, editType);\n  // };\n  // const setAoneEditorValue = (value: string | undefined) => {\n  //   const { editorKey } = props;\n  //   // @ts-ignore\n  //   window.aone_sqm_editor = window.aone_sqm_editor ? { ...window.aone_sqm_editor } : {};\n  //   // @ts-ignore\n  //   window.aone_sqm_editor[editorKey] = value;\n  //   // @ts-ignore\n  //   window.aone_dd_editor = window.aone_dd_editor ? { ...window.aone_dd_editor } : {};\n  //   // @ts-ignore\n  //   window.aone_dd_editor[editorKey] = value;\n  // };\n  // const onChangeType = (docType: 'md' | 'richText') => {\n  //   setEditType(docType);\n\n  //   setDefaultValue('');\n  //   setAoneEditorValue('');\n  //   props.onChange('', docType);\n  //   window.aone_dd_editor[`${issueDetailStore.workitemId}-description-docType`] =\n  //   docType === 'md'\n  //     ? DescriptionFormatType.MARKDOWN\n  //     : DescriptionFormatType.RICHTEXT;\n  // };\n\n  // const onChange = (value: string) => {\n  //   const { editorKey } = props;\n  //   const disabled = value === '<div style=\"clear: both;\"><br></div>' ? false : !!value;\n  //   setDisabledChangeBtn(disabled);\n  //   setDefaultValue(value);\n  //   setAoneEditorValue(value);\n  //   // 兼容3.0详情描述草稿逻辑\n  //   // @ts-ignore\n  //   if (setEditType !== 'md' && !editorKey.includes('comment')) {\n  //     window?.setDraftValueFun && typeof window?.setDraftValueFun === 'function' && window.setDraftValueFun(value);\n  //   }\n  // };\n  // const {\n  //   onAtUser,\n  //   minHeight,\n  //   placeholder,\n  //   userConfig,\n  //   uploadImgConfig,\n  //   readOnly,\n  //   toolbar: propsToolbar,\n  //   viewClassName,\n  //   editClassName,\n  //   className,\n  //   insertThirdPartyPlugins,\n  //   viewStyle,\n  //   onThirdPluginClick,\n  //   contentStyle,\n  //   // handlePreviewFile,\n  // } = props;\n  // const commonProps = {\n  //   readOnly,\n  //   minHeight,\n  //   placeholder,\n  //   userConfig,\n  //   uploadImgConfig,\n  //   defaultValue,\n  //   onAtUser,\n  //   viewClassName,\n  //   disabledChangeBtn,\n  //   onChange,\n  //   onChangeType,\n  //   editClassName,\n  //   className,\n  //   insertThirdPartyPlugins,\n  //   viewStyle,\n  //   onThirdPluginClick,\n  //   contentStyle,\n\n  //   // onChangeFullScreen,\n  // };\n  return (\n    // eslint-disable-next-line no-return-assign\n    <div className=\"aone-editor\">\n      {/* {\n        editType === 'md' && <MarkdownEditor\n          {...commonProps}\n          tools={propsToolbar.md?.length ? propsToolbar.md : markdownToolbar}\n        />\n      } */}\n      {/* {\n        // eslint-disable-next-line no-return-assign\n        editType === 'richText' && <DingdingEditor\n          {...props}\n          {...commonProps}\n          tools={propsToolbar.richText}\n          // getInstance={(ins) => this.RTInstance = ins}\n        />\n      } */}\n      <span>123</span>\n\n    </div>\n  );\n};\nexport default AoneEditor;\n","import React, { Suspense } from 'react';\nimport { ResponsiveGrid } from '@alifd/next';\nimport Guide from './components/Guide';\nimport { lazy } from 'ice';\nimport Editor from '@/components/IssueEditor';\n\nconst { Cell } = ResponsiveGrid;\n// const Editor = lazy(() => import('@/components/IssueEditor'), true);\nconsole.log('Editor: ', Editor);\n\nconst Dashboard = () => {\n  return (\n    <ResponsiveGrid gap={20}>\n      <Cell colSpan={12}>\n        <Guide />\n      </Cell>\n      <Suspense fallback={<div>Loading...</div>}>\n        <Editor\n          editorKey=\"508066-description\"\n          editorType={\"DINGDING\"}\n          className={\"DingEditor--aoneEditor--XzNBwti\"}\n          defaultType={'richText'} // 默认richText\n          defaultValue='[\\\"root\\\",{},[\\\"p\\\",{},[\\\"span\\\",{\\\"data-type\\\":\\\"text\\\"},[\\\"span\\\",{\\\"data-type\\\":\\\"leaf\\\"},\\\"\\\"]]]]'\n          onChange={(value, docType) => { localStorage.setItem('editorInputType', docType); }}\n          readOnly={true}\n          userConfig={{\n            // newTab: tab, // 富文本生效 点击链接时是否新开tab页\n            // getUserLink, // (user) => 'http://ali.baba/${user.id}'\n            // queryUser, // return 一个 Promise\n          }}\n          uploadImgConfig={{\n            multiple: false,\n            maxSize: 1024 * 1024, // 2M\n            accept: 'image/jpg,image/jpeg,image/png,image/gif,image/bmp', // input  accept\n            // uploadImage, // return 一个 Promise\n          }}\n          uploadEmbedConfig={{\n            // handlePreviewFile, // return 一个 Promise\n          }}\n          // toolbar={toolbar}\n          isFullScreen={false}\n          onChangeFullScreen={(innerIsFullScreen) => {\n            // setIsFullScreen(innerIsFullScreen);\n          }}\n        />\n      </Suspense>\n    </ResponsiveGrid>\n  );\n};\n\nexport default Dashboard;\n","// Exports\nexport default {\n\t\"e_editor_toolbar_m_wrap\": \"MfT1rm6tzYRFNXmtcgNU\",\n\t\"e_toolbar_toggletype\": \"phEH13kK2IPpYTy_Cicc\",\n\t\"aone-editor-hint\": \"TBC9icxiBbEsHFmbiF6N\",\n\t\"e_list_item\": \"GBlzsBz_65TYXaFPp1K_\",\n\t\"e_editor_toolbar\": \"pHMvmbJTCEIgTekxkkrP\",\n\t\"e_toolbar_font_family\": \"r0BqXDbQnE_Gy_CYwzk3\",\n\t\"e_toolbar_font_size\": \"qlViq7Fm7D7Ivqna445d\",\n\t\"aone-editor-hint-avatar\": \"ZOO7fahOKhv9WtF6wn3p\",\n\t\"aone-editor-hint-name\": \"KoDKFQSd_imRsIJoo5DU\",\n\t\"aone-editor-hint-email\": \"p9cUxmbYb_0MXabuAtPr\",\n\t\"aone-editor-wrap\": \"W1QLHrZAZHqRdHKz9IoT\",\n\t\"e_editor_toolbar_b_wrap\": \"et50VvX6qStc7zWVB1WF\",\n\t\"e_editor_body_holder\": \"J0il86TdzNVg_8_hqui1\",\n\t\"md-change-type-btn\": \"FeqqMSuEVBFRWmPmXgix\",\n\t\"md-insert-plugin-btn\": \"Orxf0uvvDmOAdQ7uXlOJ\",\n\t\"e_editor_toolbar_b_disable\": \"z8jHp3ZzknNX81V0q3eb\",\n\t\"md-change-type-btn-disabled\": \"M8_SxVAERSIY7CJPduqB\",\n\t\"aone-editor-insert-menus\": \"y_MUfwM_OAWiLwVGp0sg\",\n\t\"aone-editor-insert-menu\": \"tjZCBXSkyqNdoMIQd2_w\",\n\t\"aone-editor-insert-menu-info\": \"Gan69AaUflcEV88fX2de\",\n\t\"aone-editor-insert-menu-title\": \"SKWpOQwclGYNoxw3IRkR\",\n\t\"aone-editor-insert-menu-subTitle\": \"dhv_EaICvmnXvMKmaqxp\",\n\t\"metion-suggestion-portal\": \"ACuJZSIsEz7qFJTV4WW8\",\n\t\"bi-link-portal\": \"BLc5f08qYDj5f4UWmlwo\",\n\t\"bi-toolbar\": \"Yi6AmWzjHVUzk8zEwIqZ\",\n\t\"aone-editor\": \"WvFmY4m4xFJPDzbvmIef\",\n\t\"aoneEditorFullScreen\": \"mPXS7uREeo2KeSxxavIw\",\n\t\"editor-toolbar\": \"A1R4borzsbXtach8AFnk\",\n\t\"rc-md-editor\": \"T8U1ZfAu_DgGl_B7D_6e\",\n\t\"e_l_wrap\": \"gtZm_IMN1DtUhrDUQiRC\",\n\t\"e_editor_main_wrap\": \"ZL96gy6nz1yRunIjDXen\",\n\t\"e_editor_toolbar_item\": \"B0fToOXICgIGrkp93LI1\",\n\t\"CodeMirror\": \"myoCnHoi7xq2hjPO_mX_\",\n\t\"m-whitebox\": \"qBkTJN0TdOvZcY5XZHnl\",\n\t\"event-header\": \"wvlJrFpJYJZeYNcu67Mm\",\n\t\"source-line\": \"Y_TdrcURVxhU_eyHhnKH\",\n\t\"filename\": \"Kv1DOTcdoPzg9N0H7v75\",\n\t\"major\": \"Cm_bRuJMQXW8jUnYi6q8\",\n\t\"impact-high\": \"Lz_KLcPhuFF6ZSdgbn89\",\n\t\"impact-High\": \"cRXV6JtwkmZMHDyeezFY\",\n\t\"impact-low\": \"E6c9J7HR6P8TnuZFyUFd\",\n\t\"impact-Ligh\": \"jY0MFHcajWxrtii5aRQD\",\n\t\"impact-medium\": \"ap866Liqpdob33wXY1jP\",\n\t\"impact-Medium\": \"nn0Z_y3YcW84P1I0iIrh\",\n\t\"e_editor_toolbar_wrap\": \"CnIJEGAi7VofSLHzZTu2\",\n\t\"aoneEditor\": \"p14fRpiGAeqLc472r_CI\",\n\t\"custom-html-style\": \"LBW3DS4pv3016Ea9N6Bv\"\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AAGA;AAEA;AACA;AACA;AAoCA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAFA;AAsBA;AACA;AA1HA;AA0HA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A;;A;;;;;;;;;;;;;;;;;;;;ACzKA;AACA;AACA;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAGA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAKA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AACA;AACA;AACA;AALA;AAMA;AAAA;AAnBA;AAuBA;AACA;AAEA;AA1BA;AA+BA;AACA;AAvCA;AAwCA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A;;A;;;;;;;;;;;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;A;;;A","sourceRoot":""}