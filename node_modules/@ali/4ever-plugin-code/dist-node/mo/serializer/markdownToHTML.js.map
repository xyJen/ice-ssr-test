{"version":3,"sources":["../../../../src/mo/serializer/markdownToHTML.ts"],"names":["rule","ruleName","rewrite","name","createRenderer","md","defaultRule","renderer","rules","fence","args","defaultOutput","matches","match","_","classNames","code","replace"],"mappings":";;;;;;AAEA,MAAMA,IAAwB,GAAG;AAC/BC,EAAAA,QAAQ,EAAE,MADqB;AAE/BC,EAAAA,OAAO,EAAE,CAAC;AACRC,IAAAA,IAAI,EAAE,OADE;AAERC,IAAAA,cAAc,EAAGC,EAAD,IAAQ;AACtB,YAAMC,WAAW,GAAGD,EAAE,CAACE,QAAH,CAAYC,KAAZ,CAAkBC,KAAtC;AACA,aAAO,CAAC,GAAGC,IAAJ,KAAa;AAClB,YAAI,CAACJ,WAAL,EAAkB;AAChB,iBAAO,EAAP;AACD;;AACD,cAAMK,aAAa,GAAGL,WAAW,CAAC,GAAGI,IAAJ,CAAjC;AACA,cAAME,OAAO,GAAGD,aAAa,CAACE,KAAd,CAAoB,uDAApB,CAAhB;;AACA,YAAI,CAACD,OAAL,EAAc;AACZ,iBAAOD,aAAP;AACD;;AAED,cAAM,CAACG,CAAD,EAAIC,UAAJ,EAAgBC,IAAhB,IAAwBJ,OAA9B;AACA,eAAQ,aAAYG,UAAU,IAAI,EAAG,IAAGC,IAAI,CAACC,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAwB,iBAAhE;AACD,OAZD;AAaD;AAjBO,GAAD;AAFsB,CAAjC;eAuBejB,I","sourcesContent":["import type { MarkdownToHTMLRule } from '@ali/4ever-cangjie';\n\nconst rule: MarkdownToHTMLRule = {\n  ruleName: 'code',\n  rewrite: [{\n    name: 'fence',\n    createRenderer: (md) => {\n      const defaultRule = md.renderer.rules.fence;\n      return (...args) => {\n        if (!defaultRule) {\n          return '';\n        }\n        const defaultOutput = defaultRule(...args);\n        const matches = defaultOutput.match(/^<pre><code( class=\".+\")?>([\\s\\S]*)<\\/code><\\/pre>\\n$/);\n        if (!matches) {\n          return defaultOutput;\n        }\n\n        const [_, classNames, code] = matches;\n        return `<pre><code${classNames || ''}>${code.replace(/\\n$/, '')}</code></pre>\\n`;\n      }\n    }\n  }]\n};\n\nexport default rule;\n"],"file":"markdownToHTML.js"}