"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getSyntax = getSyntax;
exports.getTextContent = void 0;

var _constants = require("./constants");

/**
 * @description 获取代码块语言类型
 * @param {Element} codeBlockDom - 粘贴的代码块节点元素
 * */
function getSyntax(codeBlockDom) {
  if (!codeBlockDom) {
    return _constants.PLAIN_TEXT;
  }

  if (!codeBlockDom.className.includes(_constants.SYNTAX_PREFIX)) {
    codeBlockDom = codeBlockDom.getElementsByTagName('code')[0];

    if (!codeBlockDom) {
      return _constants.PLAIN_TEXT;
    }
  } // @ts-ignore


  const classList = Array.apply(null, codeBlockDom.classList);
  const syntaxClass = classList.find(clsname => clsname.includes(_constants.SYNTAX_PREFIX));
  return syntaxClass ? syntaxClass.slice(_constants.SYNTAX_PREFIX.length) : _constants.PLAIN_TEXT;
}
/**
 * @description 获取代码块节点元素的内容
 * */


const getTextContent = codeBlock => {
  const testDom = document.createElement('div');
  testDom.innerHTML = codeBlock.innerHTML.replace(_constants.REG_BR_TAG, '\n');
  return testDom.textContent || '';
};

exports.getTextContent = getTextContent;
//# sourceMappingURL=utils.js.map