{"version":3,"sources":["../../../../src/components/Codemirror/diffMatch.ts"],"names":["diffMatchPatchInstance","DiffMatchPatch","diffsToPatchs","oldValue","newValue","result","patches","patch_make","Object","keys","forEach","i","patch","offset","start1","diffs","type","value","DIFF_DELETE","push","DIFF_INSERT","length","DIFF_EQUAL","Error"],"mappings":";;;;;;;AACA;;AAEA,MAAMA,sBAAsB,GAAG,IAAIC,gCAAJ,EAA/B;;AAQO,SAASC,aAAT,CAAuBC,QAAvB,EAAyCC,QAAzC,EAA2D;AAChE,QAAMC,MAAe,GAAG,EAAxB;AAEA,QAAMC,OAAO,GAAGN,sBAAsB,CAACO,UAAvB,CAAkCJ,QAAlC,EAA4CC,QAA5C,CAAhB;AAEAI,EAAAA,MAAM,CAACC,IAAP,CAAYH,OAAZ,EAAqBI,OAArB,CAA8BC,CAAD,IAAY;AACvC,UAAMC,KAAK,GAAGN,OAAO,CAACK,CAAD,CAArB;AACA,QAAIE,MAAM,GAAGD,KAAK,CAACE,MAAnB;AAEAF,IAAAA,KAAK,CAACG,KAAN,CAAYL,OAAZ,CAAoB,CAAC,CAACM,IAAD,EAAOC,KAAP,CAAD,KAAmB;AACrC,cAAQD,IAAR;AACE,aAAKE,2BAAL;AACEb,UAAAA,MAAM,CAACc,IAAP,CAAY;AACVH,YAAAA,IAAI,EAAE,QADI;AAEVC,YAAAA,KAFU;AAGVJ,YAAAA;AAHU,WAAZ;AAKA;;AACF,aAAKO,2BAAL;AACEf,UAAAA,MAAM,CAACc,IAAP,CAAY;AACVH,YAAAA,IAAI,EAAE,QADI;AAEVC,YAAAA,KAFU;AAGVJ,YAAAA;AAHU,WAAZ;AAKAA,UAAAA,MAAM,IAAII,KAAK,CAACI,MAAhB;AACA;;AACF,aAAKC,0BAAL;AACET,UAAAA,MAAM,IAAII,KAAK,CAACI,MAAhB;AACA;;AACF;AAAS,gBAAME,KAAK,CAAE,+BAA8BP,IAAK,EAArC,CAAX;AAnBX;AAqBD,KAtBD;AAuBD,GA3BD;AA6BA,SAAOX,MAAP;AACD","sourcesContent":["\nimport { diff_match_patch as DiffMatchPatch, DIFF_DELETE, DIFF_INSERT, DIFF_EQUAL, patch_obj } from 'diff-match-patch';\n\nconst diffMatchPatchInstance = new DiffMatchPatch();\n\nexport interface Patch {\n  type: 'insert' | 'delete';\n  value: string;\n  offset: number;\n}\n\nexport function diffsToPatchs(oldValue: string, newValue: string) {\n  const result: Patch[] = [];\n\n  const patches = diffMatchPatchInstance.patch_make(oldValue, newValue);\n\n  Object.keys(patches).forEach((i: any) => {\n    const patch = patches[i] as patch_obj;\n    let offset = patch.start1!;\n\n    patch.diffs.forEach(([type, value]) => {\n      switch (type) {\n        case DIFF_DELETE:\n          result.push({\n            type: 'delete',\n            value,\n            offset,\n          });\n          break;\n        case DIFF_INSERT:\n          result.push({\n            type: 'insert',\n            value,\n            offset,\n          });\n          offset += value.length;\n          break;\n        case DIFF_EQUAL:\n          offset += value.length;\n          break;\n        default: throw Error(`Unsupported operation type: ${type}`);\n      }\n    });\n  });\n\n  return result;\n}\n"],"file":"diffMatch.js"}