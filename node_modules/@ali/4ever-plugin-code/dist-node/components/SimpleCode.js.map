{"version":3,"sources":["../../../src/components/SimpleCode.tsx"],"names":["Code","styled","pre","theme","height","codeTheme","props","lineWrapping","css","SimpleCode","React","forwardRef","ref","code","onTouchStart","noop","onMouseDown","onClick","node","print","marginLeft","marginRight","marginTop","marginBottom","maxHeight","MAX_HEIGHT","SpacingUtil","toStyle"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;AACA;;uBAJ4B,a;;AAoB5B,MAAMA,IAAI,gBAAGC,0BAAOC,GAAV,qLAOY,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAgBA,KAAK,KAAK,SAAV,GAAsB,uBAAtB,GAAgD,SAP5E,EAQQ,CAAC;AAAEA,EAAAA;AAAF,CAAD,KAAgBA,KAAK,KAAK,SAAV,GAAsB,wBAAtB,GAAiD,qBARzE,EAWE,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiBA,MAAM,GAAI,GAAEA,MAAO,IAAb,GAAmB,SAX5C,EAYOC,qBAAU,aAAV,CAZP,EAgBLC,KAAD,IAAWA,KAAK,CAACC,YAAN,QAAsBC,qBAAtB,mEAhBL,EAsBLF,KAAD,IAAW,CAACA,KAAK,CAACC,YAAP,QAAuBC,qBAAvB,wBAtBL,EA2BG,CAAC;AAAEL,EAAAA;AAAF,CAAD,KAAgBA,KAAK,KAAK,SAAV,GAAsB,wBAAtB,GAAiD,SA3BpE,CAAV;;AA+BA,MAAMM,UAAU,gBAAGC,KAAK,CAACC,UAAN,CACjB,CAACL,KAAD,EAAQM,GAAR,KAAgB;AACd,QAAM;AACJC,IAAAA,IADI;AAEJT,IAAAA,MAFI;AAGJD,IAAAA,KAHI;AAIJW,IAAAA,YAAY,GAAGC,YAJX;AAKJC,IAAAA,WAAW,GAAGD,YALV;AAMJE,IAAAA,OAAO,GAAGF,YANN;AAOJG,IAAAA,IAPI;AAQJX,IAAAA,YARI;AASJY,IAAAA;AATI,MAUFb,KAVJ;AAYA,sBACE,eAAC,IAAD;AACE,IAAA,KAAK,EAAE;AACLc,MAAAA,UAAU,EAAEf,qBAAU,aAAV,CADP;AAELgB,MAAAA,WAAW,EAAEhB,qBAAU,cAAV,CAFR;AAGLiB,MAAAA,SAAS,EAAEjB,qBAAU,YAAV,CAHN;AAILkB,MAAAA,YAAY,EAAElB,qBAAU,eAAV,CAJT;AAKLmB,MAAAA,SAAS,EAAE,CAACL,KAAD,GAASM,qBAAT,GAAsB,MAL5B;AAML,SAAGC,uBAAYC,OAAZ,CAAoBT,IAApB;AANE,KADT;AASE,IAAA,GAAG,EAAEN,GATP;AAUE,IAAA,MAAM,EAAER,MAVV;AAWE,IAAA,KAAK,EAAED,KAXT;AAYE,IAAA,YAAY,EAAEI,YAZhB;AAaE,IAAA,YAAY,EAAEO,YAbhB;AAcE,IAAA,WAAW,EAAEE,WAdf;AAeE,IAAA,OAAO,EAAEC,OAfX;AAgBE,sBAAe,WAhBjB;AAiBE;AAjBF,kBAmBE,6BAAOJ,IAAP,CAnBF,CADF;AAuBD,CArCgB,CAAnB;eAwCeJ,U","sourcesContent":["import * as React from 'react';\nimport styled, { css } from 'styled-components';\nimport { noop } from 'lodash-es';\nimport { Block } from '@ali/4ever-cangjie';\nimport { SpacingUtil, codeTheme } from '@ali/4ever-utils';\nimport { MAX_HEIGHT } from '../utils/constants/dimension';\n\ninterface SimpleCodeProps {\n  height: number | undefined;\n  code: string;\n  theme: 'dracula' | 'default';\n  onMouseDown?: (event: React.MouseEvent) => void;\n  onTouchStart?: (event: React.TouchEvent) => void;\n  onClick?: (event: React.MouseEvent) => void;\n  node: Block;\n  // 是否 auto wrap\n  lineWrapping: boolean;\n  // print\n  print?: boolean;\n}\n\nconst Code = styled.pre<\n  Pick<SimpleCodeProps, 'height' | 'theme' | 'lineWrapping'> &\n  React.DetailedHTMLProps<\n    React.HTMLAttributes<HTMLPreElement>,\n    HTMLPreElement\n  >\n  >`\n  background-color: ${({ theme }) => (theme === 'default' ? 'rgba(246,248,249,0.8)' : '#282a36')};\n  border-color: ${({ theme }) => (theme === 'default' ? 'rgba(17, 31, 44, 0.08)' : 'rgba(17, 31, 44, 1)')};\n  padding: 10px;\n  border-radius: 5px;\n  height: ${({ height }) => (height ? `${height}px` : 'inherit')};\n  line-height: ${codeTheme['line-height']};\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n\n  ${(props) => props.lineWrapping && css`\n      word-wrap: break-word;\n      white-space: pre-wrap;\n      word-break: normal;\n  `}\n\n  ${(props) => !props.lineWrapping && css`\n      word-wrap: normal;\n  `}\n\n  code {\n    color: ${({ theme }) => (theme === 'default' ? 'rgba(17, 31, 44, 0.56)' : '#FFFFFF')};\n  }\n`;\n\nconst SimpleCode = React.forwardRef<HTMLPreElement, SimpleCodeProps>(\n  (props, ref) => {\n    const {\n      code,\n      height,\n      theme,\n      onTouchStart = noop,\n      onMouseDown = noop,\n      onClick = noop,\n      node,\n      lineWrapping,\n      print,\n    } = props;\n\n    return (\n      <Code\n        style={{\n          marginLeft: codeTheme['margin-left'],\n          marginRight: codeTheme['margin-right'],\n          marginTop: codeTheme['margin-top'],\n          marginBottom: codeTheme['margin-bottom'],\n          maxHeight: !print ? MAX_HEIGHT : 'none',\n          ...SpacingUtil.toStyle(node),\n        }}\n        ref={ref}\n        height={height}\n        theme={theme}\n        lineWrapping={lineWrapping}\n        onTouchStart={onTouchStart}\n        onMouseDown={onMouseDown}\n        onClick={onClick}\n        data-hover-box=\"borderBox\"\n        data-plugin-scrollable\n      >\n        <code>{code}</code>\n      </Code>\n    );\n  },\n);\n\nexport default SimpleCode;\n"],"file":"SimpleCode.js"}