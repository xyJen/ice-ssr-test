{"version":3,"sources":["../../../src/bi/createToolbar.ts"],"names":["createToolbar","config","buttons","default","ToolbarButton","button","syntax","LanguageSelect","theme","ThemeSelect","wrap","ToolbarLineWrap","more","ToolbarMore","locale","getTarget","controller","selection","document","value","isCollapsed","block","getClosestBlock","focus","key","type","undefined"],"mappings":";;;;;;;;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAEe,SAASA,aAAT,CAAuBC,MAAvB,EAAiD;AAC9D,SAAO;AACLC,IAAAA,OAAO,EAAE;AACPC,MAAAA,OAAO,EAAEC,sBADF;AAEPC,MAAAA,MAAM,EAAED,sBAFD;AAGPE,MAAAA,MAAM,EAAEC,8BAHD;AAIPC,MAAAA,KAAK,EAAEC,2BAJA;AAKPC,MAAAA,IAAI,EAAEC,wBALC;AAMPC,MAAAA,IAAI,EAAEC;AANC,KADJ;AASLC,IAAAA,MAAM,EAAEb,MAAM,CAACa,MATV;AAULC,IAAAA,SAAS,EAAGC,UAAD,IAA4B;AACrC,YAAM;AAAEC,QAAAA,SAAF;AAAaC,QAAAA;AAAb,UAA0BF,UAAU,CAACG,KAA3C;;AACA,UAAIF,SAAS,IACRA,SAAS,CAACG,WADf,EAC4B;AAC1B,cAAMC,KAAK,GAAGH,QAAQ,CAACI,eAAT,CAAyBL,SAAS,CAACM,KAAV,CAAgBC,GAAzC,CAAd;;AACA,YAAIH,KAAK,EAAEI,IAAP,KAAgB,MAApB,EAA4B;AAC1B,iBAAO,MAAP;AACD;AACF;;AACD,aAAOC,SAAP;AACD;AApBI,GAAP;AAsBD","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport ToolbarButton from './components/ToolbarButton';\nimport LanguageSelect from './components/ToolbarLanguageSelect';\nimport ThemeSelect from './components/ToolbarThemeSelect';\nimport { CodePluginConfig } from './types';\nimport ToolbarLineWrap from './components/ToolbarLineWrap';\nimport ToolbarMore from './components/ToolbarMore';\n\nexport default function createToolbar(config: CodePluginConfig) {\n  return {\n    buttons: {\n      default: ToolbarButton,\n      button: ToolbarButton,\n      syntax: LanguageSelect,\n      theme: ThemeSelect,\n      wrap: ToolbarLineWrap,\n      more: ToolbarMore,\n    },\n    locale: config.locale,\n    getTarget: (controller: Controller) => {\n      const { selection, document } = controller.value;\n      if (selection\n        && selection.isCollapsed) {\n        const block = document.getClosestBlock(selection.focus.key);\n        if (block?.type === 'code') {\n          return 'code';\n        }\n      }\n      return undefined;\n    },\n  };\n}\n"],"file":"createToolbar.js"}