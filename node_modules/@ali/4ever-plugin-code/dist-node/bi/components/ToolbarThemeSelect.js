"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var React = _interopRequireWildcard(require("react"));

var _getCurrentCode = _interopRequireDefault(require("../queries/getCurrentCode"));

var _weToolbar = require("@ali/we-toolbar");

var _weIcon = require("@ali/we-icon");

var _actions = require("../actions");

var _ThemeSelect = _interopRequireDefault(require("./ThemeSelect"));

var _themes = require("../../utils/constants/themes");

const _createElement = /*#__PURE__*/React.createElement;

var _ref = /*#__PURE__*/_createElement(_weToolbar.IconButton, {
  icon: /*#__PURE__*/_createElement(_weIcon.PaletteNormal, null)
});

const ToolbarThemeSelect = props => {
  const {
    controller,
    locale,
    focusedCodeKey
  } = props;
  const code = (0, _getCurrentCode.default)(controller.value, focusedCodeKey);
  const handleChange = React.useCallback(theme => {
    const codeBlock = (0, _getCurrentCode.default)(controller.value, focusedCodeKey);
    controller.run('onAction', (0, _actions.changeCodeData)(codeBlock, {
      theme
    }));
  }, [controller, focusedCodeKey]);
  return /*#__PURE__*/_createElement(_ThemeSelect.default, {
    value: code ? code.data.theme : _themes.DEFAULT_THEME,
    onChange: handleChange,
    tip: locale.themeTitle,
    locale: locale,
    renderTrigger: () => _ref
  });
};

var _default = ToolbarThemeSelect;
exports.default = _default;
//# sourceMappingURL=ToolbarThemeSelect.js.map