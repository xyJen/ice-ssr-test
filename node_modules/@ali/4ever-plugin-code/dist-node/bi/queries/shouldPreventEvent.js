"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = shouldPreventEvent;

/**
 * COMPAT:
 * CodeMirror 在移动端使用 contenteditable 作为替代 textarea 的输入模式，
 * 这导致，slate 认为当前的 CodeMirror 实例是编辑器文档内容的一部分，CodeMirror 的事件因此
 * 也会被 slate 拦截，产生诸如 IME 失效，光标飘逸，无法输入等问题。
 * 因此，在移动端，需要让 Code 插件阻止 slate 对 CodeMirror 事件的劫持。
 * 判断事件是否应当被阻止：
 * 1. slate editor 已经失焦
 * 2. 当前元素可编辑（`isContentEditbale === true`）
 * 3. 当前元素处在 CodeMirror 节点下
 * @param event
 * @param editor
 */
function shouldPreventEvent(event, controller) {
  const target = event.target;
  const {
    selection
  } = controller.value;

  if (selection && target && target.isContentEditable && !!target.closest('.CodeMirror')) {
    return true;
  }

  return false;
}
//# sourceMappingURL=shouldPreventEvent.js.map