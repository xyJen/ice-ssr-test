{"version":3,"sources":["../../../../src/components/Codemirror/diffMatch.ts"],"names":["diff_match_patch","DiffMatchPatch","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","diffMatchPatchInstance","diffsToPatchs","oldValue","newValue","result","patches","patch_make","Object","keys","forEach","i","patch","offset","start1","diffs","type","value","push","length","Error"],"mappings":"AACA,SAASA,gBAAgB,IAAIC,cAA7B,EAA6CC,WAA7C,EAA0DC,WAA1D,EAAuEC,UAAvE,QAAoG,kBAApG;AAEA,IAAMC,sBAAsB,GAAG,IAAIJ,cAAJ,EAA/B;AAQA,OAAO,SAASK,aAAT,CAAuBC,QAAvB,EAAyCC,QAAzC,EAA2D;AAChE,MAAMC,MAAe,GAAG,EAAxB;AAEA,MAAMC,OAAO,GAAGL,sBAAsB,CAACM,UAAvB,CAAkCJ,QAAlC,EAA4CC,QAA5C,CAAhB;AAEAI,EAAAA,MAAM,CAACC,IAAP,CAAYH,OAAZ,EAAqBI,OAArB,CAA6B,UAACC,CAAD,EAAY;AACvC,QAAMC,KAAK,GAAGN,OAAO,CAACK,CAAD,CAArB;AACA,QAAIE,MAAM,GAAGD,KAAK,CAACE,MAAnB;AAEAF,IAAAA,KAAK,CAACG,KAAN,CAAYL,OAAZ,CAAoB,gBAAmB;AAAA,UAAjBM,IAAiB;AAAA,UAAXC,KAAW;;AACrC,cAAQD,IAAR;AACE,aAAKlB,WAAL;AACEO,UAAAA,MAAM,CAACa,IAAP,CAAY;AACVF,YAAAA,IAAI,EAAE,QADI;AAEVC,YAAAA,KAAK,EAALA,KAFU;AAGVJ,YAAAA,MAAM,EAANA;AAHU,WAAZ;AAKA;;AACF,aAAKd,WAAL;AACEM,UAAAA,MAAM,CAACa,IAAP,CAAY;AACVF,YAAAA,IAAI,EAAE,QADI;AAEVC,YAAAA,KAAK,EAALA,KAFU;AAGVJ,YAAAA,MAAM,EAANA;AAHU,WAAZ;AAKAA,UAAAA,MAAM,IAAII,KAAK,CAACE,MAAhB;AACA;;AACF,aAAKnB,UAAL;AACEa,UAAAA,MAAM,IAAII,KAAK,CAACE,MAAhB;AACA;;AACF;AAAS,gBAAMC,KAAK,kCAAgCJ,IAAhC,CAAX;AAnBX;AAqBD,KAtBD;AAuBD,GA3BD;AA6BA,SAAOX,MAAP;AACD","sourcesContent":["\nimport { diff_match_patch as DiffMatchPatch, DIFF_DELETE, DIFF_INSERT, DIFF_EQUAL, patch_obj } from 'diff-match-patch';\n\nconst diffMatchPatchInstance = new DiffMatchPatch();\n\nexport interface Patch {\n  type: 'insert' | 'delete';\n  value: string;\n  offset: number;\n}\n\nexport function diffsToPatchs(oldValue: string, newValue: string) {\n  const result: Patch[] = [];\n\n  const patches = diffMatchPatchInstance.patch_make(oldValue, newValue);\n\n  Object.keys(patches).forEach((i: any) => {\n    const patch = patches[i] as patch_obj;\n    let offset = patch.start1!;\n\n    patch.diffs.forEach(([type, value]) => {\n      switch (type) {\n        case DIFF_DELETE:\n          result.push({\n            type: 'delete',\n            value,\n            offset,\n          });\n          break;\n        case DIFF_INSERT:\n          result.push({\n            type: 'insert',\n            value,\n            offset,\n          });\n          offset += value.length;\n          break;\n        case DIFF_EQUAL:\n          offset += value.length;\n          break;\n        default: throw Error(`Unsupported operation type: ${type}`);\n      }\n    });\n  });\n\n  return result;\n}\n"],"file":"diffMatch.js"}