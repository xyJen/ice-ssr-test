import { PLAIN_TEXT, SYNTAX_PREFIX, REG_BR_TAG } from "./constants";
/**
 * @description 获取代码块语言类型
 * @param {Element} codeBlockDom - 粘贴的代码块节点元素
 * */

export function getSyntax(codeBlockDom) {
  if (!codeBlockDom) {
    return PLAIN_TEXT;
  }

  if (!codeBlockDom.className.includes(SYNTAX_PREFIX)) {
    codeBlockDom = codeBlockDom.getElementsByTagName('code')[0];

    if (!codeBlockDom) {
      return PLAIN_TEXT;
    }
  } // @ts-ignore


  var classList = Array.apply(null, codeBlockDom.classList);
  var syntaxClass = classList.find(function (clsname) {
    return clsname.includes(SYNTAX_PREFIX);
  });
  return syntaxClass ? syntaxClass.slice(SYNTAX_PREFIX.length) : PLAIN_TEXT;
}
/**
 * @description 获取代码块节点元素的内容
 * */

export var getTextContent = function getTextContent(codeBlock) {
  var testDom = document.createElement('div');
  testDom.innerHTML = codeBlock.innerHTML.replace(REG_BR_TAG, '\n');
  return testDom.textContent || '';
};
//# sourceMappingURL=utils.js.map