{"version":3,"sources":["../../../../src/mo/serializer/markdownToHTML.ts"],"names":["rule","ruleName","rewrite","name","createRenderer","md","defaultRule","renderer","rules","fence","defaultOutput","matches","match","_","classNames","code","replace"],"mappings":"AAEA,IAAMA,IAAwB,GAAG;AAC/BC,EAAAA,QAAQ,EAAE,MADqB;AAE/BC,EAAAA,OAAO,EAAE,CAAC;AACRC,IAAAA,IAAI,EAAE,OADE;AAERC,IAAAA,cAAc,EAAE,wBAACC,EAAD,EAAQ;AACtB,UAAMC,WAAW,GAAGD,EAAE,CAACE,QAAH,CAAYC,KAAZ,CAAkBC,KAAtC;AACA,aAAO,YAAa;AAClB,YAAI,CAACH,WAAL,EAAkB;AAChB,iBAAO,EAAP;AACD;;AACD,YAAMI,aAAa,GAAGJ,WAAW,MAAX,mBAAtB;AACA,YAAMK,OAAO,GAAGD,aAAa,CAACE,KAAd,CAAoB,uDAApB,CAAhB;;AACA,YAAI,CAACD,OAAL,EAAc;AACZ,iBAAOD,aAAP;AACD;;AARiB,YAUXG,CAVW,GAUYF,OAVZ;AAAA,YAURG,UAVQ,GAUYH,OAVZ;AAAA,YAUII,IAVJ,GAUYJ,OAVZ;AAWlB,+BAAoBG,UAAU,IAAI,EAAlC,UAAwCC,IAAI,CAACC,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAxC;AACD,OAZD;AAaD;AAjBO,GAAD;AAFsB,CAAjC;AAuBA,eAAehB,IAAf","sourcesContent":["import type { MarkdownToHTMLRule } from '@ali/4ever-cangjie';\n\nconst rule: MarkdownToHTMLRule = {\n  ruleName: 'code',\n  rewrite: [{\n    name: 'fence',\n    createRenderer: (md) => {\n      const defaultRule = md.renderer.rules.fence;\n      return (...args) => {\n        if (!defaultRule) {\n          return '';\n        }\n        const defaultOutput = defaultRule(...args);\n        const matches = defaultOutput.match(/^<pre><code( class=\".+\")?>([\\s\\S]*)<\\/code><\\/pre>\\n$/);\n        if (!matches) {\n          return defaultOutput;\n        }\n\n        const [_, classNames, code] = matches;\n        return `<pre><code${classNames || ''}>${code.replace(/\\n$/, '')}</code></pre>\\n`;\n      }\n    }\n  }]\n};\n\nexport default rule;\n"],"file":"markdownToHTML.js"}