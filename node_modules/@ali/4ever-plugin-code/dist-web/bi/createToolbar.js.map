{"version":3,"sources":["../../../src/bi/createToolbar.ts"],"names":["ToolbarButton","LanguageSelect","ThemeSelect","ToolbarLineWrap","ToolbarMore","createToolbar","config","buttons","button","syntax","theme","wrap","more","locale","getTarget","controller","value","selection","document","isCollapsed","block","getClosestBlock","focus","key","type","undefined"],"mappings":"AACA,OAAOA,aAAP;AACA,OAAOC,cAAP;AACA,OAAOC,WAAP;AAEA,OAAOC,eAAP;AACA,OAAOC,WAAP;AAEA,eAAe,SAASC,aAAT,CAAuBC,MAAvB,EAAiD;AAC9D,SAAO;AACLC,IAAAA,OAAO,EAAE;AACP,iBAASP,aADF;AAEPQ,MAAAA,MAAM,EAAER,aAFD;AAGPS,MAAAA,MAAM,EAAER,cAHD;AAIPS,MAAAA,KAAK,EAAER,WAJA;AAKPS,MAAAA,IAAI,EAAER,eALC;AAMPS,MAAAA,IAAI,EAAER;AANC,KADJ;AASLS,IAAAA,MAAM,EAAEP,MAAM,CAACO,MATV;AAULC,IAAAA,SAAS,EAAE,mBAACC,UAAD,EAA4B;AAAA,8BACLA,UAAU,CAACC,KADN;AAAA,UAC7BC,SAD6B,qBAC7BA,SAD6B;AAAA,UAClBC,QADkB,qBAClBA,QADkB;;AAErC,UAAID,SAAS,IACRA,SAAS,CAACE,WADf,EAC4B;AAC1B,YAAMC,KAAK,GAAGF,QAAQ,CAACG,eAAT,CAAyBJ,SAAS,CAACK,KAAV,CAAgBC,GAAzC,CAAd;;AACA,YAAI,CAAAH,KAAK,QAAL,YAAAA,KAAK,CAAEI,IAAP,MAAgB,MAApB,EAA4B;AAC1B,iBAAO,MAAP;AACD;AACF;;AACD,aAAOC,SAAP;AACD;AApBI,GAAP;AAsBD","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport ToolbarButton from './components/ToolbarButton';\nimport LanguageSelect from './components/ToolbarLanguageSelect';\nimport ThemeSelect from './components/ToolbarThemeSelect';\nimport { CodePluginConfig } from './types';\nimport ToolbarLineWrap from './components/ToolbarLineWrap';\nimport ToolbarMore from './components/ToolbarMore';\n\nexport default function createToolbar(config: CodePluginConfig) {\n  return {\n    buttons: {\n      default: ToolbarButton,\n      button: ToolbarButton,\n      syntax: LanguageSelect,\n      theme: ThemeSelect,\n      wrap: ToolbarLineWrap,\n      more: ToolbarMore,\n    },\n    locale: config.locale,\n    getTarget: (controller: Controller) => {\n      const { selection, document } = controller.value;\n      if (selection\n        && selection.isCollapsed) {\n        const block = document.getClosestBlock(selection.focus.key);\n        if (block?.type === 'code') {\n          return 'code';\n        }\n      }\n      return undefined;\n    },\n  };\n}\n"],"file":"createToolbar.js"}