{"version":3,"sources":["../../../../src/bi/components/Menu.tsx"],"names":["React","MenuItem","InlineMenuItem","insertCode","transformCode","CODE_INSERT_HOT_KEY_TIP","CodeRole","CODE_MENU_STYLE","whiteSpace","WithCodeMenu","Component","CodeMenu","props","menuItem","controller","action","title","extra","rest","value","handleClick","run","isDisabled","useMemo","query","undefined","code","menu","inlineMenu"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAASC,QAAT,EAAmBC,cAAnB,QAAyC,gBAAzC;AAEA,SAASC,UAAT,EAAqBC,aAArB;AACA;AACA,SAASC,uBAAT;AACA,SAASC,QAAT;AAEA,IAAMC,eAAoC,GAAG;AAAEC,EAAAA,UAAU,EAAE;AAAd,CAA7C;;AAEA,SAASC,YAAT,CAAsBC,SAAtB,EAAgD;AAC9C,SAAO,SAASC,QAAT,CAAkBC,KAAlB,EAA6C;AAAA,QAC1CC,QAD0C,GACjBD,KADiB,CAC1CC,QAD0C;AAAA,QAChCC,UADgC,GACjBF,KADiB,CAChCE,UADgC;;AAAA,QAE1CC,MAF0C,GAERF,QAFQ,CAE1CE,MAF0C;AAAA,QAElCC,KAFkC,GAERH,QAFQ,CAElCG,KAFkC;AAAA,QAE3BC,KAF2B,GAERJ,QAFQ,CAE3BI,KAF2B;AAAA,QAEjBC,IAFiB,iCAERL,QAFQ;;AAAA,QAG1CM,KAH0C,GAGhCL,UAHgC,CAG1CK,KAH0C;;AAKlD,QAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB,UAAIL,MAAM,IAAIA,MAAM,KAAK,QAAzB,EAAmC;AACjC,eAAOD,UAAU,CAACO,GAAX,CAAe,UAAf,EAA2BjB,aAAa,EAAxC,CAAP;AACD;;AACDU,MAAAA,UAAU,CAACO,GAAX,CAAe,UAAf,EAA2BlB,UAAU,EAArC;AACD,KALD;;AAOA,QAAMmB,UAAU,GAAGtB,KAAK,CAACuB,OAAN,CACjB;AAAA,aAAMT,UAAU,CAACU,KAAX,CAAiB,uBAAjB,KAA6CV,UAAU,CAACU,KAAX,CAAiB,6BAAjB,CAAnD;AAAA,KADiB,EAEjB,CAACL,KAAD,CAFiB,CAAnB;AAKA,wBACE,eAAC,SAAD;AAAW,MAAA,QAAQ,EAAEG,UAArB;AAAiC,MAAA,KAAK,EAAEf,eAAxC;AAAyD,MAAA,KAAK,EAAEU,KAAK,KAAKQ,SAAV,GAAsBR,KAAtB,GAA8BZ;AAA9F,OAA2Ha,IAA3H;AAAiI,MAAA,OAAO,EAAEE,WAA1I;AAAwJ,MAAA,IAAI,EAAEd,QAAQ,CAACoB;AAAvK,QACGV,KAAK,IAAI,EADZ,CADF;AAKD,GAtBD;AAuBD;;AAED,OAAO,IAAMW,IAAI,GAAGlB,YAAY,CAACR,QAAD,CAAzB;AAEP,OAAO,IAAM2B,UAAU,GAAGnB,YAAY,CAACP,cAAD,CAA/B","sourcesContent":["import * as React from 'react';\nimport { MenuItem, InlineMenuItem } from '@ali/we-design';\nimport { MenuItemInnerProps } from '@ali/4ever-component';\nimport { insertCode, transformCode } from '../actions';\n;\nimport { CODE_INSERT_HOT_KEY_TIP } from '../utils/hotKeyTips';\nimport { CodeRole } from '../../utils/role';\n\nconst CODE_MENU_STYLE: React.CSSProperties = { whiteSpace: 'nowrap' };\n\nfunction WithCodeMenu(Component: React.FC<any>) {\n  return function CodeMenu(props: MenuItemInnerProps) {\n    const { menuItem, controller } = props;\n    const { action, title, extra, ...rest } = menuItem;\n    const { value } = controller;\n\n    const handleClick = () => {\n      if (action && action === 'format') {\n        return controller.run('onAction', transformCode());\n      }\n      controller.run('onAction', insertCode());\n    };\n\n    const isDisabled = React.useMemo(\n      () => controller.query('isSelectionInLinkCard') || controller.query('isSelectionInSubjectHeading'),\n      [value],\n    );\n\n    return (\n      <Component disabled={isDisabled} style={CODE_MENU_STYLE} extra={extra !== undefined ? extra : CODE_INSERT_HOT_KEY_TIP} {...rest} onClick={handleClick}  role={CodeRole.code}>\n        {title || ''}\n      </Component>\n    );\n  };\n}\n\nexport const menu = WithCodeMenu(MenuItem);\n\nexport const inlineMenu = WithCodeMenu(InlineMenuItem);\n"],"file":"Menu.js"}