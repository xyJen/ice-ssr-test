{"version":3,"sources":["../../../src/utils/jsonMLAttrsToMarks.ts"],"names":["jsonMLAttrsToMarks","attrs","marks","keys","bold","caps","color","fonts","highlight","shd","italic","smallCaps","strike","dstrike","sz","szUnit","underline","vertAlign","inlineCode","spacing","kern","em","push","Bold","create","Caps","Color","Fonts","Highlight","Shd","Spacing","Kern","Italic","SmallCaps","Strike","szData","value","Sz","underlineData","Underline","Dstrike","Em","VertAlign","InlineCode"],"mappings":"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","sourcesContent":["import type { LeafRule, Mark, MarkProperties } from \"@ali/4ever-cangjie\";\nimport {\n  Bold,\n  Italic,\n  Strike,\n  Dstrike,\n  Underline,\n  Em,\n  InlineCode,\n  Highlight,\n  Color,\n  Shd,\n  Spacing,\n  Kern,\n  VertAlign,\n  Sz,\n  Fonts,\n  Caps,\n  SmallCaps,\n} from '../mo/models';\n\nexport const jsonMLAttrsToMarks: NonNullable<LeafRule['jsonMLAttrsToMarks']> = (attrs) => {\n  const marks: Array<MarkProperties | Mark> = [];\n  const keys: string[] = []\n\n  const {\n    bold,\n    caps,\n    color,\n    fonts,\n    highlight,\n    shd,\n    italic,\n    smallCaps,\n    strike,\n    dstrike,\n    sz,\n    szUnit,\n    underline,\n    vertAlign,\n    inlineCode,\n    spacing,\n    kern,\n    em,\n  } = attrs;\n\n  if ('bold' in attrs) {\n    marks.push(Bold.create(bold as unknown as boolean));\n    keys.push('bold');\n  }\n  if ('caps' in attrs) {\n    marks.push(Caps.create(caps));\n    keys.push('caps');\n  }\n  if ('color' in attrs) {\n    marks.push(Color.create(color!));\n    keys.push('color');\n  }\n  if ('fonts' in attrs) {\n    // @ts-ignore\n    marks.push(Fonts.create(fonts));\n    keys.push('fonts');\n  }\n  if ('highlight' in attrs) {\n    marks.push(Highlight.create(highlight!));\n    keys.push('highlight');\n  }\n  if ('shd' in attrs && typeof shd === 'object') {\n    marks.push(Shd.create(shd));\n    keys.push('shd');\n  }\n  if ('spacing' in attrs) {\n    marks.push(Spacing.create(spacing as unknown as number));\n    keys.push('spacing');\n  }\n  if ('kern' in attrs) {\n    marks.push(Kern.create(kern as unknown as number));\n    keys.push('kern');\n  }\n  if ('italic' in attrs && italic) {\n    marks.push(Italic.create());\n    keys.push('italic');\n  }\n  if ('smallCaps' in attrs) {\n    marks.push(SmallCaps.create());\n    keys.push('smallCaps');\n  }\n  if ('strike' in attrs && strike) {\n    marks.push(Strike.create());\n    keys.push('strike');\n  }\n  if ('sz' in attrs) {\n    const szData: Record<string, any> = {\n      value: sz,\n    };\n    if ('szUnit' in attrs) {\n      szData.szUnit = szUnit;\n    }\n    // @ts-ignore\n    marks.push(Sz.create(szData));\n    keys.push('sz', 'szUnit');\n  }\n  if ('underline' in attrs) {\n    // 兼容：老数据 string 类型，导入 word 数据为 object\n    const underlineData =\n      typeof underline === 'string'\n        ? {\n            value: underline,\n          }\n        : underline;\n    // @ts-ignore\n    marks.push(Underline.create(underlineData.value, underlineData.color));\n    keys.push('underline');\n  }\n  if ('dstrike' in attrs) {\n    if (typeof dstrike === 'object') {\n      // 兼容存量导入数据 dstrike: { value: true/false }\n      // @ts-ignore\n      marks.push(Dstrike.create(dstrike.value));\n    } else {\n      // @ts-ignore\n      marks.push(Dstrike.create(dstrike));\n    }\n    keys.push('dstrike');\n  }\n  if ('em' in attrs && em) {\n    marks.push(Em.create(em));\n    keys.push('em');\n  }\n  if ('vertAlign' in attrs) {\n    // @ts-ignore\n    marks.push(VertAlign.create(vertAlign));\n    keys.push('vertAlign');\n  }\n  if ('inlineCode' in attrs) {\n    marks.push(InlineCode.create());\n    keys.push('inlineCode');\n  }\n\n  return {\n    marks,\n    keys,\n  }\n};\n"],"file":"jsonMLAttrsToMarks.js"}