{"version":3,"sources":["../../../../../src/utils/createMarkFactory/components/createMobileButton.tsx"],"names":["createMarkMobileButton","type","icon","buttonType","MobileButton","props","controller","Wrapper","item","isDisabled","isActive","query","handleClick","React","useCallback","run","focusAttr","useMemo","isFocused"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;uBAF4B,a;;AAKrB,SAASA,sBAAT,CACLC,IADK,EAELC,IAFK,EAGLC,UAHK,EAIL;AACA,SAAO,SAASC,YAAT,CAAsBC,KAAtB,EAAuD;AAC5D,UAAM;AAAEC,MAAAA,UAAF;AAAcC,MAAAA,OAAd;AAAuBC,MAAAA;AAAvB,QAAgCH,KAAtC;AACA,UAAMI,UAAU,GAAG,CAAC,4BAAcH,UAAd,CAApB;AAEA,UAAMI,QAAQ,GAAGJ,UAAU,CAACK,KAAX,CAAkB,KAAI,wBAAWV,IAAX,CAAiB,EAAvC,CAAjB;AACA,UAAMW,WAAW,GAAGC,KAAK,CAACC,WAAN,CAClB,MAAMR,UAAU,CAACS,GAAX,CAAe,UAAf,EAA2B,yBAAWd,IAAX,CAA3B,CADY,EAElB,CAACK,UAAD,CAFkB,CAApB;AAIA,UAAMU,SAAS,GAAGH,KAAK,CAACI,OAAN,CAAc,MAAM;AACpC,UAAI,CAACP,QAAL,EAAe;AACb,eAAO,EAAP;AACD;;AACD,aAAOP,UAAU,KAAK,KAAf,GAAuB;AAAEe,QAAAA,SAAS,EAAE;AAAb,OAAvB,GAA6C;AAAER,QAAAA,QAAQ,EAAE;AAAZ,OAApD;AACD,KALiB,EAKf,CAACA,QAAD,CALe,CAAlB;AAOA,wBACE,eAAC,OAAD,6BACMM,SADN;AAEE,MAAA,IAAI,EAAER,IAFR;AAGE,MAAA,IAAI,EAAEL,UAHR;AAIE,MAAA,IAAI,EAAED,IAJR;AAKE,MAAA,UAAU,EAAEO,UALd;AAME,MAAA,OAAO,EAAEG;AANX,OADF;AAUD,GA1BD;AA2BD","sourcesContent":["import * as React from 'react';\nimport { capitalize } from 'lodash-es';\nimport canToggleMark from '../queries/canToggleMark';\nimport { toggleMark } from '../actions';\nimport type { MobileToolbarButtonProps } from '@ali/4ever-component';\n\nexport function createMarkMobileButton(\n  type,\n  icon: string,\n  buttonType: 'big' | 'horiz',\n) {\n  return function MobileButton(props: MobileToolbarButtonProps) {\n    const { controller, Wrapper, item } = props;\n    const isDisabled = !canToggleMark(controller);\n\n    const isActive = controller.query(`is${capitalize(type)}`);\n    const handleClick = React.useCallback(\n      () => controller.run('onAction', toggleMark(type)),\n      [controller],\n    );\n    const focusAttr = React.useMemo(() => {\n      if (!isActive) {\n        return {};\n      }\n      return buttonType === 'big' ? { isFocused: true } : { isActive: true };\n    }, [isActive]);\n\n    return (\n      <Wrapper\n        {...focusAttr}\n        item={item}\n        type={buttonType}\n        icon={icon}\n        isDisabled={isDisabled}\n        onClick={handleClick}\n      />\n    );\n  };\n}\n"],"file":"createMobileButton.js"}