{"version":3,"sources":["../../../../../src/utils/createMarkFactory/components/createMarkButton.tsx"],"names":["MOD","environment","IS_MAC","createMarkButton","type","hotKey","Button","markdown","tip","split","slice","map","capitalize","join","MarkButton","props","controller","locale","rest","isDisabled","isActive","query","handleClick","React","useCallback","run","buttonTitle","undefined","createMarkMobileButton","Icon","MobileButton","Wrapper","item"],"mappings":";;;;;;;;;;;;;;AAAA;;AACA;;AAEA;;AACA;;AACA;;AACA;;uBAL4B,a;AAQ5B,MAAMA,GAAG,GAAGC,yBAAYC,MAAZ,GAAqB,GAArB,GAA2B,MAAvC;;AAOe,SAASC,gBAAT,CAA0BC,IAA1B,EAAgCC,MAAhC,EAAwCC,MAAxC,EAA+EC,QAA/E,EAAkG;AAC/G,MAAIC,GAAG,GAAG,EAAV;;AACA,MAAIH,MAAJ,EAAY;AACVG,IAAAA,GAAG,GAAI,IAAGR,GAAI,IAAGK,MAAM,CAACI,KAAP,CAAa,GAAb,EAAkBC,KAAlB,CAAwB,CAAxB,EAA2BC,GAA3B,CAA+BC,kBAA/B,EAA2CC,IAA3C,CAAgD,GAAhD,CAAqD,EAAtE;AACD;;AAED,SAAO,SAASC,UAAT,CAAoBC,KAApB,EAA4C;AACjD,UAAM;AAAEC,MAAAA,UAAF;AAAcC,MAAAA,MAAd;AAAsB,SAAGC;AAAzB,QAAkCH,KAAxC;AACA,UAAMI,UAAU,GAAG,CAAC,4BAAcH,UAAd,CAApB;AAEA,UAAMI,QAAQ,GAAGJ,UAAU,CAACK,KAAX,CAAkB,KAAI,wBAAWjB,IAAX,CAAiB,EAAvC,CAAjB;AACA,UAAMkB,WAAW,GAAGC,KAAK,CAACC,WAAN,CAAkB,MAAMR,UAAU,CAACS,GAAX,CAAe,UAAf,EAA2B,yBAAWrB,IAAX,CAA3B,CAAxB,EAAsE,CAACY,UAAD,EAAaZ,IAAb,CAAtE,CAApB;AAEA,wBACE,eAAC,MAAD,6BACMc,IADN;AAEE,MAAA,OAAO,EAAEI,WAFX;AAGE,MAAA,MAAM,EAAEF,QAHV;AAIE,MAAA,QAAQ,EAAED,UAJZ;AAKE,MAAA,MAAM,EAAG,cAAaf,IAAK,EAL7B;AAME,MAAA,YAAY,EAAEI,GANhB;AAOE,MAAA,OAAO,EACLD,QAAQ,gBAAG,eAAC,iCAAD;AAAoB,QAAA,KAAK,EAAEU,MAAM,EAAES,WAAnC;AAAgD,QAAA,QAAQ,EAAElB,GAA1D;AAA+D,QAAA,WAAW,EAAED,QAAQ,GAAI,aAAYA,QAAS,EAAzB,GAA6B;AAAjH,QAAH,GAA4HoB,SARxI;AAUE,MAAA,IAAI,EAAEvB;AAVR,OADF;AAcD,GArBD;AAsBD;;AAEM,SAASwB,sBAAT,CAAgCxB,IAAhC,EAAsCyB,IAAtC,EAAiE;AAAA,0BAgBhE,eAAC,IAAD,OAhBgE;;AACtE,SAAO,SAASC,YAAT,CAAsBf,KAAtB,EAAuD;AAC5D,UAAM;AAAEC,MAAAA,UAAF;AAAce,MAAAA,OAAd;AAAuBC,MAAAA;AAAvB,QAAgCjB,KAAtC;AACA,UAAMI,UAAU,GAAG,CAAC,4BAAcH,UAAd,CAApB;AAEA,UAAMI,QAAQ,GAAGJ,UAAU,CAACK,KAAX,CAAkB,KAAI,wBAAWjB,IAAX,CAAiB,EAAvC,CAAjB;AACA,UAAMkB,WAAW,GAAGC,KAAK,CAACC,WAAN,CAAkB,MAAMR,UAAU,CAACS,GAAX,CAAe,UAAf,EAA2B,yBAAWrB,IAAX,CAA3B,CAAxB,EAAsE,CAACY,UAAD,EAAaZ,IAAb,CAAtE,CAApB;AAEA,wBACE,eAAC,OAAD;AACE,MAAA,IAAI,EAAE4B,IADR;AAEE,MAAA,IAAI,EAAE,OAFR;AAGE,MAAA,QAAQ,EAAEZ,QAHZ;AAIE,MAAA,UAAU,EAAED,UAJd;AAKE,MAAA,OAAO,EAAEG;AALX,YADF;AAWD,GAlBD;AAmBD","sourcesContent":["import * as React from 'react';\nimport { capitalize } from 'lodash-es';\nimport { IconButtonPropsOmit } from '@ali/we-toolbar';\nimport { Controller, environment } from '@ali/4ever-cangjie';\nimport { IconButtonShortcut } from '@ali/4ever-component';\nimport canToggleMark from '../queries/canToggleMark';\nimport { toggleMark } from '../actions';\nimport type { MobileToolbarButtonProps } from '@ali/4ever-component';\n\nconst MOD = environment.IS_MAC ? 'âŒ˜' : 'Ctrl';\n\nexport interface MarkButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n}\n\nexport default function createMarkButton(type, hotKey, Button: React.FC<IconButtonPropsOmit>, markdown?: string) {\n  let tip = '';\n  if (hotKey) {\n    tip = ` ${MOD}+${hotKey.split('+').slice(1).map(capitalize).join('+')}`;\n  }\n\n  return function MarkButton(props: MarkButtonProps) {\n    const { controller, locale, ...rest } = props;\n    const isDisabled = !canToggleMark(controller);\n\n    const isActive = controller.query(`is${capitalize(type)}`);\n    const handleClick = React.useCallback(() => controller.run('onAction', toggleMark(type)), [controller, type]);\n\n    return (\n      <Button\n        {...rest}\n        onClick={handleClick}\n        active={isActive}\n        disabled={isDisabled}\n        testid={`bi-toolbar-${type}`}\n        shortcutText={tip}\n        tooltip={\n          markdown ? <IconButtonShortcut title={locale?.buttonTitle} shortcut={tip} description={markdown ? `Markdown: ${markdown}` : ''}/> : undefined\n        }\n        role={type}\n      />\n    );\n  };\n}\n\nexport function createMarkMobileButton(type, Icon: React.ComponentType) {\n  return function MobileButton(props: MobileToolbarButtonProps) {\n    const { controller, Wrapper, item } = props;\n    const isDisabled = !canToggleMark(controller);\n\n    const isActive = controller.query(`is${capitalize(type)}`);\n    const handleClick = React.useCallback(() => controller.run('onAction', toggleMark(type)), [controller, type]);\n\n    return (\n      <Wrapper\n        item={item}\n        type={'horiz'}\n        isActive={isActive}\n        isDisabled={isDisabled}\n        onClick={handleClick}\n      >\n        <Icon />\n      </Wrapper>\n    );\n  };\n}\n"],"file":"createMarkButton.js"}