"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createIsQuery;

var _everPluginHeading = require("@ali/4ever-plugin-heading");

var _models = require("../../../mo/models");

function emptyBoldMarkHandler(controller, text) {
  const {
    document,
    startBlock
  } = controller.value;
  const block = text ? document.getClosestBlock(text.key) : startBlock;

  if (_everPluginHeading.Heading.isHeading(block)) {
    return [_models.Bold.create()];
  }

  return [];
}

function createIsQuery(type) {
  return function isMark(controller) {
    let activeMark;

    if (type === _models.Bold.TYPE) {
      activeMark = controller.query('getActiveMark', type, emptyBoldMarkHandler);
    } else {
      activeMark = controller.query('getActiveMark', type);
    }

    if (!activeMark) return false;
    return activeMark.data?.value !== false;
  };
}
//# sourceMappingURL=createIsQuery.js.map