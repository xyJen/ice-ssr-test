{"version":3,"sources":["../../../../../src/utils/createMarkFactory/queries/createIsQuery.ts"],"names":["emptyBoldMarkHandler","controller","text","document","startBlock","value","block","getClosestBlock","key","Heading","isHeading","Bold","create","createIsQuery","type","isMark","activeMark","TYPE","query","data"],"mappings":";;;;;;;AACA;;AACA;;AAEA,SAASA,oBAAT,CAA8BC,UAA9B,EAAsDC,IAAtD,EAAmE;AACjE,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAA2BH,UAAU,CAACI,KAA5C;AACA,QAAMC,KAAK,GAAGJ,IAAI,GAAGC,QAAQ,CAACI,eAAT,CAAyBL,IAAI,CAACM,GAA9B,CAAH,GAAwCJ,UAA1D;;AAEA,MAAIK,2BAAQC,SAAR,CAAkBJ,KAAlB,CAAJ,EAA8B;AAC5B,WAAO,CAACK,aAAKC,MAAL,EAAD,CAAP;AACD;;AAED,SAAO,EAAP;AACD;;AAEc,SAASC,aAAT,CAAuBC,IAAvB,EAA6B;AAC1C,SAAO,SAASC,MAAT,CAAgBd,UAAhB,EAAwC;AAC7C,QAAIe,UAAJ;;AACA,QAAIF,IAAI,KAAKH,aAAKM,IAAlB,EAAwB;AACtBD,MAAAA,UAAU,GAAGf,UAAU,CAACiB,KAAX,CAAiB,eAAjB,EAAkCJ,IAAlC,EAAwCd,oBAAxC,CAAb;AACD,KAFD,MAEO;AACLgB,MAAAA,UAAU,GAAGf,UAAU,CAACiB,KAAX,CAAiB,eAAjB,EAAkCJ,IAAlC,CAAb;AACD;;AACD,QAAI,CAACE,UAAL,EAAiB,OAAO,KAAP;AAEjB,WAAOA,UAAU,CAACG,IAAX,EAAiBd,KAAjB,KAA2B,KAAlC;AACD,GAVD;AAWD","sourcesContent":["import { Controller, Text, Mark } from '@ali/4ever-cangjie';\nimport { Heading } from '@ali/4ever-plugin-heading';\nimport { Bold } from '../../../mo/models';\n\nfunction emptyBoldMarkHandler(controller: Controller, text?: Text) {\n  const { document, startBlock } = controller.value;\n  const block = text ? document.getClosestBlock(text.key) : startBlock;\n\n  if (Heading.isHeading(block)) {\n    return [Bold.create()];\n  }\n\n  return [];\n}\n\nexport default function createIsQuery(type) {\n  return function isMark(controller: Controller) {\n    let activeMark: Mark | undefined | null;\n    if (type === Bold.TYPE) {\n      activeMark = controller.query('getActiveMark', type, emptyBoldMarkHandler);\n    } else {\n      activeMark = controller.query('getActiveMark', type);\n    }\n    if (!activeMark) return false;\n\n    return activeMark.data?.value !== false;\n  };\n}\n"],"file":"createIsQuery.js"}