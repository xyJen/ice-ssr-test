"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = toggleRangesMark;

var _everCangjie = require("@ali/4ever-cangjie");

var _everUtils = require("@ali/4ever-utils");

var _models = require("../../mo/models");

var _removeRangesBoldMark = _interopRequireDefault(require("./removeRangesBoldMark"));

function toggleRangesMark(controller, mark) {
  const createdMark = _everCangjie.Mark.create(mark);

  const caplitalizedType = `${createdMark.type[0].toUpperCase()}${createdMark.type.slice(1)}`;
  const isRangesAlreadyHasMark = controller.query(`is${caplitalizedType}`);

  if (isRangesAlreadyHasMark) {
    if (createdMark.type === _models.Bold.TYPE) {
      return (0, _removeRangesBoldMark.default)(controller);
    }

    return (0, _everUtils.removeMarkAtCurrentRange)(controller, createdMark.type);
  }

  if (createdMark.type === _models.Strike.TYPE) {
    // 删除线 与 双删除线不可共存
    (0, _everUtils.removeMarkAtCurrentRange)(controller, _models.Dstrike.TYPE);
  }

  return (0, _everUtils.addMarkAtCurrentRange)(controller, createdMark);
}
//# sourceMappingURL=toggleRangesMark.js.map