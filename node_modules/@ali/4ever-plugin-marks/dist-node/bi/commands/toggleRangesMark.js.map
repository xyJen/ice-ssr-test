{"version":3,"sources":["../../../../src/bi/commands/toggleRangesMark.ts"],"names":["toggleRangesMark","controller","mark","createdMark","Mark","create","caplitalizedType","type","toUpperCase","slice","isRangesAlreadyHasMark","query","Bold","TYPE","Strike","Dstrike"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEe,SAASA,gBAAT,CAA0BC,UAA1B,EAAkDC,IAAlD,EAAwD;AACrE,QAAMC,WAAW,GAAGC,kBAAKC,MAAL,CAAYH,IAAZ,CAApB;;AACA,QAAMI,gBAAgB,GAAI,GAAEH,WAAW,CAACI,IAAZ,CAAiB,CAAjB,EAAoBC,WAApB,EAAkC,GAAEL,WAAW,CAACI,IAAZ,CAAiBE,KAAjB,CAAuB,CAAvB,CAA0B,EAA1F;AAEA,QAAMC,sBAAsB,GAAGT,UAAU,CAACU,KAAX,CAAkB,KAAIL,gBAAiB,EAAvC,CAA/B;;AAEA,MAAII,sBAAJ,EAA4B;AAC1B,QAAIP,WAAW,CAACI,IAAZ,KAAqBK,aAAKC,IAA9B,EAAoC;AAClC,aAAO,mCAAqBZ,UAArB,CAAP;AACD;;AACD,WAAO,yCAAyBA,UAAzB,EAAqCE,WAAW,CAACI,IAAjD,CAAP;AACD;;AAED,MAAIJ,WAAW,CAACI,IAAZ,KAAqBO,eAAOD,IAAhC,EAAsC;AACpC;AACA,6CAAyBZ,UAAzB,EAAqCc,gBAAQF,IAA7C;AACD;;AAED,SAAO,sCAAsBZ,UAAtB,EAAkCE,WAAlC,CAAP;AACD","sourcesContent":["import { Mark, Controller } from '@ali/4ever-cangjie';\nimport { addMarkAtCurrentRange, removeMarkAtCurrentRange }  from '@ali/4ever-utils';\nimport { Bold, Dstrike, Strike } from '../../mo/models';\nimport removeRangesBoldMark from './removeRangesBoldMark';\n\nexport default function toggleRangesMark(controller: Controller, mark) {\n  const createdMark = Mark.create(mark);\n  const caplitalizedType = `${createdMark.type[0].toUpperCase()}${createdMark.type.slice(1)}`;\n\n  const isRangesAlreadyHasMark = controller.query(`is${caplitalizedType}`);\n\n  if (isRangesAlreadyHasMark) {\n    if (createdMark.type === Bold.TYPE) {\n      return removeRangesBoldMark(controller);\n    }\n    return removeMarkAtCurrentRange(controller, createdMark.type);\n  }\n\n  if (createdMark.type === Strike.TYPE) {\n    // 删除线 与 双删除线不可共存\n    removeMarkAtCurrentRange(controller, Dstrike.TYPE);\n  }\n\n  return addMarkAtCurrentRange(controller, createdMark);\n}\n"],"file":"toggleRangesMark.js"}