{"version":3,"sources":["../../../../src/bi/commands/toggleRangesMark.ts"],"names":["Mark","addMarkAtCurrentRange","removeMarkAtCurrentRange","Bold","Dstrike","Strike","removeRangesBoldMark","toggleRangesMark","controller","mark","createdMark","create","caplitalizedType","type","toUpperCase","slice","isRangesAlreadyHasMark","query","TYPE"],"mappings":"AAAA,SAASA,IAAT,QAAiC,oBAAjC;AACA,SAASC,qBAAT,EAAgCC,wBAAhC,QAAiE,kBAAjE;AACA,SAASC,IAAT,EAAeC,OAAf,EAAwBC,MAAxB;AACA,OAAOC,oBAAP;AAEA,eAAe,SAASC,gBAAT,CAA0BC,UAA1B,EAAkDC,IAAlD,EAAwD;AACrE,MAAMC,WAAW,GAAGV,IAAI,CAACW,MAAL,CAAYF,IAAZ,CAApB;AACA,MAAMG,gBAAgB,QAAMF,WAAW,CAACG,IAAZ,CAAiB,CAAjB,EAAoBC,WAApB,EAAN,GAA0CJ,WAAW,CAACG,IAAZ,CAAiBE,KAAjB,CAAuB,CAAvB,CAAhE;AAEA,MAAMC,sBAAsB,GAAGR,UAAU,CAACS,KAAX,QAAsBL,gBAAtB,CAA/B;;AAEA,MAAII,sBAAJ,EAA4B;AAC1B,QAAIN,WAAW,CAACG,IAAZ,KAAqBV,IAAI,CAACe,IAA9B,EAAoC;AAClC,aAAOZ,oBAAoB,CAACE,UAAD,CAA3B;AACD;;AACD,WAAON,wBAAwB,CAACM,UAAD,EAAaE,WAAW,CAACG,IAAzB,CAA/B;AACD;;AAED,MAAIH,WAAW,CAACG,IAAZ,KAAqBR,MAAM,CAACa,IAAhC,EAAsC;AACpC;AACAhB,IAAAA,wBAAwB,CAACM,UAAD,EAAaJ,OAAO,CAACc,IAArB,CAAxB;AACD;;AAED,SAAOjB,qBAAqB,CAACO,UAAD,EAAaE,WAAb,CAA5B;AACD","sourcesContent":["import { Mark, Controller } from '@ali/4ever-cangjie';\nimport { addMarkAtCurrentRange, removeMarkAtCurrentRange }  from '@ali/4ever-utils';\nimport { Bold, Dstrike, Strike } from '../../mo/models';\nimport removeRangesBoldMark from './removeRangesBoldMark';\n\nexport default function toggleRangesMark(controller: Controller, mark) {\n  const createdMark = Mark.create(mark);\n  const caplitalizedType = `${createdMark.type[0].toUpperCase()}${createdMark.type.slice(1)}`;\n\n  const isRangesAlreadyHasMark = controller.query(`is${caplitalizedType}`);\n\n  if (isRangesAlreadyHasMark) {\n    if (createdMark.type === Bold.TYPE) {\n      return removeRangesBoldMark(controller);\n    }\n    return removeMarkAtCurrentRange(controller, createdMark.type);\n  }\n\n  if (createdMark.type === Strike.TYPE) {\n    // 删除线 与 双删除线不可共存\n    removeMarkAtCurrentRange(controller, Dstrike.TYPE);\n  }\n\n  return addMarkAtCurrentRange(controller, createdMark);\n}\n"],"file":"toggleRangesMark.js"}