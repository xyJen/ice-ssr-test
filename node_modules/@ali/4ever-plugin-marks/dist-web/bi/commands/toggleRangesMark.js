import { Mark } from '@ali/4ever-cangjie';
import { addMarkAtCurrentRange, removeMarkAtCurrentRange } from '@ali/4ever-utils';
import { Bold, Dstrike, Strike } from "../../mo/models";
import removeRangesBoldMark from "./removeRangesBoldMark";
export default function toggleRangesMark(controller, mark) {
  var createdMark = Mark.create(mark);
  var caplitalizedType = "" + createdMark.type[0].toUpperCase() + createdMark.type.slice(1);
  var isRangesAlreadyHasMark = controller.query("is" + caplitalizedType);

  if (isRangesAlreadyHasMark) {
    if (createdMark.type === Bold.TYPE) {
      return removeRangesBoldMark(controller);
    }

    return removeMarkAtCurrentRange(controller, createdMark.type);
  }

  if (createdMark.type === Strike.TYPE) {
    // 删除线 与 双删除线不可共存
    removeMarkAtCurrentRange(controller, Dstrike.TYPE);
  }

  return addMarkAtCurrentRange(controller, createdMark);
}
//# sourceMappingURL=toggleRangesMark.js.map