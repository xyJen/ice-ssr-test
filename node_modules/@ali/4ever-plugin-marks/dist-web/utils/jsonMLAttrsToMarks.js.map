{"version":3,"sources":["../../../src/utils/jsonMLAttrsToMarks.ts"],"names":["Bold","Italic","Strike","Dstrike","Underline","Em","InlineCode","Highlight","Color","Shd","Spacing","Kern","VertAlign","Sz","Fonts","Caps","SmallCaps","jsonMLAttrsToMarks","attrs","marks","keys","bold","caps","color","fonts","highlight","shd","italic","smallCaps","strike","dstrike","sz","szUnit","underline","vertAlign","inlineCode","spacing","kern","em","push","create","szData","value","underlineData"],"mappings":"AACA,SACEA,IADF,EAEEC,MAFF,EAGEC,MAHF,EAIEC,OAJF,EAKEC,SALF,EAMEC,EANF,EAOEC,UAPF,EAQEC,SARF,EASEC,KATF,EAUEC,GAVF,EAWEC,OAXF,EAYEC,IAZF,EAaEC,SAbF,EAcEC,EAdF,EAeEC,KAfF,EAgBEC,IAhBF,EAiBEC,SAjBF;AAoBA,OAAO,IAAMC,kBAA+D,GAAG,SAAlEA,kBAAkE,CAACC,KAAD,EAAW;AACxF,MAAMC,KAAmC,GAAG,EAA5C;AACA,MAAMC,IAAc,GAAG,EAAvB;AAFwF,MAKtFC,IALsF,GAuBpFH,KAvBoF,CAKtFG,IALsF;AAAA,MAMtFC,IANsF,GAuBpFJ,KAvBoF,CAMtFI,IANsF;AAAA,MAOtFC,KAPsF,GAuBpFL,KAvBoF,CAOtFK,KAPsF;AAAA,MAQtFC,KARsF,GAuBpFN,KAvBoF,CAQtFM,KARsF;AAAA,MAStFC,SATsF,GAuBpFP,KAvBoF,CAStFO,SATsF;AAAA,MAUtFC,GAVsF,GAuBpFR,KAvBoF,CAUtFQ,GAVsF;AAAA,MAWtFC,MAXsF,GAuBpFT,KAvBoF,CAWtFS,MAXsF;AAAA,MAYtFC,SAZsF,GAuBpFV,KAvBoF,CAYtFU,SAZsF;AAAA,MAatFC,MAbsF,GAuBpFX,KAvBoF,CAatFW,MAbsF;AAAA,MActFC,OAdsF,GAuBpFZ,KAvBoF,CActFY,OAdsF;AAAA,MAetFC,EAfsF,GAuBpFb,KAvBoF,CAetFa,EAfsF;AAAA,MAgBtFC,MAhBsF,GAuBpFd,KAvBoF,CAgBtFc,MAhBsF;AAAA,MAiBtFC,SAjBsF,GAuBpFf,KAvBoF,CAiBtFe,SAjBsF;AAAA,MAkBtFC,SAlBsF,GAuBpFhB,KAvBoF,CAkBtFgB,SAlBsF;AAAA,MAmBtFC,UAnBsF,GAuBpFjB,KAvBoF,CAmBtFiB,UAnBsF;AAAA,MAoBtFC,OApBsF,GAuBpFlB,KAvBoF,CAoBtFkB,OApBsF;AAAA,MAqBtFC,IArBsF,GAuBpFnB,KAvBoF,CAqBtFmB,IArBsF;AAAA,MAsBtFC,EAtBsF,GAuBpFpB,KAvBoF,CAsBtFoB,EAtBsF;;AAyBxF,MAAI,UAAUpB,KAAd,EAAqB;AACnBC,IAAAA,KAAK,CAACoB,IAAN,CAAWvC,IAAI,CAACwC,MAAL,CAAYnB,IAAZ,CAAX;AACAD,IAAAA,IAAI,CAACmB,IAAL,CAAU,MAAV;AACD;;AACD,MAAI,UAAUrB,KAAd,EAAqB;AACnBC,IAAAA,KAAK,CAACoB,IAAN,CAAWxB,IAAI,CAACyB,MAAL,CAAYlB,IAAZ,CAAX;AACAF,IAAAA,IAAI,CAACmB,IAAL,CAAU,MAAV;AACD;;AACD,MAAI,WAAWrB,KAAf,EAAsB;AACpBC,IAAAA,KAAK,CAACoB,IAAN,CAAW/B,KAAK,CAACgC,MAAN,CAAajB,KAAb,CAAX;AACAH,IAAAA,IAAI,CAACmB,IAAL,CAAU,OAAV;AACD;;AACD,MAAI,WAAWrB,KAAf,EAAsB;AACpB;AACAC,IAAAA,KAAK,CAACoB,IAAN,CAAWzB,KAAK,CAAC0B,MAAN,CAAahB,KAAb,CAAX;AACAJ,IAAAA,IAAI,CAACmB,IAAL,CAAU,OAAV;AACD;;AACD,MAAI,eAAerB,KAAnB,EAA0B;AACxBC,IAAAA,KAAK,CAACoB,IAAN,CAAWhC,SAAS,CAACiC,MAAV,CAAiBf,SAAjB,CAAX;AACAL,IAAAA,IAAI,CAACmB,IAAL,CAAU,WAAV;AACD;;AACD,MAAI,SAASrB,KAAT,IAAkB,OAAOQ,GAAP,KAAe,QAArC,EAA+C;AAC7CP,IAAAA,KAAK,CAACoB,IAAN,CAAW9B,GAAG,CAAC+B,MAAJ,CAAWd,GAAX,CAAX;AACAN,IAAAA,IAAI,CAACmB,IAAL,CAAU,KAAV;AACD;;AACD,MAAI,aAAarB,KAAjB,EAAwB;AACtBC,IAAAA,KAAK,CAACoB,IAAN,CAAW7B,OAAO,CAAC8B,MAAR,CAAeJ,OAAf,CAAX;AACAhB,IAAAA,IAAI,CAACmB,IAAL,CAAU,SAAV;AACD;;AACD,MAAI,UAAUrB,KAAd,EAAqB;AACnBC,IAAAA,KAAK,CAACoB,IAAN,CAAW5B,IAAI,CAAC6B,MAAL,CAAYH,IAAZ,CAAX;AACAjB,IAAAA,IAAI,CAACmB,IAAL,CAAU,MAAV;AACD;;AACD,MAAI,YAAYrB,KAAZ,IAAqBS,MAAzB,EAAiC;AAC/BR,IAAAA,KAAK,CAACoB,IAAN,CAAWtC,MAAM,CAACuC,MAAP,EAAX;AACApB,IAAAA,IAAI,CAACmB,IAAL,CAAU,QAAV;AACD;;AACD,MAAI,eAAerB,KAAnB,EAA0B;AACxBC,IAAAA,KAAK,CAACoB,IAAN,CAAWvB,SAAS,CAACwB,MAAV,EAAX;AACApB,IAAAA,IAAI,CAACmB,IAAL,CAAU,WAAV;AACD;;AACD,MAAI,YAAYrB,KAAZ,IAAqBW,MAAzB,EAAiC;AAC/BV,IAAAA,KAAK,CAACoB,IAAN,CAAWrC,MAAM,CAACsC,MAAP,EAAX;AACApB,IAAAA,IAAI,CAACmB,IAAL,CAAU,QAAV;AACD;;AACD,MAAI,QAAQrB,KAAZ,EAAmB;AACjB,QAAMuB,MAA2B,GAAG;AAClCC,MAAAA,KAAK,EAAEX;AAD2B,KAApC;;AAGA,QAAI,YAAYb,KAAhB,EAAuB;AACrBuB,MAAAA,MAAM,CAACT,MAAP,GAAgBA,MAAhB;AACD,KANgB,CAOjB;;;AACAb,IAAAA,KAAK,CAACoB,IAAN,CAAW1B,EAAE,CAAC2B,MAAH,CAAUC,MAAV,CAAX;AACArB,IAAAA,IAAI,CAACmB,IAAL,CAAU,IAAV,EAAgB,QAAhB;AACD;;AACD,MAAI,eAAerB,KAAnB,EAA0B;AACxB;AACA,QAAMyB,aAAa,GACjB,OAAOV,SAAP,KAAqB,QAArB,GACI;AACES,MAAAA,KAAK,EAAET;AADT,KADJ,GAIIA,SALN,CAFwB,CAQxB;;AACAd,IAAAA,KAAK,CAACoB,IAAN,CAAWnC,SAAS,CAACoC,MAAV,CAAiBG,aAAa,CAACD,KAA/B,EAAsCC,aAAa,CAACpB,KAApD,CAAX;AACAH,IAAAA,IAAI,CAACmB,IAAL,CAAU,WAAV;AACD;;AACD,MAAI,aAAarB,KAAjB,EAAwB;AACtB,QAAI,OAAOY,OAAP,KAAmB,QAAvB,EAAiC;AAC/B;AACA;AACAX,MAAAA,KAAK,CAACoB,IAAN,CAAWpC,OAAO,CAACqC,MAAR,CAAeV,OAAO,CAACY,KAAvB,CAAX;AACD,KAJD,MAIO;AACL;AACAvB,MAAAA,KAAK,CAACoB,IAAN,CAAWpC,OAAO,CAACqC,MAAR,CAAeV,OAAf,CAAX;AACD;;AACDV,IAAAA,IAAI,CAACmB,IAAL,CAAU,SAAV;AACD;;AACD,MAAI,QAAQrB,KAAR,IAAiBoB,EAArB,EAAyB;AACvBnB,IAAAA,KAAK,CAACoB,IAAN,CAAWlC,EAAE,CAACmC,MAAH,CAAUF,EAAV,CAAX;AACAlB,IAAAA,IAAI,CAACmB,IAAL,CAAU,IAAV;AACD;;AACD,MAAI,eAAerB,KAAnB,EAA0B;AACxB;AACAC,IAAAA,KAAK,CAACoB,IAAN,CAAW3B,SAAS,CAAC4B,MAAV,CAAiBN,SAAjB,CAAX;AACAd,IAAAA,IAAI,CAACmB,IAAL,CAAU,WAAV;AACD;;AACD,MAAI,gBAAgBrB,KAApB,EAA2B;AACzBC,IAAAA,KAAK,CAACoB,IAAN,CAAWjC,UAAU,CAACkC,MAAX,EAAX;AACApB,IAAAA,IAAI,CAACmB,IAAL,CAAU,YAAV;AACD;;AAED,SAAO;AACLpB,IAAAA,KAAK,EAALA,KADK;AAELC,IAAAA,IAAI,EAAJA;AAFK,GAAP;AAID,CA1HM","sourcesContent":["import type { LeafRule, Mark, MarkProperties } from \"@ali/4ever-cangjie\";\nimport {\n  Bold,\n  Italic,\n  Strike,\n  Dstrike,\n  Underline,\n  Em,\n  InlineCode,\n  Highlight,\n  Color,\n  Shd,\n  Spacing,\n  Kern,\n  VertAlign,\n  Sz,\n  Fonts,\n  Caps,\n  SmallCaps,\n} from '../mo/models';\n\nexport const jsonMLAttrsToMarks: NonNullable<LeafRule['jsonMLAttrsToMarks']> = (attrs) => {\n  const marks: Array<MarkProperties | Mark> = [];\n  const keys: string[] = []\n\n  const {\n    bold,\n    caps,\n    color,\n    fonts,\n    highlight,\n    shd,\n    italic,\n    smallCaps,\n    strike,\n    dstrike,\n    sz,\n    szUnit,\n    underline,\n    vertAlign,\n    inlineCode,\n    spacing,\n    kern,\n    em,\n  } = attrs;\n\n  if ('bold' in attrs) {\n    marks.push(Bold.create(bold as unknown as boolean));\n    keys.push('bold');\n  }\n  if ('caps' in attrs) {\n    marks.push(Caps.create(caps));\n    keys.push('caps');\n  }\n  if ('color' in attrs) {\n    marks.push(Color.create(color!));\n    keys.push('color');\n  }\n  if ('fonts' in attrs) {\n    // @ts-ignore\n    marks.push(Fonts.create(fonts));\n    keys.push('fonts');\n  }\n  if ('highlight' in attrs) {\n    marks.push(Highlight.create(highlight!));\n    keys.push('highlight');\n  }\n  if ('shd' in attrs && typeof shd === 'object') {\n    marks.push(Shd.create(shd));\n    keys.push('shd');\n  }\n  if ('spacing' in attrs) {\n    marks.push(Spacing.create(spacing as unknown as number));\n    keys.push('spacing');\n  }\n  if ('kern' in attrs) {\n    marks.push(Kern.create(kern as unknown as number));\n    keys.push('kern');\n  }\n  if ('italic' in attrs && italic) {\n    marks.push(Italic.create());\n    keys.push('italic');\n  }\n  if ('smallCaps' in attrs) {\n    marks.push(SmallCaps.create());\n    keys.push('smallCaps');\n  }\n  if ('strike' in attrs && strike) {\n    marks.push(Strike.create());\n    keys.push('strike');\n  }\n  if ('sz' in attrs) {\n    const szData: Record<string, any> = {\n      value: sz,\n    };\n    if ('szUnit' in attrs) {\n      szData.szUnit = szUnit;\n    }\n    // @ts-ignore\n    marks.push(Sz.create(szData));\n    keys.push('sz', 'szUnit');\n  }\n  if ('underline' in attrs) {\n    // 兼容：老数据 string 类型，导入 word 数据为 object\n    const underlineData =\n      typeof underline === 'string'\n        ? {\n            value: underline,\n          }\n        : underline;\n    // @ts-ignore\n    marks.push(Underline.create(underlineData.value, underlineData.color));\n    keys.push('underline');\n  }\n  if ('dstrike' in attrs) {\n    if (typeof dstrike === 'object') {\n      // 兼容存量导入数据 dstrike: { value: true/false }\n      // @ts-ignore\n      marks.push(Dstrike.create(dstrike.value));\n    } else {\n      // @ts-ignore\n      marks.push(Dstrike.create(dstrike));\n    }\n    keys.push('dstrike');\n  }\n  if ('em' in attrs && em) {\n    marks.push(Em.create(em));\n    keys.push('em');\n  }\n  if ('vertAlign' in attrs) {\n    // @ts-ignore\n    marks.push(VertAlign.create(vertAlign));\n    keys.push('vertAlign');\n  }\n  if ('inlineCode' in attrs) {\n    marks.push(InlineCode.create());\n    keys.push('inlineCode');\n  }\n\n  return {\n    marks,\n    keys,\n  }\n};\n"],"file":"jsonMLAttrsToMarks.js"}