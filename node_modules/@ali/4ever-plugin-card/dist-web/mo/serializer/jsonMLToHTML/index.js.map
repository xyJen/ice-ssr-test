{"version":3,"sources":["../../../../../src/mo/serializer/jsonMLToHTML/index.tsx"],"names":["React","getTagName","getAttributes","calendar","link","convertPlugins","name","match","node","tag","attrs","cardType","convert","path","metadata","subject","targetConvert"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAEEC,UAFF,EAGEC,aAHF,QAIO,kBAJP;AAKA,OAAOC,QAAP;AACA,OAAOC,IAAP;AAEA,IAAMC,cAAc,GAAG;AACrBF,EAAAA,QAAQ,EAARA,QADqB;AAErBC,EAAAA,IAAI,EAAJA;AAFqB,CAAvB;AAKA,eAAe;AACbE,EAAAA,IAAI,EAAE,MADO;AAGbC,EAAAA,KAAK,EAAE,eAACC,IAAD,EAA2B;AAChC,QAAMC,GAAG,GAAGR,UAAU,CAACO,IAAD,CAAtB;AACA,QAAME,KAAK,GAAGR,aAAa,CAACM,IAAD,CAA3B;AACA,WAAOC,GAAG,KAAK,MAAR,IAAkB,CAAC,CAACC,KAApB,IAA6BA,KAAK,CAACC,QAA1C;AACD,GAPY;AASbC,EAAAA,OAAO,EAAE,iBAACJ,IAAD,EAAeK,IAAf,EAA2D;AAAA,QAA5CA,IAA4C;AAA5CA,MAAAA,IAA4C,GAA3B,EAA2B;AAAA;;AAClE;AACA,QAAMH,KAAK,GAAGR,aAAa,CAACM,IAAD,CAAb,IAAuB,EAArC;AAFkE,eAGnCE,KAHmC;AAAA,QAG1DI,QAH0D,QAG1DA,QAH0D;AAAA,QAGhDH,QAHgD,QAGhDA,QAHgD;;AAAA,gBAI9CG,QAAQ,IAAI;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAJkC;AAAA,QAI1DA,OAJ0D,SAI1DA,OAJ0D;;AAKlE,QAAMC,aAAa,GAAGX,cAAc,CAACM,QAAD,CAApC;AACA,QAAIK,aAAJ,EAAmB,OAAOA,aAAa,CAACN,KAAD,EAAQG,IAAR,CAApB,CAN+C,CAOlE;;AACA,wBAAQ,4BAAME,OAAN,CAAR;AACD;AAlBY,CAAf","sourcesContent":["import * as React from 'react';\nimport {\n  JsonML,\n  getTagName,\n  getAttributes,\n} from '@ali/4ever-utils';\nimport calendar from './calendar';\nimport link from './link';\n\nconst convertPlugins = {\n  calendar,\n  link\n};\n\nexport default {\n  name: 'card',\n\n  match: (node: JsonML): boolean => {\n    const tag = getTagName(node);\n    const attrs = getAttributes(node) as Record<string, any>;\n    return tag === 'card' && !!attrs && attrs.cardType;\n  },\n\n  convert: (node: JsonML, path: number[] = []): React.ReactElement => {\n    // @ts-ignore\n    const attrs = getAttributes(node) || {};\n    const { metadata, cardType } = attrs as Record<string, any>;\n    const { subject } = metadata || { subject: '' };\n    const targetConvert = convertPlugins[cardType];\n    if (targetConvert) return targetConvert(attrs, path);\n    // 兜底方案：只显示calendar中的标题\n    return (<div>{subject}</div>);\n  },\n};\n"],"file":"index.js"}