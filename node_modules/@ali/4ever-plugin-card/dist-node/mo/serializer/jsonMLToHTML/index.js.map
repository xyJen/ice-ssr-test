{"version":3,"sources":["../../../../../src/mo/serializer/jsonMLToHTML/index.tsx"],"names":["convertPlugins","calendar","link","name","match","node","tag","attrs","cardType","convert","path","metadata","subject","targetConvert"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AAKA;;AACA;;uBAN4B,a;AAQ5B,MAAMA,cAAc,GAAG;AACrBC,EAAAA,QAAQ,EAARA,iBADqB;AAErBC,EAAAA,IAAI,EAAJA;AAFqB,CAAvB;eAKe;AACbC,EAAAA,IAAI,EAAE,MADO;AAGbC,EAAAA,KAAK,EAAGC,IAAD,IAA2B;AAChC,UAAMC,GAAG,GAAG,2BAAWD,IAAX,CAAZ;AACA,UAAME,KAAK,GAAG,8BAAcF,IAAd,CAAd;AACA,WAAOC,GAAG,KAAK,MAAR,IAAkB,CAAC,CAACC,KAApB,IAA6BA,KAAK,CAACC,QAA1C;AACD,GAPY;AASbC,EAAAA,OAAO,EAAE,CAACJ,IAAD,EAAeK,IAAc,GAAG,EAAhC,KAA2D;AAClE;AACA,UAAMH,KAAK,GAAG,8BAAcF,IAAd,KAAuB,EAArC;AACA,UAAM;AAAEM,MAAAA,QAAF;AAAYH,MAAAA;AAAZ,QAAyBD,KAA/B;AACA,UAAM;AAAEK,MAAAA;AAAF,QAAcD,QAAQ,IAAI;AAAEC,MAAAA,OAAO,EAAE;AAAX,KAAhC;AACA,UAAMC,aAAa,GAAGb,cAAc,CAACQ,QAAD,CAApC;AACA,QAAIK,aAAJ,EAAmB,OAAOA,aAAa,CAACN,KAAD,EAAQG,IAAR,CAApB,CAN+C,CAOlE;;AACA,wBAAQ,4BAAME,OAAN,CAAR;AACD;AAlBY,C","sourcesContent":["import * as React from 'react';\nimport {\n  JsonML,\n  getTagName,\n  getAttributes,\n} from '@ali/4ever-utils';\nimport calendar from './calendar';\nimport link from './link';\n\nconst convertPlugins = {\n  calendar,\n  link\n};\n\nexport default {\n  name: 'card',\n\n  match: (node: JsonML): boolean => {\n    const tag = getTagName(node);\n    const attrs = getAttributes(node) as Record<string, any>;\n    return tag === 'card' && !!attrs && attrs.cardType;\n  },\n\n  convert: (node: JsonML, path: number[] = []): React.ReactElement => {\n    // @ts-ignore\n    const attrs = getAttributes(node) || {};\n    const { metadata, cardType } = attrs as Record<string, any>;\n    const { subject } = metadata || { subject: '' };\n    const targetConvert = convertPlugins[cardType];\n    if (targetConvert) return targetConvert(attrs, path);\n    // 兜底方案：只显示calendar中的标题\n    return (<div>{subject}</div>);\n  },\n};\n"],"file":"index.js"}