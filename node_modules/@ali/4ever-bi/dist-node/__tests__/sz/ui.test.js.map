{"version":3,"sources":["../../../../src/__tests__/sz/ui.test.tsx"],"names":["INCREASE_SZ_HOT_KEY","DECREASE_SZ_HOT_KEY","createValue","szArrs","value","szUnit","describe","it","input","output","controllerRef","jest","fn","editor","controller","mock","calls","fireEvent","keyDown","actual","toJSON","preserveSelections","expected","setValue","expect","toEqual","type","title","hotKey","forEach","changedSz","keyPress","isIncreasing","createOutput","sz","output1","output2","output3","output4"],"mappings":"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","sourcesContent":["/** @jsx jsx */\nimport '@testing-library/jest-dom/extend-expect';\nimport {\n  wait,\n  waitFor,\n} from '@testing-library/react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport {\n  renderEditor,\n  getHotkeyEvent,\n  fireEvent,\n  jsx,\n} from '@ali/4ever-dev-test';\nimport Editor from '../editor';\nimport { last } from 'lodash-es';\n\nconst INCREASE_SZ_HOT_KEY = 'ctrl+shift+.';\nconst DECREASE_SZ_HOT_KEY = 'ctrl+shift+,';\n\nconst createValue = (szArrs) => {\n  return (\n    <value>\n      <document>\n        <block type=\"paragraph\">\n          <anchor />\n          <m type=\"sz\" data={{ value: szArrs[0][0], szUnit: 'pt' }}>测试</m>\n          <m type=\"sz\" data={{ value: szArrs[0][1], szUnit: 'pt' }}>测试</m>\n          <m type=\"sz\" data={{ value: szArrs[0][2], szUnit: 'pt' }}>测试</m>\n          <m type=\"sz\" data={{ value: szArrs[0][3], szUnit: 'pt' }}>测试</m>\n        </block>\n        <block type=\"paragraph\">\n          <m type=\"sz\" data={{ value: szArrs[1][0], szUnit: 'pt' }}>测试</m>\n          <m type=\"sz\" data={{ value: szArrs[1][1], szUnit: 'pt' }}>测试</m>\n          <m type=\"sz\" data={{ value: szArrs[1][2], szUnit: 'pt' }}>测试</m>\n          <m type=\"sz\" data={{ value: szArrs[1][3], szUnit: 'pt' }}>测试</m>\n          <focus />\n        </block>\n      </document>\n    </value>\n  );\n};\n\ndescribe('Bi/sz/ui', () => {\n  it('选中文字, 增大字号', async () => {\n    const input = createValue([[5, 9, 12, 15], [72, 81, 90, 200]]);\n    const output = createValue([[6, 10, 14, 16], [80, 90, 100, 200]]);\n    const controllerRef = jest.fn();\n    const { editor } = await renderEditor(\n      <Editor defaultValue={input} controllerRef={controllerRef} />,\n    );\n    const controller = last(controllerRef.mock.calls)[0] as Controller;\n    fireEvent.keyDown(editor, getHotkeyEvent(INCREASE_SZ_HOT_KEY));\n    await wait();\n    const actual = controller.value.toJSON({ preserveSelections: false });\n    const expected = controller\n      .setValue(output)\n      .value.toJSON({ preserveSelections: false });\n    expect(actual).toEqual(expected);\n  });\n  it('选中文字, 减小字号', async () => {\n    const input = createValue([[5, 9, 12, 15], [72, 80, 90, 200]]);\n    const output = createValue([[5, 8, 11, 14], [48, 72, 80, 190]]);\n    const controllerRef = jest.fn();\n    const { editor } = await renderEditor(\n      <Editor defaultValue={input} controllerRef={controllerRef} />,\n    );\n    const controller = last(controllerRef.mock.calls)[0] as Controller;\n    fireEvent.keyDown(editor, getHotkeyEvent(DECREASE_SZ_HOT_KEY));\n    await wait();\n    const actual = controller.value.toJSON({ preserveSelections: false });\n    const expected = controller\n      .setValue(output)\n      .value.toJSON({ preserveSelections: false });\n    expect(actual).toEqual(expected);\n  });\n  [\n    {\n      type: 'increase',\n      title: '增大字号',\n      hotKey: INCREASE_SZ_HOT_KEY,\n    },\n    {\n      type: 'decrease',\n      title: '减小字号',\n      hotKey: DECREASE_SZ_HOT_KEY,\n    },\n  ].forEach(({ type, title, hotKey }) => {\n    it(`不选中文字, ${title}`, async () => {\n      const changedSz = type === 'increase' ? 14 : 11;\n      const input = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <m type=\"sz\" data={{ value: 12, szUnit: 'pt' }}>测试<cursor /></m>\n            </block>\n          </document>\n        </value>\n      );\n      const output = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <m type=\"sz\" data={{ value: 12, szUnit: 'pt' }}>测试</m>\n              <m type=\"sz\" data={{ value: changedSz, szUnit: 'pt' }}>!<cursor /></m>\n            </block>\n          </document>\n        </value>\n      );\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(\n        <Editor defaultValue={input} controllerRef={controllerRef} />,\n      );\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n      fireEvent.keyDown(editor, getHotkeyEvent(hotKey));\n      await wait();\n      fireEvent.keyPress(editor, getHotkeyEvent('!'));\n      await waitFor(() => {\n        const actual = controller.value.toJSON({ preserveSelections: true });\n        const expected = controller\n          .setValue(output)\n          .value.toJSON({ preserveSelections: true });\n        return expect(actual).toEqual(expected);\n      });\n    });\n    it(`对包含默认字体大小的段落, ${title}`, async () => {\n      const isIncreasing = type === 'increase';\n      const input = (\n        <value>\n          <document>\n            <block type=\"paragraph\"><anchor />测试</block>\n            <block type=\"heading-1\">标题1</block>\n            <block type=\"heading-2\">标题2</block>\n            <block type=\"heading-3\">标题3</block>\n            <block type=\"heading-4\">标题4<focus /></block>\n          </document>\n        </value>\n      );\n      const output = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <anchor /><m type=\"sz\" data={{ value: isIncreasing ? 12 : 10, szUnit: 'pt' }}>测试</m>\n            </block>\n            <block type=\"heading-1\">\n              <m type=\"sz\" data={{ value: isIncreasing ? 22 : 18, szUnit: 'pt' }}>标题1</m>\n            </block>\n            <block type=\"heading-2\">\n              <m type=\"sz\" data={{ value: isIncreasing ? 18 : 14, szUnit: 'pt' }}>标题2</m>\n            </block>\n            <block type=\"heading-3\">\n              <m type=\"sz\" data={{ value: isIncreasing ? 16 : 12, szUnit: 'pt' }}>标题3</m>\n            </block>\n            <block type=\"heading-4\">\n              <m type=\"sz\" data={{ value: isIncreasing ? 14 : 11, szUnit: 'pt' }}>标题4<focus /></m>\n            </block>\n          </document>\n        </value>\n      );\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(\n        <Editor defaultValue={input} controllerRef={controllerRef} />,\n      );\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n      fireEvent.keyDown(editor, getHotkeyEvent(hotKey));\n      await wait();\n\n      const actual = controller.value.toJSON({ preserveSelections: true });\n      const expected = controller\n        .setValue(output)\n        .value.toJSON({ preserveSelections: true });\n      expect(actual).toEqual(expected);\n    });\n  });\n  it('选中文字, 连续增减字号', async () => {\n    let actual;\n    let expected;\n    const input = (\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            测试\n            <anchor />测试<focus />\n          </block>\n        </document>\n      </value>\n    );\n    const createOutput = (sz: number) => (\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            测试\n            <anchor />\n            <m type=\"sz\" data={{ value: sz, szUnit: 'pt' }}>测试</m>\n            <focus />\n          </block>\n        </document>\n      </value>\n    );\n    const controllerRef = jest.fn();\n    const { editor } = await renderEditor(\n      <Editor defaultValue={input} controllerRef={controllerRef} />,\n    );\n    const controller = last(controllerRef.mock.calls)[0] as Controller;\n    fireEvent.keyDown(editor, getHotkeyEvent(INCREASE_SZ_HOT_KEY));\n    await wait();\n    actual = controller.value.toJSON({ preserveSelections: true });\n    const output1 = createOutput(12);\n    expected = controller\n      .setValue(output1)\n      .value.toJSON({ preserveSelections: true });\n    expect(actual).toEqual(expected);\n\n    fireEvent.keyDown(editor, getHotkeyEvent(INCREASE_SZ_HOT_KEY));\n    await wait();\n    actual = controller.value.toJSON({ preserveSelections: true });\n    const output2 = createOutput(14);\n    expected = controller\n      .setValue(output2)\n      .value.toJSON({ preserveSelections: true });\n    expect(actual).toEqual(expected);\n\n    fireEvent.keyDown(editor, getHotkeyEvent(DECREASE_SZ_HOT_KEY));\n    await wait();\n    actual = controller.value.toJSON({ preserveSelections: true });\n    const output3 = createOutput(12);\n    expected = controller\n      .setValue(output3)\n      .value.toJSON({ preserveSelections: true });\n    expect(actual).toEqual(expected);\n\n    fireEvent.keyDown(editor, getHotkeyEvent(DECREASE_SZ_HOT_KEY));\n    await wait();\n    actual = controller.value.toJSON({ preserveSelections: true });\n    const output4 = createOutput(11);\n    expected = controller\n      .setValue(output4)\n      .value.toJSON({ preserveSelections: true });\n    expect(actual).toEqual(expected);\n  });\n});\n"],"file":"ui.test.js"}