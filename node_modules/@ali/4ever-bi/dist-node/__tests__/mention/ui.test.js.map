{"version":3,"sources":["../../../../src/__tests__/mention/ui.test.tsx"],"names":["createBiPlugins","mention","newlineGuide","quickInsertMention","insertMenuData","type","TYPE_GROUP","title","menus","TYPE_MENU_ITEM","menuKey","FORMAT_MENU_UNI18N_TEXT","menu_title","sub_menu_title_text","menu_item_title_text_bold","menu_item_title_text_italics","menu_item_title_text_underline","menu_item_title_text_strikethrough","menu_item_title_text_superscript","menu_item_title_text_subscript","menu_item_title_text_letterSpacing","sub_menu_title_size","menu_item_title_text_increase_size","menu_item_title_text_decrease_size","sub_menu_title_align","sub_menu_title_indent","sub_menu_title_list","menu_item_title_list_unorder","menu_item_title_list_order","menu_item_title_list_task","renderInsertMenu","getSuggestions","text","count","Array","fill","map","_","index","name","length","id","toString","login","avatarUrl","DEFAULT_SUGGESTION_COUNT","Editor","props","defaultValue","mentionConfig","suggestionCount","value","setValue","React","useState","handleChange","useCallback","changed","plugins","useMemo","config","locale","buttonTitle","quickInsertTitle","mentionPlaceholder","searchSuggestions","setResult","setTimeout","onSuggestionSelected","suggestion","nextStep","loadMoreSuggestions","offset","enabled","renderGuideMenu","originalOffsetHeight","Object","getOwnPropertyDescriptor","HTMLElement","prototype","originalOffsetWidth","beforeAll","defineProperty","configurable","afterAll","afterEach","cleanup","describe","test","getAllByTestId","editor","Mo","textToValue","fireEvent","cangjieInput","data","items","document","body","expect","toHaveLength","findByTestId","content","textContent","queryByText","findByText","classList","toContain","forEach","key","to","keyUp","queryByTestId","list","querySelector","scrollHeightSpy","jest","spyOn","mockImplementation","scroll","target","scrollTop","mockClear","HOTKEYS","enter","not","toBeInTheDocument","keyDown","isComposing","item","mouseDown","timeout","valueForNewlineGuideTest","click","isPlaceholder","getByText","focus","container","innerHTML","toBe","renderHeader","renderItem","renderFooter","renderLoading","onMentionClick","replaceWith","onMentionHover","mentionDom","mouseEnter","searchMatch","selected","mentionSpan","bgColor","window","getComputedStyle","getPropertyValue"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable import/no-extraneous-dependencies */\n/** @jsx jsx */\nimport * as React from 'react';\nimport '@testing-library/jest-dom/extend-expect';\nimport {\n  cleanup,\n  waitForElement,\n  findAllByTestId,\n  waitForElementToBeRemoved,\n  waitFor,\n} from '@testing-library/react';\nimport { Value } from '@ali/4ever-cangjie';\nimport {\n  renderEditor,\n  HOTKEYS,\n  getHotkeyEvent,\n  fireEvent,\n  jsx,\n} from '@ali/4ever-dev-test';\nimport Mo from '../serializer';\nimport mention from '../../plugins/mention';\nimport { creatQuickInsertPlugin as quickInsertMention } from '@ali/4ever-plugin-mention';\nimport newlineGuide from '../../plugins/newlineGuide';\nimport { MentionPluginConfigBi as MentionPluginConfig, MentionSuggestion as Suggestion } from '@ali/4ever-plugin-mention';\nimport { createCustomizedBiPlugins ,\n  Menu as BiMenu,\n  TYPE_MENU_ITEM,\n  TYPE_GROUP,\n  TYPE_MENU_DATA,\n} from '../..';\nimport Provider from '../../provider';\nimport Content from '../../content';\n\n\ninterface EditorProps {\n  suggestionCount?: number;\n  mentionConfig?: Partial<MentionPluginConfig>;\n  defaultValue: Value;\n}\n\nconst createBiPlugins = createCustomizedBiPlugins({\n  mention,\n  newlineGuide,\n  quickInsertMention,\n});\n\nconst insertMenuData: TYPE_MENU_DATA = [\n  {\n    type: TYPE_GROUP,\n    title: '提及@',\n    menus: [\n      {\n        type: TYPE_MENU_ITEM,\n        title: '提及人',\n        menuKey: 'quickInsertMention',\n      },\n    ],\n  },\n];\n\nexport const FORMAT_MENU_UNI18N_TEXT = {\n  menu_title: '格式',\n  sub_menu_title_text: '文本',\n  menu_item_title_text_bold: '粗体',\n  menu_item_title_text_italics: '斜体',\n  menu_item_title_text_underline: '下划线',\n  menu_item_title_text_strikethrough: '删除线',\n  menu_item_title_text_superscript: '上标',\n  menu_item_title_text_subscript: '下标',\n  menu_item_title_text_letterSpacing: '字间距',\n  sub_menu_title_size: '字号',\n  menu_item_title_text_increase_size: '增大字号',\n  menu_item_title_text_decrease_size: '缩小字号',\n  sub_menu_title_align: '对齐',\n  sub_menu_title_indent: '缩进',\n  sub_menu_title_list: '项目符号',\n  menu_item_title_list_unorder: '无序列表',\n  menu_item_title_list_order: '有序列表',\n  menu_item_title_list_task: '任务列表',\n};\n\nfunction renderInsertMenu() {\n  return <BiMenu menus={insertMenuData} />;\n}\n\n\nconst getSuggestions = (text, count) => Array(count)\n  .fill(0)\n  .map<Suggestion>((_, index) => ({\n  name: `${text.length ? text : 'anonymous'}-${index}`,\n  id: index.toString(),\n  login: index.toString(),\n  avatarUrl: `${text}-${index}.jpg`,\n}));\n\nconst DEFAULT_SUGGESTION_COUNT = 3;\n\nconst Editor: React.FC<EditorProps> = (props) => {\n  const {\n    defaultValue,\n    mentionConfig = {},\n    suggestionCount = DEFAULT_SUGGESTION_COUNT,\n  } = props;\n  const [value, setValue] = React.useState(defaultValue);\n  const handleChange = React.useCallback((changed) => {\n    setValue(changed.value);\n  }, []);\n\n  const plugins = React.useMemo(() => {\n    const config: MentionPluginConfig = {\n      locale: {\n        buttonTitle: '@',\n        quickInsertTitle: '@',\n        mentionPlaceholder: '选择成员',\n      },\n      searchSuggestions(text, setResult) {\n        // 模拟搜索的异步过程\n        setTimeout(() => {\n          setResult(getSuggestions(text, suggestionCount));\n        }, 300);\n      },\n      onSuggestionSelected(suggestion, nextStep) {\n        nextStep(suggestion);\n      },\n      loadMoreSuggestions(text, offset, setResult) {\n        setResult(getSuggestions(text, suggestionCount + 1));\n      },\n      ...mentionConfig,\n    };\n\n    return createBiPlugins({\n      mention: config,\n      newlineGuide: {\n        enabled: true,\n        renderGuideMenu: renderInsertMenu,\n      },\n      quickInsertMention: config,\n    });\n  }, [mentionConfig, suggestionCount]);\n\n  return (\n    <Provider\n      autoFocus\n      plugins={plugins}\n      value={value}\n      onChange={handleChange}\n    >\n      <Content tabIndex={0} />\n    </Provider>\n  );\n};\n\n// Mock DOM size\nconst originalOffsetHeight = Object.getOwnPropertyDescriptor(\n  HTMLElement.prototype,\n  'offsetHeight',\n);\nconst originalOffsetWidth = Object.getOwnPropertyDescriptor(\n  HTMLElement.prototype,\n  'offsetWidth',\n);\n\nbeforeAll(() => {\n  Object.defineProperty(HTMLElement.prototype, 'offsetHeight', {\n    configurable: true,\n    value: 500,\n  });\n  Object.defineProperty(HTMLElement.prototype, 'offsetWidth', {\n    configurable: true,\n    value: 500,\n  });\n});\n\nafterAll(() => {\n  Object.defineProperty(\n    HTMLElement.prototype,\n    'offsetHeight',\n    originalOffsetHeight!,\n  );\n  Object.defineProperty(\n    HTMLElement.prototype,\n    'offsetWidth',\n    originalOffsetWidth!,\n  );\n});\n\nafterEach(cleanup);\n\ndescribe('Bi/mention/ui', () => {\n  describe('展示 suggestions', () => {\n    test('输入 @ 后，展示 mention 列表', async () => {\n      const { getAllByTestId, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      const items = await findAllByTestId(document.body, 'mention-suggestion-item');\n      expect(items).toHaveLength(DEFAULT_SUGGESTION_COUNT);\n    });\n\n    test('支持连续输入 @，且当前只展示一个 mention 列表', async () => {\n      const { findByTestId, editor, content } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      await waitForElement(() => content.textContent === '@@@');\n      await findByTestId('mention-suggestion');\n    });\n\n    test('输入 @ 后，展示搜索结果', async () => {\n      const { queryByText, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      await waitForElement(() => queryByText('anonymous-0'));\n    });\n\n    test('输入 @ 后，继续输入文本，展示匹配的 mention 列表', async () => {\n      const { findByText, findByTestId, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      await findByTestId('mention-suggestion');\n      fireEvent.cangjieInput(editor, {\n        data: 'tom',\n      });\n      await waitForElement(() => findByText('tom-1'));\n    });\n\n    test('列表默认选中第一项', async () => {\n      const { getAllByTestId, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      const items = await waitForElement(() => getAllByTestId('mention-suggestion-item'));\n      expect(items[0].classList).toContain('actived');\n    });\n\n    [\n      ['up', 2],\n      ['left', 2],\n      ['right', 1],\n      ['down', 1],\n    ].forEach(([key, to]) => {\n      test(`支持方向键 ${key} 切换项目`, async () => {\n        const { getAllByTestId, editor } = await renderEditor(\n          <Editor defaultValue={Mo.textToValue('')} />,\n        );\n        fireEvent.cangjieInput(editor, {\n          data: '@',\n        });\n\n        const items = await waitForElement(() => getAllByTestId('mention-suggestion-item'));\n\n        fireEvent.keyUp(document, getHotkeyEvent(key as string));\n\n        await waitFor(() => expect(items[to].classList).toContain('actived'));\n      });\n    });\n\n    test('支持滚动加载', async () => {\n      const {\n        queryByTestId,\n        getAllByTestId,\n        queryByText,\n        editor,\n      } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} suggestionCount={20} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      fireEvent.cangjieInput(editor, {\n        data: 'tom',\n      });\n      await waitForElement(() => getAllByTestId('mention-suggestion-item'));\n      const suggestion = queryByTestId('mention-suggestion');\n      const list = suggestion!.querySelector('.mention-suggestion-list')!;\n\n      const scrollHeightSpy = jest\n        .spyOn(list, 'scrollHeight', 'get')\n        .mockImplementation(() => 5000);\n\n      fireEvent.scroll(list, {\n        target: {\n          scrollTop: 5000,\n        },\n      });\n\n      await waitForElement(() => queryByText('tom-20'));\n      scrollHeightSpy.mockClear();\n    });\n  });\n\n  describe('插入', () => {\n    test('在 mention 列表中，回车插入当前选中项', async () => {\n      const { queryByTestId, queryByText, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      fireEvent.cangjieInput(editor, {\n        data: 'tom',\n      });\n\n      await waitForElement(() => queryByText('tom-0'));\n\n      fireEvent.keyUp(document, getHotkeyEvent(HOTKEYS.enter));\n      expect(queryByTestId('mention-suggestion')).not.toBeInTheDocument();\n      expect(queryByText('tom-0')).toBeInTheDocument();\n    });\n\n    test('在 mention 列表中，若在加载中，则不响应回车', async () => {\n      const { queryByTestId, queryByText, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      await waitForElement(() => queryByTestId('mention-suggestion'));\n      fireEvent.cangjieInput(editor, {\n        data: 'tom',\n      });\n\n      await waitForElement(() => queryByTestId('mention-suggestion-loading'));\n\n      fireEvent.keyDown(document, getHotkeyEvent(HOTKEYS.enter));\n\n      expect(queryByTestId('mention-suggestion')).toBeInTheDocument();\n      expect(queryByText('@tom-0')).not.toBeInTheDocument();\n    });\n\n    test('在 mention 列表中，若在输入过程中，则不响应回车确认', async () => {\n      const { queryByTestId, queryByText, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      await waitForElement(() => queryByTestId('mention-suggestion'));\n      fireEvent.cangjieInput(editor, {\n        data: 'tom',\n      });\n\n      await waitForElement(() => queryByText('tom-0'));\n\n      fireEvent.keyDown(document, {\n        ...getHotkeyEvent(HOTKEYS.enter),\n        isComposing: true,\n      });\n\n      expect(queryByTestId('mention-suggestion')).toBeInTheDocument();\n      expect(queryByText('@tom-0')).not.toBeInTheDocument();\n    });\n\n    test('在 mention 列表中，点击插入项目', async () => {\n      const { queryByTestId, queryByText, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      fireEvent.cangjieInput(editor, {\n        data: 'tom',\n      });\n\n      const item = await waitForElement(() => queryByText('tom-1'))!;\n      fireEvent.mouseDown(item);\n      expect(queryByTestId('mention-suggestion')).not.toBeInTheDocument();\n      await waitForElement(() => queryByText('tom-1'));\n    });\n\n    test('输入 @ 后，若有选中的项目，键入空格，则插入 mention', async () => {\n      const { queryByTestId, queryByText, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      fireEvent.cangjieInput(editor, {\n        data: 'tom',\n      });\n\n      await waitForElement(() => queryByText('tom-0'), {\n        timeout: 10000,\n      });\n      // 添加 log 定位测试用例失败原因\n      console.log('wait tom-0');\n\n      fireEvent.keyDown(editor, getHotkeyEvent('space'));\n\n      expect(queryByTestId('mention-suggestion')).not.toBeInTheDocument();\n      await waitForElement(() => queryByText('tom-0'), {\n        timeout: 10000,\n      });\n      console.log('wait @tom-0');\n    });\n  });\n\n  describe('占位符', () => {\n    test('插入占位符', async () => {\n      const valueForNewlineGuideTest = (\n        <value>\n          <document>\n            <block type=\"paragraph\" />\n            <block type=\"paragraph\"><cursor /></block>\n          </document>\n        </value>\n      );\n\n      const { queryByTestId, editor, queryByText } = await renderEditor(\n        <Editor defaultValue={valueForNewlineGuideTest} />,\n      );\n\n      fireEvent.keyUp(editor, { key: '/', target: { value: '/' } });\n\n      await waitFor(() => queryByText(/提及人/));\n      fireEvent.click(queryByText(/提及人/));\n      await waitForElement(() => queryByTestId('menu-insert-mention-input'), {\n        timeout: 1000,\n      });\n      expect(queryByTestId('menu-insert-mention-input')).toBeInTheDocument();\n    });\n    test('点击占位符，切换到输入态', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <inline\n                type=\"mention\"\n                data={{\n                  name: '',\n                  id: '',\n                  login: '',\n                  avatarUrl: '',\n                  isPlaceholder: true,\n                }}\n              />\n              <cursor />\n            </block>\n          </document>\n        </value>\n      ) as any;\n\n      const { queryByTestId } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n\n      fireEvent.click(queryByTestId('mention-placeholder-normal'));\n      await waitForElement(() => queryByTestId('menu-insert-mention-input'), {\n        timeout: 1000,\n      });\n      expect(queryByTestId('menu-insert-mention-input')).toBeInTheDocument();\n    });\n\n    test('占位符删除', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <inline\n                type=\"mention\"\n                data={{\n                  name: '',\n                  id: '',\n                  login: '',\n                  avatarUrl: '',\n                  isPlaceholder: true,\n                }}\n              />\n              <cursor />\n            </block>\n          </document>\n        </value>\n      ) as any;\n\n      const { queryByText, getByText, editor } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n\n      fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n      getByText('选择成员').focus();\n      fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n\n      await waitForElementToBeRemoved(() => queryByText(/选择成员/));\n    });\n\n    test('输入态，输入部分内容后取消', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <inline\n                type=\"mention\"\n                data={{\n                  name: '',\n                  id: '',\n                  login: '',\n                  avatarUrl: '',\n                  isPlaceholder: true,\n                }}\n              />\n              <inline\n                type=\"mention\"\n                data={{\n                  name: 'yanyi',\n                  id: '12',\n                  login: '123',\n                  avatarUrl: '0.jpg',\n                }}\n              />\n              <cursor />\n            </block>\n          </document>\n        </value>\n      ) as any;\n\n      const { queryByTestId, queryByText, container, editor } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n\n      fireEvent.click(queryByText(/选择成员/)!);\n      queryByTestId('menu-insert-mention-input').innerHTML = '@142142';\n\n      fireEvent.click(queryByText(/yanyi/));\n      expect(queryByText(/@142142/)).toBeInTheDocument();\n    });\n\n    test('输入态，未输入内容后取消', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <inline\n                type=\"mention\"\n                data={{\n                  name: '',\n                  id: '',\n                  login: '',\n                  avatarUrl: '',\n                  isPlaceholder: true,\n                }}\n              />\n              <inline\n                type=\"mention\"\n                data={{\n                  name: 'yanyi',\n                  id: '12',\n                  login: '123',\n                  avatarUrl: '0.jpg',\n                }}\n              />\n              <cursor />\n            </block>\n          </document>\n        </value>\n      ) as any;\n\n      const { queryByTestId, queryByText, editor } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n\n      fireEvent.click(queryByText(/选择成员/)!);\n\n      fireEvent.click(queryByText(/yanyi/));\n      expect(queryByText(/选择成员/)).toBeInTheDocument();\n    });\n  });\n\n  describe('取消', () => {\n    test('删除 @ 后，不再展示 mention 列表', async () => {\n      const { queryByTestId, queryByText, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n\n      await waitForElement(() => queryByTestId('mention-suggestion'));\n      fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n\n      await waitForElementToBeRemoved(() => queryByTestId('mention-suggestion'));\n      expect(queryByText('@')).not.toBeInTheDocument();\n    });\n\n    test('输入 @ 后，按下 ESC，取消 mention', async () => {\n      const { queryByTestId, editor, content } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n\n      await waitForElement(() => queryByTestId('mention-suggestion'));\n      fireEvent.keyDown(editor, getHotkeyEvent('esc'));\n\n      await waitForElementToBeRemoved(() => queryByTestId('mention-suggestion'));\n      expect(content.textContent).toBe('@');\n    });\n\n    test('输入 @ 后，若没有选中的项目，键入空格，则取消 mention', async () => {\n      const {\n        queryByTestId,\n        queryByText,\n        editor,\n        content,\n      } = await renderEditor(<Editor defaultValue={Mo.textToValue('')} />);\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n\n      await waitForElement(() => queryByText('anonymous-1'));\n      fireEvent.keyDown(editor, getHotkeyEvent('space'));\n\n      await waitForElementToBeRemoved(() => queryByTestId('mention-suggestion'));\n      expect(content.textContent).toBe('@');\n    });\n  });\n\n  describe('删除', () => {\n    test('在 mention 后退格，先选中再删除整个 mention', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <inline\n                type=\"mention\"\n                data={{\n                  name: 'tom',\n                  id: '0',\n                  login: '0',\n                  avatarUrl: '0.jpg',\n                }}\n              />\n              <cursor />\n            </block>\n          </document>\n        </value>\n      ) as any;\n\n      const { queryByText, editor, getByText } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n      getByText('tom').focus();\n      fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n\n      await waitForElementToBeRemoved(() => queryByText('tom'));\n    });\n\n    test('在 mention 前键入 del，先选中再删除整个 mention', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <cursor />\n              <inline\n                type=\"mention\"\n                data={{\n                  name: 'tom',\n                  id: '0',\n                  login: '0',\n                  avatarUrl: '0.jpg',\n                }}\n              />\n            </block>\n          </document>\n        </value>\n      ) as any;\n\n      const { queryByText, editor, getByText } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      fireEvent.keyDown(editor, getHotkeyEvent('del'));\n      getByText('tom').focus();\n      fireEvent.keyDown(editor, getHotkeyEvent('del'));\n\n      await waitForElementToBeRemoved(() => queryByText('tom'));\n    });\n  });\n\n  describe('渲染', () => {\n    test('自定义 Header 渲染', async () => {\n      const config = {\n        renderHeader: () => <h1>Header</h1>,\n      };\n\n      const { queryByText, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} mentionConfig={config} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n\n      await waitForElement(() => queryByText(/Header/));\n    });\n\n    test('自定义 Suggestion Item 渲染', async () => {\n      const config = {\n        renderItem: (suggestion: Suggestion) => (\n          <div>{`this-is-${suggestion.id}`}</div>\n        ),\n      };\n\n      const { queryByText, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} mentionConfig={config} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n\n      await waitForElement(() => queryByText(/this-is-0/));\n    });\n\n    test('自定义 Footer 渲染', async () => {\n      const config = {\n        renderFooter: () => <footer>Footer</footer>,\n      };\n\n      const { queryByText, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} mentionConfig={config} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n\n      await waitForElement(() => queryByText(/Footer/));\n    });\n\n    test('自定义 Loading 渲染', async () => {\n      const config = {\n        renderLoading: () => <div>loading</div>,\n      };\n      const { queryByText, editor } = await renderEditor(\n        <Editor defaultValue={Mo.textToValue('')} mentionConfig={config} />,\n      );\n      fireEvent.cangjieInput(editor, {\n        data: '@',\n      });\n      await waitForElement(() => queryByText(/loading/));\n    });\n  });\n\n  describe('响应事件', () => {\n    test('在 mention 中响应 click 事件', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <inline\n                type=\"mention\"\n                data={{\n                  name: 'tom',\n                  id: '0',\n                  login: '0',\n                  avatarUrl: '0.jpg',\n                }}\n              />\n              <cursor />\n            </block>\n          </document>\n        </value>\n      ) as any;\n\n      const config = {\n        onMentionClick: () => {\n          queryByText('tom').replaceWith('tom-click');\n        },\n      };\n\n      const { queryByText, getByText } = await renderEditor(\n        <Editor defaultValue={value} mentionConfig={config} />,\n      );\n      getByText('tom').click();\n      await waitForElement(() => queryByText(/tom-click/));\n    });\n\n    test('在 mention 中响应 hover 事件', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <inline\n                type=\"mention\"\n                data={{\n                  name: 'tom',\n                  id: '0',\n                  login: '0',\n                  avatarUrl: '0.jpg',\n                }}\n              />\n              <cursor />\n            </block>\n          </document>\n        </value>\n      ) as any;\n\n      const config = {\n        onMentionHover: () => {\n          queryByText('tom').replaceWith('tom-hover');\n        },\n      };\n\n      const { queryByText, getByText } = await renderEditor(\n        <Editor defaultValue={value} mentionConfig={config} />,\n      );\n\n      const mentionDom = getByText('tom');\n      fireEvent.mouseEnter(mentionDom);\n      await waitForElement(() => queryByText(/tom-hover/));\n    });\n  });\n\n  describe('渲染查找替换高亮', () => {\n    test('渲染查找替换高亮', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <inline\n                type=\"mention\"\n                data={{\n                  name: 'tom',\n                  id: '0',\n                  login: '0',\n                  avatarUrl: '0.jpg',\n                  searchMatch: {type: 'text', selected: true}\n                }}\n              />\n              <cursor />\n            </block>\n          </document>\n        </value>\n      ) as any;\n\n\n      const { content } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      await waitFor(() => {\n        const mentionSpan = content.querySelector('[data-type=\"mention\"]');\n        const bgColor = window.getComputedStyle(mentionSpan).getPropertyValue('background-color');\n        expect(bgColor).toBe('rgb(255, 153, 51)');\n      });\n    });\n  });\n});\n"],"file":"ui.test.js"}