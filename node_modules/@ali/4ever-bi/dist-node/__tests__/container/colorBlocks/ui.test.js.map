{"version":3,"sources":["../../../../../src/__tests__/container/colorBlocks/ui.test.tsx"],"names":["describe","cases","input","color","CalloutPlugin","COLOR_MAP","forEach","it","value","content","editor","fireEvent","keyDown","calloutElement","querySelector","expect","toBe","textContent","getComputedStyle","backgroundColor","toLowerCase","Mo","textToValue","trim"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/** @jsx jsx */\nimport {\n  renderEditor,\n  getHotkeyEvent,\n  fireEvent,\n  jsx,\n  waitForTime,\n} from '@ali/4ever-dev-test';\nimport { Value } from '@ali/4ever-cangjie';\nimport { waitFor } from '@testing-library/react';\n\nimport Mo from '../../serializer';\nimport { hexToRgb, removeInvisibleChars } from '../../helper';\nimport BiEditor from '../../editor';\nimport { CalloutPlugin } from '@ali/4ever-bamboo';\n\n\ndescribe('Bi/callout/ui', () => {\n  describe('在空 paragraph 中输入 <delimitor> + enter ，插入高亮块', async () => {\n    const cases = [{\n      input: ':::',\n      color: CalloutPlugin.COLOR_MAP['warning'],\n    }, {\n      input: '::: ',\n      color: CalloutPlugin.COLOR_MAP['warning'],\n    }, {\n      input: '::: info',\n      color: CalloutPlugin.COLOR_MAP['info'],\n    }, {\n      input: '::: danger',\n      color: CalloutPlugin.COLOR_MAP['danger'],\n    }, {\n      input: '::: success',\n      color: CalloutPlugin.COLOR_MAP['success'],\n    }, {\n      input: '::: tips',\n      color: CalloutPlugin.COLOR_MAP['tips'],\n    }, {\n      input: '::: warning',\n      color: CalloutPlugin.COLOR_MAP['warning'],\n    }, {\n      input: '：：: info', // 中英文冒号\n      color: CalloutPlugin.COLOR_MAP['info'],\n    }, {\n      input: ':::      info', // 多个空格\n      color: CalloutPlugin.COLOR_MAP['info'],\n    }, {\n      input: ':::info', // 无空格\n      color: CalloutPlugin.COLOR_MAP['info'],\n    }, {\n      input: '::: others', // 不支持的类型\n      color: null,\n    }, {\n      input: '::: info~~', // 不支持的类型\n      color: null,\n    }];\n\n    cases.forEach(async ({ input, color }) => {\n      it(`test[${input}]`, async () => {\n        const value = ((\n          <value>\n            <document>\n              <block type=\"paragraph\">\n                {input}<cursor />\n              </block>\n            </document>\n          </value>\n        ) as unknown) as Value;\n        const { content, editor } = await renderEditor(\n          <BiEditor defaultValue={value} />,\n        );\n\n        fireEvent.keyDown(editor, getHotkeyEvent('enter'));\n        await waitForTime(10);\n        const calloutElement: HTMLElement | null = await waitFor(() => content.querySelector('.callout-box')) as any;\n        expect(!!calloutElement).toBe(!!color);\n\n        if (color) {\n          expect(removeInvisibleChars(calloutElement?.textContent ?? '')).toBe('');\n          expect(getComputedStyle(calloutElement!).backgroundColor).toBe(hexToRgb(color.toLowerCase()));\n        }\n      });\n    });\n\n  });\n\n  it('在有内容的段落顶部输入 ::: 后回车', async () => {\n    const value = Mo.textToValue('hello world :::');\n    const { content, editor } = await renderEditor(\n      <BiEditor defaultValue={value} />,\n    );\n\n    fireEvent.keyDown(editor, getHotkeyEvent('enter'));\n    await waitForTime(10);\n    expect(content.textContent?.trim()).toBe('hello world :::');\n  });\n\n});\n"],"file":"ui.test.js"}