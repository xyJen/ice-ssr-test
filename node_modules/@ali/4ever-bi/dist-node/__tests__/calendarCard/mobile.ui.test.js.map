{"version":3,"sources":["../../../../src/__tests__/calendarCard/mobile.ui.test.tsx"],"names":["createBiPlugins","biPlugins","MobileCalendarCardPlugin","Editor","props","defaultValue","calendarConfig","value","setValue","React","useState","plugins","useMemo","calendarCard","handleChange","useCallback","changed","calendarData","calendarId","comment","totalCount","place","startTime","endTime","timezone","time","subject","organizer","uid","topReceivers","name","type","avatarMediaId","redirectUrl","attachments","fileName","createCalendarConfig","config","locale","refresh","refreshTips","receiverCount","viewCalendardetails","noresponse","received","refused","pending","getContainerWidthInPC","jumpToCalendar","link","eventType","openProfile","jumpToAttachment","url","onRefreshSuccess","Promise","resolve","setTimeout","status","data","describe","beforeAll","jest","spyOn","console","error","mockImplementation","afterAll","mockRestore","afterEach","test","cardType","height","metadata","queryByTestId","queryAllByTestId","textContent","expect","toBe","receiverName","includes","handleState","findByTestId","fireEvent","mouseDown","receiver"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/** @jsx jsx */\nimport * as React from 'react';\nimport { Value } from '@ali/4ever-cangjie';\nimport { createCustomizedBiPlugins, MobileCalendarCardPlugin, plugins as biPlugins } from '../..';\nimport { cleanup, wait } from '@testing-library/react';\nimport '@testing-library/jest-dom/extend-expect';\nimport Provider from '../../provider';\nimport Content from '../../content';\nimport { renderEditor, fireEvent, jsx } from '@ali/4ever-dev-test';\n\ninterface EditorProps {\n  defaultValue: Value;\n  calendarConfig: any;\n}\n\nconst createBiPlugins = createCustomizedBiPlugins({\n  ...biPlugins,\n  MobileCalendarCardPlugin,\n} as any);\n\nconst Editor: React.FC<EditorProps> = (props) => {\n  const { defaultValue, calendarConfig } = props;\n  const [value, setValue] = React.useState(defaultValue);\n  const plugins = React.useMemo(() => {\n    return createBiPlugins({\n      calendarCard: calendarConfig,\n    });\n  }, [calendarConfig]);\n\n  const handleChange = React.useCallback((changed) => {\n    setValue(changed.value);\n  }, []);\n\n  return (\n    <Provider value={value} onChange={handleChange} plugins={plugins} autoFocus>\n      <Content />\n    </Provider>\n  );\n};\n\nconst calendarData = {\n  calendarId: '18700362',\n  comment: '超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注',\n  totalCount: 14,\n  place: '10-3-3',\n  startTime: 1598281200000,\n  endTime: 1598284800000,\n  timezone: 'Asia/Shanghai',\n  time: '08月24日 23:00 - 08月25日 00:00',\n  subject: '超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题',\n  organizer: [{ uid: 3452016 }],\n  topReceivers: [\n    {\n      name: '陌',\n      type: 1,\n      uid: 3146067,\n    },\n    {\n      uid: 3452016,\n      name: '童岭',\n      avatarMediaId: 'https://static.dingtalk.com/media/lADPBbCc1h2tUUPNA8DNA74_958_960.jpg_60x60q90.jpg',\n      type: 1,\n    },\n    {\n      name: '董旭',\n      type: 1,\n      uid: 3166262,\n    },\n    {\n      name: '张卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚',\n      type: 1,\n      uid: 3452113,\n    },\n    {\n      name: '1598',\n      type: 1,\n      uid: 3452114,\n    },\n    {\n      name: '170****2451',\n      type: 1,\n      uid: 3451114,\n    },\n    {\n      name: 'Benjy',\n      type: 1,\n      uid: 2855028,\n    },\n    {\n      name: '张卫刚',\n      type: 1,\n      uid: 3452184,\n    },\n    {\n      name: '150****2598',\n      type: 1,\n      uid: 3452115,\n    },\n    {\n      name: '董旭',\n      type: 1,\n      uid: 3166266,\n    },\n    {\n      name: '170****2451',\n      type: 1,\n      uid: 3451117,\n    },\n    {\n      name: 'Benjy',\n      type: 1,\n      uid: 2855039,\n    },\n    {\n      name: '150****2598',\n      type: 1,\n      uid: 3452414,\n    }, {\n      name: 'Benjy',\n      type: 1,\n      uid: 2855028,\n    },\n    {\n      name: '张卫刚',\n      type: 1,\n      uid: 3452184,\n    },\n    {\n      name: '150****2598',\n      type: 1,\n      uid: 3452115,\n    },\n    {\n      name: '董旭',\n      type: 1,\n      uid: 3166266,\n    },\n    {\n      name: '170****2451',\n      type: 1,\n      uid: 3451117,\n    },\n    {\n      name: 'Benjy',\n      type: 1,\n      uid: 2855039,\n    },\n    {\n      name: '150****2598',\n      type: 1,\n      uid: 3452414,\n    },\n    {\n      name: '董旭',\n      type: 1,\n      uid: 3166562,\n    },\n  ],\n  redirectUrl: 'dingtalk://dingtalkclient/action/open_mini_app?miniAppId=2018112162280005&ddMode=push&mainTask=true&keepAlive=false&newCalendar=1&page=pages%2Fdetail%2Findex%3FuniqueId%3DM2JMK2NUUlYzODVTdEpmeXFLYThhZz09&fallback_url=dingtalk%3A%2F%2Fdingtalkclient%2Fpage%2Fcalendar_detail%3Fid%3D0%26uniqueId%3DM2JMK2NUUlYzODVTdEpmeXFLYThhZz09',\n  attachments: [\n    {\n      type: 7,\n      fileName: '市政府工作会议纪要.docx',\n    },\n    {\n      type: 1,\n      fileName: '市政府工作会议纪要2.docx',\n    },\n    {\n      type: 2,\n      fileName: '市政府工作会议纪要3.docx',\n    }, {\n      type: 3,\n      fileName: '市政府工作会议纪要4.docx',\n    },\n  ],\n};\n\nconst createCalendarConfig = (config: any) => {\n  return {\n    locale: {\n      refresh: '刷新',\n      refreshTips: '日程卡片有更新',\n      receiverCount: '等{count}人参会',\n      viewCalendardetails: '查看日程详情',\n      noresponse: '未响应',\n      received: '已接收',\n      refused: '已拒绝',\n      pending: '待定',\n      organizer: '组织人',\n    },\n    getContainerWidthInPC: () => {\n      return 440;\n    },\n    jumpToCalendar: (link?: string, eventType?: string) => {\n      console.log('跳转到日程的链接为：', link, eventType);\n    },\n    openProfile: (uid: number) => {\n      console.log('打开Profile参数为：', uid);\n    },\n    jumpToAttachment: (url: string, eventType?: string) => {\n      console.log('打开附件的地址为：', url, eventType);\n    },\n    onRefreshSuccess: () => {\n      console.log('刷新成功！', 3);\n    },\n    refresh: (calendarId: string, eventType?: string) => {\n      return new Promise((resolve) => {\n        console.log('获取日程信息...', eventType);\n        setTimeout(() => {\n          resolve({\n            status: 'success',\n            data: calendarData,\n          });\n        }, 10);\n      });\n    },\n    ...config,\n  };\n};\n\n\ndescribe('bi/calendarCard/mobile/ui', () => {\n  beforeAll(() => {\n    // 防止被 componentDidCatch catch 的 error 被控制台输出\n    jest.spyOn(console, 'error');\n    // @ts-ignore\n    console.error.mockImplementation(() => { });\n  });\n\n  afterAll(() => {\n    // @ts-ignore\n    console.error.mockRestore();\n  });\n\n  afterEach(() => {\n    cleanup();\n  });\n\n  describe('bi/calendarCard/mobile/ui', () => {\n    test('正常渲染', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'calendar', height: 350, metadata: calendarData }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByTestId, queryAllByTestId } = await renderEditor(\n        <Editor defaultValue={value} calendarConfig={createCalendarConfig({})} />,\n      );\n      const subject = queryByTestId('calendar-subject').textContent;\n      expect(subject).toBe(calendarData.subject);\n      const receiverName = queryAllByTestId('calendar-receiver')[0].textContent;\n      expect(receiverName.includes(calendarData.topReceivers[0].name)).toBe(true);\n    });\n\n    test('点击交互', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'calendar', height: 350, metadata: calendarData }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const handleState: Record<string, any> = {};\n      const { queryByTestId, queryAllByTestId, findByTestId } = await renderEditor(\n        <Editor\n          defaultValue={value}\n          calendarConfig={createCalendarConfig({\n            getContainerWidthInPC: () => {\n              return 640;\n            },\n            jumpToCalendar: (link?: string, eventType?: string) => {\n              handleState.jumpToCalendar = { link, eventType };\n            },\n            openProfile: (uid: number) => {\n              handleState.openProfile = uid;\n            },\n            onRefreshSuccess: () => {\n              handleState.onRefreshSuccess = true;\n            },\n            refresh: (calendarId: string, eventType?: string) => {\n              handleState.refresh = { calendarId, eventType };\n              return new Promise((resolve) => {\n                setTimeout(() => {\n                  resolve({\n                    status: 'success',\n                    data: calendarData,\n                  });\n                }, 10);\n              });\n            },\n          })}\n        />,\n      );\n      // 首次打开自动刷新数据\n      expect(handleState.refresh.calendarId).toBe(calendarData.calendarId);\n      expect(!handleState.refresh.eventType).toBe(true);\n      // 点击标题\n      const subject = queryByTestId('calendar-subject');\n      fireEvent.mouseDown(subject);\n      expect(handleState.jumpToCalendar.link).toBe(calendarData.redirectUrl);\n      expect(handleState.jumpToCalendar.eventType).toBe('title');\n      // 点击刷新\n      // const refreshIcon = await findByTestId('Icon_refresh');\n      // fireEvent.mouseDown(refreshIcon);\n      // expect(handleState.refresh.eventType).toBe('click');\n      // 点击应邀人\n      const receiver = queryAllByTestId('calendar-receiver')[0];\n      fireEvent.mouseDown(receiver);\n      expect(handleState.openProfile).toBe(calendarData.topReceivers[0].uid);\n    });\n  });\n});\n"],"file":"mobile.ui.test.js"}