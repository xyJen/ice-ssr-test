{"version":3,"sources":["../../../../src/__tests__/calendarCard/behaviour.test.tsx"],"names":["createBiPlugins","CalendarCardPlugin","plugins","calendarCard","locale","refresh","refreshTips","receiverCount","viewCalendardetails","noresponse","received","refused","pending","organizer","getContainerWidthInPC","array","describe","test","value","output","metadata","controller","Controller","create","command","cardType","height","subject","actual","toJSON","preserveSelections","expected","setValue","expect","toEqual","Commands","moveToRangeOfDocument"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/** @jsx jsx */\nimport { jsx } from '@ali/4ever-dev-test';\nimport { Controller, Commands, Value } from '@ali/4ever-cangjie';\nimport { createCustomizedBiPlugins, CalendarCardPlugin } from '../..';\n\nconst createBiPlugins = createCustomizedBiPlugins({\n  CalendarCardPlugin,\n});\nconst plugins = createBiPlugins({\n  calendarCard: {\n    locale: {\n      refresh: '刷新',\n      refreshTips: '日程卡片有更新',\n      receiverCount: '等{count}人参会',\n      viewCalendardetails: '查看日程详情',\n      noresponse: '未响应',\n      received: '已接收',\n      refused: '已拒绝',\n      pending: '待定',\n      organizer: '组织人',\n    },\n    getContainerWidthInPC: () => {\n      return 640;\n    }\n  },\n}).array;\n\ndescribe('Bi/calendarCard/behaviour', () => {\n  test('插入卡片', () => {\n    const value = ((\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            1234\n            <cursor />\n            56789\n          </block>\n        </document>\n      </value>\n    ) as unknown) as Value;\n    const output = ((\n      <value>\n      <document>\n        <block type=\"paragraph\">1234</block>\n        <block type=\"card\" data={{\"cardType\":'calendar', 'height': 300,metadata:{'subject': 'test'}}}></block>\n        <block type=\"paragraph\"><cursor />56789</block>\n      </document>\n    </value>\n    ) as unknown) as Value;\n\n    const controller = Controller.create({\n      value,\n      plugins,\n    });\n    controller.command('insertCard', { cardType: 'calendar', height: 300, metadata: { subject: 'test' } });\n\n    const actual = controller.value.toJSON({ preserveSelections: true });\n    const expected = controller\n      .setValue(output)\n      .value.toJSON({ preserveSelections: true });\n    expect(actual).toEqual(expected);\n  });\n  test('在正文全选，可以选中卡片', () => {\n    const value = ((\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            Start Paragraph\n            <cursor />\n          </block>\n          <block type=\"card\" />\n          <block type=\"card\" />\n          <block type=\"paragraph\">End Paragraph</block>\n        </document>\n      </value>\n    ) as unknown) as Value;\n\n    const output = ((\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            <anchor />\n            Start Paragraph\n          </block>\n          <block type=\"card\" />\n          <block type=\"card\" />\n          <block type=\"paragraph\">\n            End Paragraph\n            <focus />\n          </block>\n        </document>\n      </value>\n    ) as unknown) as Value;\n    const controller = Controller.create({\n      value,\n      plugins,\n    });\n    controller.command(Commands.moveToRangeOfDocument);\n\n    const actual = controller.value.toJSON({ preserveSelections: true });\n    const expected = controller\n      .setValue(output)\n      .value.toJSON({ preserveSelections: true });\n    expect(actual).toEqual(expected);\n  });\n});\n"],"file":"behaviour.test.js"}