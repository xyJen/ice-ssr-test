{"version":3,"sources":["../../../../src/__tests__/calendarCard/ui.test.tsx"],"names":["createBiPlugins","biPlugins","CalendarCardPlugin","Editor","props","defaultValue","calendarConfig","value","setValue","React","useState","plugins","useMemo","calendarCard","handleChange","useCallback","changed","calendarData","calendarId","comment","totalCount","place","startTime","endTime","timezone","time","subject","organizer","uid","topReceivers","name","type","avatarMediaId","redirectUrl","attachments","fileName","createCalendarConfig","config","locale","refresh","refreshTips","receiverCount","viewCalendardetails","noresponse","received","refused","pending","getContainerWidthInPC","jumpToCalendar","link","eventType","openProfile","jumpToAttachment","url","onRefreshSuccess","Promise","resolve","setTimeout","status","data","describe","beforeAll","jest","spyOn","console","error","mockImplementation","afterAll","mockRestore","afterEach","test","cardType","height","metadata","queryByTestId","queryAllByTestId","textContent","expect","toBe","receiverName","includes","isInitialized","findByText","message","tips","retry_time","handleState","container","fireEvent","mouseDown","gotoIcon","refreshIcon","querySelector","receiver","queryByText","isUpdate","newSubject","isPlaceholder","renderCreateCalendarBtn","btn","result","initCalendar","click"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/** @jsx jsx */\nimport * as React from 'react';\nimport { Value } from '@ali/4ever-cangjie';\nimport { createCustomizedBiPlugins, CalendarCardPlugin, plugins as biPlugins } from '../..';\nimport { cleanup } from '@testing-library/react';\nimport '@testing-library/jest-dom/extend-expect';\nimport Provider from '../../provider';\nimport Content from '../../content';\nimport { renderEditor, fireEvent, jsx } from '@ali/4ever-dev-test';\n\ninterface EditorProps {\n  defaultValue: Value;\n  calendarConfig: any;\n}\n\nconst createBiPlugins = createCustomizedBiPlugins({\n  ...biPlugins,\n  CalendarCardPlugin,\n} as any);\n\nconst Editor: React.FC<EditorProps> = (props) => {\n  const { defaultValue, calendarConfig } = props;\n  const [value, setValue] = React.useState(defaultValue);\n  const plugins = React.useMemo(() => {\n    return createBiPlugins({\n      calendarCard: calendarConfig,\n    });\n  }, []);\n\n  const handleChange = React.useCallback((changed) => {\n    setValue(changed.value);\n  }, []);\n\n  return (\n    <Provider value={value} onChange={handleChange} plugins={plugins} autoFocus>\n      <Content />\n    </Provider>\n  );\n};\n\nconst calendarData = {\n  calendarId: '18700362',\n  comment: '超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注超长备注',\n  totalCount: 14,\n  place: '10-3-3',\n  startTime: 1598281200000,\n  endTime: 1598284800000,\n  timezone: 'Asia/Shanghai',\n  time: '08月24日 23:00 - 08月25日 00:00',\n  subject: '超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题超长标题',\n  organizer: [{ uid: 3452016 }],\n  topReceivers: [\n    {\n      name: '陌',\n      type: 1,\n      uid: 3146067,\n    },\n    {\n      uid: 3452016,\n      name: '童岭',\n      avatarMediaId: 'https://static.dingtalk.com/media/lADPBbCc1h2tUUPNA8DNA74_958_960.jpg_60x60q90.jpg',\n      type: 1,\n    },\n    {\n      name: '董旭',\n      type: 1,\n      uid: 3166262,\n    },\n    {\n      name: '张卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚卫刚',\n      type: 1,\n      uid: 3452113,\n    },\n    {\n      name: '1598',\n      type: 1,\n      uid: 3452114,\n    },\n    {\n      name: '170****2451',\n      type: 1,\n      uid: 3451114,\n    },\n    {\n      name: 'Benjy',\n      type: 1,\n      uid: 2855028,\n    },\n    {\n      name: '张卫刚',\n      type: 1,\n      uid: 3452184,\n    },\n    {\n      name: '150****2598',\n      type: 1,\n      uid: 3452115,\n    },\n    {\n      name: '董旭',\n      type: 1,\n      uid: 3166266,\n    },\n    {\n      name: '170****2451',\n      type: 1,\n      uid: 3451117,\n    },\n    {\n      name: 'Benjy',\n      type: 1,\n      uid: 2855039,\n    },\n    {\n      name: '150****2598',\n      type: 1,\n      uid: 3452414,\n    }, {\n      name: 'Benjy',\n      type: 1,\n      uid: 2855028,\n    },\n    {\n      name: '张卫刚',\n      type: 1,\n      uid: 3452184,\n    },\n    {\n      name: '150****2598',\n      type: 1,\n      uid: 3452115,\n    },\n    {\n      name: '董旭',\n      type: 1,\n      uid: 3166266,\n    },\n    {\n      name: '170****2451',\n      type: 1,\n      uid: 3451117,\n    },\n    {\n      name: 'Benjy',\n      type: 1,\n      uid: 2855039,\n    },\n    {\n      name: '150****2598',\n      type: 1,\n      uid: 3452414,\n    },\n    {\n      name: '董旭',\n      type: 1,\n      uid: 3166562,\n    },\n  ],\n  redirectUrl: 'dingtalk://dingtalkclient/action/open_mini_app?miniAppId=2018112162280005&ddMode=push&mainTask=true&keepAlive=false&newCalendar=1&page=pages%2Fdetail%2Findex%3FuniqueId%3DM2JMK2NUUlYzODVTdEpmeXFLYThhZz09&fallback_url=dingtalk%3A%2F%2Fdingtalkclient%2Fpage%2Fcalendar_detail%3Fid%3D0%26uniqueId%3DM2JMK2NUUlYzODVTdEpmeXFLYThhZz09',\n  attachments: [\n    {\n      type: 7,\n      fileName: '市政府工作会议纪要.docx',\n    },\n    {\n      type: 1,\n      fileName: '市政府工作会议纪要2.docx',\n    },\n    {\n      type: 2,\n      fileName: '市政府工作会议纪要3.docx',\n    }, {\n      type: 3,\n      fileName: '市政府工作会议纪要4.docx',\n    },\n  ],\n};\n\nconst createCalendarConfig = (config: any) => {\n  return {\n    locale: {\n      refresh: '刷新',\n      refreshTips: '日程卡片有更新',\n      receiverCount: '等{count}人参会',\n      viewCalendardetails: '查看日程详情',\n      noresponse: '未响应',\n      received: '已接收',\n      refused: '已拒绝',\n      pending: '待定',\n      organizer: '组织人',\n    },\n    getContainerWidthInPC: () => {\n      return 440;\n    },\n    jumpToCalendar: (link?: string, eventType?: string) => {\n      console.log('跳转到日程的链接为：', link, eventType);\n    },\n    openProfile: (uid: number) => {\n      console.log('打开Profile参数为：', uid);\n    },\n    jumpToAttachment: (url: string, eventType?: string) => {\n      console.log('打开附件的地址为：', url, eventType);\n    },\n    onRefreshSuccess: () => {\n      console.log('刷新成功！', 3);\n    },\n    refresh: (calendarId: string, eventType?: string) => {\n      return new Promise(resolve => {\n        console.log('获取日程信息...', eventType);\n        setTimeout(() => {\n          resolve({\n            status: 'success',\n            data: calendarData,\n          });\n        }, 150);\n      });\n    },\n    ...config,\n  };\n};\n\n\ndescribe('Bi/card/ui', () => {\n  beforeAll(() => {\n    // 防止被 componentDidCatch catch 的 error 被控制台输出\n    jest.spyOn(console, 'error');\n    // @ts-ignore\n    console.error.mockImplementation(() => { });\n  });\n\n  afterAll(() => {\n    // @ts-ignore\n    console.error.mockRestore();\n  });\n\n  afterEach(() => {\n    cleanup();\n  });\n\n  describe('Bi/CalendarCard/UI', () => {\n    test('正常渲染', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'calendar', height: 350, metadata: calendarData }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByTestId, queryAllByTestId } = await renderEditor(\n        <Editor defaultValue={value} calendarConfig={createCalendarConfig({})} />,\n      );\n      const subject = queryByTestId('calendar-subject').textContent;\n      expect(subject).toBe(calendarData.subject);\n      const receiverName = queryAllByTestId('calendar-receiver')[0].textContent;\n      expect(receiverName.includes(calendarData.topReceivers[0].name)).toBe(true);\n    });\n\n    test('卡片请求报错时弹出 Tips', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'calendar', height: 350, metadata: { ...calendarData, isInitialized: true } }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { findByText } = await renderEditor(\n        <Editor defaultValue={value} calendarConfig={createCalendarConfig({\n          refresh: (calendarId: string, eventType?: string) => {\n            return new Promise(resolve => {\n              setTimeout(() => {\n                resolve({\n                  status: 'error',\n                  message: '日程卡片获取信息失败',\n                  data: {},\n                });\n              }, 150);\n            });\n          },\n        })} />,\n      );\n      const tips = await findByText('日程卡片获取信息失败');\n      expect(!!tips).toBe(true);\n    });\n\n    test('卡片初始化请求报错时不会重复请求', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'calendar', height: 350, metadata: { calendarId: '18700362' } }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      let retry_time = 0;\n      const { findByText } = await renderEditor(\n        <Editor defaultValue={value} calendarConfig={createCalendarConfig({\n          refresh: (calendarId: string, eventType?: string) => {\n            retry_time += 1;\n            return new Promise(resolve => {\n              setTimeout(() => {\n                resolve({\n                  status: 'error',\n                  message: '日程卡片获取信息失败',\n                  data: {},\n                });\n              }, 10);\n            });\n          },\n        })} />,\n      );\n      const tips = await findByText('日程卡片获取信息失败');\n      expect(!!tips).toBe(true);\n      // 确保请求出错后不会进行二次请求\n      expect(retry_time).toBe(1);\n    });\n\n    test('点击交互', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'calendar', height: 350, metadata: calendarData }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const handleState: Record<string, any> = {};\n      const { queryByTestId, queryAllByTestId, container } = await renderEditor(\n        <Editor\n          defaultValue={value}\n          calendarConfig={createCalendarConfig({\n            getContainerWidthInPC: () => {\n              return 640;\n            },\n            jumpToCalendar: (link?: string, eventType?: string) => {\n              handleState.jumpToCalendar = { link, eventType };\n            },\n            openProfile: (uid: number) => {\n              handleState.openProfile = uid;\n            },\n            onRefreshSuccess: () => {\n              handleState.onRefreshSuccess = true;\n            },\n            refresh: (calendarId: string, eventType?: string) => {\n              handleState.refresh = { calendarId, eventType };\n              return new Promise(resolve => {\n                setTimeout(() => {\n                  resolve({\n                    status: 'success',\n                    data: calendarData,\n                  });\n                }, 150);\n              });\n            },\n          })} />,\n      );\n      // 首次打开自动刷新数据\n      expect(handleState.refresh.calendarId).toBe(calendarData.calendarId);\n      expect(!handleState.refresh.eventType).toBe(true);\n      // 点击标题\n      const subject = queryByTestId('calendar-subject');\n      fireEvent.mouseDown(subject);\n      expect(handleState.jumpToCalendar.link).toBe(calendarData.redirectUrl);\n      expect(handleState.jumpToCalendar.eventType).toBe('title');\n      // 点击goto\n      const gotoIcon = queryByTestId('Icon_goto');\n      fireEvent.mouseDown(gotoIcon);\n      expect(handleState.jumpToCalendar.eventType).toBe('icon');\n      // 点击刷新\n      const refreshIcon = container.querySelector('.weicon-LoadingNormal');\n      fireEvent.mouseDown(refreshIcon);\n      expect(handleState.refresh.eventType).toBe('click');\n      // 点击应邀人\n      const receiver = queryAllByTestId('calendar-receiver')[0];\n      fireEvent.mouseDown(receiver);\n      expect(handleState.openProfile).toBe(calendarData.topReceivers[0].uid);\n    });\n\n    test('已有日程数据，点击刷新 icon 写入数据', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'calendar', height: 350, metadata: { ...calendarData, isInitialized: true, subject: '测试日程' } }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { findByText, queryByTestId, queryByText } = await renderEditor(\n        <Editor\n          defaultValue={value}\n          calendarConfig={createCalendarConfig({\n            refresh: (calendarId: string, eventType?: string) => {\n              return new Promise(resolve => {\n                resolve({\n                  status: 'success',\n                  data: { ...calendarData, isInitialized: true, subject: '更新后的日程标题' },\n                });\n              });\n            },\n          })} />,\n      );\n      const isUpdate = await queryByText('日程卡片有更新');\n      expect(!!isUpdate).toBe(true);\n      // 点击刷新按钮\n      const refreshIcon = queryByTestId('Icon_refresh');\n      fireEvent.mouseDown(refreshIcon);\n      // 验证标题是否已更新\n      const newSubject = await findByText('更新后的日程标题');\n      expect(!!newSubject).toBe(true);\n    });\n  });\n\n  describe('Bi/CalendarCard/UI/Placeholder', () => {\n    test('正常渲染 Placeholder', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'calendar', height: 350, metadata: { isPlaceholder: true } }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByText } = await renderEditor(\n        <Editor\n          defaultValue={value}\n          calendarConfig={createCalendarConfig({\n            renderCreateCalendarBtn: () => (<button>点击创建日程</button>)\n          })} />,\n      );\n      const btn = queryByText('点击创建日程');\n      expect(!!btn).toBe(true);\n    });\n\n    test('点击按钮创建日程', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'calendar', height: 350, metadata: { isPlaceholder: true } }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      let result = null;\n\n      const { queryByText } = await renderEditor(\n        <Editor\n          defaultValue={value}\n          calendarConfig={createCalendarConfig({\n            renderCreateCalendarBtn: ({ initCalendar }) => (<button\n              onClick={() => {\n                result = initCalendar({\n                  \"calendarId\": \"18700362\",\n                  \"startTime\": 1598281200000,\n                  \"endTime\": 1598284800000,\n                  \"timezone\": \"Asia/Shanghai\",\n                  \"subject\": \"placeholder日程\",\n                });\n              }}\n            >点击创建日程</button>)\n          })} />,\n      );\n      const btn = await queryByText('点击创建日程');\n      fireEvent.click(btn);\n      expect(!!result).toBe(true);\n      // 确保日程已经渲染完成\n      await result;\n      // 确保日程渲染正确\n      const subject = queryByText('placeholder日程');\n      expect(!!subject).toBe(true);\n    });\n  });\n});\n"],"file":"ui.test.js"}