"use strict";

var _everDevTest = require("@ali/4ever-dev-test");

var _everCangjie = require("@ali/4ever-cangjie");

var _ = require("../..");

/* eslint-disable import/no-extraneous-dependencies */

/** @jsx jsx */
const createBiPlugins = (0, _.createCustomizedBiPlugins)({
  CalendarCardPlugin: _.CalendarCardPlugin
});
const plugins = createBiPlugins({
  calendarCard: {
    locale: {
      refresh: '刷新',
      refreshTips: '日程卡片有更新',
      receiverCount: '等{count}人参会',
      viewCalendardetails: '查看日程详情',
      noresponse: '未响应',
      received: '已接收',
      refused: '已拒绝',
      pending: '待定',
      organizer: '组织人'
    },
    getContainerWidthInPC: () => {
      return 640;
    }
  }
}).array;

var _ref = (0, _everDevTest.jsx)("value", null, (0, _everDevTest.jsx)("document", null, (0, _everDevTest.jsx)("block", {
  type: "paragraph"
}, "1234", (0, _everDevTest.jsx)("cursor", null), "56789")));

var _ref2 = (0, _everDevTest.jsx)("block", {
  type: "paragraph"
}, "1234");

var _ref3 = (0, _everDevTest.jsx)("block", {
  type: "paragraph"
}, (0, _everDevTest.jsx)("cursor", null), "56789");

var _ref4 = (0, _everDevTest.jsx)("value", null, (0, _everDevTest.jsx)("document", null, (0, _everDevTest.jsx)("block", {
  type: "paragraph"
}, "Start Paragraph", (0, _everDevTest.jsx)("cursor", null)), (0, _everDevTest.jsx)("block", {
  type: "card"
}), (0, _everDevTest.jsx)("block", {
  type: "card"
}), (0, _everDevTest.jsx)("block", {
  type: "paragraph"
}, "End Paragraph")));

var _ref5 = (0, _everDevTest.jsx)("value", null, (0, _everDevTest.jsx)("document", null, (0, _everDevTest.jsx)("block", {
  type: "paragraph"
}, (0, _everDevTest.jsx)("anchor", null), "Start Paragraph"), (0, _everDevTest.jsx)("block", {
  type: "card"
}), (0, _everDevTest.jsx)("block", {
  type: "card"
}), (0, _everDevTest.jsx)("block", {
  type: "paragraph"
}, "End Paragraph", (0, _everDevTest.jsx)("focus", null))));

describe('Bi/calendarCard/behaviour', () => {
  test('插入卡片', () => {
    const value = _ref;
    const output = (0, _everDevTest.jsx)("value", null, (0, _everDevTest.jsx)("document", null, _ref2, (0, _everDevTest.jsx)("block", {
      type: "card",
      data: {
        "cardType": 'calendar',
        'height': 300,
        metadata: {
          'subject': 'test'
        }
      }
    }), _ref3));

    const controller = _everCangjie.Controller.create({
      value,
      plugins
    });

    controller.command('insertCard', {
      cardType: 'calendar',
      height: 300,
      metadata: {
        subject: 'test'
      }
    });
    const actual = controller.value.toJSON({
      preserveSelections: true
    });
    const expected = controller.setValue(output).value.toJSON({
      preserveSelections: true
    });
    expect(actual).toEqual(expected);
  });
  test('在正文全选，可以选中卡片', () => {
    const value = _ref4;
    const output = _ref5;

    const controller = _everCangjie.Controller.create({
      value,
      plugins
    });

    controller.command(_everCangjie.Commands.moveToRangeOfDocument);
    const actual = controller.value.toJSON({
      preserveSelections: true
    });
    const expected = controller.setValue(output).value.toJSON({
      preserveSelections: true
    });
    expect(actual).toEqual(expected);
  });
});
//# sourceMappingURL=behaviour.test.js.map