{"version":3,"sources":["../../../src/__tests__/editor.tsx"],"names":["MOCK_UPLOADED_IMAGE","SidebarBox","styled","div","SidebarCloseButton","imagePreviewMockFn","jest","fn","imageDownloadMockFn","src","imageConfig","locale","image","previewImage","downloadImage","selectImage","uploadImage","transferImageURL","shouldTransferImageURL","enableLazyLoad","inlineToolbarLayout","toolButtons","name","isTesting","inlineToolbarMore","type","TYPE_MENU_ITEM","menuKey","createBiPlugins","plugins","callout","CalloutPlugin","ListGroupPlugin","HeadingGroupPlugin","findAndReplace","FindAndReplacePlugin","mobileLayout","EditorWidthLegacyToolbar","React","Component","constructor","props","mention","getMentionId","renderItem","user","display","onMentionSearch","keyWord","changer","handleMentionSearch","onMentionSelect","suggestion","handleMentionSelect","embed","onEnlarge","url","onPrint","onDownload","onPreview","handlePreviewFile","onUpload","file","handleUploadFile","clipboard","pastePanel","sticker","enableSticker","imageCustomConfig","sideBarTrigger","open","setState","showSidebar","draggableArea","top","right","bottom","left","initialPosition","marginTop","marginRight","isFindOnly","role","pluginConfigs","value","state","changed","defaultSuggestions","mockSuggestions","i","push","login","avatarUrl","handleChange","change","onChange","Promise","resolve","reject","size","Error","setTimeout","previewUrl","handleCloseSidebar","getScrollableContent","document","querySelector","body","getScrollableContainer","documentElement","defaultValue","render","autoFocus","controllerRef","singleLayout","doubleLayout","docStyle","NewToolbarConfig","defaultSingleLayout","defaultDoubleLayout","EditorWithToolbarNext","dataUid"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport styled from 'styled-components';\nimport { TYPE_MENU_ITEM, Sidebar, IToolBar } from '@ali/4ever-component';\nimport { Value, Change, Controller, DocStyle } from '@ali/4ever-cangjie';\nimport {\n  Provider,\n  Content,\n  NewToolbar,\n  createCustomizedBiPlugins,\n  locale_zh_CN as locale,\n  NewToolbarConfig,\n  MobileToolbar,\n  mobileLayout,\n  HeadingToolbar,\n  CalloutPlugin,\n} from '..';\nimport {\n  selectImage,\n  uploadImage,\n  transferImageURL,\n  shouldTransferImageURL,\n} from './image/utils';\nimport { ImagePluginConfig } from '../plugins/image/types';\nimport plugins from '../plugins';\nimport ListGroupPlugin from '../plugins/listGroup';\nimport HeadingGroupPlugin from '../plugins/headingGroup';\nimport { createFindAndReplacePlugin as FindAndReplacePlugin } from '@ali/4ever-plugin-find-and-replace';\n\nconst MOCK_UPLOADED_IMAGE =\n  'https://alidocs.oss-cn-zhangjiakou.aliyuncs.com/a/12338368861/2252263652/406998a4-df1e-422c-985f-2a1b06d5b8ab';\n\ninterface Member {\n  name: string;\n  login: string;\n  avatarUrl: string;\n}\n\nconst SidebarBox = styled.div`\n  position: fixed;\n  top: 0px;\n  bottom: 0px;\n  right: 0;\n  width: 300px;\n  overflow: auto;\n  background: #fff;\n  box-shadow: 1px 0 10px 0px rgba(0, 0, 0, 0.12);\n  padding-top: 30px;\n  z-index: 999;\n`;\n\nconst SidebarCloseButton = styled.div`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  width: 28px;\n  height: 28px;\n`;\nexport interface EditorProps {\n  defaultValue: Value;\n  dataUid?: string | number | undefined;\n  onChange?: (change: Change) => void;\n  autoFocus?: boolean;\n  controllerRef?: (controller: Controller) => void;\n  singleLayout?: any;\n  doubleLayout?: any;\n  plugins?: any;\n  docStyle?: DocStyle;\n  imageCustomConfig?: Partial<ImagePluginConfig>;\n  pluginConfigs?: Record<string, any>;\n}\n\ninterface EditorState {\n  value: Value;\n  defaultSuggestions: Member[];\n  suggestions: Member[];\n  showSidebar: boolean;\n}\n\nexport const imagePreviewMockFn = jest.fn();\nexport const imageDownloadMockFn = jest.fn((src) => {\n  console.log('download', src);\n});\nexport const imageConfig = {\n  ...locale.image,\n  previewImage: imagePreviewMockFn,\n  downloadImage: imageDownloadMockFn,\n  selectImage,\n  uploadImage,\n  transferImageURL,\n  shouldTransferImageURL,\n  enableLazyLoad: false,\n  inlineToolbarLayout: [\n    {\n      toolButtons: [\n        {\n          name: 'image.reset',\n        },\n        {\n          name: 'image.border',\n        },\n      ],\n    },\n    {\n      toolButtons: [\n        {\n          name: 'image.crop',\n        },\n        {\n          name: 'image.rotateReverse',\n        },\n        {\n          name: 'image.rotate',\n        },\n        {\n          name: 'image.style',\n        },\n        {\n          name: 'image.more',\n        },\n      ],\n    },\n  ],\n  isTesting: true,\n  inlineToolbarMore: [\n    {\n      type: TYPE_MENU_ITEM,\n      menuKey: 'image.download',\n    },\n    {\n      type: TYPE_MENU_ITEM,\n      menuKey: 'image.options',\n    },\n  ],\n};\n\nexport const createBiPlugins = createCustomizedBiPlugins({\n  ...plugins,\n  callout: CalloutPlugin,\n  ListGroupPlugin,\n  HeadingGroupPlugin,\n  findAndReplace: FindAndReplacePlugin,\n});\n\nexport class EditorWidthLegacyToolbar extends React.Component<EditorProps, EditorState> {\n  // eslint-disable-next-line react/sort-comp\n\n  private readonly plugins = createBiPlugins({\n    ...locale,\n    mention: {\n      ...locale.mention,\n      getMentionId() {\n        return '';\n      },\n      renderItem(user) {\n        return <span style={{ display: 'flex' }}>{user.name}</span>;\n      },\n      onMentionSearch: (keyWord, changer) =>\n        this.handleMentionSearch(keyWord, changer),\n      onMentionSelect: (suggestion, changer) =>\n        this.handleMentionSelect(suggestion, changer),\n    },\n    embed: {\n      ...locale.embed,\n      onEnlarge: (url: string) => console.log('放大', url),\n      onPrint: (url: string) => console.log('打印', url),\n      onDownload: (url: string) => console.log('下载', url),\n      onPreview: (url: string) => this.handlePreviewFile(url),\n      onUpload: (file: File) => this.handleUploadFile(file),\n    },\n    clipboard: {\n      pastePanel: true,\n    },\n    sticker: {\n      enableSticker: true,\n    },\n    image: {\n      ...imageConfig,\n      ...this.props.imageCustomConfig,\n    },\n    sideBarTrigger: {\n      open: () => {\n        this.setState({\n          showSidebar: true,\n        });\n      },\n    },\n    findAndReplace: {\n      locale: locale.findAndReplace as any,\n      draggableArea: {\n        top: 41,\n        right: 8,\n        bottom: 8,\n        left: 8,\n      },\n      initialPosition: {\n        marginTop: 0,\n        marginRight: 50,\n      },\n      isFindOnly: false,\n      role: '',\n    },\n    ...this.props.pluginConfigs,\n  });\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: props.defaultValue,\n      defaultSuggestions: [\n        {\n          name: '又清0',\n          login: '0',\n          avatarUrl:\n            'https://static.dingtalk.com/media/lADPBbCc1h2tUUPNA8DNA74_958_960.jpg_60x60q90.jpg',\n        },\n      ],\n      showSidebar: false,\n    };\n  }\n\n  handleMentionSearch = (keyWord, changer) => {\n    const { value } = this.state;\n    let changed = null;\n    if (!keyWord) {\n      changed = changer(value, this.state.defaultSuggestions);\n    } else {\n      const mockSuggestions: Member[] = [];\n      for (let i = 0; i < 10; i += 1) {\n        mockSuggestions.push({\n          name: `又清 ${i}`,\n          login: `${i}`,\n          avatarUrl:\n            'https://static.dingtalk.com/media/lADPBbCc1h2tUUPNA8DNA74_958_960.jpg_60x60q90.jpg',\n        });\n      }\n      changed = changer(value, mockSuggestions);\n    }\n    this.handleChange(changed);\n  };\n\n  handleMentionSelect = (suggestion, changer) => {\n    const changed = changer(this.state.value, suggestion);\n    this.handleChange(changed);\n  };\n\n  handleChange = (change) => {\n    this.setState({ value: change.value });\n    this.props.onChange && this.props.onChange(change);\n  };\n\n  handleUploadFile = (file) => {\n    console.log('upload file', file);\n    return new Promise((resolve, reject) => {\n      if (file.size > 20 * 1000 * 1000) {\n        reject(new Error('文件大小不能大于20M'));\n        return;\n      }\n      setTimeout(() => resolve({ url: MOCK_UPLOADED_IMAGE }), 3000);\n      // setTimeout(() => reject(new Error('网络错误！')), 1000);\n    });\n  };\n\n  handlePreviewFile = (url) => {\n    console.log('preview file', url);\n    return new Promise((resolve) => {\n      setTimeout(\n        () =>\n          resolve({\n            previewUrl:\n              'https://yuque.antfin-inc.com/office/lark/0/2019/docx/152/1573008420622-57519a6f-f7e0-4d74-a49d-9e27029293ef.docx?view=doc_embed',\n          }),\n        1000,\n      );\n    });\n  };\n\n  handleCloseSidebar = () => {\n    this.setState({\n      showSidebar: false,\n    });\n  };\n\n  getScrollableContent = () => {\n    return (\n      document.querySelector('[data-cangjie-content-wrapper=\"true\"]') ||\n      document.body\n    );\n  };\n\n  getScrollableContainer = () => {\n    return document.documentElement || document.body;\n  };\n\n  render() {\n    const {\n      autoFocus = true,\n      controllerRef,\n      singleLayout,\n      doubleLayout,\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      plugins,\n      docStyle,\n    } = this.props;\n    const { value } = this.state;\n    return (\n      <Provider\n        plugins={plugins || this.plugins}\n        value={value}\n        onChange={this.handleChange}\n        autoFocus={autoFocus}\n        controllerRef={controllerRef}\n        docStyle={docStyle}\n      >\n        <NewToolbar\n          fineAdaptation={false}\n          singleLayout={singleLayout || NewToolbarConfig.defaultSingleLayout}\n          doubleLayout={doubleLayout || NewToolbarConfig.defaultDoubleLayout}\n        />\n        <MobileToolbar layout={mobileLayout} useVisualBox />\n        <Content\n          tabIndex={0}\n          getScrollableContent={this.getScrollableContent}\n          getScrollableContainer={this.getScrollableContainer}\n        />\n        {this.state.showSidebar && (\n          <SidebarBox data-testid=\"image-sidebar\">\n            <SidebarCloseButton onClick={this.handleCloseSidebar}>\n              X\n            </SidebarCloseButton>\n            <Sidebar type=\"image.imageOptions\" />\n          </SidebarBox>\n        )}\n      </Provider>\n    );\n  }\n}\n\nexport interface EditorWithToolbarNextProps extends Omit<EditorProps, 'singleLayout' | 'doubleLayout'> {\n  doubleLayout?: IToolBar['doubleLayout'];\n  singleLayout?: IToolBar['singleLayout'];\n}\n\nexport interface EditorWithToolbarNextState extends EditorState {\n}\n\n// eslint-disable-next-line react/no-multi-comp\nexport default class EditorWithToolbarNext extends React.Component<EditorWithToolbarNextProps, EditorWithToolbarNextState> {\n  // eslint-disable-next-line react/sort-comp\n\n  private readonly plugins = createBiPlugins({\n    ...locale,\n    mention: {\n      ...locale.mention,\n      getMentionId() {\n        return '';\n      },\n      renderItem(user) {\n        return <span style={{ display: 'flex' }}>{user.name}</span>;\n      },\n      onMentionSearch: (keyWord, changer) =>\n        this.handleMentionSearch(keyWord, changer),\n      onMentionSelect: (suggestion, changer) =>\n        this.handleMentionSelect(suggestion, changer),\n    },\n    embed: {\n      ...locale.embed,\n      onEnlarge: (url: string) => console.log('放大', url),\n      onPrint: (url: string) => console.log('打印', url),\n      onDownload: (url: string) => console.log('下载', url),\n      onPreview: (url: string) => this.handlePreviewFile(url),\n      onUpload: (file: File) => this.handleUploadFile(file),\n    },\n    clipboard: {\n      pastePanel: true,\n    },\n    sticker: {\n      enableSticker: true,\n    },\n    image: {\n      ...imageConfig,\n      ...this.props.imageCustomConfig,\n    },\n    sideBarTrigger: {\n      open: () => {\n        this.setState({\n          showSidebar: true,\n        });\n      },\n    },\n    findAndReplace: {\n      locale: locale.findAndReplace as any,\n      draggableArea: {\n        top: 41,\n        right: 8,\n        bottom: 8,\n        left: 8,\n      },\n      initialPosition: {\n        marginTop: 0,\n        marginRight: 50,\n      },\n      isFindOnly: false,\n      role: '',\n    },\n    ...this.props.pluginConfigs,\n  });\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: props.defaultValue,\n      defaultSuggestions: [\n        {\n          name: '又清0',\n          login: '0',\n          avatarUrl:\n            'https://static.dingtalk.com/media/lADPBbCc1h2tUUPNA8DNA74_958_960.jpg_60x60q90.jpg',\n        },\n      ],\n      showSidebar: false,\n    };\n  }\n\n  handleMentionSearch = (keyWord, changer) => {\n    const { value } = this.state;\n    let changed = null;\n    if (!keyWord) {\n      changed = changer(value, this.state.defaultSuggestions);\n    } else {\n      const mockSuggestions: Member[] = [];\n      for (let i = 0; i < 10; i += 1) {\n        mockSuggestions.push({\n          name: `又清 ${i}`,\n          login: `${i}`,\n          avatarUrl:\n            'https://static.dingtalk.com/media/lADPBbCc1h2tUUPNA8DNA74_958_960.jpg_60x60q90.jpg',\n        });\n      }\n      changed = changer(value, mockSuggestions);\n    }\n    this.handleChange(changed);\n  };\n\n  handleMentionSelect = (suggestion, changer) => {\n    const changed = changer(this.state.value, suggestion);\n    this.handleChange(changed);\n  };\n\n  handleChange = (change) => {\n    this.setState({ value: change.value });\n    this.props.onChange && this.props.onChange(change);\n  };\n\n  handleUploadFile = (file) => {\n    console.log('upload file', file);\n    return new Promise((resolve, reject) => {\n      if (file.size > 20 * 1000 * 1000) {\n        reject(new Error('文件大小不能大于20M'));\n        return;\n      }\n      setTimeout(() => resolve({ url: MOCK_UPLOADED_IMAGE }), 3000);\n      // setTimeout(() => reject(new Error('网络错误！')), 1000);\n    });\n  };\n\n  handlePreviewFile = (url) => {\n    console.log('preview file', url);\n    return new Promise((resolve) => {\n      setTimeout(\n        () =>\n          resolve({\n            previewUrl:\n              'https://yuque.antfin-inc.com/office/lark/0/2019/docx/152/1573008420622-57519a6f-f7e0-4d74-a49d-9e27029293ef.docx?view=doc_embed',\n          }),\n        1000,\n      );\n    });\n  };\n\n  handleCloseSidebar = () => {\n    this.setState({\n      showSidebar: false,\n    });\n  };\n\n  getScrollableContent = () => {\n    return (\n      document.querySelector('[data-cangjie-content-wrapper=\"true\"]') ||\n      document.body\n    );\n  };\n\n  getScrollableContainer = () => {\n    return document.documentElement || document.body;\n  };\n\n  render() {\n    const {\n      autoFocus = true,\n      controllerRef,\n      singleLayout,\n      doubleLayout,\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      plugins,\n      docStyle,\n      dataUid,\n    } = this.props;\n    const { value } = this.state;\n\n    return (\n      <Provider\n        plugins={plugins || this.plugins}\n        value={value}\n        onChange={this.handleChange}\n        autoFocus={autoFocus}\n        controllerRef={controllerRef}\n        docStyle={docStyle}\n        dataUid={dataUid}\n      >\n        <HeadingToolbar\n          singleLayout={singleLayout}\n          doubleLayout={doubleLayout}\n        />\n        <MobileToolbar layout={mobileLayout} useVisualBox />\n        <Content\n          tabIndex={0}\n          getScrollableContent={this.getScrollableContent}\n          getScrollableContainer={this.getScrollableContainer}\n        />\n        {this.state.showSidebar && (\n          <SidebarBox data-testid=\"image-sidebar\">\n            <SidebarCloseButton onClick={this.handleCloseSidebar}>\n              X\n            </SidebarCloseButton>\n            <Sidebar type=\"image.imageOptions\" />\n          </SidebarBox>\n        )}\n      </Provider>\n    );\n  }\n}\n"],"file":"editor.js"}