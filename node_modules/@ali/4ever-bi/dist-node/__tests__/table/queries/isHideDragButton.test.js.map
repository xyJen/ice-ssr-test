{"version":3,"sources":["../../../../../src/__tests__/table/queries/isHideDragButton.test.tsx"],"names":["describe","it","value","Value","create","document","Document","nodes","Block","type","Text","controllerRef","jest","fn","controller","mock","calls","p","findDescendant","Paragraph","isParagraph","expect","query","node","toEqual","table","tableSelection","startColIndex","startRowIndex","endRowIndex","endColIndex","Table","isTable","paragraph","firstParagraph"],"mappings":"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","sourcesContent":["/** @jsx jsx */\nimport { last } from 'lodash-es';\nimport { Value, Document, Controller, Block, Text } from '@ali/4ever-cangjie';\nimport { Table, Paragraph } from '@ali/4ever-mo';\nimport { renderEditor, jsx } from '@ali/4ever-dev-test';\nimport { createEditor } from '../helpers';\nimport Editor from '../../editor';\n\ndescribe('table/queries/isHideDragButton', () => {\n  it('表格外节点，返回 false', async () => {\n    const value = Value.create({\n      document: Document.create({\n        nodes: [Block.create({\n          type: 'paragraph',\n          nodes: [Text.create('')],\n        })],\n      }),\n    });\n    const controllerRef = jest.fn();\n    await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n    const controller = last(controllerRef.mock.calls)[0] as Controller;\n    const p = controller.value.document.findDescendant(Paragraph.isParagraph);\n    expect(!!controller.query('isHideDragButton', { node: p })).toEqual(false);\n  });\n\n  it('节点在有选区表格内，节点不在选区内，返回 false', async () => {\n    const { controller } = await createEditor({\n      table: [\n        ['A', 'B'],\n        ['C', 'D'],\n      ],\n      tableSelection: {\n        startColIndex: 0,\n        startRowIndex: 0,\n        endRowIndex: 0,\n        endColIndex: 1,\n      },\n    });\n    const table = controller.value.document.findDescendant(Table.isTable) as Table;\n    const paragraph = table.nodes[1].nodes[0].nodes[0];\n    expect(!!controller.query('isHideDragButton', { node: paragraph })).toEqual(false);\n  });\n\n  it('选中整行，节点在选中行第一个单元格内，返回 true', async () => {\n    const { controller } = await createEditor({\n      table: [\n        ['A', 'B'],\n        ['C', 'D'],\n      ],\n      tableSelection: {\n        startColIndex: 0,\n        startRowIndex: 0,\n        endRowIndex: 0,\n        endColIndex: 1,\n      },\n    });\n    const table = controller.value.document.findDescendant(Table.isTable) as Table;\n    const firstParagraph = table.findDescendant(Paragraph.isParagraph) as Paragraph;\n    expect(controller.query('isHideDragButton', { node: firstParagraph })).toEqual(true);\n  });\n});\n"],"file":"isHideDragButton.test.js"}