{"version":3,"sources":["../../../../src/__tests__/table/keyboard.test.tsx"],"names":["createFullSelectedTableWithSiblings","tableSelection","startColIndex","startRowIndex","endColIndex","endRowIndex","value","before","after","controllerRef","jest","fn","content","editor","controller","mock","calls","tableNode","document","findDescendant","Table","isTable","command","key","tbSelection","query","expect","toEqual","objectContaining","createFullSelectedTable","createRangeDescriptor","Object","getOwnPropertyDescriptor","beforeAll","defineProperty","configurable","range","getClientRects","top","left","right","bottom","width","height","afterAll","describe","it","fireEvent","keyDown","target","getNodeByPath","startBlock","toBe","nodes","length","node","isElement","type","Commands","moveToEndOfNode","getLastNode","cursor","selection","anchor","offset","focus","path","getPath","isCollapsed","isCollapsedAtEdge","edge","table","tableJs","toJSON","splice","fragment","Document","create","data","copyFrom","anything","Block","fromJSON","setData","copy","nativeEvent","clipboardData","preventDefault","transferUtils","decodeFragment","originalRequestAnimationFrame","window","requestAnimationFrame","mockRequestAnimationFrame","cut","forEach","getElementsByTagName","textContent","paste","querySelector","targetCell","start","getStart","end","getEnd","isAtStartOfNode","isAtEndOfNode","isSelectTable","firstCell","TableCell","isTableCell","moveToStartOfNode","moveForward","targetDocument","skip","Mo","htmlToValue","queryByTestId","paragraph","querySelectorAll","hr","moveToRangeOfDocument"],"mappings":";;;;AAEA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AAdA;;AACA;AAkBA,eAAeA,mCAAf,GAAqD;AACnD,QAAMC,cAAc,GAAG;AACrBC,IAAAA,aAAa,EAAE,CADM;AAErBC,IAAAA,aAAa,EAAE,CAFM;AAGrBC,IAAAA,WAAW,EAAE,CAHQ;AAIrBC,IAAAA,WAAW,EAAE;AAJQ,GAAvB;AAMA,QAAMC,KAAK,GAAG,0BAAY,CAAC,CAAC,GAAD,EAAM,GAAN,CAAD,EAAa,CAAC,GAAD,EAAM,GAAN,CAAb,CAAZ,EAAsC;AAClDC,IAAAA,MAAM,EAAE,YAD0C;AAElDC,IAAAA,KAAK,EAAE;AAF2C,GAAtC,CAAd;AAIA,QAAMC,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAsB,MAAM,+BAAa,sBAAC,eAAD;AAAQ,IAAA,YAAY,EAAEP,KAAtB;AAA6B,IAAA,aAAa,EAAEG;AAA5C,IAAb,CAAlC;AACA,QAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;AAEA,QAAMC,SAAS,GAAGH,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BC,cAA1B,CAAyCC,cAAMC,OAA/C,CAAlB;AACAP,EAAAA,UAAU,CAACQ,OAAX,CAAmB,sBAAnB,EAA2CL,SAA3C,EAAsD,EACpD,GAAGhB,cADiD;AAEpDsB,IAAAA,GAAG,EAAEN,SAAS,CAACM;AAFqC,GAAtD;AAKA,QAAMC,WAAW,GAAGV,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAApB;AACAC,EAAAA,MAAM,CAACF,WAAD,CAAN,CACGG,OADH,CACWD,MAAM,CAACE,gBAAP,CAAwB3B,cAAxB,CADX;AAGA,SAAO;AAAEY,IAAAA,MAAF;AAAUD,IAAAA,OAAV;AAAmBE,IAAAA;AAAnB,GAAP;AACD;;AAED,SAASe,uBAAT,GAAmC;AACjC,QAAM5B,cAAc,GAAG;AACrBC,IAAAA,aAAa,EAAE,CADM;AAErBC,IAAAA,aAAa,EAAE,CAFM;AAGrBC,IAAAA,WAAW,EAAE,CAHQ;AAIrBC,IAAAA,WAAW,EAAE;AAJQ,GAAvB;AAMA,SAAO,oCAAsB,CAAC,CAAC,GAAD,EAAM,GAAN,CAAD,EAAa,CAAC,GAAD,EAAM,GAAN,CAAb,CAAtB,EAAgDJ,cAAhD,CAAP;AACD;;AACD,MAAM6B,qBAAqB,GAAGC,MAAM,CAACC,wBAAP,CAC5Bd,QAD4B,EAE5B,aAF4B,CAA9B;AAKAe,SAAS,CAAC,MAAM;AACdF,EAAAA,MAAM,CAACG,cAAP,CAAsBhB,QAAtB,EAAgC,aAAhC,EAA+C;AAC7CiB,IAAAA,YAAY,EAAE,IAD+B;;AAE7C7B,IAAAA,KAAK,GAAG;AACN,YAAM8B,KAAK,GAAGN,qBAAqB,GAAGA,qBAAqB,CAACxB,KAAtB,EAAH,GAAmC,EAAtE;AACA,aAAO,EACL,GAAG8B,KADE;;AAELC,QAAAA,cAAc,GAAG;AACf,iBAAO,CACL;AACEC,YAAAA,GAAG,EAAE,CADP;AAEEC,YAAAA,IAAI,EAAE,CAFR;AAGEC,YAAAA,KAAK,EAAE,CAHT;AAIEC,YAAAA,MAAM,EAAE,CAJV;AAKEC,YAAAA,KAAK,EAAE,CALT;AAMEC,YAAAA,MAAM,EAAE;AANV,WADK,CAAP;AAUD;;AAbI,OAAP;AAeD;;AAnB4C,GAA/C;AAqBD,CAtBQ,CAAT;AAwBAC,QAAQ,CAAC,MAAM;AACbb,EAAAA,MAAM,CAACG,cAAP,CACEhB,QADF,EAEE,aAFF,EAGEY,qBAAqB,IAAI;AACvBxB,IAAAA,KAAK,GAAG;AACN,aAAO,EAAP;AACD;;AAHsB,GAH3B;AASD,CAVO,CAAR;;WAkrBQ,qCACE,wCACE;AAAO,EAAA,IAAI,EAAC;AAAZ,GAAwB,qCAAxB,CADF,CADF,C;;AAvqBRuC,QAAQ,CAAC,gBAAD,EAAmB,MAAM;AAC/BA,EAAAA,QAAQ,CAAC,KAAD,EAAQ,MAAM;AACpBC,IAAAA,EAAE,CAAC,mBAAD,EAAsB,YAAY;AAClC,YAAMxC,KAAK,GAAG,0BAAY,CAAC,CAAC,GAAD,EAAM,GAAN,CAAD,CAAZ,CAAd;AACA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AAEA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AAEA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;;AAEA+B,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,KAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEA,YAAMoC,MAAM,GAAGnC,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BgC,aAA1B,CAAwC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAxC,CAAf;AAEAxB,MAAAA,MAAM,CAACZ,UAAU,CAACR,KAAX,CAAiB6C,UAAlB,CAAN,CAAoCC,IAApC,CAAyCH,MAAzC;AACD,KAfC,CAAF;AAiBAH,IAAAA,EAAE,CAAC,uBAAD,EAA0B,YAAY;AACtC,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,CADwB,EAExB,CAAC,GAAD,CAFwB,CAAZ,CAAd;AAIA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;;AAEA+B,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,KAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEA,YAAMoC,MAAM,GAAGnC,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BgC,aAA1B,CAAwC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAxC,CAAf;AAEAxB,MAAAA,MAAM,CAACZ,UAAU,CAACR,KAAX,CAAiB6C,UAAlB,CAAN,CAAoCC,IAApC,CAAyCH,MAAzC;AACD,KAhBC,CAAF;AAkBAH,IAAAA,EAAE,CAAC,iCAAD,EAAoC,YAAY;AAChD,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,CADwB,CAAZ,CAAd;AAGA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;;AAEA+B,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,KAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEAa,MAAAA,MAAM,CAACZ,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BmC,KAA1B,CAAgC,CAAhC,EAAmCA,KAAnC,CAAyCC,MAA1C,CAAN,CAAwDF,IAAxD,CAA6D,CAA7D;AAEA,YAAMH,MAAM,GAAGnC,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BgC,aAA1B,CAAwC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAxC,CAAf;AAEAxB,MAAAA,MAAM,CAACZ,UAAU,CAACR,KAAX,CAAiB6C,UAAlB,CAAN,CAAoCC,IAApC,CAAyCH,MAAzC;AACD,KAjBC,CAAF;AAmBAH,IAAAA,EAAE,CAAC,yBAAD,EAA4B,YAAY;AACxC,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,CAAZ,CAAd;AAGA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;;AAEA+B,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,WAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEA,YAAMoC,MAAM,GAAGnC,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BgC,aAA1B,CAAwC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAxC,CAAf;AAEAxB,MAAAA,MAAM,CAACZ,UAAU,CAACR,KAAX,CAAiB6C,UAAlB,CAAN,CAAoCC,IAApC,CAAyCH,MAAzC;AACD,KAfC,CAAF;AAiBAH,IAAAA,EAAE,CAAC,8BAAD,EAAiC,YAAY;AAC7C,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,CADwB,EAExB,CAAC,GAAD,CAFwB,CAAZ,CAAd;AAIA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;AAEA,YAAMC,SAAS,GAAGH,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BC,cAA1B,CACfoC,IAAD,IAAUA,IAAI,CAACC,SAAL,MAAoBD,IAAI,CAACE,IAAL,KAAc,OAD5B,CAAlB;AAGA3C,MAAAA,UAAU,CAACQ,OAAX,CAAmBoC,sBAASC,eAA5B,EAA6C1C,SAAS,CAAC2C,WAAV,EAA7C;AAEA,YAAMC,MAAM,GAAG/C,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BgC,aAA1B,CAAwC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAxC,CAAf;AACAxB,MAAAA,MAAM,CAACZ,UAAU,CAACR,KAAX,CAAiB6C,UAAlB,CAAN,CAAoCC,IAApC,CAAyCS,MAAzC;;AAEAd,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,WAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEA,YAAMoC,MAAM,GAAGnC,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BgC,aAA1B,CAAwC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAxC,CAAf;AAEAxB,MAAAA,MAAM,CAACZ,UAAU,CAACR,KAAX,CAAiB6C,UAAlB,CAAN,CAAoCC,IAApC,CAAyCH,MAAzC;AACD,KAxBC,CAAF;AA0BAH,IAAAA,EAAE,CAAC,4BAAD,EAA+B,YAAY;AAC3C,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,CADwB,CAAZ,CAAd;AAGA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;;AAEA+B,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,WAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEA,YAAMoC,MAAM,GAAGnC,UAAU,CAACR,KAAX,CAAiBY,QAAhC;AAEAQ,MAAAA,MAAM,CAACZ,UAAU,CAACR,KAAX,CAAiBY,QAAlB,CAAN,CAAkCkC,IAAlC,CAAuCH,MAAvC;AACD,KAfC,CAAF;AAiBAH,IAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAY;AACnC,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAMgB,uBAAuB,EAA5D;;AACAkB,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,KAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACAoB,MAAAA,MAAM,CAACoC,SAAS,CAACC,MAAV,CAAiBC,MAAlB,CAAN,CAAgCZ,IAAhC,CAAqC,CAArC;AACA1B,MAAAA,MAAM,CAACoC,SAAS,CAACG,KAAV,CAAgBD,MAAjB,CAAN,CAA+BZ,IAA/B,CAAoC,CAApC;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAArB;AACD,KAVC,CAAF;AAYAmB,IAAAA,EAAE,CAAC,6BAAD,EAAgC,YAAY;AAC5C,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAM,oCAAsB,CAAC,CAAC,GAAD,EAAM,GAAN,CAAD,EAAa,CAAC,GAAD,EAAM,GAAN,CAAb,CAAtB,EAAgD;AACnFX,QAAAA,aAAa,EAAE,CADoE;AAEnFC,QAAAA,aAAa,EAAE,CAFoE;AAGnFC,QAAAA,WAAW,EAAE,CAHsE;AAInFC,QAAAA,WAAW,EAAE;AAJsE,OAAhD,CAArC;;AAMA0C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,KAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACAoB,MAAAA,MAAM,CAACoC,SAAS,CAACC,MAAV,CAAiBC,MAAlB,CAAN,CAAgCZ,IAAhC,CAAqC,CAArC;AACA1B,MAAAA,MAAM,CAACoC,SAAS,CAACG,KAAV,CAAgBD,MAAjB,CAAN,CAA+BZ,IAA/B,CAAoC,CAApC;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAArB;AACD,KAfC,CAAF;AAgBD,GA/IO,CAAR;AAiJAkB,EAAAA,QAAQ,CAAC,SAAD,EAAY,MAAM;AACxBC,IAAAA,EAAE,CAAC,kBAAD,EAAqB,YAAY;AACjC,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,EAExB,CAAC,GAAD,EAAM,GAAN,CAFwB,CAAZ,CAAd;AAKA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;AAEA,YAAMC,SAAS,GAAGH,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BC,cAA1B,CACfoC,IAAD,IAAUA,IAAI,CAACC,SAAL,MAAoBD,IAAI,CAACE,IAAL,KAAc,OAD5B,CAAlB;AAGA3C,MAAAA,UAAU,CAACQ,OAAX,CAAmBoC,sBAASC,eAA5B,EAA6C1C,SAAS,CAAC2C,WAAV,EAA7C;;AAEAb,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,SAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEA,YAAMoC,MAAM,GAAGnC,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BgC,aAA1B,CAAwC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAxC,CAAf;AAEAxB,MAAAA,MAAM,CAACZ,UAAU,CAACR,KAAX,CAAiB6C,UAAlB,CAAN,CAAoCC,IAApC,CAAyCH,MAAzC;AACA,YAAMhD,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAxBC,CAAF;AA0BAmB,IAAAA,EAAE,CAAC,8BAAD,EAAiC,YAAY;AAC7C,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAMb,mCAAmC,EAAxE;;AACA+C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,SAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACA,YAAM;AAAEyD,QAAAA;AAAF,UAAaD,SAAnB;AACApC,MAAAA,MAAM,CAACoC,SAAS,CAACM,WAAX,CAAN,CAA8BhB,IAA9B,CAAmC,IAAnC;AACA1B,MAAAA,MAAM,CAACqC,MAAM,CAACC,MAAR,CAAN,CAAsBZ,IAAtB,CAA2B,CAA3B;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAbC,CAAF;AAeAmB,IAAAA,EAAE,CAAC,iCAAD,EAAoC,YAAY;AAChD,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAMgB,uBAAuB,EAA5D;;AACAkB,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,SAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACA,YAAM;AAAEyD,QAAAA;AAAF,UAAaD,SAAnB;AACApC,MAAAA,MAAM,CAACoC,SAAS,CAACO,iBAAX,CAAN,CAAoCjB,IAApC,CAAyC,IAAzC;AACA1B,MAAAA,MAAM,CAACqC,MAAM,CAACO,IAAR,CAAN,CAAoBlB,IAApB,CAAyB,QAAzB;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAbC,CAAF;AAeAmB,IAAAA,EAAE,CAAC,uCAAD,EAA0C,YAAY;AACtD,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAM,oCACnC,CACE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADF,EAEE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAFF,EAGE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAHF,CADmC,EAMnC;AACEX,QAAAA,aAAa,EAAE,CADjB;AAEEC,QAAAA,aAAa,EAAE,CAFjB;AAGEC,QAAAA,WAAW,EAAE,CAHf;AAIEC,QAAAA,WAAW,EAAE;AAJf,OANmC,CAArC;;AAaA0C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,SAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACAoB,MAAAA,MAAM,CAACoC,SAAS,CAACC,MAAV,CAAiBC,MAAlB,CAAN,CAAgCZ,IAAhC,CAAqC,CAArC;AACA1B,MAAAA,MAAM,CAACoC,SAAS,CAACG,KAAV,CAAgBD,MAAjB,CAAN,CAA+BZ,IAA/B,CAAoC,CAApC;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAxBC,CAAF;AA2BAmB,IAAAA,EAAE,CAAC,6CAAD,EAAgD,YAAY;AAC5D,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAM,oCACnC,CACE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADF,EAEE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAFF,EAGE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAHF,CADmC,EAMnC;AACEX,QAAAA,aAAa,EAAE,CADjB;AAEEC,QAAAA,aAAa,EAAE,CAFjB;AAGEC,QAAAA,WAAW,EAAE,CAHf;AAIEC,QAAAA,WAAW,EAAE;AAJf,OANmC,CAArC;;AAaA0C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,SAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACAoB,MAAAA,MAAM,CAACoC,SAAS,CAACC,MAAV,CAAiBC,MAAlB,CAAN,CAAgCZ,IAAhC,CAAqC,CAArC;AACA1B,MAAAA,MAAM,CAACoC,SAAS,CAACG,KAAV,CAAgBD,MAAjB,CAAN,CAA+BZ,IAA/B,CAAoC,CAApC;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAxBC,CAAF;AAyBD,GA7GO,CAAR;AA+GAkB,EAAAA,QAAQ,CAAC,WAAD,EAAc,MAAM;AAC1BC,IAAAA,EAAE,CAAC,kBAAD,EAAqB,YAAY;AACjC,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,EAExB,CAAC,GAAD,EAAM,GAAN,CAFwB,CAAZ,CAAd;AAKA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;;AAEA+B,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,WAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEA,YAAMoC,MAAM,GAAGnC,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BgC,aAA1B,CAAwC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAxC,CAAf;AAEAxB,MAAAA,MAAM,CAACZ,UAAU,CAACR,KAAX,CAAiB6C,UAAlB,CAAN,CAAoCC,IAApC,CAAyCH,MAAzC;AACA,YAAMhD,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAnBC,CAAF;AAqBAmB,IAAAA,EAAE,CAAC,8BAAD,EAAiC,YAAY;AAC7C,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAMb,mCAAmC,EAAxE;;AACA+C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,WAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACA,YAAM;AAAEyD,QAAAA;AAAF,UAAaD,SAAnB;AACApC,MAAAA,MAAM,CAACoC,SAAS,CAACM,WAAX,CAAN,CAA8BhB,IAA9B,CAAmC,IAAnC;AACA1B,MAAAA,MAAM,CAACqC,MAAM,CAACC,MAAR,CAAN,CAAsBZ,IAAtB,CAA2B,CAA3B;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAbC,CAAF;AAeAmB,IAAAA,EAAE,CAAC,iCAAD,EAAoC,YAAY;AAChD,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAMgB,uBAAuB,EAA5D;;AACAkB,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,WAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACA,YAAM;AAAEyD,QAAAA;AAAF,UAAaD,SAAnB;AACApC,MAAAA,MAAM,CAACoC,SAAS,CAACO,iBAAX,CAAN,CAAoCjB,IAApC,CAAyC,IAAzC;AACA1B,MAAAA,MAAM,CAACqC,MAAM,CAACO,IAAR,CAAN,CAAoBlB,IAApB,CAAyB,OAAzB;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAbC,CAAF;AAeAmB,IAAAA,EAAE,CAAC,kCAAD,EAAqC,YAAY;AACjD,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAM,oCACnC,CACE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADF,EAEE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAFF,EAGE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAHF,CADmC,EAMnC;AACEX,QAAAA,aAAa,EAAE,CADjB;AAEEC,QAAAA,aAAa,EAAE,CAFjB;AAGEC,QAAAA,WAAW,EAAE,CAHf;AAIEC,QAAAA,WAAW,EAAE;AAJf,OANmC,CAArC;;AAaA0C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,WAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACAoB,MAAAA,MAAM,CAACoC,SAAS,CAACC,MAAV,CAAiBC,MAAlB,CAAN,CAAgCZ,IAAhC,CAAqC,CAArC;AACA1B,MAAAA,MAAM,CAACoC,SAAS,CAACG,KAAV,CAAgBD,MAAjB,CAAN,CAA+BZ,IAA/B,CAAoC,CAApC;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAxBC,CAAF;AA0BAmB,IAAAA,EAAE,CAAC,8CAAD,EAAiD,YAAY;AAC7D,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAM,oCACnC,CACE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADF,EAEE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAFF,EAGE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAHF,CADmC,EAMnC;AACEX,QAAAA,aAAa,EAAE,CADjB;AAEEC,QAAAA,aAAa,EAAE,CAFjB;AAGEC,QAAAA,WAAW,EAAE,CAHf;AAIEC,QAAAA,WAAW,EAAE;AAJf,OANmC,CAArC;;AAaA0C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,WAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACAoB,MAAAA,MAAM,CAACoC,SAAS,CAACC,MAAV,CAAiBC,MAAlB,CAAN,CAAgCZ,IAAhC,CAAqC,CAArC;AACA1B,MAAAA,MAAM,CAACoC,SAAS,CAACG,KAAV,CAAgBD,MAAjB,CAAN,CAA+BZ,IAA/B,CAAoC,CAApC;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAxBC,CAAF;AAyBD,GAvGO,CAAR;AAyGAkB,EAAAA,QAAQ,CAAC,YAAD,EAAe,MAAM;AAC3BC,IAAAA,EAAE,CAAC,kBAAD,EAAqB,YAAY;AACjC,YAAMxC,KAAK,GAAG,0BAAY,CAAC,CAAC,EAAD,EAAK,EAAL,CAAD,CAAZ,CAAd;AAEA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;;AAEA+B,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,YAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEA,YAAMoC,MAAM,GAAGnC,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BgC,aAA1B,CAAwC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAxC,CAAf;AAEAxB,MAAAA,MAAM,CAACZ,UAAU,CAACR,KAAX,CAAiB6C,UAAlB,CAAN,CAAoCC,IAApC,CAAyCH,MAAzC;AACA,YAAMhD,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAhBC,CAAF;AAkBAmB,IAAAA,EAAE,CAAC,8BAAD,EAAiC,YAAY;AAC7C,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAMb,mCAAmC,EAAxE;;AACA+C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,YAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACA,YAAM;AAAEyD,QAAAA;AAAF,UAAaD,SAAnB;AACApC,MAAAA,MAAM,CAACoC,SAAS,CAACM,WAAX,CAAN,CAA8BhB,IAA9B,CAAmC,IAAnC;AACA1B,MAAAA,MAAM,CAACqC,MAAM,CAACC,MAAR,CAAN,CAAsBZ,IAAtB,CAA2B,CAA3B;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAbC,CAAF;AAeAmB,IAAAA,EAAE,CAAC,iCAAD,EAAoC,YAAY;AAChD,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAMgB,uBAAuB,EAA5D;;AACAkB,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,YAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACA,YAAM;AAAEyD,QAAAA;AAAF,UAAaD,SAAnB;AACApC,MAAAA,MAAM,CAACoC,SAAS,CAACO,iBAAX,CAAN,CAAoCjB,IAApC,CAAyC,IAAzC;AACA1B,MAAAA,MAAM,CAACqC,MAAM,CAACO,IAAR,CAAN,CAAoBlB,IAApB,CAAyB,OAAzB;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAbC,CAAF;AAeAmB,IAAAA,EAAE,CAAC,kCAAD,EAAqC,YAAY;AACjD,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAM,oCACnC,CACE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADF,EAEE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAFF,EAGE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAHF,CADmC,EAMnC;AACEX,QAAAA,aAAa,EAAE,CADjB;AAEEC,QAAAA,aAAa,EAAE,CAFjB;AAGEC,QAAAA,WAAW,EAAE,CAHf;AAIEC,QAAAA,WAAW,EAAE;AAJf,OANmC,CAArC;;AAaA0C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,YAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACAoB,MAAAA,MAAM,CAACoC,SAAS,CAACC,MAAV,CAAiBC,MAAlB,CAAN,CAAgCZ,IAAhC,CAAqC,CAArC;AACA1B,MAAAA,MAAM,CAACoC,SAAS,CAACG,KAAV,CAAgBD,MAAjB,CAAN,CAA+BZ,IAA/B,CAAoC,CAApC;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAxBC,CAAF;AA0BAmB,IAAAA,EAAE,CAAC,8CAAD,EAAiD,YAAY;AAC7D,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAM,oCACnC,CACE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADF,EAEE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAFF,EAGE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAHF,CADmC,EAMnC;AACEX,QAAAA,aAAa,EAAE,CADjB;AAEEC,QAAAA,aAAa,EAAE,CAFjB;AAGEC,QAAAA,WAAW,EAAE,CAHf;AAIEC,QAAAA,WAAW,EAAE;AAJf,OANmC,CAArC;;AAaA0C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,YAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACAoB,MAAAA,MAAM,CAACoC,SAAS,CAACC,MAAV,CAAiBC,MAAlB,CAAN,CAAgCZ,IAAhC,CAAqC,CAArC;AACA1B,MAAAA,MAAM,CAACoC,SAAS,CAACG,KAAV,CAAgBD,MAAjB,CAAN,CAA+BZ,IAA/B,CAAoC,CAApC;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAxBC,CAAF;AAyBD,GApGO,CAAR;AAsGAkB,EAAAA,QAAQ,CAAC,WAAD,EAAc,MAAM;AAC1BC,IAAAA,EAAE,CAAC,kBAAD,EAAqB,YAAY;AACjC,YAAMxC,KAAK,GAAG,0BAAY,CAAC,CAAC,EAAD,EAAK,EAAL,CAAD,CAAZ,CAAd;AAEA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;AAEA,YAAMC,SAAS,GAAGH,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BC,cAA1B,CACfoC,IAAD,IAAUA,IAAI,CAACC,SAAL,MAAoBD,IAAI,CAACE,IAAL,KAAc,OAD5B,CAAlB;AAGA3C,MAAAA,UAAU,CAACQ,OAAX,CAAmBoC,sBAASC,eAA5B,EAA6C1C,SAAS,CAAC2C,WAAV,EAA7C;;AAEAb,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,WAAf,CAA1B;;AAEA,YAAMoC,MAAM,GAAGnC,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BgC,aAA1B,CAAwC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAxC,CAAf;AACAxB,MAAAA,MAAM,CAACZ,UAAU,CAACR,KAAX,CAAiB6C,UAAlB,CAAN,CAAoCC,IAApC,CAAyCH,MAAzC;AACA,YAAMhD,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAlBC,CAAF;AAoBAmB,IAAAA,EAAE,CAAC,6BAAD,EAAgC,YAAY;AAC5C,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAMgB,uBAAuB,EAA5D;;AACAkB,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,WAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACA,YAAM;AAAEyD,QAAAA;AAAF,UAAaD,SAAnB;AACApC,MAAAA,MAAM,CAACoC,SAAS,CAACM,WAAX,CAAN,CAA8BhB,IAA9B,CAAmC,IAAnC;AACA1B,MAAAA,MAAM,CAACqC,MAAM,CAACC,MAAR,CAAN,CAAsBZ,IAAtB,CAA2B,CAA3B;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAbC,CAAF;AAeAmB,IAAAA,EAAE,CAAC,gCAAD,EAAmC,YAAY;AAC/C,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAM,oCACnC,CACE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADF,EAEE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAFF,EAGE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAHF,CADmC,EAMnC;AACEX,QAAAA,aAAa,EAAE,CADjB;AAEEC,QAAAA,aAAa,EAAE,CAFjB;AAGEC,QAAAA,WAAW,EAAE,CAHf;AAIEC,QAAAA,WAAW,EAAE;AAJf,OANmC,CAArC;;AAaA0C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,WAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACAoB,MAAAA,MAAM,CAACoC,SAAS,CAACC,MAAV,CAAiBC,MAAlB,CAAN,CAAgCZ,IAAhC,CAAqC,CAArC;AACA1B,MAAAA,MAAM,CAACoC,SAAS,CAACG,KAAV,CAAgBD,MAAjB,CAAN,CAA+BZ,IAA/B,CAAoC,CAApC;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAxBC,CAAF;AA0BAmB,IAAAA,EAAE,CAAC,+CAAD,EAAkD,YAAY;AAC9D,YAAM;AAAEhC,QAAAA,UAAF;AAAcD,QAAAA;AAAd,UAAyB,MAAM,oCACnC,CACE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADF,EAEE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAFF,EAGE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAHF,CADmC,EAMnC;AACEX,QAAAA,aAAa,EAAE,CADjB;AAEEC,QAAAA,aAAa,EAAE,CAFjB;AAGEC,QAAAA,WAAW,EAAE,CAHf;AAIEC,QAAAA,WAAW,EAAE;AAJf,OANmC,CAArC;;AAaA0C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,WAAf,CAA1B;;AACA,YAAM,kBAAN;AAEA,YAAM;AAAEiD,QAAAA;AAAF,UAAgBhD,UAAU,CAACR,KAAjC;AACAoB,MAAAA,MAAM,CAACoC,SAAS,CAACC,MAAV,CAAiBC,MAAlB,CAAN,CAAgCZ,IAAhC,CAAqC,CAArC;AACA1B,MAAAA,MAAM,CAACoC,SAAS,CAACG,KAAV,CAAgBD,MAAjB,CAAN,CAA+BZ,IAA/B,CAAoC,CAApC;AACA,YAAMc,IAAI,GAAGpD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BiD,OAA1B,CAAkCL,SAAS,CAACC,MAAV,CAAiBxC,GAAnD,CAAb;AACAG,MAAAA,MAAM,CAACwC,IAAD,CAAN,CAAavC,OAAb,CAAqB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,CAArB;AACA,YAAM1B,cAAc,GAAGa,UAAU,CAACW,KAAX,CAAiB,gBAAjB,CAAvB;AACAC,MAAAA,MAAM,CAACzB,cAAD,CAAN,CAAuB0B,OAAvB,CAA+B,IAA/B;AACD,KAxBC,CAAF;AAyBD,GAvFO,CAAR;AAyFAkB,EAAAA,QAAQ,CAAC,OAAD,EAAU,MAAM;AACtBC,IAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC3B,YAAM7C,cAAwC,GAAG;AAC/CE,QAAAA,aAAa,EAAE,CADgC;AAE/CD,QAAAA,aAAa,EAAE,CAFgC;AAG/CG,QAAAA,WAAW,EAAE,CAHkC;AAI/CD,QAAAA,WAAW,EAAE;AAJkC,OAAjD;AAMA,YAAM;AAAES,QAAAA,MAAF;AAAUC,QAAAA;AAAV,UAAyB,MAAM,oCAAsB,CACzD,CAAC,GAAD,EAAM,GAAN,CADyD,EAEzD,CAAC,GAAD,EAAM,GAAN,CAFyD,CAAtB,EAGlCb,cAHkC,CAArC;AAKA,YAAMsE,KAAK,GAAGzD,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BmC,KAA1B,CAAgC,CAAhC,CAAd;AACA,YAAMmB,OAAO,GAAGD,KAAK,CAACE,MAAN,EAAhB,CAb2B,CAc3B;AACA;;AACAD,MAAAA,OAAO,CAACnB,KAAR,EAAeqB,MAAf,CAAsB,CAAtB,EAAyB,CAAzB;;AACA,YAAMC,QAAQ,GAAGC,sBAASC,MAAT,CAAgB;AAC/BC,QAAAA,IAAI,EAAE;AAAEC,UAAAA,QAAQ,EAAErD,MAAM,CAACsD,QAAP;AAAZ,SADyB;AAE/B3B,QAAAA,KAAK,EAAE,CAAC4B,mBAAMC,QAAN,CAAeV,OAAf,CAAD;AAFwB,OAAhB,CAAjB;;AAKA,YAAM,kBAAN;AAEA,YAAMW,OAAO,GAAGzE,IAAI,CAACC,EAAL,EAAhB;;AACAoC,6BAAUqC,IAAV,CAAevE,MAAf,EAAuB;AACrBwE,QAAAA,WAAW,EAAE;AACXC,UAAAA,aAAa,EAAE;AACbH,YAAAA;AADa,WADJ;;AAIXI,UAAAA,cAAc,GAAG,CAAE;;AAJR;AADQ,OAAvB,EAzB2B,CAkC3B;;;AACA7D,MAAAA,MAAM,CAAC8D,2BAAcC,cAAd,CAA6BN,OAAO,CAACpE,IAAR,CAAaC,KAAb,CAAmB,CAAnB,EAAsB,CAAtB,CAA7B,EAAuDyD,MAAvD,EAAD,CAAN,CAAwE9C,OAAxE,CAAgFgD,QAAQ,CAACF,MAAT,EAAhF;AACA/C,MAAAA,MAAM,CAACyD,OAAO,CAACpE,IAAR,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAN,CAA8BW,OAA9B,CAAsC,CAAC,YAAD,EAAe,MAAf,CAAtC;AACD,KArCC,CAAF;AAsCD,GAvCO,CAAR;AAyCAkB,EAAAA,QAAQ,CAAC,OAAD,EAAU,MAAM;AACtBC,IAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC3B,YAAM7C,cAAwC,GAAG;AAC/CE,QAAAA,aAAa,EAAE,CADgC;AAE/CD,QAAAA,aAAa,EAAE,CAFgC;AAG/CG,QAAAA,WAAW,EAAE,CAHkC;AAI/CD,QAAAA,WAAW,EAAE;AAJkC,OAAjD;AAMA,YAAM;AAAES,QAAAA,MAAF;AAAUD,QAAAA;AAAV,UAAsB,MAAM,oCAAsB,CACtD,CAAC,GAAD,EAAM,GAAN,CADsD,EAEtD,CAAC,GAAD,EAAM,GAAN,CAFsD,CAAtB,EAG/BX,cAH+B,CAAlC;AAKA,YAAM,kBAAN;AACA,YAAMyF,6BAA6B,GAAGC,MAAM,CAACC,qBAA7C;AACA,YAAMC,yBAAyB,GAAGnF,IAAI,CAACC,EAAL,EAAlC;AACAgF,MAAAA,MAAM,CAACC,qBAAP,GAA+BC,yBAA/B;;AAEA9C,6BAAU+C,GAAV,CAAcjF,MAAd,EAAsB;AACpByE,QAAAA,aAAa,EAAE;AACbH,UAAAA,OAAO,EAAE,MAAM;AADF;AADK,OAAtB;;AAMAU,MAAAA,yBAAyB,CAAC9E,IAA1B,CAA+BC,KAA/B,CAAqC+E,OAArC,CAA6C,CAAC,CAACpF,EAAD,CAAD,KAAUA,EAAE,EAAzD;AACAgF,MAAAA,MAAM,CAACC,qBAAP,GAA+BF,6BAA/B;AAEA,YAAM,kBAAN;AAEAhE,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC,CAAnC,EAAsCC,WAAvC,CAAN,CAA0D7C,IAA1D,CAA+D,QAA/D;AACA1B,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC,CAAnC,EAAsCC,WAAvC,CAAN,CAA0D7C,IAA1D,CAA+D,QAA/D;AACA1B,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC,CAAnC,EAAsCC,WAAvC,CAAN,CAA0D7C,IAA1D,CAA+D,GAA/D;AACA1B,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC,CAAnC,EAAsCC,WAAvC,CAAN,CAA0D7C,IAA1D,CAA+D,GAA/D;AACD,KAhCC,CAAF;AAiCD,GAlCO,CAAR;AAoCAP,EAAAA,QAAQ,CAAC,OAAD,EAAU,MAAM;AACtBC,IAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC5B,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,CAAZ,CAAd;AAIA,YAAM;AAAEO,QAAAA,MAAF;AAAUD,QAAAA;AAAV,UAAsB,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEN;AAAtB,QAAb,CAAlC;;AAEAyC,6BAAUmD,KAAV,CAAgBrF,MAAhB,EAAwB,WAAxB,EAAsC;AAC5C;AACA;AACA;AACA,OAJM;;AAMA,YAAM,kBAAN;AAEAa,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC,CAAnC,EAAsCC,WAAvC,CAAN,CAA0D7C,IAA1D,CAA+D,GAA/D;AACA1B,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC,CAAnC,EAAsCC,WAAvC,CAAN,CAA0D7C,IAA1D,CAA+D,GAA/D;AACD,KAjBC,CAAF;AAmBAN,IAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC3B,YAAM7C,cAAwC,GAAG;AAC/CE,QAAAA,aAAa,EAAE,CADgC;AAE/CD,QAAAA,aAAa,EAAE,CAFgC;AAG/CG,QAAAA,WAAW,EAAE,CAHkC;AAI/CD,QAAAA,WAAW,EAAE;AAJkC,OAAjD;AAMA,YAAM;AAAES,QAAAA,MAAF;AAAUD,QAAAA;AAAV,UAAsB,MAAM,oCAAsB,CACtD,CAAC,GAAD,EAAM,GAAN,CADsD,EAEtD,CAAC,GAAD,EAAM,GAAN,CAFsD,CAAtB,EAG/BX,cAH+B,CAAlC;;AAKA8C,6BAAUmD,KAAV,CAAgBrF,MAAhB,EAAwB,WAAxB,EAAsC;AAC5C;AACA;AACA;AACA;AACA,OALM;;AAOA,YAAM,kBAAN;AAEAa,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC,CAAnC,EAAsCC,WAAvC,CAAN,CAA0D7C,IAA1D,CAA+D,GAA/D;AACA1B,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC,CAAnC,EAAsCC,WAAvC,CAAN,CAA0D7C,IAA1D,CAA+D,GAA/D;AACA1B,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC,CAAnC,EAAsCC,WAAvC,CAAN,CAA0D7C,IAA1D,CAA+D,GAA/D;AACA1B,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC,CAAnC,EAAsCC,WAAvC,CAAN,CAA0D7C,IAA1D,CAA+D,GAA/D;AACD,KAzBC,CAAF;AA2BAN,IAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC5B,YAAMxC,KAAK,OAAX;AAQA,YAAM;AAAEO,QAAAA,MAAF;AAAUD,QAAAA;AAAV,UAAsB,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEN;AAAtB,QAAb,CAAlC;;AAEAyC,6BAAUmD,KAAV,CAAgBrF,MAAhB,EAAwB,WAAxB,EAAsC;AAC5C;AACA;AACA;AACA,OAJM;;AAMA,YAAM,kBAAN;AAEAa,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,OAA7B,EAAsC1C,MAAvC,CAAN,CAAqDF,IAArD,CAA0D,CAA1D;AACA1B,MAAAA,MAAM,CAACd,OAAO,CAACuF,aAAR,CAAsB,+BAAtB,EAAwDF,WAAzD,CAAN,CAA4E7C,IAA5E,CAAiF,GAAjF;AACD,KArBC,CAAF;AAsBD,GArEO,CAAR;AAuEAP,EAAAA,QAAQ,CAAC,OAAD,EAAU,MAAM;AACtBC,IAAAA,EAAE,CAAC,qBAAD,EAAwB,YAAY;AACpC,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,CAAZ,CAAd;AAIA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;;AAEA+B,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AAEA,YAAMuF,UAAU,GAAGtF,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BgC,aAA1B,CAAwC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAAxC,CAAnB;AACA,YAAM;AAAEY,QAAAA,SAAF;AAAa5C,QAAAA;AAAb,UAA0BJ,UAAU,CAACR,KAA3C;AACA,YAAM+F,KAAK,GAAGvC,SAAS,EAAEwC,QAAX,CAAoBpF,QAApB,CAAd;AACA,YAAMqF,GAAG,GAAGzC,SAAS,EAAE0C,MAAX,CAAkBtF,QAAlB,CAAZ;AAEAQ,MAAAA,MAAM,CAAC2E,KAAK,EAAEI,eAAP,CAAuBL,UAAvB,CAAD,CAAN,CAA2ChD,IAA3C,CAAgD,IAAhD;AACA1B,MAAAA,MAAM,CAAC6E,GAAG,EAAEG,aAAL,CAAmBN,UAAnB,CAAD,CAAN,CAAuChD,IAAvC,CAA4C,IAA5C;AACD,KAlBC,CAAF;AAmBAN,IAAAA,EAAE,CAAC,mBAAD,EAAsB,YAAY;AAClC,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,EAAD,EAAK,EAAL,CADwB,CAAZ,CAAd;AAIA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;;AAEA+B,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AAEA,YAAM0D,KAAK,GAAG,qCAAuBzD,UAAvB,CAAd;AACA,YAAM6F,aAAa,GAAG7F,UAAU,CAACW,KAAX,CAAiB,oBAAjB,EAAuC;AAAE8B,QAAAA,IAAI,EAAEgB;AAAR,OAAvC,CAAtB;AACA7C,MAAAA,MAAM,CAACiF,aAAD,CAAN,CAAsBvD,IAAtB,CAA2B,IAA3B;AACD,KAdC,CAAF;AAgBAN,IAAAA,EAAE,CAAC,mBAAD,EAAsB,YAAY;AAClC,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,CAAZ,CAAd;AAIA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;;AAEA+B,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AACAkC,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AAEA,YAAM0D,KAAK,GAAG,qCAAuBzD,UAAvB,CAAd;AACA,YAAM6F,aAAa,GAAG7F,UAAU,CAACW,KAAX,CAAiB,oBAAjB,EAAuC;AAAE8B,QAAAA,IAAI,EAAEgB;AAAR,OAAvC,CAAtB;AACA7C,MAAAA,MAAM,CAACiF,aAAD,CAAN,CAAsBvD,IAAtB,CAA2B,IAA3B;AACD,KAfC,CAAF;AAiBAN,IAAAA,EAAE,CAAC,kBAAD,EAAqB,YAAY;AACjC,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,CAAZ,EAEX;AACDC,QAAAA,MAAM,EAAE,OADP;AAEDC,QAAAA,KAAK,EAAE;AAFN,OAFW,CAAd;AAOA,YAAMC,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;AACA,YAAM4F,SAAS,GAAG9F,UAAU,CAACR,KAAX,CAAiBY,QAAjB,CAA0BC,cAA1B,CAAyC0F,kBAAUC,WAAnD,CAAlB;AACAhG,MAAAA,UAAU,CAACQ,OAAX,CAAmBoC,sBAASqD,iBAA5B,EAA+CH,SAA/C;;AACA7D,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AACAkC,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AACA,YAAM0D,KAAK,GAAG,qCAAuBzD,UAAvB,CAAd;AACA,YAAM6F,aAAa,GAAG7F,UAAU,CAACW,KAAX,CAAiB,oBAAjB,EAAuC;AAAE8B,QAAAA,IAAI,EAAEgB;AAAR,OAAvC,CAAtB;AACA7C,MAAAA,MAAM,CAACiF,aAAD,CAAN,CAAsBvD,IAAtB,CAA2B,IAA3B;;AAEAL,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AAEA,YAAM;AAAEiD,QAAAA,SAAF;AAAa5C,QAAAA;AAAb,UAA0BJ,UAAU,CAACR,KAA3C;AACA,YAAM+F,KAAK,GAAGvC,SAAS,EAAEwC,QAAX,CAAoBpF,QAApB,CAAd;AACA,YAAMqF,GAAG,GAAGzC,SAAS,EAAE0C,MAAX,CAAkBtF,QAAlB,CAAZ;AAEAQ,MAAAA,MAAM,CAAC2E,KAAK,EAAEI,eAAP,CAAuBvF,QAAvB,CAAD,CAAN,CAAyCkC,IAAzC,CAA8C,IAA9C;AACA1B,MAAAA,MAAM,CAAC6E,GAAG,EAAEG,aAAL,CAAmBxF,QAAnB,CAAD,CAAN,CAAqCkC,IAArC,CAA0C,IAA1C;AACD,KA3BC,CAAF;AA4BD,GAjFO,CAAR;AAmFAP,EAAAA,QAAQ,CAAC,QAAD,EAAW,MAAM;AACvBC,IAAAA,EAAE,CAAC,gCAAD,EAAmC,YAAY;AAC/C,YAAM7C,cAAwC,GAAG;AAC/CE,QAAAA,aAAa,EAAE,CADgC;AAE/CD,QAAAA,aAAa,EAAE,CAFgC;AAG/CG,QAAAA,WAAW,EAAE,CAHkC;AAI/CD,QAAAA,WAAW,EAAE;AAJkC,OAAjD;AAMA,YAAM;AAAES,QAAAA,MAAF;AAAUD,QAAAA;AAAV,UAAsB,MAAM,oCAAsB,CACtD,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CADsD,CAAtB,EAE/BX,cAF+B,CAAlC;;AAIA8C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEAa,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC,CAAnC,EAAsCC,WAAvC,CAAN,CAA0D7C,IAA1D,CAA+D,QAA/D;AACA1B,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC,CAAnC,EAAsCC,WAAvC,CAAN,CAA0D7C,IAA1D,CAA+D,QAA/D;AACD,KAjBC,CAAF;AAmBAN,IAAAA,EAAE,CAAC,0BAAD,EAA6B,YAAY;AACzC,YAAM7C,cAAwC,GAAG;AAC/CE,QAAAA,aAAa,EAAE,CADgC;AAE/CD,QAAAA,aAAa,EAAE,CAFgC;AAG/CG,QAAAA,WAAW,EAAE,CAHkC;AAI/CD,QAAAA,WAAW,EAAE;AAJkC,OAAjD;AAMA,YAAM;AAAES,QAAAA,MAAF;AAAUD,QAAAA;AAAV,UAAsB,MAAM,oCAAsB,CACtD,CAAC,GAAD,EAAM,GAAN,CADsD,CAAtB,EAE/BX,cAF+B,CAAlC;;AAIA8C,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AACA,YAAM,kBAAN;AAEAa,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,OAA7B,EAAsC1C,MAAvC,CAAN,CAAqDF,IAArD,CAA0D,CAA1D;AACD,KAfC,CAAF;AAiBAN,IAAAA,EAAE,CAAC,2BAAD,EAA8B,YAAY;AAC1C,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,CAAZ,CAAd;AAIA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAa,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEP,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAzB;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;AAEAF,MAAAA,UAAU,CAACQ,OAAX,CAAmBoC,sBAASsD,WAA5B,EAAyC,CAAzC;AAEA,YAAMC,cAAc,GAAGnG,UAAU,CAACR,KAAX,CAAiBY,QAAxC;;AAEA6B,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,WAAf,CAA1B;;AAEAa,MAAAA,MAAM,CAACZ,UAAU,CAACR,KAAX,CAAiBY,QAAlB,CAAN,CAAkCS,OAAlC,CAA0CsF,cAA1C;AACD,KAhBC,CAAF;AAkBAnE,IAAAA,EAAE,CAAC,qBAAD,EAAwB,YAAY;AACpC,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,CAAZ,CAAd;AAIA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA,MAAF;AAAUD,QAAAA;AAAV,UAAsB,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEN,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAlC;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;AAEAF,MAAAA,UAAU,CAACQ,OAAX,CAAmBoC,sBAASsD,WAA5B,EAAyC,CAAzC;;AAEAjE,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEA,YAAM;AAAEoF,QAAAA;AAAF,UAAkBrF,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC,CAAnC,CAAxB;AACAtE,MAAAA,MAAM,CAAC,kCAAqBuE,WAArB,CAAD,CAAN,CAA0CtE,OAA1C,CAAkD,EAAlD;AACD,KAjBC,CAAF,CAvDuB,CA0EvB;;AACAmB,IAAAA,EAAE,CAACoE,IAAH,CAAQ,kCAAR,EAA4C,YAAY;AACtD,YAAM5G,KAAK,GAAG6G,oBAAGC,WAAH,CAAgB;AACpC;AACA;AACA;AACA;AACA,OALoB,CAAd;;AAOA,YAAM3G,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA,MAAF;AAAUD,QAAAA,OAAV;AAAmByG,QAAAA;AAAnB,UAAqC,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAE/G,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAjD;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;AAEAF,MAAAA,UAAU,CAACQ,OAAX,CAAmBoC,sBAASsD,WAA5B,EAAyC,CAAzC;;AAEAjE,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AACA,YAAM,sCAA0B,MAAMwG,aAAa,CAAC,eAAD,CAA7C,CAAN;;AAEAtE,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AACA,YAAM,kBAAN;AACAa,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC1C,MAApC,CAAN,CAAkDF,IAAlD,CAAuD,CAAvD;AACD,KApBD;AAsBAN,IAAAA,EAAE,CAAC,mCAAD,EAAsC,YAAY;AAClD,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,CAAZ,EAEX;AACDE,QAAAA,KAAK,EAAE;AADN,OAFW,CAAd;AAMA,YAAM8G,SAAS,GAAG,kBAAKhH,KAAK,CAACY,QAAN,CAAemC,KAApB,CAAlB;AAEA,YAAM5C,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA,MAAF;AAAUD,QAAAA;AAAV,UAAsB,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEN,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAlC;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;AAEAF,MAAAA,UAAU,CAACQ,OAAX,CAAmBoC,sBAASqD,iBAA5B,EAA+CO,SAA/C;;AAEAvE,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEAa,MAAAA,MAAM,CAACd,OAAO,CAAC2G,gBAAR,CAAyB,wBAAzB,EAAmD,CAAnD,EAAsDtB,WAAvD,CAAN,CAA0E7C,IAA1E,CAA+E,aAA/E;AACD,KApBC,CAAF;AAsBAN,IAAAA,EAAE,CAACoE,IAAH,CAAQ,iCAAR,EAA2C,YAAY;AACrD,YAAM5G,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,CAAZ,EAEX;AACDE,QAAAA,KAAK,EAAE;AADN,OAFW,CAAd;AAMA,YAAMC,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA,MAAF;AAAUD,QAAAA,OAAV;AAAmByG,QAAAA;AAAnB,UAAqC,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAE/G,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAjD;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;AAEA,YAAMwG,EAAE,GAAG,kBAAKlH,KAAK,CAACY,QAAN,CAAemC,KAApB,CAAX;AACAvC,MAAAA,UAAU,CAACQ,OAAX,CAAmBoC,sBAASqD,iBAA5B,EAA+CS,EAA/C;AAEA9F,MAAAA,MAAM,CAAC8F,EAAE,CAAC/D,IAAJ,CAAN,CAAgBL,IAAhB,CAAqB,IAArB;;AAEAL,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AACA,YAAM,sCAA0B,MAAMwG,aAAa,CAAC,eAAD,CAA7C,CAAN;;AAEAtE,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AACA,YAAM,kBAAN;AACAa,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,IAA7B,EAAmC1C,MAApC,CAAN,CAAkDF,IAAlD,CAAuD,CAAvD;AACD,KAtBD;AAwBAN,IAAAA,EAAE,CAAC,+BAAD,EAAkC,YAAY;AAC9C,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,CAAZ,EAEX;AACDE,QAAAA,KAAK,EAAE;AADN,OAFW,CAAd;AAMA,YAAMC,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA,MAAF;AAAUD,QAAAA;AAAV,UAAsB,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEN,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAlC;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;AAEAF,MAAAA,UAAU,CAACQ,OAAX,CAAmBoC,sBAAS+D,qBAA5B;AAEA/F,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,OAA7B,EAAsC1C,MAAvC,CAAN,CAAqDF,IAArD,CAA0D,CAA1D;;AAEAL,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEAa,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,OAA7B,EAAsC1C,MAAvC,CAAN,CAAqDF,IAArD,CAA0D,CAA1D;AACA1B,MAAAA,MAAM,CAACd,OAAO,CAACuF,aAAR,CAAsB,0BAAtB,EAAmDF,WAApD,CAAN,CAAuE7C,IAAvE,CAA4E,QAA5E;AACD,KArBC,CAAF;AAuBAN,IAAAA,EAAE,CAAC,+BAAD,EAAkC,YAAY;AAC9C,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,CAAZ,EAEX;AACDC,QAAAA,MAAM,EAAE;AADP,OAFW,CAAd;AAMA,YAAME,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA,MAAF;AAAUD,QAAAA;AAAV,UAAsB,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEN,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAlC;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;AAEAF,MAAAA,UAAU,CAACQ,OAAX,CAAmBoC,sBAAS+D,qBAA5B;AAEA/F,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,OAA7B,EAAsC1C,MAAvC,CAAN,CAAqDF,IAArD,CAA0D,CAA1D;;AAEAL,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEAa,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,OAA7B,EAAsC1C,MAAvC,CAAN,CAAqDF,IAArD,CAA0D,CAA1D;AACA1B,MAAAA,MAAM,CAACd,OAAO,CAACuF,aAAR,CAAsB,0BAAtB,EAAmDF,WAApD,CAAN,CAAuE7C,IAAvE,CAA4E,QAA5E;AACD,KArBC,CAAF;AAuBAN,IAAAA,EAAE,CAAC,2BAAD,EAA8B,YAAY;AAC1C,YAAMxC,KAAK,GAAG,0BAAY,CACxB,CAAC,GAAD,EAAM,GAAN,CADwB,CAAZ,CAAd;AAIA,YAAMG,aAAa,GAAGC,IAAI,CAACC,EAAL,EAAtB;AACA,YAAM;AAAEE,QAAAA,MAAF;AAAUD,QAAAA;AAAV,UAAsB,MAAM,+BAAa,sBAAC,eAAD;AAAQ,QAAA,YAAY,EAAEN,KAAtB;AAA6B,QAAA,aAAa,EAAEG;AAA5C,QAAb,CAAlC;AACA,YAAMK,UAAU,GAAG,kBAAKL,aAAa,CAACM,IAAd,CAAmBC,KAAxB,EAA+B,CAA/B,CAAnB;AAEAF,MAAAA,UAAU,CAACQ,OAAX,CAAmBoC,sBAAS+D,qBAA5B;AAEA/F,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,OAA7B,EAAsC1C,MAAvC,CAAN,CAAqDF,IAArD,CAA0D,CAA1D;;AAEAL,6BAAUC,OAAV,CAAkBnC,MAAlB,EAA0B,iCAAe,QAAf,CAA1B;;AAEA,YAAM,kBAAN;AAEAa,MAAAA,MAAM,CAACd,OAAO,CAACoF,oBAAR,CAA6B,OAA7B,EAAsC1C,MAAvC,CAAN,CAAqDF,IAArD,CAA0D,CAA1D;AACA1B,MAAAA,MAAM,CAACd,OAAO,CAACuF,aAAR,CAAsB,0BAAtB,EAAmDF,WAApD,CAAN,CAAuE7C,IAAvE,CAA4E,QAA5E;AACD,KAnBC,CAAF;AAoBD,GAjNO,CAAR;AAmND,CAn+BO,CAAR","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/** @jsx jsx */\nimport '@testing-library/jest-dom/extend-expect';\nimport {\n  wait, waitForElementToBeRemoved,\n} from '@testing-library/react';\nimport { renderEditor, jsx, fireEvent, getHotkeyEvent, waitForTime } from '@ali/4ever-dev-test';\nimport { Controller, Commands, Value, Document, Block, transferUtils } from '@ali/4ever-cangjie';\nimport { Table, TableCell } from '@ali/4ever-mo';\nimport { last } from 'lodash-es';\nimport Mo from '../serializer';\nimport Editor from '../editor';\nimport { createEditorWithTable, createTable, getTableFromController } from './helpers';\nimport { ITableSelection } from '@ali/4ever-plugin-table';\nimport { removeInvisibleChars } from '../helper';\n\n\ntype TableSelectionWithoutKey = Omit<ITableSelection, 'key'>;\n\nasync function createFullSelectedTableWithSiblings() {\n  const tableSelection = {\n    startColIndex: 0,\n    startRowIndex: 0,\n    endColIndex: 1,\n    endRowIndex: 1,\n  };\n  const value = createTable([['A', 'B'], ['C', 'D']], {\n    before: '<p>123</p>',\n    after: '<p>abc</p>',\n  });\n  const controllerRef = jest.fn();\n  const { content, editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n  const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n  const tableNode = controller.value.document.findDescendant(Table.isTable) as Table;\n  controller.command('selectTableSelection', tableNode, {\n    ...tableSelection,\n    key: tableNode.key,\n  });\n\n  const tbSelection = controller.query('tableSelection');\n  expect(tbSelection)\n    .toEqual(expect.objectContaining(tableSelection));\n\n  return { editor, content, controller };\n}\n\nfunction createFullSelectedTable() {\n  const tableSelection = {\n    startColIndex: 0,\n    startRowIndex: 0,\n    endColIndex: 1,\n    endRowIndex: 1,\n  };\n  return createEditorWithTable([['A', 'B'], ['C', 'D']], tableSelection);\n}\nconst createRangeDescriptor = Object.getOwnPropertyDescriptor(\n  document,\n  'createRange',\n);\n\nbeforeAll(() => {\n  Object.defineProperty(document, 'createRange', {\n    configurable: true,\n    value() {\n      const range = createRangeDescriptor ? createRangeDescriptor.value() : {};\n      return {\n        ...range,\n        getClientRects() {\n          return [\n            {\n              top: 0,\n              left: 0,\n              right: 1,\n              bottom: 1,\n              width: 1,\n              height: 1,\n            },\n          ];\n        },\n      };\n    },\n  });\n});\n\nafterAll(() => {\n  Object.defineProperty(\n    document,\n    'createRange',\n    createRangeDescriptor || {\n      value() {\n        return {};\n      },\n    },\n  );\n});\ndescribe('table keyboard', () => {\n  describe('tab', () => {\n    it('表格内按 tab 跳到下一个单元格', async () => {\n      const value = createTable([['A', 'B']]);\n      const controllerRef = jest.fn();\n\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      fireEvent.keyDown(editor, getHotkeyEvent('tab'));\n\n      await wait();\n\n      const target = controller.value.document.getNodeByPath([0, 0, 1, 0]);\n\n      expect(controller.value.startBlock).toBe(target);\n    });\n\n    it('表格行末按 tab 跳到下一行第一个单元格', async () => {\n      const value = createTable([\n        ['A'],\n        ['B'],\n      ]);\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      fireEvent.keyDown(editor, getHotkeyEvent('tab'));\n\n      await wait();\n\n      const target = controller.value.document.getNodeByPath([0, 1, 0, 0]);\n\n      expect(controller.value.startBlock).toBe(target);\n    });\n\n    it('表格最后一个单元格按 tab，插入一行，并跳到新行第一个单元格', async () => {\n      const value = createTable([\n        ['A'],\n      ]);\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      fireEvent.keyDown(editor, getHotkeyEvent('tab'));\n\n      await wait();\n\n      expect(controller.value.document.nodes[0].nodes.length).toBe(2);\n\n      const target = controller.value.document.getNodeByPath([0, 1, 0, 0]);\n\n      expect(controller.value.startBlock).toBe(target);\n    });\n\n    it('表格内按 shift+tab 跳到上一个单元格', async () => {\n      const value = createTable([\n        ['A', 'B'],\n      ]);\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      fireEvent.keyDown(editor, getHotkeyEvent('tab+shift'));\n\n      await wait();\n\n      const target = controller.value.document.getNodeByPath([0, 0, 0, 0]);\n\n      expect(controller.value.startBlock).toBe(target);\n    });\n\n    it('表格行首按 shift+tab 跳到上一行最后一个单元格', async () => {\n      const value = createTable([\n        ['A'],\n        ['B'],\n      ]);\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      const tableNode = controller.value.document.findDescendant(\n        (node) => node.isElement() && node.type === 'table',\n      );\n      controller.command(Commands.moveToEndOfNode, tableNode.getLastNode());\n\n      const cursor = controller.value.document.getNodeByPath([0, 1, 0, 0]);\n      expect(controller.value.startBlock).toBe(cursor);\n\n      fireEvent.keyDown(editor, getHotkeyEvent('tab+shift'));\n\n      await wait();\n\n      const target = controller.value.document.getNodeByPath([0, 0, 0, 0]);\n\n      expect(controller.value.startBlock).toBe(target);\n    });\n\n    it('表格第一个单元格按 shift+tab 不作任何处理', async () => {\n      const value = createTable([\n        ['A'],\n      ]);\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      fireEvent.keyDown(editor, getHotkeyEvent('tab+shift'));\n\n      await wait();\n\n      const target = controller.value.document;\n\n      expect(controller.value.document).toBe(target);\n    });\n\n    it('选中整个表格后，选中第一个 cell', async () => {\n      const { controller, editor } = await createFullSelectedTable();\n      fireEvent.keyDown(editor, getHotkeyEvent('tab'));\n      await wait();\n\n      const { selection } = controller.value;\n      expect(selection.anchor.offset).toBe(0);\n      expect(selection.focus.offset).toBe(1);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0, 0, 0, 0, 0]);\n    });\n\n    it('存在 tableSlection 时，选中左上角单元格', async () => {\n      const { controller, editor } = await createEditorWithTable([['A', 'B'], ['C', 'D']], {\n        startColIndex: 0,\n        startRowIndex: 1,\n        endColIndex: 1,\n        endRowIndex: 1,\n      });\n      fireEvent.keyDown(editor, getHotkeyEvent('tab'));\n      await wait();\n\n      const { selection } = controller.value;\n      expect(selection.anchor.offset).toBe(0);\n      expect(selection.focus.offset).toBe(1);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0, 1, 0, 0, 0]);\n    });\n  });\n\n  describe('arrowUp', () => {\n    it('按方向键上把光标移动到上方单元格', async () => {\n      const value = createTable([\n        ['A', 'B'],\n        ['C', 'D'],\n      ]);\n\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      const tableNode = controller.value.document.findDescendant(\n        (node) => node.isElement() && node.type === 'table',\n      );\n      controller.command(Commands.moveToEndOfNode, tableNode.getLastNode());\n\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowUp'));\n\n      await wait();\n\n      const target = controller.value.document.getNodeByPath([0, 0, 1, 0]);\n\n      expect(controller.value.startBlock).toBe(target);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('选中整个表格后，光标移动至表格上一个 block 的起点', async () => {\n      const { controller, editor } = await createFullSelectedTableWithSiblings();\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowUp'));\n      await wait();\n\n      const { selection } = controller.value;\n      const { anchor } = selection;\n      expect(selection.isCollapsed).toBe(true);\n      expect(anchor.offset).toBe(0);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0, 0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('选中整个表格后，若不存在上一个 block 光标移动至表格左侧', async () => {\n      const { controller, editor } = await createFullSelectedTable();\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowUp'));\n      await wait();\n\n      const { selection } = controller.value;\n      const { anchor } = selection;\n      expect(selection.isCollapsedAtEdge).toBe(true);\n      expect(anchor.edge).toBe('before');\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('存在 tableSlection 时，focus 左上角的正上方单元格起点', async () => {\n      const { controller, editor } = await createEditorWithTable(\n        [\n          ['A', 'B', 'C'],\n          ['D', 'E', 'F'],\n          ['G', 'H', 'I'],\n        ],\n        {\n          startColIndex: 1,\n          startRowIndex: 2,\n          endColIndex: 2,\n          endRowIndex: 2,\n        },\n      );\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowUp'));\n      await wait();\n\n      const { selection } = controller.value;\n      expect(selection.anchor.offset).toBe(0);\n      expect(selection.focus.offset).toBe(0);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0, 1, 1, 0, 0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n\n    it('存在 tableSlection 时，且选中了第一行，则 focus 左上角单元格起点', async () => {\n      const { controller, editor } = await createEditorWithTable(\n        [\n          ['A', 'B', 'C'],\n          ['D', 'E', 'F'],\n          ['G', 'H', 'I'],\n        ],\n        {\n          startColIndex: 1,\n          startRowIndex: 0,\n          endColIndex: 2,\n          endRowIndex: 0,\n        },\n      );\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowUp'));\n      await wait();\n\n      const { selection } = controller.value;\n      expect(selection.anchor.offset).toBe(0);\n      expect(selection.focus.offset).toBe(0);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0, 0, 1, 0, 0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n  });\n\n  describe('arrowDown', () => {\n    it('按方向键下把光标移动到下方单元格', async () => {\n      const value = createTable([\n        ['A', 'B'],\n        ['C', 'D'],\n      ]);\n\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowDown'));\n\n      await wait();\n\n      const target = controller.value.document.getNodeByPath([0, 1, 0, 0]);\n\n      expect(controller.value.startBlock).toBe(target);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('选中整个表格后，光标移动至表格下一个 block 的起点', async () => {\n      const { controller, editor } = await createFullSelectedTableWithSiblings();\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowDown'));\n      await wait();\n\n      const { selection } = controller.value;\n      const { anchor } = selection;\n      expect(selection.isCollapsed).toBe(true);\n      expect(anchor.offset).toBe(0);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([2, 0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('选中整个表格后，若不存在下一个 block 光标移动至表格右侧', async () => {\n      const { controller, editor } = await createFullSelectedTable();\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowDown'));\n      await wait();\n\n      const { selection } = controller.value;\n      const { anchor } = selection;\n      expect(selection.isCollapsedAtEdge).toBe(true);\n      expect(anchor.edge).toBe('after');\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('存在 tableSlection 时，focus 选区左下角下方', async () => {\n      const { controller, editor } = await createEditorWithTable(\n        [\n          ['A', 'B', 'C'],\n          ['D', 'E', 'F'],\n          ['G', 'H', 'I'],\n        ],\n        {\n          startColIndex: 1,\n          startRowIndex: 0,\n          endColIndex: 2,\n          endRowIndex: 0,\n        },\n      );\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowDown'));\n      await wait();\n\n      const { selection } = controller.value;\n      expect(selection.anchor.offset).toBe(0);\n      expect(selection.focus.offset).toBe(0);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0, 1, 1, 0, 0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('存在 tableSlection 时，且选中了最后一行，则 focus 左下角单元格起点', async () => {\n      const { controller, editor } = await createEditorWithTable(\n        [\n          ['A', 'B', 'C'],\n          ['D', 'E', 'F'],\n          ['G', 'H', 'I'],\n        ],\n        {\n          startColIndex: 1,\n          startRowIndex: 0,\n          endColIndex: 2,\n          endRowIndex: 2,\n        },\n      );\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowDown'));\n      await wait();\n\n      const { selection } = controller.value;\n      expect(selection.anchor.offset).toBe(0);\n      expect(selection.focus.offset).toBe(0);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0, 2, 1, 0, 0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n  });\n\n  describe('arrowRight', () => {\n    it('按方向键右把光标移动到右侧单元格', async () => {\n      const value = createTable([['', '']]);\n\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowRight'));\n\n      await wait();\n\n      const target = controller.value.document.getNodeByPath([0, 0, 1, 0]);\n\n      expect(controller.value.startBlock).toBe(target);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('选中整个表格后，光标移动至表格下一个 block 的起点', async () => {\n      const { controller, editor } = await createFullSelectedTableWithSiblings();\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowRight'));\n      await wait();\n\n      const { selection } = controller.value;\n      const { anchor } = selection;\n      expect(selection.isCollapsed).toBe(true);\n      expect(anchor.offset).toBe(0);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([2, 0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('选中整个表格后，若不存在下一个 block 光标移动至表格右侧', async () => {\n      const { controller, editor } = await createFullSelectedTable();\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowRight'));\n      await wait();\n\n      const { selection } = controller.value;\n      const { anchor } = selection;\n      expect(selection.isCollapsedAtEdge).toBe(true);\n      expect(anchor.edge).toBe('after');\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('存在 tableSlection 时，focus 选区左下角下方', async () => {\n      const { controller, editor } = await createEditorWithTable(\n        [\n          ['A', 'B', 'C'],\n          ['D', 'E', 'F'],\n          ['G', 'H', 'I'],\n        ],\n        {\n          startColIndex: 0,\n          startRowIndex: 1,\n          endColIndex: 0,\n          endRowIndex: 2,\n        },\n      );\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowRight'));\n      await wait();\n\n      const { selection } = controller.value;\n      expect(selection.anchor.offset).toBe(0);\n      expect(selection.focus.offset).toBe(0);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0, 1, 1, 0, 0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('存在 tableSlection 时，且选中了最后一列，则 focus 右上角单元格起点', async () => {\n      const { controller, editor } = await createEditorWithTable(\n        [\n          ['A', 'B', 'C'],\n          ['D', 'E', 'F'],\n          ['G', 'H', 'I'],\n        ],\n        {\n          startColIndex: 1,\n          startRowIndex: 1,\n          endColIndex: 2,\n          endRowIndex: 2,\n        },\n      );\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowRight'));\n      await wait();\n\n      const { selection } = controller.value;\n      expect(selection.anchor.offset).toBe(0);\n      expect(selection.focus.offset).toBe(0);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0, 1, 2, 0, 0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n  });\n\n  describe('arrowLeft', () => {\n    it('按方向键左把光标移动到左侧单元格', async () => {\n      const value = createTable([['', '']]);\n\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      const tableNode = controller.value.document.findDescendant(\n        (node) => node.isElement() && node.type === 'table',\n      );\n      controller.command(Commands.moveToEndOfNode, tableNode.getLastNode());\n\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowLeft'));\n\n      const target = controller.value.document.getNodeByPath([0, 0, 0, 0]);\n      expect(controller.value.startBlock).toBe(target);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('选中整个表格后，光标移动至表格第一个 cell 的起点', async () => {\n      const { controller, editor } = await createFullSelectedTable();\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowLeft'));\n      await wait();\n\n      const { selection } = controller.value;\n      const { anchor } = selection;\n      expect(selection.isCollapsed).toBe(true);\n      expect(anchor.offset).toBe(0);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0, 0, 0, 0, 0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('存在 tableSlection 时，focus 选区左上角', async () => {\n      const { controller, editor } = await createEditorWithTable(\n        [\n          ['A', 'B', 'C'],\n          ['D', 'E', 'F'],\n          ['G', 'H', 'I'],\n        ],\n        {\n          startColIndex: 1,\n          startRowIndex: 1,\n          endColIndex: 2,\n          endRowIndex: 2,\n        },\n      );\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowLeft'));\n      await wait();\n\n      const { selection } = controller.value;\n      expect(selection.anchor.offset).toBe(0);\n      expect(selection.focus.offset).toBe(0);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0, 1, 1, 0, 0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n\n    it('存在 tableSlection 时，且选中了第一列内容，则 focus 左上角单元格起点', async () => {\n      const { controller, editor } = await createEditorWithTable(\n        [\n          ['A', 'B', 'C'],\n          ['D', 'E', 'F'],\n          ['G', 'H', 'I'],\n        ],\n        {\n          startColIndex: 0,\n          startRowIndex: 1,\n          endColIndex: 2,\n          endRowIndex: 2,\n        },\n      );\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowLeft'));\n      await wait();\n\n      const { selection } = controller.value;\n      expect(selection.anchor.offset).toBe(0);\n      expect(selection.focus.offset).toBe(0);\n      const path = controller.value.document.getPath(selection.anchor.key);\n      expect(path).toEqual([0, 1, 0, 0, 0]);\n      const tableSelection = controller.query('tableSelection');\n      expect(tableSelection).toEqual(null);\n    });\n  });\n\n  describe('cmd+c', () => {\n    it('复制选中区域表格数据', async () => {\n      const tableSelection: TableSelectionWithoutKey = {\n        startRowIndex: 0,\n        startColIndex: 0,\n        endRowIndex: 0,\n        endColIndex: 1,\n      };\n      const { editor, controller } = await createEditorWithTable([\n        ['A', 'B'],\n        ['C', 'D'],\n      ], tableSelection);\n\n      const table = controller.value.document.nodes[0];\n      const tableJs = table.toJSON();\n      // 切掉第二行，只留第一行\n      // eslint-disable-next-line no-unused-expressions\n      tableJs.nodes?.splice(1, 1);\n      const fragment = Document.create({\n        data: { copyFrom: expect.anything() },\n        nodes: [Block.fromJSON(tableJs)],\n      });\n\n      await wait();\n\n      const setData = jest.fn();\n      fireEvent.copy(editor, {\n        nativeEvent: {\n          clipboardData: {\n            setData,\n          },\n          preventDefault() {},\n        }\n      });\n\n      // 只测试 text 和 fragment，html 暂时忽略\n      expect(transferUtils.decodeFragment(setData.mock.calls[0][1]).toJSON()).toEqual(fragment.toJSON());\n      expect(setData.mock.calls[2]).toEqual(['text/plain', 'A\\nB']);\n    });\n  });\n\n  describe('cmd+x', () => {\n    it('剪切选中区域表格数据', async () => {\n      const tableSelection: TableSelectionWithoutKey = {\n        startRowIndex: 0,\n        startColIndex: 0,\n        endRowIndex: 0,\n        endColIndex: 1,\n      };\n      const { editor, content } = await createEditorWithTable([\n        ['A', 'B'],\n        ['C', 'D'],\n      ], tableSelection);\n\n      await wait();\n      const originalRequestAnimationFrame = window.requestAnimationFrame;\n      const mockRequestAnimationFrame = jest.fn();\n      window.requestAnimationFrame = mockRequestAnimationFrame;\n\n      fireEvent.cut(editor, {\n        clipboardData: {\n          setData: () => null,\n        },\n      });\n\n      mockRequestAnimationFrame.mock.calls.forEach(([fn]) => fn());\n      window.requestAnimationFrame = originalRequestAnimationFrame;\n\n      await wait();\n\n      expect(content.getElementsByTagName('td')[0].textContent).toBe('\\uFEFF');\n      expect(content.getElementsByTagName('td')[1].textContent).toBe('\\uFEFF');\n      expect(content.getElementsByTagName('td')[2].textContent).toBe('C');\n      expect(content.getElementsByTagName('td')[3].textContent).toBe('D');\n    });\n  });\n\n  describe('cmd+v', () => {\n    it('光标在单元格内粘贴表格', async () => {\n      const value = createTable([\n        ['1', '2'],\n      ]);\n\n      const { editor, content } = await renderEditor(<Editor defaultValue={value} />);\n\n      fireEvent.paste(editor, 'text/html', `\n        <table>\n          <tr><td>A</td><td>B</td></tr>\n        </table>\n      `);\n\n      await wait();\n\n      expect(content.getElementsByTagName('td')[0].textContent).toBe('A');\n      expect(content.getElementsByTagName('td')[1].textContent).toBe('B');\n    });\n\n    it('选中一个选区粘贴表格', async () => {\n      const tableSelection: TableSelectionWithoutKey = {\n        startRowIndex: 0,\n        startColIndex: 0,\n        endRowIndex: 0,\n        endColIndex: 1,\n      };\n      const { editor, content } = await createEditorWithTable([\n        ['1', '2'],\n        ['3', '4'],\n      ], tableSelection);\n\n      fireEvent.paste(editor, 'text/html', `\n        <table>\n          <tr><td>A</td><td>B</td></tr>\n          <tr><td>C</td><td>D</td></tr>\n        </table>\n      `);\n\n      await wait();\n\n      expect(content.getElementsByTagName('td')[0].textContent).toBe('A');\n      expect(content.getElementsByTagName('td')[1].textContent).toBe('B');\n      expect(content.getElementsByTagName('td')[2].textContent).toBe('3');\n      expect(content.getElementsByTagName('td')[3].textContent).toBe('4');\n    });\n\n    it('拷贝单元格内的内容粘贴', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\"><cursor /></block>\n          </document>\n        </value>\n      ) as unknown as Value;\n\n      const { editor, content } = await renderEditor(<Editor defaultValue={value} />);\n\n      fireEvent.paste(editor, 'text/html', `\n        <table>\n          <tr><td>A</td></tr>\n        </table>\n      `);\n\n      await wait();\n\n      expect(content.getElementsByTagName('table').length).toBe(1);\n      expect(content.querySelector('table [data-type=\"paragraph\"]')!.textContent).toBe('A');\n    });\n  });\n\n  describe('cmd+a', () => {\n    it('单元格内按 cmd+a 全选单元格内容', async () => {\n      const value = createTable([\n        ['1', '2'],\n      ]);\n\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      fireEvent.keyDown(editor, getHotkeyEvent('ctrl+a'));\n\n      const targetCell = controller.value.document.getNodeByPath([0, 0, 0])!;\n      const { selection, document } = controller.value;\n      const start = selection?.getStart(document);\n      const end = selection?.getEnd(document);\n\n      expect(start?.isAtStartOfNode(targetCell)).toBe(true);\n      expect(end?.isAtEndOfNode(targetCell)).toBe(true);\n    });\n    it('空单元格内按 cmd+a 全选表格', async () => {\n      const value = createTable([\n        ['', ''],\n      ]);\n\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      fireEvent.keyDown(editor, getHotkeyEvent('ctrl+a'));\n\n      const table = getTableFromController(controller);\n      const isSelectTable = controller.query('isSelectWholeTable', { node: table });\n      expect(isSelectTable).toBe(true);\n    });\n\n    it('选中单元格后 cmd+a 全选表格', async () => {\n      const value = createTable([\n        ['1', '2'],\n      ]);\n\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      fireEvent.keyDown(editor, getHotkeyEvent('ctrl+a'));\n      fireEvent.keyDown(editor, getHotkeyEvent('ctrl+a'));\n\n      const table = getTableFromController(controller);\n      const isSelectTable = controller.query('isSelectWholeTable', { node: table });\n      expect(isSelectTable).toBe(true);\n    });\n\n    it('选中表格后 cmd+a 全选文档', async () => {\n      const value = createTable([\n        ['1', '2'],\n      ], {\n        before: 'start',\n        after: 'end',\n      });\n\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n      const firstCell = controller.value.document.findDescendant(TableCell.isTableCell);\n      controller.command(Commands.moveToStartOfNode, firstCell);\n      fireEvent.keyDown(editor, getHotkeyEvent('ctrl+a'));\n      fireEvent.keyDown(editor, getHotkeyEvent('ctrl+a'));\n      const table = getTableFromController(controller);\n      const isSelectTable = controller.query('isSelectWholeTable', { node: table });\n      expect(isSelectTable).toBe(true);\n\n      fireEvent.keyDown(editor, getHotkeyEvent('ctrl+a'));\n\n      const { selection, document } = controller.value;\n      const start = selection?.getStart(document);\n      const end = selection?.getEnd(document);\n\n      expect(start?.isAtStartOfNode(document)).toBe(true);\n      expect(end?.isAtEndOfNode(document)).toBe(true);\n    });\n  });\n\n  describe('delete', () => {\n    it('用户拖选中多个单元格后，按 delete 将选中表格内容删除', async () => {\n      const tableSelection: TableSelectionWithoutKey = {\n        startRowIndex: 0,\n        startColIndex: 0,\n        endRowIndex: 0,\n        endColIndex: 1,\n      };\n      const { editor, content } = await createEditorWithTable([\n        ['A', 'B', 'C'],\n      ], tableSelection);\n\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n\n      await wait();\n\n      expect(content.getElementsByTagName('td')[0].textContent).toBe('\\uFEFF');\n      expect(content.getElementsByTagName('td')[1].textContent).toBe('\\uFEFF');\n    });\n\n    it('用户全选表格后，按 delete 将表格本体删除', async () => {\n      const tableSelection: TableSelectionWithoutKey = {\n        startRowIndex: 0,\n        startColIndex: 0,\n        endRowIndex: 0,\n        endColIndex: 1,\n      };\n      const { editor, content } = await createEditorWithTable([\n        ['A', 'B'],\n      ], tableSelection);\n\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n      await wait();\n\n      expect(content.getElementsByTagName('table').length).toBe(0);\n    });\n\n    it('在单元格内容前按 backspace 不做任何处理', async () => {\n      const value = createTable([\n        ['A', 'B'],\n      ]);\n\n      const controllerRef = jest.fn();\n      const { editor } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      controller.command(Commands.moveForward, 2);\n\n      const targetDocument = controller.value.document;\n\n      fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n\n      expect(controller.value.document).toEqual(targetDocument);\n    });\n\n    it('单元格内按delete，能删除文本内容', async () => {\n      const value = createTable([\n        ['A', 'B'],\n      ]);\n\n      const controllerRef = jest.fn();\n      const { editor, content } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      controller.command(Commands.moveForward, 2);\n\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n\n      await wait();\n\n      const { textContent } = content.getElementsByTagName('td')[1];\n      expect(removeInvisibleChars(textContent)).toEqual('');\n    });\n\n    // TODO：不稳定，暂时 skip\n    it.skip('单元格第一行为分割线时，选中分割线按 delete 可以正常删除', async () => {\n      const value = Mo.htmlToValue(`\n        <p></p>\n        <table>\n          <tr><td><hr /></td></tr>\n        </table>\n      `) as Value;\n\n      const controllerRef = jest.fn();\n      const { editor, content, queryByTestId } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      controller.command(Commands.moveForward, 1);\n\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n      await waitForElementToBeRemoved(() => queryByTestId('cangjie-caret'));\n\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n      await wait();\n      expect(content.getElementsByTagName('hr').length).toBe(0);\n    });\n\n    it('在表格后一行行首按 delete，不会删除表格，段落删除前一个字母', async () => {\n      const value = createTable([\n        ['A', 'B'],\n      ], {\n        after: '<p>Hello World!</p>',\n      });\n\n      const paragraph = last(value.document.nodes)!;\n\n      const controllerRef = jest.fn();\n      const { editor, content } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      controller.command(Commands.moveToStartOfNode, paragraph);\n\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n\n      await wait();\n\n      expect(content.querySelectorAll('*[data-type=paragraph]')[2].textContent).toBe('ello World!');\n    });\n\n    it.skip('表格后一行为分割线时，选中分割线按 delete 可以正常删除', async () => {\n      const value = createTable([\n        ['A', 'B'],\n      ], {\n        after: '<hr />',\n      });\n\n      const controllerRef = jest.fn();\n      const { editor, content, queryByTestId } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      const hr = last(value.document.nodes)!;\n      controller.command(Commands.moveToStartOfNode, hr);\n\n      expect(hr.type).toBe('hr');\n\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n      await waitForElementToBeRemoved(() => queryByTestId('cangjie-caret'));\n\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n      await wait();\n      expect(content.getElementsByTagName('hr').length).toBe(0);\n    });\n\n    it('表格后一个为普通段落时，全选按 delete 可以正常删除', async () => {\n      const value = createTable([\n        ['A', 'B'],\n      ], {\n        after: '<p></p>',\n      });\n\n      const controllerRef = jest.fn();\n      const { editor, content } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      controller.command(Commands.moveToRangeOfDocument);\n\n      expect(content.getElementsByTagName('table').length).toBe(1);\n\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n\n      await wait();\n\n      expect(content.getElementsByTagName('table').length).toBe(0);\n      expect(content.querySelector('*[data-type=\"paragraph\"]')!.textContent).toBe('\\uFEFF');\n    });\n\n    it('表格前一个为普通段落时，全选按 delete 可以正常删除', async () => {\n      const value = createTable([\n        ['A', 'B'],\n      ], {\n        before: '<p></p>',\n      });\n\n      const controllerRef = jest.fn();\n      const { editor, content } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      controller.command(Commands.moveToRangeOfDocument);\n\n      expect(content.getElementsByTagName('table').length).toBe(1);\n\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n\n      await wait();\n\n      expect(content.getElementsByTagName('table').length).toBe(0);\n      expect(content.querySelector('*[data-type=\"paragraph\"]')!.textContent).toBe('\\uFEFF');\n    });\n\n    it('只有一个表格时，全选按 delete 可以正常删除', async () => {\n      const value = createTable([\n        ['A', 'B'],\n      ]);\n\n      const controllerRef = jest.fn();\n      const { editor, content } = await renderEditor(<Editor defaultValue={value} controllerRef={controllerRef} />);\n      const controller = last(controllerRef.mock.calls)[0] as Controller;\n\n      controller.command(Commands.moveToRangeOfDocument);\n\n      expect(content.getElementsByTagName('table').length).toBe(1);\n\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n\n      await wait();\n\n      expect(content.getElementsByTagName('table').length).toBe(0);\n      expect(content.querySelector('*[data-type=\"paragraph\"]')!.textContent).toBe('\\uFEFF');\n    });\n  });\n\n});\n"],"file":"keyboard.test.js"}