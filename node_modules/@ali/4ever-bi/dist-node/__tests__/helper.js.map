{"version":3,"sources":["../../../src/__tests__/helper.ts"],"names":["getContent","editor","find","last","getHotKeyEvent","value","modifiers","event","altKey","includes","ctrlKey","metaKey","shiftKey","which","key","removeInvisibleChars","text","replace","hexToRgb","hex","shorthandRegex","m","r","g","b","result","exec","parseInt","weWaitFor","callback","options","weOptions","timeout","weWaitForElement","weWaitForElementToBeRemoved","triggerTransitionEnd","element","document","createEvent","initEvent","dispatchEvent"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nimport { toKeyCode } from 'is-hotkey';\n\nimport {\n  waitFor,\n  waitForElement,\n  waitForElementToBeRemoved,\n} from '@testing-library/react';\n\nexport function getContent(editor) {\n  return editor.find('Content').last();\n}\n\n// Ref: https://github.com/ianstormtaylor/is-hotkey/blob/79083a76530733ab228235cde82453805518ce4b/test/index.js#L9\nexport function getHotKeyEvent(value, ...modifiers) {\n  const event = {\n    altKey: modifiers.includes('alt'),\n    ctrlKey: modifiers.includes('ctrl'),\n    metaKey: modifiers.includes('meta'),\n    shiftKey: modifiers.includes('shift'),\n  };\n  if (typeof value === 'number') {\n    event.which = value;\n  }\n  if (typeof value === 'string') {\n    event.key = value;\n    event.which = toKeyCode(value);\n  }\n  return event;\n}\n\n/**\n * 去除不可见字符，便于断言判断\n * @param text\n */\nexport function removeInvisibleChars(text: string) {\n  return text.replace(/\\uFEFF/g, '');\n}\n\nexport function hexToRgb(hex: string) {\n  const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  hex = hex.replace(shorthandRegex, (m, r, g, b) => r + r + g + g + b + b);\n\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  if (result) {\n    return `rgb(${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)})`\n  }\n  return ''\n}\n\nexport function weWaitFor<T>(\n  callback: (() => T) | T,\n  options?: {\n    timeout?: number\n  }\n): Promise<void> {\n  let weOptions = {...options};\n  if(!weOptions || !weOptions.timeout){\n    weOptions.timeout = 10000;\n  }\n  return waitFor(callback, weOptions);\n}\n\nexport function weWaitForElement<T>(\n  callback: (() => T) | T,\n  options?: {\n    timeout?: number\n  }\n): Promise<void> {\n  let weOptions = {...options};\n  if(!weOptions || !weOptions.timeout){\n    weOptions.timeout = 10000;\n  }\n  return waitForElement(callback, weOptions);\n}\n\nexport function weWaitForElementToBeRemoved<T>(\n  callback: (() => T) | T,\n  options?: {\n    timeout?: number\n  }\n): Promise<void> {\n  let weOptions = {...options};\n  if(!weOptions || !weOptions.timeout){\n    weOptions.timeout = 10000;\n  }\n  return waitForElementToBeRemoved(callback, weOptions);\n}\n\n// 模拟触发 animation end 事件\nexport function triggerTransitionEnd(element: Element | null) {\n  let event = document.createEvent(\"Event\");\n  event.initEvent(\"transitionend\", true, true);\n  element?.dispatchEvent(event);\n}"],"file":"helper.js"}