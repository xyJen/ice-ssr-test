{"version":3,"sources":["../../../../src/__tests__/tag/ui.test.tsx"],"names":["CreateTagPlugin","onKeyDown","event","controller","next","key","run","tagType","InsertTagPlugin","config","renderNode","isOwnerAndFirstCreated","String","tagPlugin","verticalAlign","node","isSelected","onClick","height","width","data","attr","focusbackgroundcolor","metadata","imTitle","topTagPlugin","errorTag","Error","ErrorComponent","errorTagWithChildren","createBiPlugins","biPlugins","Editor","props","defaultValue","refValue","value","setValue","React","useState","current","plugins","useMemo","handleChange","useCallback","changed","describe","beforeAll","jest","spyOn","console","error","mockImplementation","afterAll","mockRestore","afterEach","test","queryByText","expect","toBe","findByTestId","editor","el","getAttribute","findByText","fireEvent","keyDown","toBeInstanceOf","HTMLElement","queryByTestId","click","content","style","colsWidth","tag","tagEl","output","createRef","actual","toJSON","preserveSelections","Controller","create","expected","toEqual"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/** @jsx jsx */\nimport * as React from 'react';\nimport { Value, Controller } from '@ali/4ever-cangjie';\nimport { createCustomizedBiPlugins, tagFactory, setTagData, plugins as biPlugins, insertTag } from '../..';\nimport {\n  cleanup,\n  wait,\n} from '@testing-library/react';\nimport '@testing-library/jest-dom/extend-expect';\nimport Provider from '../../provider';\nimport Content from '../../content';\nimport { renderEditor, fireEvent, getHotkeyEvent, jsx, waitForTime } from '@ali/4ever-dev-test';\n\ninterface EditorProps {\n  defaultValue: Value;\n}\n\nconst CreateTagPlugin = () => {\n  return {\n    onKeyDown: (event, controller, next) => {\n      if (event.key === 'i') {\n        return controller.run('onAction', insertTag({ tagType: 'insert' }));\n      }\n      return next();\n    },\n  };\n};\n\nconst InsertTagPlugin = tagFactory((config) => {\n  return {\n    tagType: 'insert',\n    renderNode: ({ isOwnerAndFirstCreated }, controller: Controller) => {\n      return (<div data-testid=\"insert-tag-content\" data-owner={isOwnerAndFirstCreated} >isOwnerAndFirstCreated={String(isOwnerAndFirstCreated)}</div>);\n    },\n  };\n});\n\nconst tagPlugin = tagFactory(() => {\n  return {\n    tagType: 'tag',\n    verticalAlign: 'middle',\n    renderNode: ({ node, isSelected }, controller: Controller) => {\n      const onClick = () => {\n        controller.run('onAction', setTagData(node, { height: 40, width: 60 }));\n      };\n      const { height } = node.data;\n      const attr: Record<string, any> = {};\n      if (isSelected) {\n        attr.focusbackgroundcolor = 'true';\n      }\n      return (<span {...attr} data-testid=\"tag-content\" onClick={onClick} style={{ height }}>{`来至会话 ${  node.data.metadata.imTitle}`}</span>);\n    },\n  };\n});\n\nconst topTagPlugin = tagFactory(() => {\n  return {\n    tagType: 'top',\n    verticalAlign: (node) => 'top',\n    renderNode: ({ node, isSelected }, controller: Controller) => {\n      const onClick = () => {\n        controller.run('onAction', setTagData(node, { height: 40, width: 60 }));\n      };\n      const { height } = node.data;\n      const attr: Record<string, any> = {};\n      if (isSelected) {\n        attr.focusbackgroundcolor = 'true';\n      }\n      return (<span {...attr} data-testid=\"tag-content\" onClick={onClick} style={{ height }}>{`来至会话 ${  node.data.metadata.imTitle}`}</span>);\n    },\n  };\n});\n\nconst errorTag = tagFactory(() => {\n  return {\n    tagType: 'error',\n    renderNode: () => {\n      throw new Error('error renderNode');\n    },\n  };\n});\n\nconst ErrorComponent: React.FC<any> = () => {\n  throw new Error('error ErrorComponent');\n};\n\nconst errorTagWithChildren = tagFactory(() => {\n  return {\n    tagType: 'errorChildren',\n    renderNode: () => {\n      return (<ErrorComponent />);\n    },\n  };\n});\n\nconst createBiPlugins = createCustomizedBiPlugins({\n  ...biPlugins,\n  topTagPlugin,\n  tagPlugin,\n  errorTag,\n  errorTagWithChildren,\n  CreateTagPlugin,\n  InsertTagPlugin,\n});\nconst Editor: React.FC<EditorProps> = (props) => {\n  const { defaultValue, refValue } = props;\n  const [value, setValue] = React.useState(defaultValue);\n  if (refValue) refValue.current = value;\n  const plugins = React.useMemo(() => {\n    return createBiPlugins({});\n  }, []);\n  const handleChange = React.useCallback((changed) => {\n    setValue(changed.value);\n  }, []);\n  return (\n    <Provider value={value} onChange={handleChange} plugins={plugins} autoFocus>\n      <Content />\n    </Provider>\n  );\n};\ndescribe('Bi/tag/ui', () => {\n  beforeAll(() => {\n    // 防止被 componentDidCatch catch 的 error 被控制台输出\n    jest.spyOn(console, 'error');\n    // @ts-ignore\n    console.error.mockImplementation(() => { });\n  });\n  afterAll(() => {\n    // @ts-ignore\n    console.error.mockRestore();\n  });\n  afterEach(() => {\n    cleanup();\n  });\n\n  describe('unknownTag', () => {\n    test('是否正常渲染 unknownTag', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <cursor />\n              <inline\n                type=\"tag\"\n                data={{\n                  tagType: 'unknown2',\n                  height: 20,\n                  width: 100,\n                  metadata: {},\n                }}\n              />\n            </block>\n          </document>\n        </value>\n      ) as any;\n      const { queryByText } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      expect(!!queryByText('暂无法解析')).toBe(true);\n    });\n\n    test('验证 tag 非首次创建', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              Start Paragraph\n              <inline\n                type=\"tag\"\n                data={{\n                  tagType: 'insert',\n                  height: 20,\n                  width: 100,\n                  metadata: {},\n                }}\n              />\n              <cursor />\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { findByTestId, editor } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      const el = await findByTestId('insert-tag-content');\n      expect(!!el).toBe(true);\n      expect(el.getAttribute('data-owner')).toBe('false');\n    });\n\n    test('插入标签，并验证是否为当前用户首次创建', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              Start Paragraph\n              <cursor />\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { editor, findByText, findByTestId } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      fireEvent.keyDown(editor, getHotkeyEvent('i'));\n      expect(await findByText('isOwnerAndFirstCreated=true')).toBeInstanceOf(HTMLElement);\n      // 第二次重绘时 isOwnerAndFirstCreated = false\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowLeft'));\n      expect(await findByText('isOwnerAndFirstCreated=false')).toBeInstanceOf(HTMLElement);\n    });\n  });\n\n  describe('errorTag', () => {\n    test('渲染标签 renderNode 出现异常，兜底显示', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <cursor />\n              <inline\n                type=\"tag\"\n                data={{\n                  tagType: 'error',\n                  height: 20,\n                  width: 100,\n                  metadata: {},\n                }}\n              />\n            </block>\n          </document>\n        </value>\n      ) as any;\n      const { queryByText } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      expect(!!queryByText('暂无法解析')).toBe(true);\n    });\n\n    test('渲染标签 renderChildren 出现异常，兜底显示', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <cursor />\n              <inline\n                type=\"tag\"\n                data={{\n                  tagType: 'errorChildren',\n                  height: 20,\n                  width: 100,\n                  metadata: {},\n                }}\n              />\n            </block>\n          </document>\n        </value>\n      ) as any;\n      const { queryByText } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      expect(!!queryByText('暂无法解析')).toBe(true);\n    });\n  });\n\n  describe('更新 tag', () => {\n    test('更新tag高度(持久化)', async () => {\n      const value = (\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <cursor />\n              <inline\n                type=\"tag\"\n                data={{\n                  tagType: 'tag',\n                  height: 20,\n                  width: 100,\n                  metadata: {\n                    imTitle: '蓝鲸-文档协同',\n                  },\n                }}\n              />\n            </block>\n          </document>\n        </value>\n      ) as any;\n      const { queryByTestId } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      // 首次点击，验证setData\n      fireEvent.click(queryByTestId('tag-content')!);\n      await waitForTime(100);\n      const content = queryByTestId('tag-content');\n      expect(content.style.height === '40px').toBe(true);\n    });\n  });\n\n  describe('tag 正常渲染', () => {\n    test('tag 宽度大于容器宽度时自适应容器宽度', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block\ntype=\"table\"\nkey=\"table\"\ndata={{\n              colsWidth: [50, 600]\n            }}\n            >\n              <block type=\"table-row\">\n                <block type=\"table-cell\">\n                  <block type=\"paragraph\" />\n                </block>\n                <block type=\"table-cell\">\n                  <block type=\"paragraph\">\n                    <inline\n                      type=\"tag\"\n                      data={{\n                        tagType: 'tag',\n                        height: 20,\n                        width: 400,\n                        metadata: {\n                          imTitle: '蓝鲸-文档协同文档协同文档协同文档协同文档协同文档协同文档协同文档协同文档协同',\n                        },\n                      }}\n                    /><cursor />\n                  </block>\n                </block>\n              </block>\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { findByTestId } = await renderEditor(<Editor defaultValue={value} />);\n      const tag = await findByTestId('tag');\n\n      // 单测不会渲染出真实节点，宽度为 0\n      expect(tag.style.width).toBe('auto');\n    });\n\n    test('verticalAlign 渲染 - 居中', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              123<inline\n                type=\"tag\"\n                data={{\n                  tagType: 'tag',\n                  height: 20,\n                  width: 100,\n                  metadata: {\n                    imTitle: '蓝鲸-文档协同',\n                  },\n                }}\n              /><cursor />\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { findByTestId } = await renderEditor(<Editor defaultValue={value} />);\n      const tagEl = await findByTestId('tag');\n      expect(!!tagEl).toBe(true);\n      expect(tagEl.style.verticalAlign).toBe('middle');\n    });\n\n    test('verticalAlign 渲染 - 顶部', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              123<inline\n                type=\"tag\"\n                data={{\n                  tagType: 'top',\n                  height: 20,\n                  width: 100,\n                  metadata: {\n                    imTitle: '蓝鲸-文档协同',\n                  },\n                }}\n              /><cursor />\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { findByTestId } = await renderEditor(<Editor defaultValue={value} />);\n      const tagEl = await findByTestId('top');\n      expect(!!tagEl).toBe(true);\n      expect(tagEl.style.verticalAlign).toBe('top');\n    });\n  });\n\n  describe('inline-tag/删除', () => {\n    test('向前删除，第一次选中，第二次删除', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              123<inline\n                type=\"tag\"\n                data={{\n                  tagType: 'tag',\n                  height: 20,\n                  width: 100,\n                  metadata: {\n                    imTitle: '蓝鲸-文档协同',\n                  },\n                }}\n              /><cursor />\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { queryByTestId, editor } = await renderEditor(<Editor defaultValue={value} />);\n      fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n      await wait();// 第一次删除选中\n      expect(!!queryByTestId('tag-content').getAttribute('focusbackgroundcolor')).toBe(true);\n      fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n      await wait();// 第二次删除\n      expect(!queryByTestId('tag-content')).toBe(true);\n    });\n    test('向后删除，第一次选中，第二次删除', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <cursor /><inline\n                type=\"tag\"\n                data={{\n                  tagType: 'tag',\n                  height: 20,\n                  width: 100,\n                  metadata: {\n                    imTitle: '蓝鲸-文档协同',\n                  },\n                }}\n              />233\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { queryByTestId, editor } = await renderEditor(<Editor defaultValue={value} />);\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n      await wait();// 第一次删除选中\n      expect(!!queryByTestId('tag-content').getAttribute('focusbackgroundcolor')).toBe(true);\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n      await wait();// 第二次删除\n      expect(!queryByTestId('tag-content')).toBe(true);\n    });\n  });\n\n  describe('inline-tag/左右移动', () => {\n    test('左箭头处理，第一次选中，第二次跳过', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              123<inline\n                type=\"tag\"\n                data={{\n                  tagType: 'tag',\n                  height: 20,\n                  width: 100,\n                  metadata: {\n                    imTitle: '蓝鲸-文档协同',\n                  },\n                }}\n              /><cursor />456\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const output = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              123<cursor /><inline\n                type=\"tag\"\n                data={{\n                  tagType: 'tag',\n                  height: 20,\n                  width: 100,\n                  metadata: {\n                    imTitle: '蓝鲸-文档协同',\n                  },\n                }}\n              />456\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const refValue = React.createRef();\n      const { queryByTestId, editor } = await renderEditor(<Editor defaultValue={value} refValue={refValue} />);\n      // 左箭头\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowLeft'));\n      await wait();// 第一次选中\n      expect(!!queryByTestId('tag-content').getAttribute('focusbackgroundcolor')).toBe(true);\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowLeft'));\n      await wait();// 第二次跳过\n      const actual = refValue.current.toJSON({ preserveSelections: true });\n      const controller = Controller.create({ value: output, plugins: [] });\n      const expected = controller.value.toJSON({ preserveSelections: true });\n      expect(actual).toEqual(expected);\n    });\n    test('右箭头处理，第一次选中，第二次跳过', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              123<cursor /><inline\n                type=\"tag\"\n                data={{\n                  tagType: 'tag',\n                  height: 20,\n                  width: 100,\n                  metadata: {\n                    imTitle: '蓝鲸-文档协同',\n                  },\n                }}\n              />456\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const output = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              123<inline\n                type=\"tag\"\n                data={{\n                  tagType: 'tag',\n                  height: 20,\n                  width: 100,\n                  metadata: {\n                    imTitle: '蓝鲸-文档协同',\n                  },\n                }}\n              /><cursor />456\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const refValue = React.createRef();\n      const { queryByTestId, editor } = await renderEditor(<Editor defaultValue={value} refValue={refValue} />);\n      // 右箭头\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowRight'));\n      await wait();// 第一次选中\n      expect(!!queryByTestId('tag-content').getAttribute('focusbackgroundcolor')).toBe(true);\n      fireEvent.keyDown(editor, getHotkeyEvent('ArrowRight'));\n      await wait();// 第二次跳过\n      const actual = refValue.current.toJSON({ preserveSelections: true });\n      const controller = Controller.create({ value: output, plugins: [] });\n      const expected = controller.value.toJSON({ preserveSelections: true });\n      expect(actual).toEqual(expected);\n    });\n  });\n});\n"],"file":"ui.test.js"}