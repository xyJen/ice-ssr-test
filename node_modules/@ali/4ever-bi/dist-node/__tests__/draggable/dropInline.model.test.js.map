{"version":3,"sources":["../../../../src/__tests__/draggable/dropInline.model.test.tsx"],"names":["createBiPlugins","draggable","image","leftToolbar","dragBlockCases","name","dragKey","in","src","out","colsWidth","plugins","enabled","menu","key","array","describe","forEach","testCase","test","value","controller","Controller","create","draggableData","dragFragment","type","DRAG_TYPE","inline","fragment","command","actual","toJSON","expected","setValue","expect","toEqual"],"mappings":"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","sourcesContent":["/** @jsx jsx */\nimport { Value, Controller } from '@ali/4ever-cangjie';\nimport '@testing-library/jest-dom/extend-expect';\n\nimport {\n  jsx,\n} from '@ali/4ever-dev-test';\nimport draggable from '../../plugins/draggable';\nimport leftToolbar from '../../plugins/leftToolbar';\nimport image from '../../plugins/image';\nimport {\n  DRAG_TYPE,\n} from '@ali/4ever-plugin-draggable';\nimport { createCustomizedBiPlugins } from '../..';\n\nconst createBiPlugins = createCustomizedBiPlugins({\n  draggable,\n  image,\n  leftToolbar,\n});\n\nconst dragBlockCases = [\n  {\n    name: 'UpDown',\n    dragKey: 'drag-1',\n    in: (\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            <inline\n              type=\"image\"\n              key=\"drag-1\"\n              data={{\n                src:\n                    'https://cn.bing.com/az/hprichbg/rb/TeslaCoil_EN-CN1604235004_1920x1080.jpg',\n              }}\n            />\n          </block>\n          <block type=\"paragraph\">\n            <cursor />\n          </block>\n        </document>\n      </value>\n    ),\n    out: (\n      <value>\n        <document>\n          <block type=\"paragraph\" />\n          <block type=\"paragraph\">\n            <inline\n              type=\"image\"\n              key=\"drag-1\"\n              data={{\n                src:\n                    'https://cn.bing.com/az/hprichbg/rb/TeslaCoil_EN-CN1604235004_1920x1080.jpg',\n              }}\n            />\n            <cursor />\n          </block>\n        </document>\n      </value>\n    ),\n  },\n  {\n    name: 'LeftRight',\n    dragKey: 'drag-1',\n    in: (\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            A\n            <inline\n              type=\"image\"\n              key=\"drag-1\"\n              data={{\n                src:\n                    'https://cn.bing.com/az/hprichbg/rb/TeslaCoil_EN-CN1604235004_1920x1080.jpg',\n              }}\n            />\n            B<cursor />\n          </block>\n        </document>\n      </value>\n    ),\n    out: (\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            AB\n            <inline\n              type=\"image\"\n              key=\"drag-1\"\n              data={{\n                src:\n                    'https://cn.bing.com/az/hprichbg/rb/TeslaCoil_EN-CN1604235004_1920x1080.jpg',\n              }}\n            />\n            <cursor />\n          </block>\n        </document>\n      </value>\n    ),\n  },\n  {\n    name: 'InTable',\n    dragKey: 'drag-1',\n    in: (\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            A\n            <inline\n              type=\"image\"\n              key=\"drag-1\"\n              data={{\n                src:\n                    'https://cn.bing.com/az/hprichbg/rb/TeslaCoil_EN-CN1604235004_1920x1080.jpg',\n              }}\n            />\n          </block>\n          <block type=\"table\" key=\"table-key\" data={{ colsWidth: [100, 100] }}>\n            <block type=\"table-row\">\n              <block type=\"table-cell\">\n                <block type=\"paragraph\">A</block>\n              </block>\n              <block type=\"table-cell\">\n                <block type=\"paragraph\">B<cursor /></block>\n              </block>\n            </block>\n          </block>\n        </document>\n      </value>\n    ),\n    out: (\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            A\n          </block>\n          <block type=\"table\" key=\"table-key\" data={{ colsWidth: [100, 100] }}>\n            <block type=\"table-row\">\n              <block type=\"table-cell\">\n                <block type=\"paragraph\">A</block>\n              </block>\n              <block type=\"table-cell\">\n                <block type=\"paragraph\">\n                  B\n                  <inline\n                    type=\"image\"\n                    key=\"drag-1\"\n                    data={{\n                      src:\n                    'https://cn.bing.com/az/hprichbg/rb/TeslaCoil_EN-CN1604235004_1920x1080.jpg',\n                    }}\n                  /><cursor />\n                </block>\n              </block>\n            </block>\n          </block>\n        </document>\n      </value>\n    ),\n  },\n  {\n    name: 'OutTable',\n    dragKey: 'drag-1',\n    in: (\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            A<cursor />\n          </block>\n          <block type=\"table\" key=\"table-key\" data={{ colsWidth: [100, 100] }}>\n            <block type=\"table-row\">\n              <block type=\"table-cell\">\n                <block type=\"paragraph\">A</block>\n              </block>\n              <block type=\"table-cell\">\n                <block type=\"paragraph\">\n                  B\n                  <inline\n                    type=\"image\"\n                    key=\"drag-1\"\n                    data={{\n                      src:\n                    'https://cn.bing.com/az/hprichbg/rb/TeslaCoil_EN-CN1604235004_1920x1080.jpg',\n                    }}\n                  />\n                </block>\n              </block>\n            </block>\n          </block>\n        </document>\n      </value>\n    ),\n    out: (\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            A\n            <inline\n              type=\"image\"\n              key=\"drag-1\"\n              data={{\n                src:\n                    'https://cn.bing.com/az/hprichbg/rb/TeslaCoil_EN-CN1604235004_1920x1080.jpg',\n              }}\n            /><cursor />\n          </block>\n          <block type=\"table\" key=\"table-key\" data={{ colsWidth: [100, 100] }}>\n            <block type=\"table-row\">\n              <block type=\"table-cell\">\n                <block type=\"paragraph\">A</block>\n              </block>\n              <block type=\"table-cell\">\n                <block type=\"paragraph\">B</block>\n              </block>\n            </block>\n          </block>\n        </document>\n      </value>\n    ),\n  },\n];\n\nconst plugins = createBiPlugins({\n  draggable: {\n    enabled: true,\n  },\n  leftToolbar: {\n    menu: [\n      {\n        key: 'draggable',\n      },\n    ],\n  },\n}).array;\n\ndescribe('bi/draggable/dropInline.model', () => {\n  describe('drag inline', () => {\n    dragBlockCases.forEach((testCase) => {\n      test(`行内元素拖拽-${testCase.name}`, async () => {\n        const value = testCase.in as unknown as Value;\n\n        const controller = Controller.create({\n          value,\n          plugins,\n        });\n\n        const draggableData = {\n          dragFragment: {\n            type: DRAG_TYPE.inline,\n            fragment: {\n              key: testCase.dragKey,\n            },\n          },\n        };\n\n        // @ts-ignore\n        controller.command('draggableDropFragment', draggableData);\n\n        const actual = controller.value.toJSON();\n        const expected = controller\n          .setValue(testCase.out as unknown as Value)\n          .value.toJSON();\n\n        expect(actual).toEqual(expected);\n      });\n    });\n  });\n});\n"],"file":"dropInline.model.test.js"}