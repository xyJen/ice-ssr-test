{"version":3,"sources":["../../../../../../src/__tests__/clipboard/ccp/copy/rangeSelection.test.tsx"],"names":["describe","type","data","desc","html","list","listId","level","isOrdered","listStyleType","ind","left","forEach","it","value","szUnit","editor","setData","jest","fn","fireEvent","copy","nativeEvent","clipboardData","preventDefault","expect","mock","calls","toEqual","not","toHaveBeenCalled"],"mappings":"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","sourcesContent":["/** @jsx jsx */\nimport '@testing-library/jest-dom/extend-expect';\nimport { Value } from '@ali/4ever-cangjie';\nimport { act } from '@testing-library/react';\nimport { renderEditor, jsx, fireEvent } from '@ali/4ever-dev-test';\nimport BiEditor from '../../../editor';\n\ndescribe('选区复制', () => {\n  [\n    {\n      type: 'heading-1',\n      data: {},\n      desc: '标题',\n      html: '<article class=\\\"4ever-article\\\" data-clipboard-cangjie=\\\"[&quot;root&quot;,{&quot;copyFrom&quot;:887063969},[&quot;h1&quot;,{},[&quot;span&quot;,{&quot;data-type&quot;:&quot;text&quot;},[&quot;span&quot;,{&quot;bold&quot;:true,&quot;sz&quot;:15,&quot;szUnit&quot;:&quot;pt&quot;,&quot;data-type&quot;:&quot;leaf&quot;},&quot;Hello word&quot;]]]]\\\" data-identifier-application__slash__x-cangjie-fragment=\\\"JTdCJTIya2xhc3MlMjIlM0ElMjJkb2N1bWVudCUyMiUyQyUyMmRhdGElMjIlM0ElN0IlN0QlMkMlMjJub2RlcyUyMiUzQSU1QiU3QiUyMmtsYXNzJTIyJTNBJTIyYmxvY2slMjIlMkMlMjJ0eXBlJTIyJTNBJTIyaGVhZGluZy0xJTIyJTJDJTIyZGF0YSUyMiUzQSU3QiU3RCUyQyUyMm5vZGVzJTIyJTNBJTVCJTdCJTIya2xhc3MlMjIlM0ElMjJ0ZXh0JTIyJTJDJTIybGVhdmVzJTIyJTNBJTVCJTdCJTIya2xhc3MlMjIlM0ElMjJsZWFmJTIyJTJDJTIydGV4dCUyMiUzQSUyMkhlbGxvJTIwd29yZCUyMiUyQyUyMm1hcmtzJTIyJTNBJTVCJTdCJTIya2xhc3MlMjIlM0ElMjJtYXJrJTIyJTJDJTIydHlwZSUyMiUzQSUyMmJvbGQlMjIlMkMlMjJkYXRhJTIyJTNBJTdCJTdEJTdEJTJDJTdCJTIya2xhc3MlMjIlM0ElMjJtYXJrJTIyJTJDJTIydHlwZSUyMiUzQSUyMnN6JTIyJTJDJTIyZGF0YSUyMiUzQSU3QiUyMnZhbHVlJTIyJTNBMTUlMkMlMjJzelVuaXQlMjIlM0ElMjJwdCUyMiU3RCU3RCU1RCU3RCU1RCU3RCU1RCU3RCU1RCU3RA==\\\"><h1 style=\\\"font-size:20pt;line-height:1.45;margin-top:0;margin-bottom:0;text-align:left;text-indent:0;margin-left:0\\\"><span data-type=\\\"text\\\" style=\\\"font-weight:bold;font-size:15pt\\\">Hello&nbsp;word</span></h1></article>',\n    },\n    {\n      type: 'paragraph',\n      data: {},\n      desc: '普通段落',\n      html: '<article class=\\\"4ever-article\\\" data-clipboard-cangjie=\\\"[&quot;root&quot;,{&quot;copyFrom&quot;:887063969},[&quot;p&quot;,{},[&quot;span&quot;,{&quot;data-type&quot;:&quot;text&quot;},[&quot;span&quot;,{&quot;bold&quot;:true,&quot;sz&quot;:15,&quot;szUnit&quot;:&quot;pt&quot;,&quot;data-type&quot;:&quot;leaf&quot;},&quot;Hello word&quot;]]]]\\\" data-identifier-application__slash__x-cangjie-fragment=\\\"JTdCJTIya2xhc3MlMjIlM0ElMjJkb2N1bWVudCUyMiUyQyUyMmRhdGElMjIlM0ElN0IlN0QlMkMlMjJub2RlcyUyMiUzQSU1QiU3QiUyMmtsYXNzJTIyJTNBJTIyYmxvY2slMjIlMkMlMjJ0eXBlJTIyJTNBJTIycGFyYWdyYXBoJTIyJTJDJTIyZGF0YSUyMiUzQSU3QiU3RCUyQyUyMm5vZGVzJTIyJTNBJTVCJTdCJTIya2xhc3MlMjIlM0ElMjJ0ZXh0JTIyJTJDJTIybGVhdmVzJTIyJTNBJTVCJTdCJTIya2xhc3MlMjIlM0ElMjJsZWFmJTIyJTJDJTIydGV4dCUyMiUzQSUyMkhlbGxvJTIwd29yZCUyMiUyQyUyMm1hcmtzJTIyJTNBJTVCJTdCJTIya2xhc3MlMjIlM0ElMjJtYXJrJTIyJTJDJTIydHlwZSUyMiUzQSUyMmJvbGQlMjIlMkMlMjJkYXRhJTIyJTNBJTdCJTdEJTdEJTJDJTdCJTIya2xhc3MlMjIlM0ElMjJtYXJrJTIyJTJDJTIydHlwZSUyMiUzQSUyMnN6JTIyJTJDJTIyZGF0YSUyMiUzQSU3QiUyMnZhbHVlJTIyJTNBMTUlMkMlMjJzelVuaXQlMjIlM0ElMjJwdCUyMiU3RCU3RCU1RCU3RCU1RCU3RCU1RCU3RCU1RCU3RA==\\\"><p style=\\\"text-align:left;text-indent:0;margin-left:0;margin-top:0;margin-bottom:0\\\"><span data-type=\\\"text\\\" style=\\\"font-weight:bold;font-size:15pt\\\">Hello&nbsp;word</span></p></article>',\n    },\n    {\n      type: 'paragraph',\n      data: {\n        list: {\n          listId: 'dn7ncrq6m7j',\n          level: 0,\n          isOrdered: true,\n          listStyleType: 'DEC_LEN_LROM_P',\n        },\n        ind: {\n          left: 32,\n        },\n      },\n      desc: '列表',\n      html: '<article class=\\\"4ever-article\\\" data-clipboard-cangjie=\\\"[&quot;root&quot;,{&quot;copyFrom&quot;:887063969},[&quot;p&quot;,{&quot;list&quot;:{&quot;listId&quot;:&quot;dn7ncrq6m7j&quot;,&quot;level&quot;:0,&quot;isOrdered&quot;:true,&quot;listStyleType&quot;:&quot;DEC_LEN_LROM_P&quot;},&quot;ind&quot;:{&quot;left&quot;:32}},[&quot;span&quot;,{&quot;data-type&quot;:&quot;text&quot;},[&quot;span&quot;,{&quot;bold&quot;:true,&quot;sz&quot;:15,&quot;szUnit&quot;:&quot;pt&quot;,&quot;data-type&quot;:&quot;leaf&quot;},&quot;Hello word&quot;]]]]\\\" data-identifier-application__slash__x-cangjie-fragment=\\\"JTdCJTIya2xhc3MlMjIlM0ElMjJkb2N1bWVudCUyMiUyQyUyMmRhdGElMjIlM0ElN0IlN0QlMkMlMjJub2RlcyUyMiUzQSU1QiU3QiUyMmtsYXNzJTIyJTNBJTIyYmxvY2slMjIlMkMlMjJ0eXBlJTIyJTNBJTIycGFyYWdyYXBoJTIyJTJDJTIyZGF0YSUyMiUzQSU3QiUyMmxpc3QlMjIlM0ElN0IlMjJsaXN0SWQlMjIlM0ElMjJkbjduY3JxNm03aiUyMiUyQyUyMmxldmVsJTIyJTNBMCUyQyUyMmlzT3JkZXJlZCUyMiUzQXRydWUlMkMlMjJsaXN0U3R5bGVUeXBlJTIyJTNBJTIyREVDX0xFTl9MUk9NX1AlMjIlN0QlMkMlMjJpbmQlMjIlM0ElN0IlMjJsZWZ0JTIyJTNBMzIlN0QlN0QlMkMlMjJub2RlcyUyMiUzQSU1QiU3QiUyMmtsYXNzJTIyJTNBJTIydGV4dCUyMiUyQyUyMmxlYXZlcyUyMiUzQSU1QiU3QiUyMmtsYXNzJTIyJTNBJTIybGVhZiUyMiUyQyUyMnRleHQlMjIlM0ElMjJIZWxsbyUyMHdvcmQlMjIlMkMlMjJtYXJrcyUyMiUzQSU1QiU3QiUyMmtsYXNzJTIyJTNBJTIybWFyayUyMiUyQyUyMnR5cGUlMjIlM0ElMjJib2xkJTIyJTJDJTIyZGF0YSUyMiUzQSU3QiU3RCU3RCUyQyU3QiUyMmtsYXNzJTIyJTNBJTIybWFyayUyMiUyQyUyMnR5cGUlMjIlM0ElMjJzeiUyMiUyQyUyMmRhdGElMjIlM0ElN0IlMjJ2YWx1ZSUyMiUzQTE1JTJDJTIyc3pVbml0JTIyJTNBJTIycHQlMjIlN0QlN0QlNUQlN0QlNUQlN0QlNUQlN0QlNUQlN0Q=\\\"><ol><li><div style=\\\"text-align:left;text-indent:0\\\"><span data-type=\\\"text\\\" style=\\\"font-weight:bold;font-size:15pt\\\">Hello&nbsp;word</span></div></li></ol></article>',\n    },\n  ].forEach(({ type, data, desc, html }) => {\n    it(`全选区复制${desc}，复制数据保留${desc}类型及样式`, async () => {\n      const value = (\n        <value>\n          <document>\n            <anchor />\n            <block type={type} data={data}>\n              <m type=\"sz\" data={{ value: 15, szUnit: 'pt' }}>\n                <m type=\"bold\">Hello word</m>\n              </m>\n            </block>\n            <focus />\n          </document>\n        </value>\n      ) as unknown as Value;\n      const { editor } = await renderEditor(<BiEditor defaultValue={value} />);\n      act(() => {\n        const setData = jest.fn();\n        fireEvent.copy(editor, {\n          nativeEvent: {\n            clipboardData: {\n              setData,\n            },\n            preventDefault() {},\n          },\n        });\n        expect(setData.mock.calls[1]).toEqual(['text/html', html]);\n      });\n    });\n  });\n  [\n    {\n      type: 'paragraph',\n      data: {},\n      desc: '普通段落',\n      html: '<article class=\\\"4ever-article\\\" data-clipboard-cangjie=\\\"[&quot;root&quot;,{&quot;copyFrom&quot;:887063969},[&quot;p&quot;,{},[&quot;span&quot;,{&quot;data-type&quot;:&quot;text&quot;},[&quot;span&quot;,{&quot;bold&quot;:true,&quot;sz&quot;:15,&quot;szUnit&quot;:&quot;pt&quot;,&quot;data-type&quot;:&quot;leaf&quot;},&quot;Hello&quot;]]]]\\\" data-identifier-application__slash__x-cangjie-fragment=\\\"JTdCJTIya2xhc3MlMjIlM0ElMjJkb2N1bWVudCUyMiUyQyUyMmRhdGElMjIlM0ElN0IlN0QlMkMlMjJub2RlcyUyMiUzQSU1QiU3QiUyMmtsYXNzJTIyJTNBJTIyYmxvY2slMjIlMkMlMjJ0eXBlJTIyJTNBJTIycGFyYWdyYXBoJTIyJTJDJTIyZGF0YSUyMiUzQSU3QiU3RCUyQyUyMm5vZGVzJTIyJTNBJTVCJTdCJTIya2xhc3MlMjIlM0ElMjJ0ZXh0JTIyJTJDJTIybGVhdmVzJTIyJTNBJTVCJTdCJTIya2xhc3MlMjIlM0ElMjJsZWFmJTIyJTJDJTIydGV4dCUyMiUzQSUyMkhlbGxvJTIyJTJDJTIybWFya3MlMjIlM0ElNUIlN0IlMjJrbGFzcyUyMiUzQSUyMm1hcmslMjIlMkMlMjJ0eXBlJTIyJTNBJTIyYm9sZCUyMiUyQyUyMmRhdGElMjIlM0ElN0IlN0QlN0QlMkMlN0IlMjJrbGFzcyUyMiUzQSUyMm1hcmslMjIlMkMlMjJ0eXBlJTIyJTNBJTIyc3olMjIlMkMlMjJkYXRhJTIyJTNBJTdCJTIydmFsdWUlMjIlM0ExNSUyQyUyMnN6VW5pdCUyMiUzQSUyMnB0JTIyJTdEJTdEJTVEJTdEJTVEJTdEJTVEJTdEJTVEJTdE\\\"><p style=\\\"text-align:left;text-indent:0;margin-left:0;margin-top:0;margin-bottom:0\\\"><span data-type=\\\"text\\\" style=\\\"font-weight:bold;font-size:15pt\\\">Hello</span></p></article>',\n    },\n    {\n      type: 'paragraph',\n      data: {\n        list: {\n          listId: 'dn7ncrq6m7j',\n          level: 0,\n          isOrdered: true,\n          listStyleType: 'DEC_LEN_LROM_P',\n        },\n        ind: {\n          left: 32,\n        },\n      },\n      desc: '列表',\n      html: '<article class=\\\"4ever-article\\\" data-clipboard-cangjie=\\\"[&quot;root&quot;,{&quot;copyFrom&quot;:887063969},[&quot;p&quot;,{},[&quot;span&quot;,{&quot;data-type&quot;:&quot;text&quot;},[&quot;span&quot;,{&quot;bold&quot;:true,&quot;sz&quot;:15,&quot;szUnit&quot;:&quot;pt&quot;,&quot;data-type&quot;:&quot;leaf&quot;},&quot;Hello&quot;]]]]\\\" data-identifier-application__slash__x-cangjie-fragment=\\\"JTdCJTIya2xhc3MlMjIlM0ElMjJkb2N1bWVudCUyMiUyQyUyMmRhdGElMjIlM0ElN0IlN0QlMkMlMjJub2RlcyUyMiUzQSU1QiU3QiUyMmtsYXNzJTIyJTNBJTIyYmxvY2slMjIlMkMlMjJ0eXBlJTIyJTNBJTIycGFyYWdyYXBoJTIyJTJDJTIyZGF0YSUyMiUzQSU3QiUyMmxpc3QlMjIlM0ElN0IlMjJsaXN0SWQlMjIlM0ElMjJkbjduY3JxNm03aiUyMiUyQyUyMmxldmVsJTIyJTNBMCUyQyUyMmlzT3JkZXJlZCUyMiUzQXRydWUlMkMlMjJsaXN0U3R5bGVUeXBlJTIyJTNBJTIyREVDX0xFTl9MUk9NX1AlMjIlN0QlMkMlMjJpbmQlMjIlM0ElN0IlMjJsZWZ0JTIyJTNBMzIlN0QlN0QlMkMlMjJub2RlcyUyMiUzQSU1QiU3QiUyMmtsYXNzJTIyJTNBJTIydGV4dCUyMiUyQyUyMmxlYXZlcyUyMiUzQSU1QiU3QiUyMmtsYXNzJTIyJTNBJTIybGVhZiUyMiUyQyUyMnRleHQlMjIlM0ElMjJIZWxsbyUyMiUyQyUyMm1hcmtzJTIyJTNBJTVCJTdCJTIya2xhc3MlMjIlM0ElMjJtYXJrJTIyJTJDJTIydHlwZSUyMiUzQSUyMmJvbGQlMjIlMkMlMjJkYXRhJTIyJTNBJTdCJTdEJTdEJTJDJTdCJTIya2xhc3MlMjIlM0ElMjJtYXJrJTIyJTJDJTIydHlwZSUyMiUzQSUyMnN6JTIyJTJDJTIyZGF0YSUyMiUzQSU3QiUyMnZhbHVlJTIyJTNBMTUlMkMlMjJzelVuaXQlMjIlM0ElMjJwdCUyMiU3RCU3RCU1RCU3RCU1RCU3RCU1RCU3RCU1RCU3RA==\\\"><p style=\\\"text-align:left;text-indent:0;margin-left:0;margin-top:0;margin-bottom:0\\\"><span data-type=\\\"text\\\" style=\\\"font-weight:bold;font-size:15pt\\\">Hello</span></p></article>',\n    },\n  ].forEach(({ type, data, desc, html }) => {\n    it(`部分选区复制${desc}，复制数据保留${desc}类型及样式`, async () => {\n      const value = (\n        <value>\n          <document>\n            <anchor />\n            <block type={type} data={data}>\n              <m type=\"sz\" data={{ value: 15, szUnit: 'pt' }}>\n                <m type=\"bold\">\n                  Hello\n                  <focus />\n                  word\n                </m>\n              </m>\n            </block>\n          </document>\n        </value>\n      ) as unknown as Value;\n      const { editor } = await renderEditor(<BiEditor defaultValue={value} />);\n      act(() => {\n        const setData = jest.fn();\n        fireEvent.copy(editor, {\n          nativeEvent: {\n            clipboardData: {\n              setData,\n            },\n            preventDefault() {},\n          },\n        });\n        expect(setData.mock.calls[1]).toEqual([\n          'text/html',\n          html,\n        ]);\n      });\n    });\n  });\n\n  [\n    {\n      type: 'heading-1',\n      data: {},\n      desc: 'heading',\n    },\n  ].forEach(({ type, data, desc }) => {\n    it(`部分选区复制${desc}，复制数据保留${desc}类型及样式`, async () => {\n      const value = (\n        <value>\n          <document>\n            <anchor />\n            <block type={type} data={data}>\n              <m type=\"sz\" data={{ value: 15, szUnit: 'pt' }}>\n                <m type=\"bold\">\n                  Hello\n                  <focus />\n                  word\n                </m>\n              </m>\n            </block>\n          </document>\n        </value>\n      ) as unknown as Value;\n      const { editor } = await renderEditor(<BiEditor defaultValue={value} />);\n      act(() => {\n        const setData = jest.fn();\n        fireEvent.copy(editor, {\n          nativeEvent: {\n            clipboardData: {\n              setData,\n            },\n            preventDefault() {},\n          },\n        });\n        expect(setData.mock.calls[1]).toEqual([\n          'text/html',\n          '<article class=\\\"4ever-article\\\" data-clipboard-cangjie=\\\"[&quot;root&quot;,{&quot;copyFrom&quot;:887063969},[&quot;h1&quot;,{},[&quot;span&quot;,{&quot;data-type&quot;:&quot;text&quot;},[&quot;span&quot;,{&quot;bold&quot;:true,&quot;sz&quot;:15,&quot;szUnit&quot;:&quot;pt&quot;,&quot;data-type&quot;:&quot;leaf&quot;},&quot;Hello&quot;]]]]\\\" data-identifier-application__slash__x-cangjie-fragment=\\\"JTdCJTIya2xhc3MlMjIlM0ElMjJkb2N1bWVudCUyMiUyQyUyMmRhdGElMjIlM0ElN0IlN0QlMkMlMjJub2RlcyUyMiUzQSU1QiU3QiUyMmtsYXNzJTIyJTNBJTIyYmxvY2slMjIlMkMlMjJ0eXBlJTIyJTNBJTIyaGVhZGluZy0xJTIyJTJDJTIyZGF0YSUyMiUzQSU3QiU3RCUyQyUyMm5vZGVzJTIyJTNBJTVCJTdCJTIya2xhc3MlMjIlM0ElMjJ0ZXh0JTIyJTJDJTIybGVhdmVzJTIyJTNBJTVCJTdCJTIya2xhc3MlMjIlM0ElMjJsZWFmJTIyJTJDJTIydGV4dCUyMiUzQSUyMkhlbGxvJTIyJTJDJTIybWFya3MlMjIlM0ElNUIlN0IlMjJrbGFzcyUyMiUzQSUyMm1hcmslMjIlMkMlMjJ0eXBlJTIyJTNBJTIyYm9sZCUyMiUyQyUyMmRhdGElMjIlM0ElN0IlN0QlN0QlMkMlN0IlMjJrbGFzcyUyMiUzQSUyMm1hcmslMjIlMkMlMjJ0eXBlJTIyJTNBJTIyc3olMjIlMkMlMjJkYXRhJTIyJTNBJTdCJTIydmFsdWUlMjIlM0ExNSUyQyUyMnN6VW5pdCUyMiUzQSUyMnB0JTIyJTdEJTdEJTVEJTdEJTVEJTdEJTVEJTdEJTVEJTdE\\\"><h1 style=\\\"font-size:20pt;line-height:1.45;margin-top:0;margin-bottom:0;text-align:left;text-indent:0;margin-left:0\\\"><span data-type=\\\"text\\\" style=\\\"font-weight:bold;font-size:15pt\\\">Hello</span></h1></article>',\n        ]);\n      });\n    });\n  });\n\n  it('collapsed 选区复制不做任何处理', async () => {\n    const value = (\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            <m type=\"sz\" data={{ value: 15, szUnit: 'pt' }}>\n              <m type=\"bold\">\n                Hello\n                <cursor />\n                word\n              </m>\n            </m>\n          </block>\n        </document>\n      </value>\n    ) as unknown as Value;\n    const { editor } = await renderEditor(<BiEditor defaultValue={value} />);\n    act(() => {\n      const setData = jest.fn();\n      fireEvent.copy(editor, {\n        nativeEvent: {\n          clipboardData: {\n            setData,\n          },\n          preventDefault() {},\n        },\n      });\n      expect(setData).not.toHaveBeenCalled();\n    });\n  });\n});\n"],"file":"rangeSelection.test.js"}