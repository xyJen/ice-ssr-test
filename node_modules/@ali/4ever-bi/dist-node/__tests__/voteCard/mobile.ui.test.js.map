{"version":3,"sources":["../../../../src/__tests__/voteCard/mobile.ui.test.tsx"],"names":["createBiPlugins","biPlugins","MobileVoteCardPlugin","Editor","props","defaultValue","value","setValue","React","useState","plugins","useMemo","handleChange","useCallback","changed","voteCardData","title","voteType","voteId","optionInfoList","content","pos","optionTicket","userOptionTicket","endTime","showTicketBeforeVoting","isGrayEnable","describe","beforeAll","jest","spyOn","console","error","mockImplementation","afterAll","mockRestore","afterEach","test","cardType","height","metadata","queryByTestId","voteDom","expect","toBe"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/** @jsx jsx */\nimport * as React from 'react';\nimport { Value } from '@ali/4ever-cangjie';\nimport { createCustomizedBiPlugins, MobileVoteCardPlugin, plugins as biPlugins } from '../..';\nimport {\n  cleanup,\n} from '@testing-library/react';\nimport '@testing-library/jest-dom/extend-expect';\nimport Provider from '../../provider';\nimport Content from '../../content';\nimport { renderEditor, jsx } from '@ali/4ever-dev-test';\n\ninterface EditorProps {\n  defaultValue: Value;\n}\n\nconst createBiPlugins = createCustomizedBiPlugins({\n  ...biPlugins,\n  MobileVoteCardPlugin,\n} as any);\n\nconst Editor: React.FC<EditorProps> = (props) => {\n  const { defaultValue } = props;\n  const [value, setValue] = React.useState(defaultValue);\n  const plugins = React.useMemo(() => {\n    return createBiPlugins({\n    });\n  }, []);\n\n  const handleChange = React.useCallback((changed) => {\n    setValue(changed.value);\n  }, []);\n\n  return (\n    <Provider value={value} onChange={handleChange} plugins={plugins} autoFocus>\n      <Content />\n    </Provider>\n  );\n};\n\nconst voteCardData = {\n  title: \"test111111\",\n  voteType: 1,\n  voteId: '12321',\n  optionInfoList: [\n    { content: '111111', pos: 1, optionTicket: 0, userOptionTicket: 0 },\n    { content: '222222', pos: 2, optionTicket: 0, userOptionTicket: 0 }\n  ],\n  endTime: 124214214200,\n  showTicketBeforeVoting: false,\n  isGrayEnable: true,\n};\n\n\ndescribe('bi/voteCard/mobile/ui', () => {\n  beforeAll(() => {\n    // 防止被 componentDidCatch catch 的 error 被控制台输出\n    jest.spyOn(console, 'error');\n    // @ts-ignore\n    console.error.mockImplementation(() => { });\n  });\n\n  afterAll(() => {\n    // @ts-ignore\n    console.error.mockRestore();\n  });\n\n  afterEach(() => {\n    cleanup();\n  });\n\n  describe('bi/calendarCard/mobile/ui', () => {\n    test('移动端暂不显示投票', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'vote', height: 350, metadata: voteCardData }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByTestId } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      const voteDom = queryByTestId('card-vote-container-result')\n        || queryByTestId('card-vote-container-edit')\n        || queryByTestId('card-vote-container-voting');\n      expect(voteDom).toBe(null);\n    });\n  });\n});\n"],"file":"mobile.ui.test.js"}