{"version":3,"sources":["../../../../src/__tests__/voteCard/ui.test.tsx"],"names":["sleep","ms","Promise","resolve","setTimeout","createBiPlugins","biPlugins","voteCard","VoteCardPlugin","Editor","props","defaultValue","voteCardConfig","value","setValue","React","useState","plugins","useMemo","handleChange","useCallback","changed","editingData","title","voteType","optionInfoList","content","pos","optionTicket","userOptionTicket","endTime","Date","getTime","showTicketBeforeVoting","createData","voteId","serviceErrorData","isServiceError","serviceErrorMsg","modifyData","voteData","participateUserCount","totalVoteCount","votedData","createVoteCardConfig","config","locale","remove","add","expired","reVote","deadline","unit","total","submit","noDeadline","creator","titlePlaceholder","optionPlaceholder","checkbox","resultShow","always","afterVote","radio","save","cancel","edit","createVote","modifyVote","submitVote","isGrayEnable","createVoteCardConfig2","getVote","_id","callback","describe","beforeAll","jest","spyOn","console","error","mockImplementation","afterAll","mockRestore","afterEach","test","cardType","height","metadata","queryByTestId","voteTitle","textContent","expect","toBe","voteEditCard","queryByText","fireEvent","mouseOver","editBtn","click","cancelBtn","skip","titleDom","options","change","target","saveBtn","votingCard","resultCard","voteBtn","resultCard2","serviceError"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/** @jsx jsx */\nimport * as React from 'react';\nimport { Value } from '@ali/4ever-cangjie';\nimport { createCustomizedBiPlugins, VoteCardPlugin, plugins as biPlugins } from '../..';\nimport { cleanup, waitFor } from '@testing-library/react';\nimport '@testing-library/jest-dom/extend-expect';\nimport Provider from '../../provider';\nimport Content from '../../content';\nimport { renderEditor, fireEvent, jsx } from '@ali/4ever-dev-test';\n\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\ninterface EditorProps {\n  defaultValue: Value;\n  voteCardConfig: any;\n}\n\nconst createBiPlugins = createCustomizedBiPlugins({\n  ...biPlugins,\n  voteCard: VoteCardPlugin,\n} as any);\n\nconst Editor: React.FC<EditorProps> = (props) => {\n  const { defaultValue, voteCardConfig } = props;\n  const [value, setValue] = React.useState(defaultValue);\n  const plugins = React.useMemo(() => {\n    return createBiPlugins({\n      voteCard: voteCardConfig,\n    });\n  }, [voteCardConfig]);\n\n  const handleChange = React.useCallback((changed) => {\n    setValue(changed.value);\n  }, []);\n\n  return (\n    <Provider value={value} onChange={handleChange} plugins={plugins} autoFocus>\n      <Content />\n    </Provider>\n  );\n};\n\nconst editingData = {\n  title: '',\n  voteType: 1,\n  optionInfoList: [\n    { content: '', pos: 1, optionTicket: 0, userOptionTicket: 0 },\n    { content: '', pos: 2, optionTicket: 0, userOptionTicket: 0 }\n  ],\n  endTime: new Date().getTime() + 1000 * 60 * 60 * 24 * 7,\n  showTicketBeforeVoting: false,\n};\n\nconst createData = {\n  title: '文字蓝鲸团队2022团建计划',\n  voteId: 'abc-123',\n  voteType: 1,\n  optionInfoList: [\n    { content: '北京环球影城', pos: 1, optionTicket: 0, userOptionTicket: 0 },\n    { content: '上海迪士尼', pos: 2, optionTicket: 0, userOptionTicket: 0 },\n    { content: '广州长隆乐园', pos: 3, optionTicket: 0, userOptionTicket: 0 },\n    { content: '常州中华恐龙园', pos: 4, optionTicket: 0, userOptionTicket: 0 }\n  ],\n  endTime: new Date().getTime() + 1000 * 60 * 60 * 24 * 7,\n  showTicketBeforeVoting: false,\n};\n\nconst serviceErrorData = {\n  isServiceError: true,\n  serviceErrorMsg: '服务端错误',\n};\n\nconst modifyData = {\n  title: '文字蓝鲸团队2022团建计划',\n  voteId: 'abc-123',\n  voteType: 2,\n  optionInfoList: [\n    { content: '北京环球影城', pos: 1, optionTicket: 0, userOptionTicket: 0 },\n    { content: '上海迪士尼', pos: 2, optionTicket: 0, userOptionTicket: 0 },\n    { content: '广州长隆乐园', pos: 3, optionTicket: 0, userOptionTicket: 0 },\n    { content: '常州中华恐龙园', pos: 4, optionTicket: 0, userOptionTicket: 0 }\n  ],\n  endTime: new Date().getTime() + 1000 * 60 * 60 * 24 * 7,\n  showTicketBeforeVoting: false,\n};\n\nconst voteData = {\n  title: '文字蓝鲸团队2022团建计划',\n  voteId: 'abc-123',\n  voteType: 1,\n  optionInfoList: [\n    { content: '北京环球影城', pos: 1, optionTicket: 1, userOptionTicket: 0 },\n    { content: '上海迪士尼', pos: 2, optionTicket: 0, userOptionTicket: 0 },\n    { content: '广州长隆乐园', pos: 3, optionTicket: 0, userOptionTicket: 0 },\n    { content: '常州中华恐龙园', pos: 4, optionTicket: 0, userOptionTicket: 0 }\n  ],\n  endTime: new Date().getTime() + 1000 * 60 * 60 * 24 * 7,\n  showTicketBeforeVoting: false,\n  participateUserCount: 1,\n  totalVoteCount: 1,\n};\n\nconst votedData = {\n  title: '文字蓝鲸团队2022团建计划',\n  voteId: 'abc-123',\n  voteType: 1,\n  optionInfoList: [\n    { content: '北京环球影城', pos: 1, optionTicket: 1, userOptionTicket: 0 },\n    { content: '上海迪士尼', pos: 2, optionTicket: 0, userOptionTicket: 1 },\n    { content: '广州长隆乐园', pos: 3, optionTicket: 0, userOptionTicket: 0 },\n    { content: '常州中华恐龙园', pos: 4, optionTicket: 0, userOptionTicket: 0 }\n  ],\n  endTime: new Date().getTime() + 1000 * 60 * 60 * 24 * 7,\n  showTicketBeforeVoting: false,\n  participateUserCount: 2,\n  totalVoteCount: 2,\n};\n\nconst createVoteCardConfig = (config: any) => {\n  return {\n    locale: {\n      remove: '删除',\n      add: '添加',\n      expired: '截止',\n      reVote: '重新投票',\n      deadline: '截止日期',\n      unit: '票',\n      total: '人投票',\n      submit: '投票',\n      noDeadline: '无截止日期',\n      creator: '创建',\n      titlePlaceholder: '请输入标题',\n      optionPlaceholder: '请输入选项内容',\n      checkbox: '多选',\n      resultShow: '单选',\n      always: '始终显示',\n      afterVote: '投票后可见',\n      radio: '单选',\n      save: '保存',\n      cancel: '取消',\n      edit: '编辑',\n    },\n    createVote: () => {\n      return Promise.resolve(createData);\n    },\n    // getVote: (_id, setData) => {\n    //   return setData(createData);\n    // },\n    modifyVote: () => {\n      return Promise.resolve(modifyData);\n    },\n    submitVote: () => {\n      return Promise.resolve(voteData);\n    },\n    isGrayEnable: true,\n    ...config,\n  };\n};\n\nconst createVoteCardConfig2 = (config: any) => {\n  return {\n    locale: {\n      remove: '删除',\n      add: '添加',\n      expired: '截止',\n      reVote: '重新投票',\n      deadline: '截止日期',\n      unit: '票',\n      total: '人投票',\n      submit: '投票',\n      noDeadline: '无截止日期',\n      creator: '创建',\n      titlePlaceholder: '请输入标题',\n      optionPlaceholder: '请输入选项内容',\n      checkbox: '多选',\n      resultShow: '单选',\n      always: '始终显示',\n      afterVote: '投票后可见',\n      radio: '单选',\n      save: '保存',\n      cancel: '取消',\n      edit: '编辑',\n    },\n    createVote: () => {\n      return Promise.resolve(createData);\n    },\n    getVote: (_id, callback) => {\n      return callback(serviceErrorData);\n    },\n    modifyVote: () => {\n      return Promise.resolve(modifyData);\n    },\n    submitVote: () => {\n      return Promise.resolve(voteData);\n    },\n    isGrayEnable: true,\n    ...config,\n  };\n};\n\n\ndescribe('Bi/voteCard/ui', () => {\n  beforeAll(() => {\n    // 防止被 componentDidCatch catch 的 error 被控制台输出\n    jest.spyOn(console, 'error');\n    // @ts-ignore\n    console.error.mockImplementation(() => { });\n  });\n\n  afterAll(() => {\n    // @ts-ignore\n    console.error.mockRestore();\n  });\n\n  afterEach(() => {\n    cleanup();\n  });\n\n  describe('Bi/voteCard/UI', () => {\n    test('正常渲染投票态-未投票，未设置始终可见', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'vote', height: 350, metadata: voteData }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByTestId } = await renderEditor(\n        <Editor defaultValue={value} voteCardConfig={createVoteCardConfig({})} />,\n      );\n\n      const voteTitle = queryByTestId('card-vote-voting-title').textContent;\n      expect(voteTitle).toBe(voteData.title);\n    });\n\n    test('正常渲染编辑态-未生成voteId时', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'vote', height: 350, metadata: editingData }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByTestId } = await renderEditor(\n        <Editor defaultValue={value} voteCardConfig={createVoteCardConfig({})} />,\n      );\n\n      const voteEditCard = queryByTestId('card-vote-container-edit');\n      expect(!!voteEditCard).toBe(true);\n    });\n\n    test('正常渲染结果页-设置始终可见', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{\n              cardType: 'vote', height: 350, metadata: {\n                ...voteData,\n                showTicketBeforeVoting: true,\n              }\n            }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByTestId } = await renderEditor(\n        <Editor defaultValue={value} voteCardConfig={createVoteCardConfig({})} />,\n      );\n\n      const voteTitle = queryByTestId('card-vote-result-title').textContent;\n      expect(voteTitle).toBe(voteData.title);\n    });\n\n    test('正常渲染结果页-已投票', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{\n              cardType: 'vote', height: 350, metadata: votedData\n            }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByTestId } = await renderEditor(\n        <Editor defaultValue={value} voteCardConfig={createVoteCardConfig({})} />,\n      );\n\n      const voteTitle = queryByTestId('card-vote-result-title').textContent;\n      expect(voteTitle).toBe(voteData.title);\n    });\n\n    test('切换：结果页 -> 编辑态 -> 结果页', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{\n              cardType: 'vote', height: 350, metadata: votedData\n            }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByTestId, queryByText } = await renderEditor(\n        <Editor defaultValue={value} voteCardConfig={createVoteCardConfig({})} />,\n      );\n\n      const voteCard = queryByTestId('card-vote-container-result');\n      expect(!!voteCard).toBe(true);\n      fireEvent.mouseOver(voteCard);\n      const editBtn = queryByTestId('card-vote-header-toolbar-edit');\n      fireEvent.click(editBtn);\n      await sleep(1000);\n      const voteEditCard = queryByTestId('card-vote-container-edit');\n\n      expect(!!voteEditCard).toBe(true);\n      const cancelBtn = queryByText('取消');\n      fireEvent.click(cancelBtn);\n      await waitFor(() => {\n        const voteCard = queryByTestId('card-vote-container-result');\n        expect(!!voteCard).toBe(true);\n      });\n    });\n\n    test.skip('编辑：创建', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'vote', height: 350, metadata: editingData }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByTestId, queryByText } = await renderEditor(\n        <Editor defaultValue={value} voteCardConfig={createVoteCardConfig({})} />,\n      );\n\n      const voteEditCard = queryByTestId('card-vote-container-edit');\n      expect(!!voteEditCard).toBe(true);\n\n      // 修改标题\n      const titleDom = queryByTestId('card-vote-edit-title');\n      const options = queryByTestId('card-vote-edit-options');\n\n      fireEvent.change(titleDom, {\n        target: {\n          value: '修改title',\n        },\n      });\n\n      await sleep(200);\n      // const title = queryByTestId('card-vote-edit-title');\n      // 添加选项\n      const saveBtn = queryByText('保存');\n      fireEvent.click(saveBtn);\n\n      const title = queryByTestId('card-vote-edit-title');\n      const votingCard = queryByTestId('card-vote-container-voting');\n      expect(!!votingCard).toBe(true);\n    });\n\n    test.skip('编辑：修改', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{\n              cardType: 'vote', height: 350, metadata: votedData\n            }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByTestId, queryByText } = await renderEditor(\n        <Editor defaultValue={value} voteCardConfig={createVoteCardConfig({})} />,\n      );\n\n      const voteCard = queryByTestId('card-vote-container-result');\n      expect(!!voteCard).toBe(true);\n      fireEvent.mouseOver(voteCard);\n      const editBtn = queryByTestId('card-vote-header-toolbar-edit');\n      fireEvent.click(editBtn);\n      await sleep(1000);\n      const voteEditCard = queryByTestId('card-vote-container-edit');\n\n      expect(!!voteEditCard).toBe(true);\n\n      // 修改标题\n      const titleDom = queryByTestId('card-vote-edit-title');\n\n      fireEvent.change(titleDom, {\n        target: {\n          value: '修改title',\n        },\n      });\n\n      // 添加选项\n      const saveBtn = queryByText('保存');\n      fireEvent.click(saveBtn);\n\n      const resultCard = queryByTestId('card-vote-container-result');\n      expect(!!resultCard).toBe(true);\n    });\n\n    test.skip('投票：发起投票', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'vote', height: 350, metadata: voteData }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByTestId, queryByText } = await renderEditor(\n        <Editor defaultValue={value} voteCardConfig={createVoteCardConfig({})} />,\n      );\n\n      const votingCard = queryByTestId('card-vote-container-voting');\n      expect(!!votingCard).toBe(true);\n\n      const voteBtn = queryByText('投票');\n      fireEvent.click(voteBtn);\n\n      await sleep(500);\n\n      const resultCard = queryByTestId('card-vote-container-result');\n      expect(!!resultCard).toBe(true);\n    });\n\n    test('投票：已投票，或设置始终可见，可取消投票', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'vote', height: 350, metadata: votedData }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByTestId, queryByText } = await renderEditor(\n        <Editor defaultValue={value} voteCardConfig={createVoteCardConfig({})} />,\n      );\n\n      const resultCard = queryByTestId('card-vote-container-result');\n      expect(!!resultCard).toBe(true);\n\n      const voteBtn = queryByText('重新投票');\n      fireEvent.click(voteBtn);\n\n      await sleep(1000);\n      const votingCard = queryByTestId('card-vote-container-voting');\n      expect(!!votingCard).toBe(true);\n\n      const cancelBtn = queryByText('取消');\n      fireEvent.click(cancelBtn);\n      await sleep(1000);\n\n      const resultCard2 = queryByTestId('card-vote-container-result');\n      expect(!!resultCard2).toBe(true);\n    });\n\n    test('投票：未投票，且未设置始终可见，不取消投票', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'vote', height: 350, metadata: voteData }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByTestId, queryByText } = await renderEditor(\n        <Editor defaultValue={value} voteCardConfig={createVoteCardConfig({})} />,\n      );\n\n      const votingCard = queryByTestId('card-vote-container-voting');\n      expect(!!votingCard).toBe(true);\n\n      const cancelBtn = queryByText('取消');\n      expect(cancelBtn).toBe(null);\n    });\n\n    test('断网拉取不到数据', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'vote', height: 350, metadata: voteData }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n\n      const { queryByText } = await renderEditor(\n        <Editor defaultValue={value} voteCardConfig={createVoteCardConfig2({})} />,\n      );\n\n      const serviceError = queryByText('服务端错误');\n      expect(!!serviceError).toBe(true);\n    });\n  });\n});\n"],"file":"ui.test.js"}