{"version":3,"sources":["../../../../src/__tests__/card/ui.test.tsx"],"names":["CreateCardPlugin","onKeyDown","event","controller","next","key","run","cardType","onCangjiePaste","InsertCardPlugin","config","renderNode","isOwnerAndFirstCreated","String","demoCard","props","node","isSelected","onClick","height","data","clickCard","disableSelectedCard","disableSelected","ErrorComponent","Error","errorCardWithChildren","errorCard","createBiPlugins","biPlugins","Editor","defaultValue","value","setValue","React","useState","plugins","useMemo","handleChange","useCallback","changed","describe","beforeAll","jest","spyOn","console","error","mockImplementation","afterAll","mockRestore","afterEach","test","queryByText","unknown","expect","toBe","findByTestId","editor","el","getAttribute","findByText","fireEvent","keyDown","click","toBeInstanceOf","HTMLElement","delBtn","queryByTestId","closest","Mo","jsonMLToValue","cardContent","content"],"mappings":"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","sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/** @jsx jsx */\nimport * as React from 'react';\nimport { Value, Element, Controller, RenderNodeProps, domUtils } from '@ali/4ever-cangjie';\nimport { createCustomizedBiPlugins, cardFactory, setCardData, setCardInjection, plugins as biPlugins, insertCard } from '../..';\nimport {\n  cleanup,\n  wait,\n  waitFor,\n  waitForElementToBeRemoved,\n} from '@testing-library/react';\nimport '@testing-library/jest-dom/extend-expect';\nimport Provider from '../../provider';\nimport Content from '../../content';\nimport { renderEditor, fireEvent, getHotkeyEvent, jsx, waitForTime } from '@ali/4ever-dev-test';\nimport Mo from '../serializer';\nimport { omit } from 'lodash-es';\n\ninterface EditorProps {\n  defaultValue: Value;\n}\n\nconst CreateCardPlugin = () => {\n  return {\n    onKeyDown: (event, controller, next) => {\n      if (event.key === 'i') {\n        return controller.run('onAction', insertCard({ cardType: 'insert' }));\n      }\n      return next();\n    },\n    onCangjiePaste: (event, controller, next) => {\n      return next();\n    },\n  };\n};\n\nconst InsertCardPlugin = cardFactory((config) => {\n  return {\n    cardType: 'insert',\n    renderNode: ({ isOwnerAndFirstCreated }, controller: Controller) => {\n      return (<div data-testid=\"insert-card-content\" data-owner={isOwnerAndFirstCreated} >isOwnerAndFirstCreated={String(isOwnerAndFirstCreated)}</div>);\n    },\n  };\n});\n\nconst demoCard = cardFactory((config) => {\n  return {\n    cardType: 'demo',\n    renderNode: (props: RenderNodeProps<Element>, controller: Controller) => {\n      const { node, isSelected } = props;\n      const onClick = () => {\n        const { height } = node.data;\n        if (!height) controller.run('onAction', setCardData(node, { height: 300 }));\n        else if (height === 300) controller.run('onAction', setCardInjection(node, { height: 350 }));\n        else if (height === 350) {\n          controller.run('onAction', setCardData(node, { height: 400 }));\n          controller.run('onAction', setCardInjection(node, { height: 410 }));\n        }\n      };\n      const { height } = node.data;\n      return <div data-testid=\"demo-card-content\" data-selected={isSelected} onClick={onClick} data-card-height={height}>日程卡片</div>;\n    },\n    onCangjiePaste: (event, controller, next) => {\n      return next();\n    },\n  };\n});\n\nconst clickCard = cardFactory((config) => {\n  return {\n    cardType: 'click',\n    renderNode: (props: RenderNodeProps<Element>, controller: Controller) => {\n      const { node, isSelected } = props;\n      const { height } = node.data;\n      return <div data-testid=\"click-card-content\" data-selected={isSelected} data-card-height={height}>日程卡片</div>;\n    },\n    onCangjiePaste: (event, controller, next) => {\n      return next();\n    },\n  };\n});\n\nconst disableSelectedCard = cardFactory((config) => {\n  return {\n    cardType: 'disableSelected',\n    disableSelected: true,\n    renderNode: (props: RenderNodeProps<Element>, controller: Controller) => {\n      const { node, isSelected } = props;\n      const { height } = node.data;\n      return <div data-testid=\"click-card-content\" data-selected={isSelected} data-card-height={height}>disableSelected card</div>;\n    },\n    onCangjiePaste: (event, controller, next) => {\n      return next();\n    },\n  };\n});\n\nconst ErrorComponent: React.FC<any> = () => {\n  throw new Error('test');\n};\n\nconst errorCardWithChildren = cardFactory(() => {\n  return {\n    cardType: 'errorChildren',\n    renderNode: () => {\n      return (<ErrorComponent />);\n    },\n  };\n});\n\nconst errorCard = cardFactory(() => {\n  return {\n    cardType: 'error',\n    renderNode: () => {\n      throw new Error('test');\n    },\n  };\n});\n\nconst createBiPlugins = createCustomizedBiPlugins({\n  ...omit(biPlugins),\n  demoCard,\n  errorCard,\n  clickCard,\n  disableSelectedCard,\n  errorCardWithChildren,\n  InsertCardPlugin,\n  CreateCardPlugin,\n});\n\nconst Editor: React.FC<EditorProps> = (props) => {\n  const { defaultValue } = props;\n  const [value, setValue] = React.useState(defaultValue);\n  const plugins = React.useMemo(() => {\n    return createBiPlugins({\n      demoCard: {},\n    });\n  }, []);\n\n  const handleChange = React.useCallback((changed) => {\n    setValue(changed.value);\n  }, []);\n\n  return (\n    <Provider value={value} onChange={handleChange} plugins={plugins} autoFocus>\n      <Content />\n    </Provider>\n  );\n};\n\ndescribe('Bi/card/ui', () => {\n  beforeAll(() => {\n    // 防止被 componentDidCatch catch 的 error 被控制台输出\n    jest.spyOn(console, 'error');\n    // @ts-ignore\n    console.error.mockImplementation(() => { });\n  });\n\n  afterAll(() => {\n    // @ts-ignore\n    console.error.mockRestore();\n  });\n\n  afterEach(() => {\n    cleanup();\n  });\n\n  describe('unknownCard', () => {\n    test('渲染', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'unknown1', height: 0 }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { queryByText } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      const unknown = queryByText('暂无法解析');\n      expect(!!unknown).toBe(true);\n    });\n\n    test('验证 card 非首次创建', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'insert', height: 0 }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { findByTestId, editor } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      const el = await findByTestId('insert-card-content');\n      expect(!!el).toBe(true);\n      expect(el.getAttribute('data-owner')).toBe('false');\n    });\n\n    test('插入卡片，并验证是否为当前用户首次创建', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              Start Paragraph\n              <cursor />\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { findByTestId, editor, findByText } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      fireEvent.keyDown(editor, getHotkeyEvent('i'));\n      const el = await findByTestId('insert-card-content');\n      expect(!!el).toBe(true);\n      expect(el.getAttribute('data-owner')).toBe('true');\n\n      // 第二次重绘时 isOwnerAndFirstCreated = false\n      fireEvent.click(el);\n      expect(await findByText('isOwnerAndFirstCreated=false')).toBeInstanceOf(HTMLElement);\n    });\n\n    test('点击 inlineBar 上删除按钮执行删除', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"card\" data={{ cardType: 'unknown1', height: 0 }} />\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { queryByText, findByTestId } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      const unknown = queryByText('暂无法解析');\n      unknown.click();\n      const delBtn = await findByTestId('ph-delete');\n      expect(!!delBtn).toBe(true);\n      delBtn.click();\n      await waitForElementToBeRemoved(() => queryByText('暂无法解析'));\n    });\n  });\n\n  describe('errorCard', () => {\n    test('渲染卡片出现异常(renderNode)，兜底显示', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\" />\n            <block type=\"card\" data={{ cardType: 'error', height: 0 }} />\n            <block type=\"paragraph\" />\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { queryByText, findByTestId } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      const unknown = queryByText('暂无法解析');\n      expect(!!unknown).toBe(true);\n      fireEvent.click(unknown);\n      const delBtn = await findByTestId('ph-delete');\n      expect(!!delBtn).toBe(true);\n      fireEvent.click(delBtn);\n      await waitForElementToBeRemoved(() => queryByText('暂无法解析'));\n    });\n\n    test('渲染卡片出现异常(renderChild)，兜底显示', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\" />\n            <block type=\"card\" data={{ cardType: 'errorChildren', height: 0 }} />\n            <block type=\"paragraph\" />\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { queryByText, findByTestId } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      const unknown = queryByText('暂无法解析');\n      expect(!!unknown).toBe(true);\n      fireEvent.click(unknown);\n      const delBtn = await findByTestId('ph-delete');\n      fireEvent.click(delBtn);\n      await waitForElementToBeRemoved(() => queryByText('暂无法解析'));\n    });\n  });\n\n  describe('更新卡片', () => {\n    test('点击选中', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <cursor />\n            </block>\n            <block type=\"card\" data={{ cardType: 'click', height: 300 }} />\n            <block type=\"paragraph\">\n              456\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { queryByTestId } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      const el = queryByTestId('click-card-content');\n      fireEvent.click(el);\n      await waitFor(() => el.getAttribute('data-selected') === 'true');\n      expect(el.getAttribute('data-selected')).toBe('true');\n      expect(!!el.closest('.selected')).toBe(true);\n    });\n\n    test('点击 disableSelected 卡片，无选中样式', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <cursor />\n            </block>\n            <block type=\"card\" data={{ cardType: 'disableSelected', height: 300 }} />\n            <block type=\"paragraph\">\n              456\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { queryByTestId } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      const el = queryByTestId('click-card-content');\n      fireEvent.click(el);\n      await waitFor(() => el.getAttribute('data-selected') === 'true');\n      expect(el.getAttribute('data-selected')).toBe('true');\n    });\n\n    test('更新卡片高度(持久化)', async () => {\n      const value = Mo.jsonMLToValue([\n        'root',\n        [\n          'card',\n          {\n            cardType: 'demo',\n            height: 0,\n          },\n          [\n            'span',\n            {\n              'data-type': 'text',\n            },\n            [\n              'span',\n              {\n                'data-type': 'leaf',\n              },\n              '',\n            ],\n          ],\n        ],\n      ]);\n      const { queryByTestId } = await renderEditor(\n        <Editor defaultValue={value} />,\n      );\n      // 首次点击，验证setData\n      fireEvent.click(queryByTestId('demo-card-content')!);\n      await wait();\n      let cardContent = queryByTestId('demo-card-content');\n      if (!cardContent) return false;\n      if (cardContent.getAttribute('data-card-height') !== '300') return false;\n\n      // 二次点击，验证setInjection\n      fireEvent.click(queryByTestId('demo-card-content')!);\n      await wait();\n      cardContent = queryByTestId('demo-card-content');\n      if (!cardContent) return false;\n      if (cardContent.getAttribute('data-card-height') !== '350') return false;\n\n      // 三次点击，验证setInjection&setData\n      fireEvent.click(queryByTestId('demo-card-content')!);\n      await wait();\n      cardContent = queryByTestId('demo-card-content');\n      if (!cardContent) return false;\n      return cardContent.getAttribute('data-card-height') === '410';\n    });\n  });\n  describe('block卡片/删除卡片', () => {\n    test('向前删除，第一次移到右侧，第二次选中，第三次删除', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              123\n            </block>\n            <block key=\"card\" type=\"card\" data={{ cardType: 'demo', height: 300 }} />\n            <block type=\"paragraph\">\n              <cursor />\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { queryByTestId, editor, content } = await renderEditor(<Editor defaultValue={value} />);\n      fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n      await wait();// 第一次删除移到右侧\n      // const caret = await domUtils.getCaretDom(content);\n      // const caretValue = caret.getAttribute('data-cangjie-point');\n      // expect(caretValue).toBe('card-after');\n      fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n      // 第二次选中\n      // await waitForElementToBeRemoved(() => domUtils.getCaretDom(content));\n      expect(!queryByTestId('demo-card-content')).toBe(false);\n      fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n      await wait();// 第三次删除\n      expect(!queryByTestId('demo-card-content')).toBe(true);\n    });\n    test('向后删除，第一次移到左侧，第二次选中，第三次删除', async () => {\n      const value = ((\n        <value>\n          <document>\n            <block type=\"paragraph\">\n              <cursor />\n            </block>\n            <block key=\"card\" type=\"card\" data={{ cardType: 'demo', height: 300 }} />\n            <block type=\"paragraph\">\n              456\n            </block>\n          </document>\n        </value>\n      ) as unknown) as Value;\n      const { queryByTestId, editor, content } = await renderEditor(<Editor defaultValue={value} />);\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n      await wait();// 第一次删除移到左侧\n      // const caret = await domUtils.getCaretDom(content);\n      // const caretValue = caret.getAttribute('data-cangjie-point');\n      // expect(caretValue).toBe('card-before');\n      fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n      // 第二次选中\n      // await waitForElementToBeRemoved(() => domUtils.getCaretDom(content));\n      expect(!queryByTestId('demo-card-content')).toBe(false);\n      fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n      await wait();// 第三次删除\n      expect(!queryByTestId('demo-card-content')).toBe(true);\n    });\n  });\n\n  test('edgeRange: 向前移动并删除', async () => {\n    const value = ((\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            123\n          </block>\n          <block key=\"card\" type=\"card\" data={{ cardType: 'demo', height: 300 }} />\n          <block type=\"paragraph\">\n            <cursor />\n          </block>\n        </document>\n      </value>\n    ) as unknown) as Value;\n    const { queryByTestId, editor, content } = await renderEditor(<Editor defaultValue={value} />);\n    fireEvent.keyDown(editor, getHotkeyEvent('ArrowLeft'));\n    await wait();\n    // const caret = await domUtils.getCaretDom(content);\n    // const caretValue = caret.getAttribute('data-cangjie-point');\n    // expect(caretValue).toBe('card-after');\n\n    fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n    // 先选中\n    // await waitForElementToBeRemoved(() => domUtils.getCaretDom(content));\n    expect(!queryByTestId('demo-card-content')).toBe(false);\n\n    fireEvent.keyDown(editor, getHotkeyEvent('backspace'));\n    await wait();// 删除 OK\n    expect(!queryByTestId('demo-card-content')).toBe(true);\n  });\n  test('edgeRange: 向后删除，先选中，后删除', async () => {\n    const value = ((\n      <value>\n        <document>\n          <block type=\"paragraph\">\n            <cursor />\n          </block>\n          <block key=\"card\" type=\"card\" data={{ cardType: 'demo', height: 300 }} />\n          <block type=\"paragraph\">\n            456\n          </block>\n        </document>\n      </value>\n    ) as unknown) as Value;\n    const { queryByTestId, editor, content } = await renderEditor(<Editor defaultValue={value} />);\n    fireEvent.keyDown(editor, getHotkeyEvent('ArrowRight'));\n    await wait();\n    // const caret = await domUtils.getCaretDom(content);\n    // const caretValue = caret.getAttribute('data-cangjie-point');\n    // expect(caretValue).toBe('card-before');\n\n    fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n    // 先选中\n    // await waitForElementToBeRemoved(() => domUtils.getCaretDom(content));\n    expect(!queryByTestId('demo-card-content')).toBe(false);\n\n    fireEvent.keyDown(editor, getHotkeyEvent('delete'));\n    await wait();// 删除 OK\n    expect(!queryByTestId('demo-card-content')).toBe(true);\n  });\n});\n"],"file":"ui.test.js"}