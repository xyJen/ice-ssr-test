{"version":3,"sources":["../../../../src/__tests__/contextMenu/ui.test.tsx"],"names":["defaultValue","LIST_REORDER_ACTION","Symbol","LIST_ORDER_ACTION","ALIGN_ACTION","NOOP_ACTION","ListPlugin","renderNode","props","controller","next","node","attributes","children","Block","isBlock","type","contextMenu","others","items","name","key","action","options","group","checked","icon","hotKey","AlignPlugin","payload","inline","keepMenu","disable","App","plugins","value","setValue","React","useState","createBiPlugins","list","align","handleChange","useCallback","change","renderContextMenu","results","container","document","body","findByTestId","paragraph","fireEvent","DEFAULT_GROUP_COUNT","describe","afterEach","jest","clearAllMocks","test","findAllByTestId","findByText","groups","expect","toHaveLength","listGroup","item","closest","toBe","dividers","queryAllByText","textContent","toLocaleLowerCase","mouseOver","queryByText","not","toBeInTheDocument","onAlignToLeft","fn","alignToLeft","onAction","click","toBeCalledWith","onAlignToRight","alignToRight","toBeCalled","queryByTestId","override"],"mappings":"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","sourcesContent":["/** @jsx jsx */\nimport * as React from 'react';\nimport { fireEvent, jsx, renderEditor, waitForTime } from '@ali/4ever-dev-test';\nimport { cleanup, waitForElementToBeRemoved } from '@testing-library/react';\nimport {\n  Plugin,\n  Block,\n  Value,\n  ContextMenuItem,\n  Change,\n} from '@ali/4ever-cangjie';\nimport '@testing-library/jest-dom/extend-expect';\n\nimport Provider from '../../provider';\nimport Content from '../../content';\nimport createCustomizedBiPlugins from '../../createCustomizedBiPlugins';\nimport { biFactory as contextMenu } from '@ali/4ever-plugin-pc-contex-menu';\n\nconst defaultValue = ((\n  <value>\n    <document>\n      <block type=\"paragraph\">\n        Hello <cursor />\n        Cangjie\n      </block>\n    </document>\n  </value>\n) as unknown) as Value;\n\nconst LIST_REORDER_ACTION = Symbol('list-reorder');\nconst LIST_ORDER_ACTION = Symbol('list-order');\nconst ALIGN_ACTION = Symbol('align');\nconst NOOP_ACTION = Symbol('noop');\n\nconst ListPlugin: () => Plugin = () => ({\n  renderNode: (props, controller, next) => {\n    const { node, attributes, children } = props;\n    if (Block.isBlock(node) && node.type === 'paragraph') {\n      return <div {...attributes} data-testid=\"paragraph\">{children()}</div>;\n    }\n    return next();\n  },\n  contextMenu: (controller, next) => {\n    const others = next() || [];\n    const items: ContextMenuItem[] = [\n      {\n        name: '重新编号',\n        key: 'list-reorder',\n        action: {\n          type: LIST_REORDER_ACTION,\n        },\n        options: {\n          group: 2,\n          checked: true,\n        },\n      },\n      {\n        name: '继续编号',\n        key: 'list-order',\n        action: {\n          type: LIST_ORDER_ACTION,\n        },\n        options: {\n          group: 2,\n          icon: 'list-order-icon',\n          hotKey: 'cmd+o',\n        },\n      },\n    ];\n    return [...items, ...others];\n  },\n});\n\nconst AlignPlugin: () => Plugin = () => ({\n  contextMenu: (controller, next) => {\n    const others = next() || [];\n    const items: ContextMenuItem[] = [\n      {\n        name: '左对齐',\n        key: 'align-left',\n        action: {\n          type: ALIGN_ACTION,\n          payload: 'left',\n        },\n        options: {\n          inline: true,\n          icon: 'left-icon',\n        },\n      },\n      {\n        name: '居中对齐',\n        key: 'align-center',\n        action: {\n          type: ALIGN_ACTION,\n          payload: 'center',\n        },\n        options: {\n          inline: true,\n          keepMenu: true,\n          icon: 'center-icon',\n        },\n      },\n      {\n        name: '右对齐',\n        key: 'align-right',\n        action: {\n          type: ALIGN_ACTION,\n          payload: 'right',\n        },\n        options: {\n          inline: true,\n          disable: true,\n        },\n      },\n    ];\n    return [...items, ...others];\n  },\n});\n\ninterface AppProps {\n  plugins?: Record<string, () => Plugin>;\n}\n\nconst App: React.FC<AppProps> = (props) => {\n  const { plugins = {} } = props;\n  const [value, setValue] = React.useState(defaultValue);\n  const createBiPlugins = createCustomizedBiPlugins({\n    contextMenu,\n    ...plugins,\n    list: ListPlugin,\n    align: AlignPlugin,\n  });\n\n  const handleChange = React.useCallback((change: Change) => {\n    setValue(change.value);\n  }, []);\n\n  return (\n    <Provider\n      value={value}\n      plugins={createBiPlugins()}\n      onChange={handleChange}\n      autoFocus\n    >\n      <Content />\n    </Provider>\n  );\n};\n\nasync function renderContextMenu(plugins: Record<string, () => Plugin> = {}) {\n  const results = await renderEditor(<App plugins={plugins} />, {\n    container: document.body,\n  });\n  const { findByTestId } = results;\n  const paragraph = await findByTestId('paragraph');\n  fireEvent.contextMenu(paragraph);\n  const contextMenu = await findByTestId('bi-contextmenu');\n  return { ...results, contextMenu };\n}\n\nconst DEFAULT_GROUP_COUNT = 1;\n\ndescribe('Bi/contextMenu/ui', () => {\n  afterEach(() => {\n    cleanup();\n    jest.clearAllMocks();\n  });\n\n  test('render group', async () => {\n    const { findAllByTestId, findByText } = await renderContextMenu();\n    const groups = await findAllByTestId('contextmenu-group');\n    // default group + list group + align group\n    expect(groups).toHaveLength(DEFAULT_GROUP_COUNT + 2);\n    const listGroup = groups[1];\n    const item = await findByText(/重新编号/);\n    expect(item.closest('[data-testid=\"contextmenu-group\"]')).toBe(listGroup);\n    // divider\n    const dividers = await findAllByTestId('contextmenu-divider');\n    expect(dividers).toHaveLength(DEFAULT_GROUP_COUNT + 1);\n  });\n\n  test('render block item', async () => {\n    const {\n      findByTestId,\n      findByText,\n      queryAllByText,\n    } = await renderContextMenu();\n    const item = await findByTestId('2-list-order');\n    expect(item.textContent.toLocaleLowerCase()).toBe(\n      'list-order-icon继续编号cmd+o',\n    );\n    const icon = await findByText('list-order-icon');\n    // disable toolip for block menu item\n    fireEvent.mouseOver(icon);\n    await waitForTime(50);\n    expect(queryAllByText('继续编号')).toHaveLength(1);\n  });\n\n  test('render inline item with icon', async () => {\n    const { findByText, queryByText } = await renderContextMenu();\n    // render icon\n    const icon = await findByText('left-icon');\n    // do not render name\n    expect(queryByText('左对齐')).not.toBeInTheDocument();\n    // hover to show name\n    fireEvent.mouseOver(icon);\n    await findByText('左对齐');\n  });\n\n  test('render inline item without icon', async () => {\n    const { findByText } = await renderContextMenu();\n    // render name when icon is undefined\n    await findByText('右对齐');\n  });\n\n  test('customize menu item action', async () => {\n    const onAlignToLeft = jest.fn();\n    const plugins = {\n      alignToLeft: () => ({\n        onAction: (action, controller, next) => {\n          if (action.type === ALIGN_ACTION) {\n            onAlignToLeft(action.payload);\n            return controller;\n          }\n          return next();\n        },\n      }),\n    };\n    const { findByText } = await renderContextMenu(plugins);\n    const align = await findByText(/left-icon/);\n    fireEvent.click(align);\n    expect(onAlignToLeft).toBeCalledWith('left');\n  });\n\n  test('disable menu item', async () => {\n    const onAlignToRight = jest.fn();\n    const plugins = {\n      alignToRight: () => ({\n        onAction: (action, controller, next) => {\n          if (action.type === ALIGN_ACTION) {\n            onAlignToRight(action.payload);\n            return controller;\n          }\n          return next();\n        },\n      }),\n    };\n    const { findByText } = await renderContextMenu(plugins);\n    const align = await findByText(/右对齐/);\n    fireEvent.click(align);\n    expect(onAlignToRight).not.toBeCalled();\n  });\n\n  test('close menu when item clicked by default', async () => {\n    const { findByText, queryByTestId } = await renderContextMenu();\n    const align = await findByText(/left-icon/);\n    fireEvent.click(align);\n    await waitForElementToBeRemoved(() => queryByTestId('bi-contextmenu'));\n  });\n\n  test('keep menu when item clicked', async () => {\n    const { findByText, queryByTestId } = await renderContextMenu();\n    const align = await findByText(/center-icon/);\n    fireEvent.click(align);\n    await waitForTime(50);\n    expect(queryByTestId('bi-contextmenu')).toBeInTheDocument();\n  });\n\n  test('check block menu item', async () => {\n    const { findByText } = await renderContextMenu();\n    // render checked item\n    const checked = await findByText('重新编号');\n    expect(checked.closest('[data-checked]')).toBeInTheDocument();\n  });\n\n  test('override context menu', async () => {\n    const plugins = {\n      override: () => ({\n        contextMenu: () => [\n          {\n            name: 'action1',\n            key: 'action1',\n            action: { type: NOOP_ACTION },\n            options: { group: 1 },\n          },\n          {\n            name: 'action2',\n            key: 'action2',\n            action: { type: NOOP_ACTION },\n            options: { group: 1 },\n          },\n        ],\n      }),\n    };\n    const { findAllByTestId, findByText } = await renderContextMenu(plugins);\n    const groups = await findAllByTestId('contextmenu-group');\n    expect(groups).toHaveLength(1);\n    await findByText(/action1/);\n    await findByText(/action2/);\n  });\n});\n"],"file":"ui.test.js"}