"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _everDevTest = require("@ali/4ever-dev-test");

var _everCangjie = require("@ali/4ever-cangjie");

var _createBiPlugins = _interopRequireDefault(require("../../createBiPlugins"));

var _queries = require("../../plugins/subject/queries");

/** @jsx jsx */
const plugins = (0, _createBiPlugins.default)().array;

var _ref = (0, _everDevTest.jsx)("value", null, (0, _everDevTest.jsx)("document", null, (0, _everDevTest.jsx)("block", {
  type: "paragraph"
}, "hello world")));

var _ref2 = (0, _everDevTest.jsx)("block", {
  type: "paragraph"
}, "hello world");

var _ref3 = (0, _everDevTest.jsx)("block", {
  type: "paragraph"
}, "hello world");

describe('Bi/Subject', () => {
  it('普通段落的 left toolbar offset queries', () => {
    const value = _ref;

    const controller = _everCangjie.Controller.create({
      value,
      plugins
    });

    const node = value.document.nodes[0];
    const result = controller.query(_queries.getLeftToolbarOffset, {
      node
    });
    expect(result).toBeUndefined();
  });
  it('议题中包含普通段落的 left toolbar offset queries', () => {
    const value = (0, _everDevTest.jsx)("value", null, (0, _everDevTest.jsx)("document", null, (0, _everDevTest.jsx)("block", {
      type: "heading-1",
      data: {
        subjectPr: {
          "id": "rId100",
          "name": "review"
        }
      }
    }, "hello world"), _ref2));

    const controller = _everCangjie.Controller.create({
      value,
      plugins
    });

    const node = value.document.nodes[1];
    const result = controller.query(_queries.getLeftToolbarOffset, {
      node
    });
    expect(result).toEqual({
      x: -20,
      y: 0
    });
  });
  it('议题中包含黑名单节点的 left toolbar offset queries', () => {
    const value = (0, _everDevTest.jsx)("value", null, (0, _everDevTest.jsx)("document", null, (0, _everDevTest.jsx)("block", {
      type: "heading-1",
      data: {
        subjectPr: {
          "id": "rId100",
          "name": "review"
        }
      }
    }, "hello world"), (0, _everDevTest.jsx)("block", {
      type: "container",
      data: {
        subType: 'colorBlocks'
      }
    }, _ref3)));

    const controller = _everCangjie.Controller.create({
      value,
      plugins
    });

    const node = value.document.nodes[1].nodes[0];
    const result = controller.query(_queries.getLeftToolbarOffset, {
      node
    });
    expect(result).toBeUndefined();
  });
});
//# sourceMappingURL=queries.test.js.map