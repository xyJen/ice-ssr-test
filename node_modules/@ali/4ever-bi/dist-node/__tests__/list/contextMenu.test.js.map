{"version":3,"sources":["../../../../src/__tests__/list/contextMenu.test.tsx"],"names":["getListData","OldUtils","describe","it","value","level","type","listStyleType","listId","content","queryByTestId","listSymbol","querySelector","symbolSelector","fireEvent","contextMenu","restartNumbering","continueNumbering","expect","toBeNull","toBeTruthy"],"mappings":";;;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AAPA;AASA,MAAM;AAAEA,EAAAA;AAAF,IAAkBC,wBAAxB;AAEAC,QAAQ,CAAC,qBAAD,EAAwB,MAAM;AACpCC,EAAAA,EAAE,CAAC,oCAAD,EAAuC,YAAY;AACnD,UAAMC,KAAK,GACT,qCACE,wCACE;AACE,MAAA,IAAI,EAAC,WADP;AAEE,MAAA,IAAI,EAAEJ,WAAW,CAAC;AAAEK,QAAAA,KAAK,EAAE,CAAT;AAAYC,QAAAA,IAAI,EAAE,IAAlB;AAAwBC,QAAAA,aAAa,EAAE,gBAAvC;AAAyDC,QAAAA,MAAM,EAAE;AAAjE,OAAD;AAFnB,oCADF,CADF,CADF;AAYA,UAAM;AAAEC,MAAAA,OAAF;AAAWC,MAAAA;AAAX,QAA6B,MAAM,+BAAa,sBAAC,eAAD;AAAQ,MAAA,YAAY,EAAEN;AAAtB,MAAb,CAAzC;AACA,UAAMO,UAAU,GAAG,MAAM,oBAAQ,MAAMF,OAAO,CAACG,aAAR,CAAsBC,yBAAtB,CAAd,CAAzB;;AACAC,2BAAUC,WAAV,CAAsBJ,UAAtB,EAfmD,CAgBnD;;;AACA,UAAM,8BAAY,EAAZ,CAAN;AACA,UAAMK,gBAAgB,GAAG,MAAMN,aAAa,CAAC,0BAAD,CAA5C;AACA,UAAMO,iBAAiB,GAAG,MAAMP,aAAa,CAAC,2BAAD,CAA7C;AACAQ,IAAAA,MAAM,CAACF,gBAAD,CAAN,CAAyBG,QAAzB;AACAD,IAAAA,MAAM,CAACD,iBAAD,CAAN,CAA0BE,QAA1B;AACD,GAtBC,CAAF;AAwBAhB,EAAAA,EAAE,CAAC,mCAAD,EAAsC,YAAY;AAClD,UAAMC,KAAK,GACT,qCACE,wCACE;AACE,MAAA,IAAI,EAAC,WADP;AAEE,MAAA,IAAI,EAAEJ,WAAW,CAAC;AAAEK,QAAAA,KAAK,EAAE,CAAT;AAAYC,QAAAA,IAAI,EAAE,IAAlB;AAAwBC,QAAAA,aAAa,EAAE,gBAAvC;AAAyDC,QAAAA,MAAM,EAAE;AAAjE,OAAD;AAFnB,qCADF,CADF,CADF;AAYA,UAAM;AAAEC,MAAAA,OAAF;AAAWC,MAAAA;AAAX,QAA6B,MAAM,+BAAa,sBAAC,eAAD;AAAQ,MAAA,YAAY,EAAEN;AAAtB,MAAb,CAAzC;AAEA,UAAMO,UAAU,GAAG,MAAM,oBAAQ,MAAMF,OAAO,CAACG,aAAR,CAAsBC,yBAAtB,CAAd,CAAzB;;AACAC,2BAAUC,WAAV,CAAsBJ,UAAtB;;AACA,UAAM,oBAAQ,MAAMO,MAAM,CAACR,aAAa,CAAC,0BAAD,CAAd,CAAN,CAAkDU,UAAlD,EAAd,CAAN;AACA,UAAM,oBAAQ,MAAMF,MAAM,CAACR,aAAa,CAAC,2BAAD,CAAd,CAAN,CAAmDU,UAAnD,EAAd,CAAN;AACD,GAnBC,CAAF;AAoBD,CA7CO,CAAR","sourcesContent":["/** @jsx jsx */\nimport '@testing-library/jest-dom/extend-expect';\nimport { renderEditor, jsx, fireEvent, waitForTime } from '@ali/4ever-dev-test';\nimport { waitFor } from '@testing-library/react';\nimport { Value } from '@ali/4ever-cangjie';\nimport Editor from '../editor';\nimport { OldUtils } from '@ali/4ever-plugin-list';\nimport { symbolSelector } from './constants';\n\nconst { getListData } = OldUtils;\n\ndescribe('bi/list/contextMenu', () => {\n  it('无序列表 contextMenu 中不包含 重新编号/继续编号 选项', async () => {\n    const value = (\n      <value>\n        <document>\n          <block\n            type=\"paragraph\"\n            data={getListData({ level: 0, type: 'ul', listStyleType: 'SCIR_ECIR_SREC', listId: 'a' })}\n          >\n            无序列表 *\n          </block>\n        </document>\n      </value>\n    ) as unknown as Value;\n    const { content, queryByTestId } = await renderEditor(<Editor defaultValue={value} />);\n    const listSymbol = await waitFor(() => content.querySelector(symbolSelector));\n    fireEvent.contextMenu(listSymbol);\n    // 右键菜单是异步渲染的\n    await waitForTime(50);\n    const restartNumbering = await queryByTestId('2-list-restart-numbering');\n    const continueNumbering = await queryByTestId('2-list-continue-numbering');\n    expect(restartNumbering).toBeNull();\n    expect(continueNumbering).toBeNull();\n  });\n\n  it('有序列表 contextMenu 中包含 重新编号/继续编号 选项', async () => {\n    const value = (\n      <value>\n        <document>\n          <block\n            type=\"paragraph\"\n            data={getListData({ level: 0, type: 'ol', listStyleType: 'SCIR_ECIR_SREC', listId: 'a' })}\n          >\n            有序列表 1.\n          </block>\n        </document>\n      </value>\n    ) as unknown as Value;\n    const { content, queryByTestId } = await renderEditor(<Editor defaultValue={value} />);\n\n    const listSymbol = await waitFor(() => content.querySelector(symbolSelector));\n    fireEvent.contextMenu(listSymbol);\n    await waitFor(() => expect(queryByTestId('2-list-restart-numbering')).toBeTruthy());\n    await waitFor(() => expect(queryByTestId('2-list-continue-numbering')).toBeTruthy());\n  });\n});\n"],"file":"contextMenu.test.js"}