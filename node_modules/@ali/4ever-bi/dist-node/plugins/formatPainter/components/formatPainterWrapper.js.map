{"version":3,"sources":["../../../../../src/plugins/formatPainter/components/formatPainterWrapper.tsx"],"names":["icon","FormatPainterWrapper","props","controller","children","onDocStyleChange","value","zoomContainer","docStyle","isFormatPainterActive","React","useMemo","formatClipboard","data","trigger","prevCursor","useRef","useEffect","current","style","cursor","displayName"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA,MAAMA,IAAI,GAAG,wbAAb;;AAQA,MAAMC,oBAAoB,GAAIC,KAAD,IAAsC;AACjE,QAAM;AACJC,IAAAA,UADI;AAEJC,IAAAA,QAFI;AAGJC,IAAAA;AAHI,MAIFH,KAJJ;AAKA,QAAM;AAAEI,IAAAA;AAAF,MAAYH,UAAlB;AACA,QAAMI,aAAa,GAAG,oCAAtB;AACA,QAAMC,QAAQ,GAAG,4BAAjB;AACA,QAAMC,qBAAqB,GAAGC,KAAK,CAACC,OAAN,CAAc,MAAM;AAChD,UAAM;AAAEC,MAAAA;AAAF,QAAsBN,KAAK,CAACO,IAAlC;AACA,WAAOD,eAAe,IAAIA,eAAe,CAACE,OAAhB,KAA4B,SAAtD;AACD,GAH6B,EAG3B,CAACR,KAAD,CAH2B,CAA9B;AAKA,QAAMS,UAAU,GAAGL,KAAK,CAACM,MAAN,CAA4B,IAA5B,CAAnB;AACAN,EAAAA,KAAK,CAACO,SAAN,CAAgB,MAAM;AACpB,QAAI,CAACV,aAAL,EAAoB;AAClB;AACD;;AACD,QAAIE,qBAAJ,EAA2B;AACzBM,MAAAA,UAAU,CAACG,OAAX,GAAqBX,aAAa,CAACY,KAAd,CAAoBC,MAAzC;AACAb,MAAAA,aAAa,CAACY,KAAd,CAAoBC,MAApB,GAA8B,OAAMpB,IAAK,QAAzC;AACD,KAHD,MAGO,IAAIe,UAAU,CAACG,OAAX,KAAuB,IAA3B,EAAiC;AACtCX,MAAAA,aAAa,CAACY,KAAd,CAAoBC,MAApB,GAA6BL,UAAU,CAACG,OAAxC;AACD;AACF,GAVD,EAUG,CAACX,aAAD,EAAgBE,qBAAhB,CAVH;AAYAC,EAAAA,KAAK,CAACO,SAAN,CAAgB,MAAM;AACpBZ,IAAAA,gBAAgB,IAAIA,gBAAgB,CAACG,QAAD,CAApC;AACD,GAFD,EAEG,CAACA,QAAD,EAAWH,gBAAX,CAFH;AAIA,SAAOD,QAAP;AACD,CAhCD;;AAkCAH,oBAAoB,CAACoB,WAArB,GAAmC,sBAAnC;eAEepB,oB","sourcesContent":["import * as React from 'react';\nimport { Controller, useZoomContainer, DocStyle, useStyle } from '@ali/4ever-cangjie';\n\nconst icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAFV3XwhAAAAAXNSR0IArs4c6QAAAPBJREFUOBGNk80NwjAMhV0EJxiBERmEiVgBtkDiwA0uiAM/At4X7CitmraWXmI7z47tNmZmZ6Ff6idvBYBmrmXt0ehP4Yu9ZAlppOBlJyxJooUxk3Jw4xFO9kyXTkSJhnxI5P5b/zWnp6w++bgzkthWDjAoNBsNU2hZT76yzHCRQROBm/QXhIhED4Ec/mM4u3vrGgY3KpB2jkEynUHc+x6dEnQVmFkNd52lWeaBykGtpS0z/SMLlBE5leetpsuDCXoad/CmJKpyJk3bb4rfmCdRFQbMbeWgu2QGDqe3KirinW6Ele+1dwuXj9H9IHKZ/QDGCkHllFqj6gAAAABJRU5ErkJggg==';\n\nexport interface FormatPainterWrapperProps {\n  controller: Controller;\n  children: React.ReactNode;\n  onDocStyleChange?: (style?: DocStyle) => void;\n}\n\nconst FormatPainterWrapper = (props: FormatPainterWrapperProps) => {\n  const {\n    controller,\n    children,\n    onDocStyleChange,\n  } = props;\n  const { value } = controller;\n  const zoomContainer = useZoomContainer();\n  const docStyle = useStyle();\n  const isFormatPainterActive = React.useMemo(() => {\n    const { formatClipboard } = value.data;\n    return formatClipboard && formatClipboard.trigger === 'toolbar';\n  }, [value]);\n\n  const prevCursor = React.useRef<string | null>(null);\n  React.useEffect(() => {\n    if (!zoomContainer) {\n      return;\n    }\n    if (isFormatPainterActive) {\n      prevCursor.current = zoomContainer.style.cursor;\n      zoomContainer.style.cursor = `url(${icon}),text`;\n    } else if (prevCursor.current !== null) {\n      zoomContainer.style.cursor = prevCursor.current;\n    }\n  }, [zoomContainer, isFormatPainterActive]);\n\n  React.useEffect(() => {\n    onDocStyleChange && onDocStyleChange(docStyle);\n  }, [docStyle, onDocStyleChange]);\n\n  return children;\n};\n\nFormatPainterWrapper.displayName = 'FormatPainterWrapper';\n\nexport default FormatPainterWrapper;\n"],"file":"formatPainterWrapper.js"}