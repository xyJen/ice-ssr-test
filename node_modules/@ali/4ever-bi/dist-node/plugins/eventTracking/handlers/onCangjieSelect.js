"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = onCangjieSelect;

var _actions = require("../actions");

let isSelecting = false;
let shouldTrack = false;
const threshold = 1 / 50;
window.addEventListener('mouseup', () => {
  // 重置状态标记
  isSelecting = false;
  shouldTrack = false;
});

function onCangjieSelect(e, controller, next) {
  if (isSelecting === true && shouldTrack && e.detail.trigger !== 'selectStart') {
    // 采样
    controller.run('onAction', (0, _actions.eventTracking)({
      type: _actions.TrackingType.selectText
    }));
  }

  if (e.detail.trigger === 'selectStart') {
    isSelecting = true;
    shouldTrack = Math.random() < threshold;
  }

  return next();
}
//# sourceMappingURL=onCangjieSelect.js.map