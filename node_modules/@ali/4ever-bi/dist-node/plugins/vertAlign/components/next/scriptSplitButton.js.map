{"version":3,"sources":["../../../../../../src/plugins/vertAlign/components/next/scriptSplitButton.tsx"],"names":["ScriptSplitButton","props","controller","locale","rest","isSup","query","isSub","isCollapsedAtEdge","value","selection","isDisabled","onScriptChange","React","useCallback","run","supItem","useMemo","title","supButtonTitle","shortCut","SHORTCUT","sup","description","text","space","subItem","subButtonTitle","sub","curScript","undefined","PluginRoles","vertAlign"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;uBAJ4B,a;;AAWb,SAASA,iBAAT,CAA2BC,KAA3B,EAAkD;AAC/D,QAAM;AAAEC,IAAAA,UAAF;AAAcC,IAAAA,MAAd;AAAsB,OAAGC;AAAzB,MAAkCH,KAAxC;AACA,QAAMI,KAAK,GAAGH,UAAU,CAACI,KAAX,CAAiB,OAAjB,CAAd;AACA,QAAMC,KAAK,GAAGL,UAAU,CAACI,KAAX,CAAiB,OAAjB,CAAd;AACA,QAAM;AAAEE,IAAAA;AAAF,MAAwBN,UAAU,CAACO,KAAX,CAAiBC,SAA/C;AACA,QAAMC,UAAU,GAAGH,iBAAiB,IAC/BN,UAAU,CAACI,KAAX,CAAiB,oBAAjB,CADc,IAEdJ,UAAU,CAACI,KAAX,CAAiB,iBAAjB,CAFc,IAGdJ,UAAU,CAACI,KAAX,CAAiB,sBAAjB,CAHc,IAIdJ,UAAU,CAACI,KAAX,CAAiB,mBAAjB,CAJc,IAKdJ,UAAU,CAACI,KAAX,CAAiB,yBAAjB,CALc,IAMdJ,UAAU,CAACI,KAAX,CAAiB,uBAAjB,CANL;AAQA,QAAMM,cAAc,GAAGC,KAAK,CAACC,WAAN,CAAmBL,KAAD,IAA4B;AACnEP,IAAAA,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BN,KAAK,KAAK,KAAV,GAAkB,yBAAlB,GAAgC,yBAA3D;AACD,GAFsB,EAEpB,CAACP,UAAD,CAFoB,CAAvB;AAIA,QAAMc,OAAO,GAAGH,KAAK,CAACI,OAAN,CAAc,OAAO;AACnCC,IAAAA,KAAK,EAAEf,MAAM,EAAEgB,cAAR,IAA0B,EADE;AAEnCC,IAAAA,QAAQ,EAAEC,gBAASC,GAFgB;AAGnCC,IAAAA,WAAW,EAAG,cAAapB,MAAM,EAAEqB,IAAR,IAAgB,MAAO,KAAIrB,MAAM,EAAEsB,KAAR,IAAiB,OAAQ;AAH5C,GAAP,CAAd,EAIZ,EAJY,CAAhB;AAMA,QAAMC,OAAO,GAAGb,KAAK,CAACI,OAAN,CAAc,OAAO;AACnCC,IAAAA,KAAK,EAAEf,MAAM,EAAEwB,cAAR,IAA0B,EADE;AAEnCP,IAAAA,QAAQ,EAAEC,gBAASO,GAFgB;AAGnCL,IAAAA,WAAW,EAAG,cAAapB,MAAM,EAAEqB,IAAR,IAAgB,MAAO,KAAIrB,MAAM,EAAEsB,KAAR,IAAiB,OAAQ;AAH5C,GAAP,CAAd,EAIZ,EAJY,CAAhB;AAMA,QAAMI,SAAS,GAAGtB,KAAK,GAAG,KAAH,GAAWF,KAAK,GAAG,OAAH,GAAayB,SAApD;AAEA,sBACE,eAAC,0BAAD;AACE,IAAA,MAAM,EAAC,mBADT;AAEE,IAAA,QAAQ,EAAE,CAAC,CAACnB,UAFd;AAGE,IAAA,cAAc,EAAEC,cAHlB;AAIE,IAAA,SAAS,EAAEiB,SAJb;AAKE,IAAA,IAAI,EAAEE,wBAAYC,SALpB;AAME,IAAA,OAAO,EAAEN,OANX;AAOE,IAAA,OAAO,EAAEV;AAPX,KAQMZ,IARN,EADF;AAYD","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { IToolbarButtonConfig, ScriptSplit } from '@ali/4ever-component';\nimport { PluginRoles } from '@ali/4ever-bamboo';\nimport { toggleSup, toggleSub } from '../../actions';\nimport { SHORTCUT } from '../../utils';\n\nexport interface SupButtonProps extends IToolbarButtonConfig {\n  controller: Controller;\n  locale?: Record<string, string>;\n}\n\nexport default function ScriptSplitButton(props: SupButtonProps) {\n  const { controller, locale, ...rest } = props;\n  const isSup = controller.query('isSup');\n  const isSub = controller.query('isSub');\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled = isCollapsedAtEdge\n    || controller.query('isSelectionInImage')\n    || controller.query('isSelectionInHr')\n    || controller.query('isSelectionInMention')\n    || controller.query('isSelectionInLink')\n    || controller.query('isSelectionInListSymbol')\n    || controller.query('isSelectionInLinkCard');\n\n  const onScriptChange = React.useCallback((value: 'sub' | 'super') => {\n    controller.run('onAction', value === 'sub' ? toggleSub() : toggleSup());\n  }, [controller]);\n\n  const supItem = React.useMemo(() => ({\n    title: locale?.supButtonTitle || '',\n    shortCut: SHORTCUT.sup,\n    description: `Markdown: ^${locale?.text || 'Text'}^ ${locale?.space || 'Space'}`,\n  }), []);\n\n  const subItem = React.useMemo(() => ({\n    title: locale?.subButtonTitle || '',\n    shortCut: SHORTCUT.sub,\n    description: `Markdown: ~${locale?.text || 'Text'}~ ${locale?.space || 'Space'}`,\n  }), []);\n\n  const curScript = isSub ? 'sub' : isSup ? 'super' : undefined;\n\n  return (\n    <ScriptSplit\n      testid=\"bi-toolbar-script\"\n      disabled={!!isDisabled}\n      onScriptChange={onScriptChange}\n      curScript={curScript}\n      role={PluginRoles.vertAlign}\n      subItem={subItem}\n      supItem={supItem}\n      {...rest}\n    />\n  );\n}\n"],"file":"scriptSplitButton.js"}