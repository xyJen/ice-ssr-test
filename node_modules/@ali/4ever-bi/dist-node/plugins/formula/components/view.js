"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _react = _interopRequireWildcard(require("react"));

var _styledComponents = _interopRequireWildcard(require("styled-components"));

var _everBamboo = require("@ali/4ever-bamboo");

require("../katex.css");

const _createElement = /*#__PURE__*/_react.default.createElement;
const {
  getKatexString
} = _everBamboo.FormulaPlugin;

const Wrapper = /*#__PURE__*/_styledComponents.default.div(["display:flex;align-items:center;min-height:32px;border-radius:4px;position:relative;z-index:1;", " ", " ", ""], ({
  readOnly
}) => readOnly ? (0, _styledComponents.css)(["cursor:default;"]) : (0, _styledComponents.css)(["cursor:pointer;&:hover{background-color:rgba(126,134,142,0.12);}&:active{background-color:hsla(210,6.6115702479338845%,52.54901960784314%,0.12);}"]), ({
  isEditing
}) => isEditing ? (0, _styledComponents.css)(["background-color:rgba(126,134,142,0.12);margin-right:-20px;"]) : undefined, ({
  isSelected
}) => isSelected ? (0, _styledComponents.css)(["background-color:rgba(0,106,254,0.12);"]) : undefined);

const FormulaContainer = /*#__PURE__*/_styledComponents.default.div(["overflow-x:auto;overflow-y:hidden;"]);

const Formula = /*#__PURE__*/_styledComponents.default.div(["margin:0px 4px;font-size:11pt;"]);

var _default = props => {
  const {
    formula,
    isEditing,
    isSelected,
    readOnly
  } = props;
  const [domString, setDomString] = (0, _react.useState)('');
  (0, _react.useEffect)(() => {
    setDomString(getKatexString(formula.trim()));
  }, [formula]);
  return /*#__PURE__*/_createElement(Wrapper, {
    isEditing: isEditing,
    isSelected: isSelected && !isEditing,
    readOnly: readOnly
  }, /*#__PURE__*/_createElement(FormulaContainer, null, /*#__PURE__*/_createElement(Formula, {
    dangerouslySetInnerHTML: {
      __html: domString
    }
  })));
};

exports.default = _default;
//# sourceMappingURL=view.js.map