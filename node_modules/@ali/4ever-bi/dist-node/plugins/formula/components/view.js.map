{"version":3,"sources":["../../../../../src/plugins/formula/components/view.tsx"],"names":["getKatexString","FormulaPlugin","Wrapper","styled","div","readOnly","css","isEditing","undefined","isSelected","FormulaContainer","Formula","props","formula","domString","setDomString","trim","__html"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;uBAF4B,a;AAI5B,MAAM;AAAEA,EAAAA;AAAF,IAAqBC,yBAA3B;;AASA,MAAMC,OAAO,gBAAGC,0BAAOC,GAAV,mHAQT,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAmBA,QAAQ,OACzBC,qBADyB,6BAIzBA,qBAJyB,wJARlB,EAyBT,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAoBA,SAAS,OAAGD,qBAAH,qEAG3BE,SA5BO,EA8BT,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAqBA,UAAU,OAAGH,qBAAH,gDAE7BE,SAhCO,CAAb;;AAmCA,MAAME,gBAAgB,gBAAGP,0BAAOC,GAAV,wCAAtB;;AAKA,MAAMO,OAAO,gBAAGR,0BAAOC,GAAV,oCAAb;;eAKgBQ,KAAD,IAAkB;AAC/B,QAAM;AAAEC,IAAAA,OAAF;AAAWN,IAAAA,SAAX;AAAsBE,IAAAA,UAAtB;AAAkCJ,IAAAA;AAAlC,MAA+CO,KAArD;AACA,QAAM,CAACE,SAAD,EAAYC,YAAZ,IAA4B,qBAAS,EAAT,CAAlC;AAEA,wBAAU,MAAM;AACdA,IAAAA,YAAY,CAACf,cAAc,CAACa,OAAO,CAACG,IAAR,EAAD,CAAf,CAAZ;AACD,GAFD,EAEG,CAACH,OAAD,CAFH;AAIA,sBACE,eAAC,OAAD;AACE,IAAA,SAAS,EAAEN,SADb;AAEE,IAAA,UAAU,EAAEE,UAAU,IAAI,CAACF,SAF7B;AAGE,IAAA,QAAQ,EAAEF;AAHZ,kBAKE,eAAC,gBAAD,qBACE,eAAC,OAAD;AAAS,IAAA,uBAAuB,EAAE;AAAEY,MAAAA,MAAM,EAAEH;AAAV;AAAlC,IADF,CALF,CADF;AAWD,C","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled, { css } from 'styled-components';\nimport { FormulaPlugin } from '@ali/4ever-bamboo';\nimport '../katex.css';\n\nconst { getKatexString } = FormulaPlugin;\n\ninterface Props {\n  formula: string;\n  isEditing: boolean;\n  isSelected?: boolean;\n  readOnly?: boolean;\n}\n\nconst Wrapper = styled.div<Pick<Props, 'isEditing' | 'isSelected' | 'readOnly'>>`\n  display: flex;\n  align-items: center;\n  min-height: 32px;\n  border-radius: 4px;\n  position: relative;\n  z-index: 1;\n\n  ${({ readOnly }) => (readOnly\n    ? css`\n      cursor: default;\n      `\n    : css`\n      cursor: pointer;\n\n      &:hover {\n        background-color: rgba(126, 134, 142, 0.12);\n      }\n\n      &:active {\n        background-color: hsla(210, 6.6115702479338845%, 52.54901960784314%, 0.12);\n      }\n    `\n  )}\n\n  ${({ isEditing }) => (isEditing ? css`\n    background-color: rgba(126, 134, 142, 0.12);\n    margin-right: -20px;\n  ` : undefined)}\n\n  ${({ isSelected }) => (isSelected ? css`\n    background-color: rgba(0, 106, 254, 0.12);\n  ` : undefined)}\n`;\n\nconst FormulaContainer = styled.div`\n  overflow-x: auto;\n  overflow-y: hidden;\n`;\n\nconst Formula = styled.div`\n  margin: 0px 4px;\n  font-size: 11pt;\n`;\n\nexport default (props: Props) => {\n  const { formula, isEditing, isSelected, readOnly } = props;\n  const [domString, setDomString] = useState('');\n\n  useEffect(() => {\n    setDomString(getKatexString(formula.trim()));\n  }, [formula]);\n\n  return (\n    <Wrapper\n      isEditing={isEditing}\n      isSelected={isSelected && !isEditing}\n      readOnly={readOnly}\n    >\n      <FormulaContainer>\n        <Formula dangerouslySetInnerHTML={{ __html: domString }} />\n      </FormulaContainer>\n    </Wrapper>\n  );\n};\n"],"file":"view.js"}