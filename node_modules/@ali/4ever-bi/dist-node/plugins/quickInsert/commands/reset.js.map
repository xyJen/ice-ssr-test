{"version":3,"sources":["../../../../../src/plugins/quickInsert/commands/reset.ts"],"names":["reset","controller","plugin","decorations","value","insertDecoration","find","item","mark","type","start","end","offset","command","RangeSelection","create","anchor","focus","setDecorations","insert"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEe,SAASA,KAAT,CAAeC,UAAf,EAAuCC,MAAvC,EAA+C;AAC5D,QAAM;AAAEC,IAAAA;AAAF,MAAkBF,UAAU,CAACG,KAAnC;AAEA,QAAMC,gBAAgB,GAAGF,WAAW,CAACG,IAAZ,CACtBC,IAAD,IAAUA,IAAI,CAACC,IAAL,CAAUC,IAAV,KAAmB,cADN,CAAzB;;AAIA,MAAI,CAACJ,gBAAL,EAAuB;AACrB,WAAOJ,UAAP;AACD;;AAED,QAAM;AAAES,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAiBN,gBAAvB;;AAEA,MAAIK,KAAK,CAACE,MAAN,KAAiBD,GAAG,CAACC,MAAzB,EAAiC;AAC/BX,IAAAA,UAAU,CAACY,OAAX,CACE,eADF,EAEEC,4BAAeC,MAAf,CAAsB;AACpBC,MAAAA,MAAM,EAAEN,KADY;AAEpBO,MAAAA,KAAK,EAAEN;AAFa,KAAtB,CAFF;AAOD;;AAED,SAAOV,UAAU,CAACiB,cAAX,CAA0B,EAA1B,EAA8BL,OAA9B,CAAsCM,eAAtC,EAA8C;AAAEjB,IAAAA;AAAF,GAA9C,CAAP;AACD","sourcesContent":["import { RangeSelection, Controller } from '@ali/4ever-cangjie';\nimport insert from './insert';\n\nexport default function reset(controller: Controller, plugin) {\n  const { decorations } = controller.value;\n\n  const insertDecoration = decorations.find(\n    (item) => item.mark.type === 'quick-insert',\n  );\n\n  if (!insertDecoration) {\n    return controller;\n  }\n\n  const { start, end } = insertDecoration;\n\n  if (start.offset !== end.offset) {\n    controller.command(\n      'deleteAtRange',\n      RangeSelection.create({\n        anchor: start,\n        focus: end,\n      }),\n    );\n  }\n\n  return controller.setDecorations([]).command(insert, { plugin });\n}\n"],"file":"reset.js"}