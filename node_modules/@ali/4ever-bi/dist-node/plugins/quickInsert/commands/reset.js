"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = reset;

var _everCangjie = require("@ali/4ever-cangjie");

var _insert = _interopRequireDefault(require("./insert"));

function reset(controller, plugin) {
  const {
    decorations
  } = controller.value;
  const insertDecoration = decorations.find(item => item.mark.type === 'quick-insert');

  if (!insertDecoration) {
    return controller;
  }

  const {
    start,
    end
  } = insertDecoration;

  if (start.offset !== end.offset) {
    controller.command('deleteAtRange', _everCangjie.RangeSelection.create({
      anchor: start,
      focus: end
    }));
  }

  return controller.setDecorations([]).command(_insert.default, {
    plugin
  });
}
//# sourceMappingURL=reset.js.map