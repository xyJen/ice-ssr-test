"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = onSelect;

var _remove = _interopRequireDefault(require("../commands/remove"));

function onSelect(_, controller, next) {
  const {
    value
  } = controller;
  const {
    selection,
    decorations,
    document
  } = value;
  const insertMention = decorations.find(item => item.mark.type === 'quick-insert');

  if (!selection) {
    return next();
  }

  if (!selection.isCollapsed) {
    return next();
  }

  const start = selection.getStart(document);
  const end = selection.getEnd(document);

  if (insertMention) {
    if (start.offset > insertMention.end.offset || end.offset < insertMention.start.offset) {
      return controller.command(_remove.default);
    }
  }

  return next();
}
//# sourceMappingURL=onSelect.js.map