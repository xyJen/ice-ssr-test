"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _react = require("react");

var _calculatedSize = require("../utils/calculatedSize");

var _isEqualValue = _interopRequireDefault(require("../utils/isEqualValue"));

const useRenderCalendarBtn = props => {
  const {
    isPlaceholder,
    calendarId,
    containerWidthInPC,
    finalMetadata,
    injectToData,
    setLoading,
    setCalendarCardData,
    key,
    CalendarBtn
  } = props;
  const initCalendar = (0, _react.useCallback)(async data => {
    if (calendarId) return false;
    const topReceivers = (0, _calculatedSize.getCalculatedReceivers)(data, containerWidthInPC, data.totalCount);
    const newMetadata = { ...data,
      topReceivers
    };
    if ((0, _isEqualValue.default)(newMetadata, finalMetadata)) return false;
    await setCalendarCardData({ ...newMetadata,
      isInitialized: true
    });
    setLoading(false);
    injectToData({
      isFirstLoaded: true
    });
    return true;
  }, [calendarId, containerWidthInPC, finalMetadata, injectToData, setLoading, setCalendarCardData]);
  const createCalendarBtn = (0, _react.useCallback)(() => {
    if (!isPlaceholder || !CalendarBtn) return null;
    return CalendarBtn({
      key,
      initCalendar
    });
  }, [isPlaceholder, CalendarBtn, key, initCalendar]);
  return [createCalendarBtn];
};

var _default = useRenderCalendarBtn;
exports.default = _default;
//# sourceMappingURL=useRenderCalendarBtn.js.map