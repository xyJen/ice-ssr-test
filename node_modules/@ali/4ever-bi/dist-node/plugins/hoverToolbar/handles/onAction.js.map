{"version":3,"sources":["../../../../../src/plugins/hoverToolbar/handles/onAction.ts"],"names":["createOnAction","action","controller","next","type","payload","HOVER_TOOLBAR_COPY_NODE","node","copyNodes","run","query","HOVER_TOOLBAR_CUT_NODE","command","Commands","removeNodeByKey","key"],"mappings":";;;;;;;AAAA;;AACA;;AAKe,SAASA,cAAT,GAA0B;AACvC,SAAO,CAACC,MAAD,EAASC,UAAT,EAAiCC,IAAjC,KAA0C;AAC/C,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAoBJ,MAA1B;;AACA,QAAIG,IAAI,KAAKE,gCAAb,EAAsC;AACpC,YAAM;AAAEC,QAAAA;AAAF,UAAWF,OAAjB;AACA,YAAMG,SAAS,GAAGN,UAAU,CAACO,GAAX,CAAe,yBAAf,EAA0C,CAACF,IAAD,CAA1C,KAAqDA,IAAvE;AACAL,MAAAA,UAAU,CAACQ,KAAX,CAAiB,WAAjB,EAA8BF,SAA9B;AACA,aAAON,UAAP;AACD;;AACD,QAAIE,IAAI,KAAKO,+BAAb,EAAqC;AACnC,YAAM;AAAEJ,QAAAA;AAAF,UAAWF,OAAjB;AACAH,MAAAA,UAAU,CAACO,GAAX,CAAe,UAAf,EAA2B;AACzBL,QAAAA,IAAI,EAAEE,gCADmB;AAEzBD,QAAAA,OAAO,EAAE;AACPE,UAAAA;AADO;AAFgB,OAA3B;AAMAL,MAAAA,UAAU,CAACU,OAAX,CAAmBC,sBAASC,eAA5B,EAA6CP,IAAI,CAACQ,GAAlD;AACA,aAAOb,UAAP;AACD;;AACD,WAAOC,IAAI,EAAX;AACD,GApBD;AAqBD","sourcesContent":["import { Controller, Commands } from '@ali/4ever-cangjie';\nimport {\n  HOVER_TOOLBAR_COPY_NODE,\n  HOVER_TOOLBAR_CUT_NODE,\n} from '../actions';\n\nexport default function createOnAction() {\n  return (action, controller: Controller, next) => {\n    const { type, payload } = action;\n    if (type === HOVER_TOOLBAR_COPY_NODE) {\n      const { node } = payload;\n      const copyNodes = controller.run('beforeCopySelectedNodes', [node]) || node;\n      controller.query('copyNodes', copyNodes);\n      return controller;\n    }\n    if (type === HOVER_TOOLBAR_CUT_NODE) {\n      const { node } = payload;\n      controller.run('onAction', {\n        type: HOVER_TOOLBAR_COPY_NODE,\n        payload: {\n          node,\n        },\n      });\n      controller.command(Commands.removeNodeByKey, node.key);\n      return controller;\n    }\n    return next();\n  };\n}\n"],"file":"onAction.js"}