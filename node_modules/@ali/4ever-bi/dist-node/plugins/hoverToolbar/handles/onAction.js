"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createOnAction;

var _everCangjie = require("@ali/4ever-cangjie");

var _actions = require("../actions");

function createOnAction() {
  return (action, controller, next) => {
    const {
      type,
      payload
    } = action;

    if (type === _actions.HOVER_TOOLBAR_COPY_NODE) {
      const {
        node
      } = payload;
      const copyNodes = controller.run('beforeCopySelectedNodes', [node]) || node;
      controller.query('copyNodes', copyNodes);
      return controller;
    }

    if (type === _actions.HOVER_TOOLBAR_CUT_NODE) {
      const {
        node
      } = payload;
      controller.run('onAction', {
        type: _actions.HOVER_TOOLBAR_COPY_NODE,
        payload: {
          node
        }
      });
      controller.command(_everCangjie.Commands.removeNodeByKey, node.key);
      return controller;
    }

    return next();
  };
}
//# sourceMappingURL=onAction.js.map