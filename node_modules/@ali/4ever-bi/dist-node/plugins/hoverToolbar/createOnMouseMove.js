"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createOnMouseMove;

var _lodash = require("lodash");

var _hoverNode = _interopRequireDefault(require("./utils/hoverNode"));

const HOVER_TRIGGER_TIME = 60;

function isHoverInHoverToolbar(event) {
  const {
    target
  } = event;
  return target.getAttribute('data-hover-toolbar') || target.closest('[data-hover-toolbar="true"]');
}

const hoverElementHandler = (0, _lodash.debounce)((event, controller, hoverCapture, layouts) => {
  if (isHoverInHoverToolbar(event)) return;

  const result = _hoverNode.default.getNode(event, controller, layouts);

  hoverCapture.trigger(result);
}, HOVER_TRIGGER_TIME);

function createOnMouseMove(hoverCapture, configs) {
  return function (event, controller, next) {
    const {
      isDisabled
    } = configs || {};
    const disabled = isDisabled && isDisabled();
    if (disabled) return next();
    hoverElementHandler(event.nativeEvent, controller, hoverCapture, configs?.layouts);
    return next();
  };
}
//# sourceMappingURL=createOnMouseMove.js.map