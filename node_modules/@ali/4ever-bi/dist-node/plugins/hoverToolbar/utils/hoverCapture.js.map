{"version":3,"sources":["../../../../../src/plugins/hoverToolbar/utils/hoverCapture.ts"],"names":["HoverCapture","callbacks","prev","disabled","on","c","push","off","filter","cb","disableTrigger","enableTrigger","trigger","msg","node","forEach","forceClose","getCurrentNode","hoverCapture"],"mappings":";;;;;;;AAQO,MAAMA,YAAN,CAAmB;AAAA;AAAA,SAChBC,SADgB,GACS,EADT;AAAA,SAEhBC,IAFgB;AAAA,SAGhBC,QAHgB,GAGL,KAHK;AAAA;;AAKxBC,EAAAA,EAAE,CAACC,CAAD,EAAe;AACf,SAAKJ,SAAL,CAAeK,IAAf,CAAoBD,CAApB;AACD;;AAEDE,EAAAA,GAAG,CAACF,CAAD,EAAe;AAChB,SAAKJ,SAAL,GAAiB,KAAKA,SAAL,CAAeO,MAAf,CAAuBC,EAAD,IAAQA,EAAE,KAAKJ,CAArC,CAAjB;AACD;;AAEDK,EAAAA,cAAc,GAAG;AACf,SAAKP,QAAL,GAAgB,IAAhB;AACD;;AAEDQ,EAAAA,aAAa,GAAG;AACd,SAAKR,QAAL,GAAgB,KAAhB;AACD;;AAEDS,EAAAA,OAAO,CAACC,GAAgB,GAAG,EAApB,EAAwB;AAC7B,QAAK,KAAKX,IAAL,IAAa,KAAKA,IAAL,KAAcW,GAAG,CAACC,IAAhC,IAAyC,KAAKX,QAAlD,EAA4D;AAC1D;AACD;;AACD,SAAKD,IAAL,GAAYW,GAAG,CAACC,IAAhB;AACA,SAAKb,SAAL,CAAec,OAAf,CAAwBV,CAAD,IAAO;AAAEA,MAAAA,CAAC,CAACQ,GAAD,CAAD;AAAS,KAAzC;AACD;;AAEDG,EAAAA,UAAU,GAAG;AACX,SAAKJ,OAAL,CAAa,EAAb;AACD;;AAEDK,EAAAA,cAAc,GAAG;AACf,WAAO,KAAKf,IAAZ;AACD;;AAnCuB;;;AAsCnB,MAAMgB,YAAY,GAAG,IAAIlB,YAAJ,EAArB","sourcesContent":["import { Node } from '@ali/4ever-cangjie';\n\nexport interface ICaptureMsg {\n  node?: Node;\n}\n\nexport type ICallback = (msg: ICaptureMsg) => void;\n\nexport class HoverCapture {\n  private callbacks: ICallback[] = [];\n  private prev: Node | undefined;\n  private disabled = false;\n\n  on(c: ICallback) {\n    this.callbacks.push(c);\n  }\n\n  off(c: ICallback) {\n    this.callbacks = this.callbacks.filter((cb) => cb !== c);\n  }\n\n  disableTrigger() {\n    this.disabled = true;\n  }\n\n  enableTrigger() {\n    this.disabled = false;\n  }\n\n  trigger(msg: ICaptureMsg = {}) {\n    if ((this.prev && this.prev === msg.node) || this.disabled) {\n      return;\n    }\n    this.prev = msg.node;\n    this.callbacks.forEach((c) => { c(msg); });\n  }\n\n  forceClose() {\n    this.trigger({});\n  }\n\n  getCurrentNode() {\n    return this.prev;\n  }\n}\n\nexport const hoverCapture = new HoverCapture();\n"],"file":"hoverCapture.js"}