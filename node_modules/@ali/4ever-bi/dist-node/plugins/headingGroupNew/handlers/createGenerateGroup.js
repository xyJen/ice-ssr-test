"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _everCangjie = require("@ali/4ever-cangjie");

var _everMo = require("@ali/4ever-mo");

const {
  Heading1,
  Heading2,
  Heading3
} = _everMo.Heading;

function createGenerateGroup(config) {
  return function generateGroup(element, controller, next) {
    const {
      document
    } = controller.value;
    const parent = document.getParent(element.key);
    const last = parent?.nodes[parent.nodes.length - 1]; // 如果不是一级节点，或者是文档末尾，则不分组

    if (!_everCangjie.Document.isDocument(parent) || last === element) {
      return next();
    }

    if (Heading1.isHeading1(element)) {
      return {
        type: 'heading1-group',
        data: {
          symbol: '#'
        }
      };
    } else if (Heading2.isHeading2(element)) {
      return {
        type: 'heading2-group',
        data: {
          symbol: '##'
        }
      };
    } else if (Heading3.isHeading3(element)) {
      return {
        type: 'heading3-group',
        data: {
          symbol: '###'
        }
      };
    }

    return next();
  };
}

var _default = createGenerateGroup;
exports.default = _default;
//# sourceMappingURL=createGenerateGroup.js.map