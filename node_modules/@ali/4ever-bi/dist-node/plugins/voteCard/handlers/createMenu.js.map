{"version":3,"sources":["../../../../../src/plugins/voteCard/handlers/createMenu.tsx"],"names":["DEFAULT_DATA","title","voteType","VoteCardPlugin","EnumVoteType","RADIO","optionInfoList","content","pos","optionTicket","userOptionTicket","endTime","add","valueOf","showTicketBeforeVoting","createMenubar","CalendarCardMenu","props","menuItem","controller","rest","handleClick","node","Block","create","type","Card","TYPE","data","cardType","height","metadata","command","insertCardCommand","setCardInjectionCommand","editing","setIsFocused"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;uBAL4B,a;AAQ5B,MAAMA,YAA+C,GAAG;AACtDC,EAAAA,KAAK,EAAE,EAD+C;AAEtDC,EAAAA,QAAQ,EAAEC,2BAAeC,YAAf,CAA4BC,KAFgB;AAGtDC,EAAAA,cAAc,EAAE,CACd;AAAEC,IAAAA,OAAO,EAAE,EAAX;AAAeC,IAAAA,GAAG,EAAE,CAApB;AAAuBC,IAAAA,YAAY,EAAE,CAArC;AAAwCC,IAAAA,gBAAgB,EAAE;AAA1D,GADc,EAEd;AAAEH,IAAAA,OAAO,EAAE,EAAX;AAAeC,IAAAA,GAAG,EAAE,CAApB;AAAuBC,IAAAA,YAAY,EAAE,CAArC;AAAwCC,IAAAA,gBAAgB,EAAE;AAA1D,GAFc,CAHsC;AAOtDC,EAAAA,OAAO,EAAE,sBAAQC,GAAR,CAAY,CAAZ,EAAe,MAAf,EAAuBC,OAAvB,EAP6C;AAQtDC,EAAAA,sBAAsB,EAAE;AAR8B,CAAxD;;AAWA,MAAMC,aAAa,GAAG,MAAM;AAC1B,SAAO,SAASC,gBAAT,CAA0BC,KAA1B,EAAsC;AAC3C,UAAM;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAA2BF,KAAjC;AACA,UAAM;AAAEhB,MAAAA,KAAF;AAAS,SAAGmB;AAAZ,QAAqBF,QAA3B;AAEA,UAAMG,WAAW,GAAG,wBAAY,MAAM;AACpC,YAAMC,IAAI,GAAGC,mBAAMC,MAAN,CAAa;AACxBC,QAAAA,IAAI,EAAEC,aAAKC,IADa;AAExBC,QAAAA,IAAI,EAAE;AACJC,UAAAA,QAAQ,EAAE,MADN;AAEJC,UAAAA,MAAM,EAAE,GAFJ;AAGJC,UAAAA,QAAQ,EAAE/B;AAHN;AAFkB,OAAb,CAAb;;AASAmB,MAAAA,UAAU,CACPa,OADH,CACWC,8BADX,EAC8BX,IAD9B,EAEGU,OAFH,CAEWE,oCAFX,EAEoCZ,IAFpC,EAE0C;AAAEa,QAAAA,OAAO,EAAE;AAAX,OAF1C,EAGGC,YAHH,CAGgB,KAHhB;AAID,KAdmB,EAcjB,CAACjB,UAAD,CAdiB,CAApB;AAgBA,wBACE,eAAC,kBAAD,6BAAcC,IAAd;AAAoB,MAAA,OAAO,EAAEC;AAA7B,QACGpB,KAAK,IAAI,EADZ,CADF;AAKD,GAzBD;AA0BD,CA3BD;;eA6Bec,a","sourcesContent":["import React, { useCallback } from 'react';\nimport { Block } from '@ali/4ever-cangjie';\nimport dayjs from 'dayjs';\nimport { VoteCardPlugin } from '@ali/4ever-bamboo';\nimport { Card } from '@ali/4ever-mo';\nimport { MenuItem } from '@ali/we-design';\nimport { insertCardCommand, setCardInjectionCommand } from '@ali/4ever-factory';\n\n\nconst DEFAULT_DATA: Partial<VoteCardPlugin.IVoteData> = {\n  title: '',\n  voteType: VoteCardPlugin.EnumVoteType.RADIO,\n  optionInfoList: [\n    { content: '', pos: 1, optionTicket: 0, userOptionTicket: 0 },\n    { content: '', pos: 2, optionTicket: 0, userOptionTicket: 0 }\n  ],\n  endTime: dayjs().add(7, 'days').valueOf(),\n  showTicketBeforeVoting: false,\n}\n\nconst createMenubar = () => {\n  return function CalendarCardMenu(props: any) {\n    const { menuItem, controller } = props;\n    const { title, ...rest } = menuItem;\n\n    const handleClick = useCallback(() => {\n      const node = Block.create({\n        type: Card.TYPE,\n        data: {\n          cardType: 'vote',\n          height: 400,\n          metadata: DEFAULT_DATA,\n        },\n      });\n\n      controller\n        .command(insertCardCommand, node)\n        .command(setCardInjectionCommand, node, { editing: true })\n        .setIsFocused(false);\n    }, [controller]);\n\n    return (\n      <MenuItem {...rest} onClick={handleClick}>\n        {title || ''}\n      </MenuItem>\n    );\n  };\n};\n\nexport default createMenubar;\n"],"file":"createMenu.js"}