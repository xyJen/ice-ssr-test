"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = insertLink;

var _everCangjie = require("@ali/4ever-cangjie");

function insertLink(controller, text, href) {
  const {
    isExpanded
  } = controller.value.selection;
  controller.command(_everCangjie.Commands.focus); // 针对移动端链接插入，如果 href 为 undefined 则直接返回。

  if (typeof href !== 'string') {
    console.warn('href is invalid');
    return controller;
  } // 有选区无标题时执行 wrapInline


  if (!text && isExpanded) {
    controller.command(_everCangjie.Commands.wrapInline, {
      type: 'link',
      data: {
        href
      }
    });
  } else {
    controller.command(_everCangjie.Commands.insertInline, {
      type: 'link',
      data: {
        href
      },
      nodes: [_everCangjie.Text.create(text)]
    });
  }

  return controller.command(_everCangjie.Commands.moveToStartOfNextText).command(_everCangjie.Commands.insertText, ' ');
}
//# sourceMappingURL=insertLink.js.map