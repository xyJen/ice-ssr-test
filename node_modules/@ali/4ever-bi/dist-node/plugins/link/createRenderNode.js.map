{"version":3,"sources":["../../../../src/plugins/link/createRenderNode.tsx"],"names":["createRenderNode","linkConfig","draggable","locale","protocolAllowList","onCopyLink","getLinkInfo","enableCard","openLink","enableLinkCardBlock","mountRoot","link","props","_","node","linkType","cardInfo","data","displayType"],"mappings":";;;;;;;;;;;;;AAAA;;AAGA;;AACA;;uBAH4B,a;;AAMb,SAASA,gBAAT,CACbC,UADa,EACiBC,SADjB,EAEb;AACA,QAAM;AACJC,IAAAA,MADI;AAEJC,IAAAA,iBAFI;AAGJC,IAAAA,UAHI;AAIJC,IAAAA,WAJI;AAKJC,IAAAA,UAAU,GAAG,KALT;AAMJC,IAAAA,QANI;AAOJC,IAAAA,mBAPI;AAQJC,IAAAA,SAAS,GAAG;AARR,MASFT,UATJ;AAWA,SAAO;AACLU,IAAAA,IAAI,EAAE,CAACC,KAAD,EAAiCC,CAAjC,KAAuC;AAC3C,YAAM;AAAEC,QAAAA;AAAF,UAAWF,KAAjB;AAEA,UAAIG,QAAyB,GAAG,MAAhC,CAH2C,CAI3C;;AACA,UAAI,2BAAeD,IAAf,CAAJ,EAA0B;AACxB,cAAM;AAAEE,UAAAA;AAAF,YAAeF,IAAI,CAACG,IAA1B;AACA,cAAM;AAAEC,UAAAA;AAAF,YAAkBF,QAAQ,IAAI,EAApC;;AACA,YAAIE,WAAW,KAAK,MAApB,EAA4B;AAC1BH,UAAAA,QAAQ,GAAG,MAAX;AACD;AACF;;AACD,0BACE,eAAC,iBAAD,6BACMH,KADN;AAEE,QAAA,WAAW,EAAEG,QAFf;AAGE,QAAA,IAAI,EAAED,IAHR;AAIE,QAAA,iBAAiB,EAAEV,iBAAiB,IAAI,EAJ1C;AAKE,QAAA,MAAM,EAAED,MALV;AAME,QAAA,WAAW,EAAEG,WANf;AAOE,QAAA,UAAU,EAAED,UAPd;AAQE,QAAA,UAAU,EAAEE,UARd;AASE,QAAA,SAAS,EAAEL,SATb;AAUE,QAAA,QAAQ,EAAEM,QAVZ;AAWE,QAAA,mBAAmB,EAAEC,mBAXvB;AAYE,QAAA,SAAS,EAAEC;AAZb,SADF;AAgBD;AA7BI,GAAP;AA+BD","sourcesContent":["import * as React from 'react';\nimport { Plugin, Inline, RenderNodeProps } from '@ali/4ever-cangjie';\nimport { LinkPluginConfig, LinkDisplayType } from './types';\nimport Link from './components/textLink';\nimport { isLinkCardNode } from './utils';\nimport { BiPluginConfig } from '../../types';\n\nexport default function createRenderNode(\n  linkConfig: LinkPluginConfig, draggable?: BiPluginConfig['DraggablePluginConfig'],\n) {\n  const {\n    locale,\n    protocolAllowList,\n    onCopyLink,\n    getLinkInfo,\n    enableCard = false,\n    openLink,\n    enableLinkCardBlock,\n    mountRoot = false,\n  } = linkConfig;\n\n  return {\n    link: (props: RenderNodeProps<Inline>, _) => {\n      const { node } = props;\n\n      let linkType: LinkDisplayType = 'link';\n      // 当 link 是卡片形式\n      if (isLinkCardNode(node)) {\n        const { cardInfo } = node.data;\n        const { displayType } = cardInfo || {};\n        if (displayType === 'card') {\n          linkType = 'card';\n        }\n      }\n      return (\n        <Link\n          {...props}\n          displayType={linkType}\n          node={node}\n          protocolAllowList={protocolAllowList || []}\n          locale={locale}\n          getLinkInfo={getLinkInfo}\n          onCopyLink={onCopyLink}\n          enableCard={enableCard}\n          draggable={draggable}\n          openLink={openLink}\n          enableLinkCardBlock={enableLinkCardBlock}\n          mountRoot={mountRoot}\n        />\n      );\n    },\n  };\n}\n"],"file":"createRenderNode.js"}