"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = copyLink;

var _everCangjie = require("@ali/4ever-cangjie");

var _everPluginClipboard = require("@ali/4ever-plugin-clipboard");

const {
  MIME_TYPES
} = _everCangjie.constants;

function copyLink(controller, node, serializer) {
  const {
    href
  } = node.data.metadata;

  const fragment = _everCangjie.Document.create({
    nodes: [node]
  });

  const value = _everCangjie.Value.create({
    document: fragment
  });

  const clip = (0, _everPluginClipboard.createClipboardManager)();
  clip.write({
    [MIME_TYPES.FRAGMENT]: _everCangjie.transferUtils.encodeFragment(fragment),
    [MIME_TYPES.HTML]: (0, _everPluginClipboard.getHtmlFromValue)(serializer, value),
    [MIME_TYPES.TEXT]: href || serializer.valueToText(value)
  });
  return controller;
}
//# sourceMappingURL=copyLink.js.map