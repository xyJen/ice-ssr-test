"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = isSelectionInLink;
exports.tryGetSelectedLinkPlaceholder = tryGetSelectedLinkPlaceholder;

var _everCangjie = require("@ali/4ever-cangjie");

function isSelectionInLink(value) {
  if (!value) {
    return false;
  }

  const {
    document,
    selection
  } = value;

  if (!selection) {
    return false;
  }

  const startKey = selection.getStart(document).key;

  if (!startKey) {
    return false;
  }

  const linkBlock = document.getClosest(startKey, node => _everCangjie.Inline.isInline(node) && node.type === 'link');
  return Boolean(linkBlock);
}

function tryGetSelectedLinkPlaceholder(value, placeholder) {
  if (!value) {
    return null;
  }

  const {
    document,
    selection
  } = value;

  if (!selection) {
    return null;
  }

  const startKey = selection.getStart(document).key;

  if (!startKey) {
    return null;
  }

  const linkNode = document.getClosest(startKey, node => _everCangjie.Inline.isInline(node) && node.type === 'link' && node.data.href === '' && node.text === placeholder);
  return linkNode;
}
//# sourceMappingURL=isSelectionInLink.js.map