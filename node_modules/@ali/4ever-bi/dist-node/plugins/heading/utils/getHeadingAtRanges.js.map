{"version":3,"sources":["../../../../../src/plugins/heading/utils/getHeadingAtRanges.ts"],"names":["filterSameHeading","headings","keyMap","filter","heading","getHeadingAtRanges","controller","ranges","document","value","forEach","range","concat","getLeafBlocksAtRange","map","block","type"],"mappings":";;;;;;;AAEA,SAASA,iBAAT,CAA2BC,QAA3B,EAA+C;AAC7C,QAAMC,MAAM,GAAG,EAAf;AACA,SAAOD,QAAQ,CAACE,MAAT,CAAgBC,OAAO,IAAI;AAChC,QAAIF,MAAM,CAACE,OAAD,CAAV,EAAqB;AACnB,aAAO,KAAP;AACD;;AACDF,IAAAA,MAAM,CAACE,OAAD,CAAN,GAAkB,IAAlB;AACA,WAAO,IAAP;AACD,GANM,CAAP;AAOD;;AAGc,SAASC,kBAAT,CAA4BC,UAA5B,EAAoDC,MAApD,EAAyE;AACtF,QAAM;AAAEC,IAAAA;AAAF,MAAeF,UAAU,CAACG,KAAhC;AACA,MAAIR,QAAkB,GAAG,EAAzB;AACAM,EAAAA,MAAM,CAACG,OAAP,CAAeC,KAAK,IAAI;AACtBV,IAAAA,QAAQ,GAAGA,QAAQ,CAACW,MAAT,CAAgBJ,QAAQ,CAACK,oBAAT,CAA8BF,KAA9B,EAAqCG,GAArC,CAAyCC,KAAK,IAAIA,KAAK,CAACC,IAAxD,CAAhB,CAAX;AACD,GAFD;AAGA,SAAOhB,iBAAiB,CAACC,QAAD,CAAxB;AACD","sourcesContent":["import { Controller, Selection } from '@ali/4ever-cangjie';\n\nfunction filterSameHeading(headings: string[]) {\n  const keyMap = {};\n  return headings.filter(heading => {\n    if (keyMap[heading]) {\n      return false;\n    }\n    keyMap[heading] = true;\n    return true;\n  });\n}\n\n\nexport default function getHeadingAtRanges(controller: Controller, ranges: Selection[]) {\n  const { document } = controller.value;\n  let headings: string[] = [];\n  ranges.forEach(range => {\n    headings = headings.concat(document.getLeafBlocksAtRange(range).map(block => block.type));\n  });\n  return filterSameHeading(headings);\n}\n"],"file":"getHeadingAtRanges.js"}