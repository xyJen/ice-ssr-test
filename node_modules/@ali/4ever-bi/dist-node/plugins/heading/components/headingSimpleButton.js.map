{"version":3,"sources":["../../../../../src/plugins/heading/components/headingSimpleButton.tsx"],"names":["SUPPORT_HEADING","paragraph","blockquote","isDisabled","controller","isCollapsedAtEdge","value","selection","query","Boolean","HeadingSimpleButton","props","locale","size","heading","handleChange","React","useCallback","run","HeadingSimpleSelect","useMemo","OriginHeadingSimpleSelect","buttonTitle","PluginRoles","headingSelect"],"mappings":";;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;uBAJ4B,a;AAK5B;AAGA,MAAMA,eAAe,GAAG;AACtBC,EAAAA,SAAS,EAAE,IADW;AAEtB,eAAa,IAFS;AAGtB,eAAa,IAHS;AAItB,eAAa,IAJS;AAKtB,eAAa,IALS;AAMtBC,EAAAA,UAAU,EAAE;AANU,CAAxB;;AAeO,MAAMC,UAAU,GAAIC,UAAD,IAA4B;AACpD,QAAM;AAAEC,IAAAA;AAAF,MAAwBD,UAAU,CAACE,KAAX,CAAiBC,SAA/C;AACA,QAAMJ,UAAU,GAAGE,iBAAiB,IAC/BD,UAAU,CAACI,KAAX,CAAiB,oBAAjB,CADc,IAEdJ,UAAU,CAACI,KAAX,CAAiB,iBAAjB,CAFc,IAGdJ,UAAU,CAACI,KAAX,CAAiB,yBAAjB,CAHc,IAIdJ,UAAU,CAACI,KAAX,CAAiB,uBAAjB,CAJc,CAKjB;AALiB,KAMdJ,UAAU,CAACI,KAAX,CAAiB,6BAAjB,CANL;AAOA,SAAOC,OAAO,CAACN,UAAD,CAAd;AACD,CAVM;;;;AAYQ,SAASO,mBAAT,CAA6BC,KAA7B,EAA8D;AAC3E,QAAM;AAAEP,IAAAA,UAAF;AAAcQ,IAAAA,MAAd;AAAsBC,IAAAA;AAAtB,MAA+BF,KAArC;AACA,QAAMG,OAAO,GAAGV,UAAU,CAACI,KAAX,CAAiB,oBAAjB,IAAyC,YAAzC,GAAwDJ,UAAU,CAACI,KAAX,CAAiB,YAAjB,CAAxE;AAEA,QAAMO,YAAY,GAAGC,KAAK,CAACC,WAAN,CAAmBX,KAAD,IAAmB;AACxD,QAAIA,KAAK,KAAK,YAAd,EAA4B;AAC1BF,MAAAA,UAAU,CAACc,GAAX,CAAe,UAAf,EAA2B,yBAAW,WAAX,CAA3B;AACAd,MAAAA,UAAU,CAACc,GAAX,CAAe,UAAf,EAA2B,kCAA3B;AACD,KAHD,MAGO;AACLd,MAAAA,UAAU,CAACc,GAAX,CAAe,UAAf,EAA2B,yBAAWZ,KAAX,CAA3B;AACAF,MAAAA,UAAU,CAACc,GAAX,CAAe,UAAf,EAA2B,mCAA3B;AACD;AACF,GARoB,EAQlB,CAACd,UAAD,CARkB,CAArB;AAUA,QAAMe,mBAAmB,GAAGH,KAAK,CAACI,OAAN,CAAc,MAAMC,8BAApB,EAA+C,EAA/C,CAA5B;AAEA,sBACE,eAAC,mBAAD;AACE,IAAA,IAAI,EAAER,IADR;AAEE,IAAA,QAAQ,EAAEE,YAFZ;AAGE,IAAA,KAAK,EAAEf,eAAe,CAACc,OAAD,CAAf,GAAkCA,OAAlC,GAAmD,WAH5D;AAIE,IAAA,MAAM,EAAC,2BAJT;AAKE,IAAA,QAAQ,EAAEX,UAAU,CAACC,UAAD,CALtB;AAME,IAAA,OAAO,EAAEQ,MAAM,CAACU,WANlB;AAOE,IAAA,IAAI,EAAEC,wBAAYC;AAPpB,IADF;AAWD","sourcesContent":["import * as React from 'react';\nimport styled from 'styled-components';\nimport { HeadingSimpleSelect as OriginHeadingSimpleSelect } from '@ali/we-toolbar';\nimport { PluginRoles } from '@ali/4ever-bamboo';\nimport { setHeading } from '../actions';\nimport { enableBlockquote, disableBlockquote } from '@ali/4ever-utils';\n;\nimport { Controller } from '@ali/4ever-cangjie';\n\nconst SUPPORT_HEADING = {\n  paragraph: true,\n  'heading-1': true,\n  'heading-2': true,\n  'heading-3': true,\n  'heading-4': true,\n  blockquote: true,\n};\n\nexport interface HeadingSimpleButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n  size: 'large' | 'medium' | 'small';\n}\n\nexport const isDisabled = (controller: Controller) => {\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled = isCollapsedAtEdge\n    || controller.query('isSelectionInImage')\n    || controller.query('isSelectionInHr')\n    || controller.query('isSelectionInListSymbol')\n    || controller.query('isSelectionInLinkCard')\n    // fix: https://aone.alibaba-inc.com/v2/bug/35749970\n    || controller.query('isSelectionInSubjectHeading');\n  return Boolean(isDisabled);\n}\n\nexport default function HeadingSimpleButton(props: HeadingSimpleButtonProps) {\n  const { controller, locale, size } = props;\n  const heading = controller.query('getBlockquoteState') ? 'blockquote' : controller.query('getHeading');\n\n  const handleChange = React.useCallback((value: string) => {\n    if (value === 'blockquote') {\n      controller.run('onAction', setHeading('paragraph'));\n      controller.run('onAction', enableBlockquote());\n    } else {\n      controller.run('onAction', setHeading(value));\n      controller.run('onAction', disableBlockquote());\n    }\n  }, [controller]);\n\n  const HeadingSimpleSelect = React.useMemo(() => OriginHeadingSimpleSelect, []);\n\n  return (\n    <HeadingSimpleSelect\n      size={size}\n      onChange={handleChange}\n      value={SUPPORT_HEADING[heading as any] ? heading as any : 'paragraph'}\n      testid=\"bi-toolbar-simple-heading\"\n      disabled={isDisabled(controller)}\n      tooltip={locale.buttonTitle}\n      role={PluginRoles.headingSelect}\n    />\n  );\n}\n"],"file":"headingSimpleButton.js"}