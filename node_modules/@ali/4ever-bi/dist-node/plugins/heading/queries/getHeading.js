"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = getHeading;

var _everCangjie = require("@ali/4ever-cangjie");

var _everMo = require("@ali/4ever-mo");

var _everUtils = require("@ali/4ever-utils");

var _getHeadingAtRanges = _interopRequireDefault(require("../utils/getHeadingAtRanges"));

function getHeading(controller) {
  const {
    startBlock,
    endBlock
  } = controller.value; // 多个块级元素时返回空，以便区分正文（移动端不做此处理）

  const emptyHeading = _everCangjie.environment.IS_MOBILE ? 'paragraph' : ''; // 尽量避免遍历 ranges

  if (startBlock?.type !== endBlock?.type) return emptyHeading;
  const ranges = (0, _everUtils.getRangesFromEditor)(controller);
  const headings = (0, _getHeadingAtRanges.default)(controller, ranges);

  if (headings.length === 1) {
    const heading = _everCangjie.Block.create({
      type: headings[0]
    });

    if (_everMo.Paragraph.isParagraph(heading) || _everMo.Heading.isHeading(heading)) {
      return heading.type;
    }
  }

  return emptyHeading;
}
//# sourceMappingURL=getHeading.js.map