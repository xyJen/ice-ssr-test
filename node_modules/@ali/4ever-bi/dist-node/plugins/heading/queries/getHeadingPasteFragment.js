"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = getHeadingPasteFragment;

var _everMo = require("@ali/4ever-mo");

var _fragment = require("../utils/fragment");

const SZ_BOLD_MARKS = [_everMo.Marks.Sz.TYPE, _everMo.Marks.Bold.TYPE];

function getHeadingPasteFragment(controller, fragment) {
  if (!fragment) return fragment;
  const {
    nodes
  } = fragment;
  const isAtHeading = (0, _fragment.isSelectionAtHeading)(controller.value);

  const isFragStartWithHeading = _everMo.Heading.isHeading(nodes[0]);

  let nextFragment;

  if (isFragStartWithHeading) {
    // 1 复制标题内容：移除字号和加粗 mark，以便粘贴到其它段落或标题能匹配目标格式
    nextFragment = (0, _fragment.removeFirstNodeMarkByTypes)(fragment, SZ_BOLD_MARKS);
  } else if (_everMo.Paragraph.isParagraph(nodes[0]) && isAtHeading) {
    // 2 复制普通段落内容：粘贴到标题中去除 marks 以便匹配标题格式
    nextFragment = (0, _fragment.removeFirstNodeMarkByTypes)(fragment, SZ_BOLD_MARKS);
  }

  return nextFragment;
}
//# sourceMappingURL=getHeadingPasteFragment.js.map