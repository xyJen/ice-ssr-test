{"version":3,"sources":["../../../../../src/plugins/heading/queries/isCollapsedAtEmptyHeading.ts"],"names":["isCollapsedAtEmptyHeading","controller","range","isCollapsed","isCollapsedAtEdge","document","value","block","getClosestBlock","focus","key","Heading","isHeading","text","Text","isTextList","nodes"],"mappings":";;;;;;;AAAA;;AACA;;AAEe,SAASA,yBAAT,CAAmCC,UAAnC,EAA2DC,KAA3D,EAAsF;AACnG,QAAM;AAAEC,IAAAA,WAAF;AAAeC,IAAAA;AAAf,MAAqCF,KAA3C,CADmG,CAEnG;;AACA,MAAI,CAACC,WAAD,IAAgBC,iBAApB,EAAuC,OAAO,KAAP;AAEvC,QAAM;AAAEC,IAAAA;AAAF,MAAeJ,UAAU,CAACK,KAAhC;AACA,QAAMC,KAAK,GAAGF,QAAQ,CAACG,eAAT,CAAyBN,KAAK,CAACO,KAAN,CAAYC,GAArC,CAAd,CANmG,CAQnG;;AACA,MAAI,CAACC,gBAAQC,SAAR,CAAkBL,KAAlB,CAAL,EAA+B,OAAO,KAAP;AAE/B,SAAOA,KAAK,EAAEM,IAAP,KAAgB,EAAhB,IAAsBC,kBAAKC,UAAL,CAAgBR,KAAK,CAACS,KAAtB,CAA7B;AACD","sourcesContent":["import { Text, Controller, Selection } from '@ali/4ever-cangjie';\nimport { Heading } from '@ali/4ever-mo';\n\nexport default function isCollapsedAtEmptyHeading(controller: Controller, range: Selection): boolean {\n  const { isCollapsed, isCollapsedAtEdge } = range;\n  // 边缘不算\n  if (!isCollapsed || isCollapsedAtEdge) return false;\n\n  const { document } = controller.value;\n  const block = document.getClosestBlock(range.focus.key);\n\n  // 段落和标题以外的块级元素不算\n  if (!Heading.isHeading(block)) return false;\n\n  return block?.text === '' && Text.isTextList(block.nodes);\n}\n"],"file":"isCollapsedAtEmptyHeading.js"}