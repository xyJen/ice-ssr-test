"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createOnCangjiePaste;

var _everCangjie = require("@ali/4ever-cangjie");

const {
  MIME_TYPES
} = _everCangjie.constants;

function createOnCangjiePaste(config) {
  return async function onCangjiePaste(event, controller, next) {
    const clipboardData = controller.query('getClipboardData', event);

    if (!clipboardData?.hasData(MIME_TYPES.FRAGMENT)) {
      return next();
    }

    let fragment = clipboardData.getFragment();
    if (!fragment?.nodes?.length) return next();
    const nextFragment = controller.query('getHeadingPasteFragment', fragment);

    if (nextFragment) {
      event.clipboardData.setData(MIME_TYPES.FRAGMENT, _everCangjie.transferUtils.encodeFragment(nextFragment));
    }

    return next();
  };
}

;
//# sourceMappingURL=createOnCangjiePaste.js.map