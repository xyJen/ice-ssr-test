{"version":3,"sources":["../../../../../src/plugins/clearStyle/commands/clearParagraphStyle.ts"],"names":["clearParagraphStyle","controller","range","forceClear","value","document","allBlocks","getLeafBlocksAtRange","forEach","block","shouldClear","isCollapsed","length","query","type","Heading","isHeading","list","blockquote","jc","ind","spacing","shd","rest","data","command","Commands","setNodeByKey","key"],"mappings":";;;;;;;AAAA;;AACA;;AAEe,SAASA,mBAAT,CAA6BC,UAA7B,EAAqDC,KAArD,EAAuEC,UAAU,GAAG,KAApF,EAA2F;AACxG,QAAM;AAAEC,IAAAA;AAAF,MAAYH,UAAlB;AACA,QAAM;AAAEI,IAAAA;AAAF,MAAeD,KAArB;AAEA,QAAME,SAAS,GAAGD,QAAQ,CAACE,oBAAT,CAA8BL,KAA9B,CAAlB;AAEAI,EAAAA,SAAS,CAACE,OAAV,CAAmBC,KAAD,IAAW;AAC3B,UAAMC,WAAW,GAAGP,UAAU,IAAID,KAAK,EAAES,WAArB,IAAoCL,SAAS,CAACM,MAAV,GAAmB,CAAvD,IAA4DX,UAAU,CAACY,KAAX,CAAiB,qBAAjB,CAAhF;;AACA,QAAIJ,KAAK,IAAIC,WAAb,EAA0B;AACxB;AACA,YAAMI,IAAI,GAAGC,gBAAQC,SAAR,CAAkBP,KAAlB,IAA2B,WAA3B,GAAyCA,KAAK,CAACK,IAA5D,CAFwB,CAGxB;;AACA,YAAM;AAAEG,QAAAA,IAAF;AAAQC,QAAAA,UAAR;AAAoBC,QAAAA,EAApB;AAAwBC,QAAAA,GAAxB;AAA6BC,QAAAA,OAA7B;AAAsCC,QAAAA,GAAtC;AAA2C,WAAGC;AAA9C,UAAuDd,KAAK,CAACe,IAAnE;AACAvB,MAAAA,UAAU,CAACwB,OAAX,CAAmBC,sBAASC,YAA5B,EAA0ClB,KAAK,CAACmB,GAAhD,EAAqD;AACnDd,QAAAA,IADmD;AAEnDU,QAAAA,IAAI,EAAE,EACJ,GAAGD;AADC;AAF6C,OAArD;AAMD;AACF,GAdD;AAeA,SAAOtB,UAAP;AACD","sourcesContent":["import { Controller, Commands, Selection } from '@ali/4ever-cangjie';\nimport { Heading } from '@ali/4ever-mo';\n\nexport default function clearParagraphStyle(controller: Controller, range: Selection, forceClear = false) {\n  const { value } = controller;\n  const { document } = value;\n\n  const allBlocks = document.getLeafBlocksAtRange(range);\n\n  allBlocks.forEach((block) => {\n    const shouldClear = forceClear || range?.isCollapsed || allBlocks.length > 1 || controller.query('isSelectWholeBlocks');\n    if (block && shouldClear) {\n      // 将heading变为正文\n      const type = Heading.isHeading(block) ? 'paragraph' : block.type;\n      // 去除列表、引用、对齐方式、缩进、段间距、纹理\n      const { list, blockquote, jc, ind, spacing, shd, ...rest } = block.data;\n      controller.command(Commands.setNodeByKey, block.key, {\n        type,\n        data: {\n          ...rest,\n        },\n      });\n    }\n  });\n  return controller;\n}\n"],"file":"clearParagraphStyle.js"}