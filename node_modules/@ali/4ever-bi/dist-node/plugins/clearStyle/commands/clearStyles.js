"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createClearStyles;

var _clearMarksAtRange = _interopRequireDefault(require("./clearMarksAtRange"));

var _everUtils = require("@ali/4ever-utils");

var _clearParagraphStyle = _interopRequireDefault(require("./clearParagraphStyle"));

function createClearStyles(ignores = []) {
  const clearMarksAtRange = (0, _clearMarksAtRange.default)(ignores);
  return function clearStyles(controller, ranges) {
    // 移动端第二参数会莫名其妙传入 true
    const targetRanges = Array.isArray(ranges) ? ranges : (0, _everUtils.getRangesFromEditor)(controller);
    targetRanges.forEach(range => {
      clearMarksAtRange(controller, range);
      (0, _clearParagraphStyle.default)(controller, range, !!ranges);
    });
    const {
      value
    } = controller;

    if (value.data.listSelections && value.data.listSelections.length > 0) {
      controller.dispatch('selectSymbol', value.data.listSelections, false);
      controller.dispatch('clearListSelections');
    }

    return controller;
  };
}
//# sourceMappingURL=clearStyles.js.map