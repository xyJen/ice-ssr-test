"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = clearParagraphStyle;

var _everCangjie = require("@ali/4ever-cangjie");

var _everMo = require("@ali/4ever-mo");

function clearParagraphStyle(controller, range, forceClear = false) {
  const {
    value
  } = controller;
  const {
    document
  } = value;
  const allBlocks = document.getLeafBlocksAtRange(range);
  allBlocks.forEach(block => {
    const shouldClear = forceClear || range?.isCollapsed || allBlocks.length > 1 || controller.query('isSelectWholeBlocks');

    if (block && shouldClear) {
      // 将heading变为正文
      const type = _everMo.Heading.isHeading(block) ? 'paragraph' : block.type; // 去除列表、引用、对齐方式、缩进、段间距、纹理

      const {
        list,
        blockquote,
        jc,
        ind,
        spacing,
        shd,
        ...rest
      } = block.data;
      controller.command(_everCangjie.Commands.setNodeByKey, block.key, {
        type,
        data: { ...rest
        }
      });
    }
  });
  return controller;
}
//# sourceMappingURL=clearParagraphStyle.js.map