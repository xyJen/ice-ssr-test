"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setCalloutStickerCode = setCalloutStickerCode;

var _everCangjie = require("@ali/4ever-cangjie");

var _everMo = require("@ali/4ever-mo");

var _actions = require("../actions");

function setCalloutStickerCode(controller, key, stickerCode) {
  const node = controller.value.document.getNode(key);

  if (!_everMo.ColorBlocks.isColorBlocks(node)) {
    return controller;
  }

  const metadata = { ...node.data.metadata
  };

  if (stickerCode) {
    metadata.sticker = stickerCode;
  } else {
    delete metadata.sticker;
  }

  controller.run('onAction', (0, _actions.broadcastDataChange)(metadata));
  return controller.command(_everCangjie.Commands.setNodeByKey, key, {
    data: { ...node.data,
      metadata
    }
  });
}
//# sourceMappingURL=setCalloutStickerCode.js.map