"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setCalloutSelected = setCalloutSelected;

var _everCangjie = require("@ali/4ever-cangjie");

/**
 * block 为高亮块中最后一个段落
 * 高亮块整体选中时，会选中高亮块最后一个段落后方，并视觉上隐藏光标
 * 同时将 controller.value.data.selectedCallout 置为 true
 */
function setCalloutSelected(controller, block) {
  const {
    selection
  } = controller.value;

  if (selection) {
    controller.command(_everCangjie.Commands.moveAnchorToEndOfNode, block).command(_everCangjie.Commands.moveFocusToEndOfNode, block);
  }

  controller.setData({ ...controller.value.data,
    // 存 view 数据不太合理，改存最后一个 callout 段落的 key
    // 展示判定时，只要命中 group 中任何一个 key，就算命中
    selectedCallout: block.key
  });
  return controller.command(_everCangjie.Commands.focus);
}
//# sourceMappingURL=setCalloutSelected.js.map