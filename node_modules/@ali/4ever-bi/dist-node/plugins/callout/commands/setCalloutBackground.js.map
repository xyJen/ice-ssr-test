{"version":3,"sources":["../../../../../src/plugins/callout/commands/setCalloutBackground.ts"],"names":["setCalloutBackground","controller","key","background","node","value","document","getNode","ColorBlocks","isColorBlocks","metadata","data","bgcolor","command","Commands","setNodeByKey"],"mappings":";;;;;;;AAAA;;AACA;;AAEO,SAASA,oBAAT,CACLC,UADK,EAELC,GAFK,EAGLC,UAHK,EAIL;AACA,QAAMC,IAAI,GAAGH,UAAU,CAACI,KAAX,CAAiBC,QAAjB,CAA0BC,OAA1B,CAAkCL,GAAlC,CAAb;;AACA,MAAI,CAACM,oBAAYC,aAAZ,CAA0BL,IAA1B,CAAL,EAAsC;AACpC,WAAOH,UAAP;AACD;;AACD,QAAMS,QAAQ,GAAG,EACf,GAAGN,IAAI,CAACO,IAAL,CAAUD;AADE,GAAjB;;AAGA,MAAIP,UAAJ,EAAgB;AACdO,IAAAA,QAAQ,CAACE,OAAT,GAAmBT,UAAnB;AACD,GAFD,MAEO;AACL,WAAOO,QAAQ,CAACE,OAAhB;AACD;;AAED,SAAOX,UAAU,CAACY,OAAX,CAAmBC,sBAASC,YAA5B,EAA0Cb,GAA1C,EAA+C;AACpDS,IAAAA,IAAI,EAAE,EACJ,GAAGP,IAAI,CAACO,IADJ;AAEJD,MAAAA;AAFI;AAD8C,GAA/C,CAAP;AAMD","sourcesContent":["import { Controller, Commands } from '@ali/4ever-cangjie';\nimport { ColorBlocks } from '@ali/4ever-mo';\n\nexport function setCalloutBackground(\n  controller: Controller,\n  key: string,\n  background?: string,\n) {\n  const node = controller.value.document.getNode(key);\n  if (!ColorBlocks.isColorBlocks(node)) {\n    return controller;\n  }\n  const metadata = {\n    ...node.data.metadata,\n  };\n  if (background) {\n    metadata.bgcolor = background;\n  } else {\n    delete metadata.bgcolor;\n  }\n\n  return controller.command(Commands.setNodeByKey, key, {\n    data: {\n      ...node.data,\n      metadata,\n    },\n  });\n}\n"],"file":"setCalloutBackground.js"}