"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _everCangjie = require("@ali/4ever-cangjie");

var _actions = require("../actions");

var _commands = require("../commands");

function createOnAction(config) {
  return function onAction(action, controller, next) {
    const {
      type,
      payload
    } = action;

    if (type === _actions.INSERT_CALLOUT) {
      const {
        text,
        type
      } = payload;
      controller.command((0, _commands.createInsertCallout)(config), text, type);
    } else if (type === _actions.TRANSFORM_CALLOUT) {
      controller.command(_commands.transform);
    } else if (type === _actions.SET_CALLOUT_STICKER_CODE) {
      const {
        node,
        stickerCode
      } = payload;
      controller.command(_commands.setCalloutStickerCode, node.key, stickerCode);
    } else if (type === _actions.SET_META_DATA) {
      const {
        node,
        data,
        needBlur
      } = payload;
      controller.command(_commands.setMetaData, node.key, data);

      if (needBlur) {
        controller.command(_everCangjie.Commands.blur).flush();
      }
    } else if (type === _actions.SET_CALLOUT_BACKGROUND) {
      const {
        node,
        background
      } = payload;
      controller.command(_commands.setCalloutBackground, node.key, background);
    } else if (type === _actions.SET_CALLOUT_SELECTED) {
      const {
        node
      } = payload;
      controller.command(_commands.setCalloutSelected, node);
    } else if (type === _actions.CLEAR_CALLOUT_SELECTED) {
      controller.command(_commands.clearCalloutSelected);
    } else if (type === _actions.DELETE_CALLOUT) {
      const {
        node
      } = payload;
      controller.command(_commands.deleteCallout, node.key);
    } else if (type === _actions.CONVERT_KEYS_TO_CONTAINER) {
      const {
        keys
      } = payload;
      controller.command(_commands.convertKeysToContainer, keys);
    }

    return next();
  };
}

var _default = createOnAction;
exports.default = _default;
//# sourceMappingURL=createOnAction.js.map