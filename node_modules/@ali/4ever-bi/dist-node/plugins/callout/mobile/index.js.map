{"version":3,"sources":["../../../../../src/plugins/callout/mobile/index.ts"],"names":["DEFAULT_STICKERS","Sticker","StickerPlugin","createCalloutPlugin","config","callout","locale","stickerConfig","lang","customSticker","sticker","params","renderNode","onCangjieCopy","onCangjieCopyOrCut","onCangjieCut","onQuery","onAction","getNodeStyle","CalloutPlugin","commands","onKeyDown","queries","placeholder","text","when","controller","node","query","actions"],"mappings":";;;;;;;;;;;AAAA;;AAMA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,MAAM;AAAEA,EAAAA,gBAAF;AAAoBC,EAAAA;AAApB,IAAgCC,yBAAtC;;AAEA,SAASC,mBAAT,CAA6BC,MAA7B,EAA+D;AAC7D,QAAM;AAAEC,IAAAA,OAAO,GAAG;AAAZ,MAAmBD,MAAzB;AACA,QAAM;AAAEE,IAAAA;AAAF,MAAaD,OAAnB;AACA,QAAME,aAAa,GAAG;AACpB;AACAC,IAAAA,IAAI,EAAE,OAFc;AAGpB;AACAC,IAAAA,aAAa,EAAE,CAACT,gBAAD,CAJK;AAKpB,OAAGI,MAAM,CAACM;AALU,GAAtB;AAOA,QAAMA,OAAO,GAAG,IAAIT,OAAJ,CAAYM,aAAZ,CAAhB;AACA,QAAMI,MAAM,GAAG;AACbJ,IAAAA,aADa;AAEbG,IAAAA,OAFa;AAGbJ,IAAAA,MAAM,EAAED,OAAO,CAACC;AAHH,GAAf;AAMA,SAAO,EACL,GAAG,sCAAU,EAAV,CADE;AAELM,IAAAA,UAAU,EAAE,+BAAiBD,MAAjB,CAFP;AAGL;AACAE,IAAAA,aAAa,EAAEC,2BAJV;AAKLC,IAAAA,YAAY,EAAED,2BALT;AAMLE,IAAAA,OAAO,EAAE,6BANJ;AAOLC,IAAAA,QAAQ,EAAE,6BAAeZ,OAAf,CAPL;AAQLa,IAAAA,YAAY,EAAEC,0BAAcD,YARvB;AASL;AACAE,IAAAA,QAVK;AAWLC,IAAAA,SAAS,EAATA,kBAXK;AAYLC,IAAAA,OAAO,EAAPA,gBAZK;AAaLC,IAAAA,WAAW,EAAE;AACXC,MAAAA,IAAI,EAAElB,MAAM,EAAEiB,WADH;AAEXE,MAAAA,IAAI,EAAE,CAACC,UAAD,EAAaC,IAAb,KAAsB;AAC1B,eACE,kCAAiBA,IAAjB,KACAD,UAAU,CAACE,KAAX,CAAiB,sBAAjB,EAAyCD,IAAzC,MAAmDA,IADnD,IAEAD,UAAU,CAACE,KAAX,CAAiB,oBAAjB,EAAuCD,IAAvC,MAAiDA,IAHnD;AAKD;AARU;AAbR,GAAP;AAwBD;;AAEDxB,mBAAmB,CAAC0B,OAApB,GAA8BA,OAA9B;eAEe1B,mB","sourcesContent":["import {\n  StickerPlugin,\n  isEmptyParagraph,\n  CalloutPlugin,\n} from '@ali/4ever-bamboo';\nimport { BiPlugin, BiPluginConfig } from '../../../types';\nimport createRenderNode from './createRenderNode';\nimport * as commands from '../commands';\nimport createOnAction from '../handlers/createOnAction';\nimport createOnQuery from '../handlers/createOnQuery';\nimport onKeyDown from '../handlers/onKeyDown';\nimport onCangjieCopyOrCut from '../handlers/onCangjieCopyOrCut';\nimport queries from '../queries';\nimport * as actions from '../actions';\nimport { moFactory } from '@ali/4ever-plugin-color-blocks';\n\nconst { DEFAULT_STICKERS, Sticker } = StickerPlugin;\n\nfunction createCalloutPlugin(config: BiPluginConfig): BiPlugin {\n  const { callout = {} } = config;\n  const { locale } = callout;\n  const stickerConfig = {\n    // @ts-ignore\n    lang: 'zh_CN',\n    // @ts-ignore\n    customSticker: [DEFAULT_STICKERS],\n    ...config.sticker,\n  };\n  const sticker = new Sticker(stickerConfig);\n  const params = {\n    stickerConfig,\n    sticker,\n    locale: callout.locale,\n  };\n\n  return {\n    ...moFactory({}),\n    renderNode: createRenderNode(params),\n    // Copy Cut 拦截作用于高亮块全选时\n    onCangjieCopy: onCangjieCopyOrCut,\n    onCangjieCut: onCangjieCopyOrCut,\n    onQuery: createOnQuery(),\n    onAction: createOnAction(callout),\n    getNodeStyle: CalloutPlugin.getNodeStyle,\n    // @ts-ignore 这里是 createCommands\n    commands,\n    onKeyDown,\n    queries,\n    placeholder: {\n      text: locale?.placeholder,\n      when: (controller, node) => {\n        return (\n          isEmptyParagraph(node) &&\n          controller.query('getCalloutStartBlock', node) === node &&\n          controller.query('getCalloutEndBlock', node) === node\n        );\n      },\n    },\n  };\n}\n\ncreateCalloutPlugin.actions = actions;\n\nexport default createCalloutPlugin;\n"],"file":"index.js"}