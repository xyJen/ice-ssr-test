{"version":3,"sources":["../../../../../src/plugins/callout/components/Menu.tsx"],"names":["CALLOUT_MENU_STYLE","whiteSpace","WithCalloutMenu","Component","CalloutMenu","props","menuItem","controller","action","title","rest","value","handleClick","run","isDisabled","React","useMemo","query","menu","MenuItem","inlineMenu","InlineMenuItem"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AAEA;;uBAF4B,a;AAI5B,MAAMA,kBAAuC,GAAG;AAAEC,EAAAA,UAAU,EAAE;AAAd,CAAhD;;AAEA,SAASC,eAAT,CAAyBC,SAAzB,EAA8C;AAC5C,SAAO,SAASC,WAAT,CAAqBC,KAArB,EAAgD;AACrD,UAAM;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAA2BF,KAAjC;AACA,UAAM;AAAEG,MAAAA,MAAF;AAAUC,MAAAA,KAAV;AAAiB,SAAGC;AAApB,QAA6BJ,QAAnC;AACA,UAAM;AAAEK,MAAAA;AAAF,QAAYJ,UAAlB;;AAEA,UAAMK,WAAW,GAAG,MAAM;AACxB,UAAIJ,MAAM,KAAK,QAAf,EAAyB;AACvB,eAAOD,UAAU,CAACM,GAAX,CAAe,UAAf,EAA2B,gCAA3B,CAAP;AACD;;AACDN,MAAAA,UAAU,CAACM,GAAX,CAAe,UAAf,EAA2B,6BAA3B;AACD,KALD;;AAOA,UAAMC,UAAU,GAAGC,KAAK,CAACC,OAAN,CACjB,MACET,UAAU,CAACU,KAAX,CAAiB,oBAAjB,KACAV,UAAU,CAACU,KAAX,CAAiB,uBAAjB,CADA,IAEAV,UAAU,CAACU,KAAX,CAAiB,6BAAjB,CAJe,EAKjB,CAACV,UAAD,EAAaI,KAAb,CALiB,CAAnB;AAQA,wBACE,eAAC,SAAD;AACE,MAAA,QAAQ,EAAEG,UADZ;AAEE,MAAA,KAAK,EAAEd;AAFT,OAGMU,IAHN;AAIE;AACA,MAAA,OAAO,EAAEE;AALX,QAOGH,KAAK,IAAI,EAPZ,CADF;AAWD,GA/BD;AAgCD,C,CAED;;;AACO,MAAMS,IAAI,GAAGhB,eAAe,CAACiB,kBAAD,CAA5B,C,CAEP;;;AACO,MAAMC,UAAU,GAAGlB,eAAe,CAACmB,wBAAD,CAAlC","sourcesContent":["import * as React from 'react';\nimport { MenuItem, InlineMenuItem } from '@ali/we-design';\nimport { MenuItemInnerProps } from '@ali/4ever-component';\nimport { insertCallout, transformCallout } from '../actions';\n\nconst CALLOUT_MENU_STYLE: React.CSSProperties = { whiteSpace: 'nowrap' };\n\nfunction WithCalloutMenu(Component: React.FC) {\n  return function CalloutMenu(props: MenuItemInnerProps) {\n    const { menuItem, controller } = props;\n    const { action, title, ...rest } = menuItem;\n    const { value } = controller;\n\n    const handleClick = () => {\n      if (action === 'format') {\n        return controller.run('onAction', transformCallout());\n      }\n      controller.run('onAction', insertCallout());\n    };\n\n    const isDisabled = React.useMemo(\n      () =>\n        controller.query('isSelectionInImage') ||\n        controller.query('isSelectionInLinkCard') ||\n        controller.query('isSelectionInSubjectHeading'),\n      [controller, value],\n    );\n\n    return (\n      <Component\n        disabled={isDisabled}\n        style={CALLOUT_MENU_STYLE}\n        {...rest}\n        // @ts-ignore\n        onClick={handleClick}\n      >\n        {title || ''}\n      </Component>\n    );\n  };\n}\n\n// @ts-ignore\nexport const menu = WithCalloutMenu(MenuItem);\n\n// @ts-ignore\nexport const inlineMenu = WithCalloutMenu(InlineMenuItem);\n"],"file":"Menu.js"}