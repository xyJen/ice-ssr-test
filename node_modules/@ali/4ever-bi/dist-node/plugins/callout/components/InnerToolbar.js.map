{"version":3,"sources":["../../../../../src/plugins/callout/components/InnerToolbar.tsx"],"names":["colorToWhite","color","replace","Toolbar","props","showInnerToolbar","bgcolor","overlayVisible","setOverlayVisible","React","useState","visible","setVisible","scrollContent","window","document","body","useEffect","node","backgroundColor","border","vi"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AAMA;;uBAb4B,a;;AA0B5B,MAAMA,YAAY,GAAIC,KAAD,IAAoB;AACvC,SAAO,CAACA,KAAK,IAAI,OAAV,EAAmBC,OAAnB,CAA2B,aAA3B,EAA0C,OAA1C,CAAP;AACD,CAFD;;wBAsCY,eAAC,qBAAD;AAAY,EAAA,IAAI,eAAE,eAAC,qBAAD;AAAlB,E;;AAlCZ,MAAMC,OAAyB,GAAIC,KAAD,IAAW;AAC3C,QAAM;AAAEC,IAAAA,gBAAF;AAAoBC,IAAAA;AAApB,MAAgCF,KAAtC;;AACA,QAAM,CAACG,cAAD,EAAiBC,iBAAjB,IAAsCC,eAAMC,QAAN,CAAe,KAAf,CAA5C;;AACA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBH,eAAMC,QAAN,CAAe,CAACL,gBAAhB,CAA9B;;AACA,QAAMQ,aAAa,GAAG,2CAA0BC,MAAM,CAACC,QAAP,CAAgBC,IAAhE,CAJ2C,CAK3C;;AACAP,iBAAMQ,SAAN,CAAgB,MAAM;AACpB,QAAI,CAACZ,gBAAL,EAAuB;AACrBG,MAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACD;;AACDI,IAAAA,UAAU,CAACP,gBAAD,CAAV;AACD,GALD,EAKG,CAACA,gBAAD,CALH;;AAMA,sBACE,eAAC,qBAAD;AAAe,IAAA,gBAAgB,EAAEA,gBAAjC;AAAmD,IAAA,QAAQ,EAAEM;AAA7D,kBACE,eAAC,uCAAD;AAAiC,IAAA,OAAO,EAAEX,YAAY,CAACM,OAAD;AAAtD,kBACE,eAAC,kCAAD,qBACE,eAAC,kBAAD;AACE,IAAA,OAAO,EAAC,OADV;AAEE,IAAA,OAAO,eACL,eAAC,yBAAD;AAAmB,MAAA,OAAO,EAAEC;AAA5B,oBACE,eAAC,sBAAD,6BAAgBH,KAAhB;AAAwB,MAAA,OAAO,EAAE,MAAMA,KAAK,CAACc;AAA7C,OADF,CAHJ;AAOE,IAAA,YAAY,EAAE;AACZC,MAAAA,eAAe,EAAE,aADL;AAEZC,MAAAA,MAAM,EAAE;AAFI,KAPhB;AAWE,IAAA,eAAe,EAAGC,EAAD,IAAQ;AACvBb,MAAAA,iBAAiB,CAACa,EAAD,CAAjB;AACD,KAbH;AAcE,IAAA,SAAS,EAAC,UAdZ;AAeE,IAAA,OAAO,EAAEd,cAfX;AAgBE,IAAA,YAAY,EAAE,MAAMM;AAhBtB,UADF,CADF,CADF,CADF;AA4BD,CAxCD;;eA0CeV,O","sourcesContent":["import React from 'react';\nimport { Dropdown } from '@ali/we-design';\nimport { DropdownAnimation } from '@ali/we-util';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { ColorBlocks } from '@ali/4ever-mo';\nimport { IconButton } from '@ali/we-toolbar';\nimport { PaletteNormal } from '@ali/we-icon';\nimport { useScrollableContent } from '@ali/4ever-bamboo';\nimport {\n  CalloutInnerToolbarOuterWrapper,\n  CalloutInnerToolbarWrapper,\n  PaddingHolder,\n} from './styled';\nimport { Locale } from '../types';\nimport { ColorPanel } from './colorPanel';\n\ninterface IProps {\n  showInnerToolbar: boolean;\n  locale?: Locale;\n  controller: Controller;\n  node: ColorBlocks;\n  bgcolor: string;\n  color?: string;\n  border?: string;\n  showSticker?: boolean;\n}\n\nconst colorToWhite = (color?: string) => {\n  return (color || 'white').replace('transparent', 'white');\n};\n\nconst Toolbar: React.FC<IProps> = (props) => {\n  const { showInnerToolbar, bgcolor } = props;\n  const [overlayVisible, setOverlayVisible] = React.useState(false);\n  const [visible, setVisible] = React.useState(!showInnerToolbar);\n  const scrollContent = useScrollableContent() || window.document.body;\n  // 加 EmptyContainer 是因为 IconButton 未监听 onMouseEnter 等， trigger=\"hover\" 无法生效\n  React.useEffect(() => {\n    if (!showInnerToolbar) {\n      setOverlayVisible(false);\n    }\n    setVisible(showInnerToolbar);\n  }, [showInnerToolbar]);\n  return (\n    <PaddingHolder showInnerToolbar={showInnerToolbar} visibile={visible}>\n      <CalloutInnerToolbarOuterWrapper bgcolor={colorToWhite(bgcolor)}>\n        <CalloutInnerToolbarWrapper>\n          <Dropdown\n            trigger=\"click\"\n            overlay={\n              <DropdownAnimation visible={overlayVisible}>\n                <ColorPanel {...props } getNode={() => props.node} />\n              </DropdownAnimation>\n            }\n            overlayStyle={{\n              backgroundColor: 'transparent',\n              border: 'none',\n            }}\n            onVisibleChange={(vi) => {\n              setOverlayVisible(vi);\n            }}\n            placement=\"topRight\"\n            visible={overlayVisible}\n            getContainer={() => scrollContent}\n          >\n            <IconButton icon={<PaletteNormal />} />\n          </Dropdown>\n        </CalloutInnerToolbarWrapper>\n      </CalloutInnerToolbarOuterWrapper>\n    </PaddingHolder>\n  );\n};\n\nexport default Toolbar;\n"],"file":"InnerToolbar.js"}