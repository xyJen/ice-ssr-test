{"version":3,"sources":["../../../../../src/plugins/subject/commands/insert.ts"],"names":["Heading1","Heading","insertSubject","controller","properties","from","direction","index","query","findPrevSubjectIndex","findNextSubjectIndex","subject","create","data","subjectPr","command","Commands","insertNodeByPath","moveToEndOfNode"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA,MAAM;AAAEA,EAAAA;AAAF,IAAeC,eAArB;;AAEO,SAASC,aAAT,CAAuBC,UAAvB,EAA+CC,UAA/C,EAA8EC,IAA9E,EAA4FC,SAA5F,EAA4H;AACjI,QAAMC,KAAK,GAAGD,SAAS,KAAK,QAAd,GACVH,UAAU,CAACK,KAAX,CAAiBC,6BAAjB,EAAuCJ,IAAvC,CADU,GAEVF,UAAU,CAACK,KAAX,CAAiBE,6BAAjB,EAAuCL,IAAvC,CAFJ;AAIA,QAAMM,OAAO,GAAGX,QAAQ,CAACY,MAAT,CAAgB;AAC9BC,IAAAA,IAAI,EAAE;AACJC,MAAAA,SAAS,EAAEV;AADP;AADwB,GAAhB,CAAhB,CALiI,CAWjI;;AACA,SAAOD,UAAU,CACdY,OADI,CACIC,sBAASC,gBADb,EAC+B,EAD/B,EACmCV,KADnC,EAC0CI,OAD1C,EAEJI,OAFI,CAEIC,sBAASE,eAFb,EAE8BP,OAF9B,CAAP;AAGD","sourcesContent":["import { Block, Commands, Controller } from '@ali/4ever-cangjie';\nimport { Heading, SubjectProperties } from '@ali/4ever-mo';\nimport { findNextSubjectIndex, findPrevSubjectIndex } from '../queries';\n\nconst { Heading1 } = Heading;\n\nexport function insertSubject(controller: Controller, properties: SubjectProperties, from?: Block, direction?: 'before' | 'after') {\n  const index = direction === 'before'\n    ? controller.query(findPrevSubjectIndex, from)\n    : controller.query(findNextSubjectIndex, from);\n\n  const subject = Heading1.create({\n    data: {\n      subjectPr: properties,\n    },\n  });\n\n  // 插入议题节点\n  return controller\n    .command(Commands.insertNodeByPath, [], index, subject)\n    .command(Commands.moveToEndOfNode, subject);\n}\n"],"file":"insert.js"}