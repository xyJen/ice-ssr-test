"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.selectSubject = selectSubject;
exports.unselectSubject = unselectSubject;
exports.selectSubjectRange = selectSubjectRange;

var _everCangjie = require("@ali/4ever-cangjie");

var _constants = require("../constants");

var _queries = require("../queries");

function selectSubject(controller, key) {
  const {
    data
  } = controller.value;
  return controller.setData({ ...data,
    [_constants.SELECTED_SUBJECT_KEY]: key
  });
}

function unselectSubject(controller) {
  const {
    data
  } = controller.value;

  if (_constants.SELECTED_SUBJECT_KEY in data) {
    const newData = { ...data
    };
    delete newData[_constants.SELECTED_SUBJECT_KEY];
    return controller.setData(newData);
  }

  return controller;
}

function selectSubjectRange(controller, block) {
  const endBlock = controller.query(_queries.getSubjectEndBlock, block);

  if (endBlock) {
    return controller.command(_everCangjie.Commands.moveAnchorToStartOfNode, block).command(_everCangjie.Commands.moveFocusToEndOfNode, endBlock);
  }

  return controller.command(_everCangjie.Commands.moveAnchorToStartOfNode, block).command(_everCangjie.Commands.moveFocusToEndOfNode, block);
}
//# sourceMappingURL=select.js.map