{"version":3,"sources":["../../../../../src/plugins/subject/commands/finished.ts"],"names":["toggleFinished","controller","node","finished","subjectPr","data","command","Commands","setNodeByKey","key","toggleFinishedByKey","value","document","assertElement"],"mappings":";;;;;;;;AAAA;;AAGO,SAASA,cAAT,CAAwBC,UAAxB,EAAgDC,IAAhD,EAA2EC,QAA3E,EAA8F;AACnG,QAAMC,SAA4B,GAAG,EACnC,GAAGF,IAAI,CAACG,IAAL,CAAUD,SADsB;AAEnCD,IAAAA;AAFmC,GAArC;;AAKA,MAAI,CAACA,QAAL,EAAe;AACb,WAAOC,SAAS,CAACD,QAAjB;AACD;;AAEDF,EAAAA,UAAU,CAACK,OAAX,CAAmBC,sBAASC,YAA5B,EAA0CN,IAAI,CAACO,GAA/C,EAAoD;AAClDJ,IAAAA,IAAI,EAAE,EACJ,GAAGH,IAAI,CAACG,IADJ;AAEJD,MAAAA;AAFI;AAD4C,GAApD;AAOA,SAAOH,UAAP;AACD;;AAEM,SAASS,mBAAT,CAA6BT,UAA7B,EAAqDQ,GAArD,EAAkEN,QAAlE,EAAqF;AAC1F,QAAMD,IAAI,GAAGD,UAAU,CAACU,KAAX,CAAiBC,QAAjB,CAA0BC,aAA1B,CAAwCJ,GAAxC,CAAb;AACA,SAAOT,cAAc,CAACC,UAAD,EAAaC,IAAb,EAA4BC,QAA5B,CAArB;AACD","sourcesContent":["import { Block, Commands, Controller } from '@ali/4ever-cangjie';\nimport { Heading1Data, SubjectProperties } from '@ali/4ever-mo';\n\nexport function toggleFinished(controller: Controller, node: Block<Heading1Data>, finished: boolean) {\n  const subjectPr: SubjectProperties = {\n    ...node.data.subjectPr,\n    finished,\n  };\n\n  if (!finished) {\n    delete subjectPr.finished;\n  }\n\n  controller.command(Commands.setNodeByKey, node.key, {\n    data: {\n      ...node.data,\n      subjectPr,\n    },\n  });\n\n  return controller;\n}\n\nexport function toggleFinishedByKey(controller: Controller, key: string, finished: boolean) {\n  const node = controller.value.document.assertElement(key);\n  return toggleFinished(controller, node as Block, finished);\n}\n"],"file":"finished.js"}