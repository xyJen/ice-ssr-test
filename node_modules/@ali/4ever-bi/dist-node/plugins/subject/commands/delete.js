"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.deleteSubject = deleteSubject;

var _everCangjie = require("@ali/4ever-cangjie");

var _queries = require("../queries");

/**
 * 删除 Subject 组
 * @param controller
 * @param subject
 * @returns
 */
function deleteSubject(controller, subject) {
  const {
    selection,
    document
  } = controller.value;
  const endBlock = controller.query(_queries.getSubjectEndBlock, subject);

  if (!endBlock) {
    return controller;
  }

  const prevBlock = document.getPreviousBlock(subject.key); // 若存在上一个兄弟节点，则选中上一个节点的末尾

  let sel = prevBlock ? selection.moveAnchorToEndOfNode(prevBlock, controller) : selection.moveAnchorToStartOfNode(subject, controller); // 选中议题 end 节点的末尾

  sel = sel.moveFocusToEndOfNode(endBlock, controller);
  return controller.command(_everCangjie.Commands.select, sel).command(_everCangjie.Commands.del);
}
//# sourceMappingURL=delete.js.map