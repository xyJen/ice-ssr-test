"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getLeftToolbarOffset = getLeftToolbarOffset;

var _everBamboo = require("@ali/4ever-bamboo");

var _everMo = require("@ali/4ever-mo");

const {
  getSubjectStartBlock
} = _everBamboo.SubjectPlugin.queries;
const DRAGGABLE_WIDTH = -20;
const blackList = [(node, controller) => {
  // 在高亮块中
  const parent = controller.value.document.getParent(node.key);
  return _everMo.ColorBlocks.isColorBlocks(parent);
}];

function getLeftToolbarOffset(controller, data) {
  const {
    node
  } = data || {};
  const subject = controller.query(getSubjectStartBlock, node); // 如果节点在议题里，那么段落拖动按钮需要加一个 offset
  // 黑名单包含的节点会单独定义 offset

  if (!!subject && !blackList.some(fn => fn(node, controller))) {
    return {
      x: DRAGGABLE_WIDTH,
      y: 0
    };
  }

  return undefined;
}
//# sourceMappingURL=getLeftToolbarOffset.js.map