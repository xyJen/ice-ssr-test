"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = onAction;

var _everCangjie = require("@ali/4ever-cangjie");

var _actions = require("../actions");

function onAction(action, controller, next) {
  const {
    type
  } = action;

  if (type === _actions.SET_NODE_UUID) {
    const {
      node,
      uuid
    } = action.payload;

    if (!_everCangjie.Element.isElement(node)) {
      return;
    }

    return controller.withoutSaving(() => {
      controller.command(_everCangjie.Commands.setNodeByKey, node.key, {
        type: node.type,
        data: { ...node.data,
          uuid: node.data.refblockUUID ? node.data.refblockUUID : uuid
        }
      });
    });
  }

  return next();
}
//# sourceMappingURL=onAction.js.map