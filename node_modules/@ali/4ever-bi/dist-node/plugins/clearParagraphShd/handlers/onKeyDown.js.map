{"version":3,"sources":["../../../../../src/plugins/clearParagraphShd/handlers/onKeyDown.ts"],"names":["isEnterHotKey","onKeyDown","event","controller","next","startBlock","selection","value","isCollapsed","data","key","shd","fill","newData","list","level","command","Commands","setNodeByKey"],"mappings":";;;;;;;AAAA;;AACA;;AAEA,MAAMA,aAAa,GAAG,2BAAY,OAAZ,CAAtB,C,CAEA;;AACA,MAAMC,SAAS,GAAG,CAACC,KAAD,EAA6BC,UAA7B,EAAqDC,IAArD,KAAwE;AACxFA,EAAAA,IAAI;AAEJ,QAAM;AAAEC,IAAAA,UAAF;AAAcC,IAAAA;AAAd,MAA4BH,UAAU,CAACI,KAA7C;;AACA,MAAIP,aAAa,CAACE,KAAD,CAAb,IAAwBG,UAAxB,IAAsCC,SAAS,CAACE,WAApD,EAAiE;AAC/D,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAgBL,UAAtB;;AAEA,QAAI,CAACI,IAAI,CAACE,GAAN,IAAa,CAACF,IAAI,CAACE,GAAL,CAASC,IAA3B,EAAiC;AAC/B,aAAOT,UAAP;AACD;;AAED,UAAMU,OAAO,GAAG,EAAE,GAAGJ;AAAL,KAAhB;AACA,UAAM;AAAEK,MAAAA;AAAF,QAAWD,OAAjB;;AAEA,QAAIC,IAAI,IAAIA,IAAI,CAACC,KAAL,KAAe,CAA3B,EAA8B;AAC5B;AACA,aAAOZ,UAAP;AACD;;AACD,WAAOU,OAAO,CAACF,GAAf;AAEA,WAAOR,UAAU,CAACa,OAAX,CAAmBC,sBAASC,YAA5B,EAA0CR,GAA1C,EAA+C;AAAED,MAAAA,IAAI,EAAEI;AAAR,KAA/C,CAAP;AACD;;AACD,SAAOV,UAAP;AACD,CAvBD;;eAyBeF,S","sourcesContent":["import { Controller, Commands } from '@ali/4ever-cangjie';\nimport { isKeyHotkey } from 'is-hotkey';\n\nconst isEnterHotKey = isKeyHotkey('enter');\n\n// 回车清除段落底纹\nconst onKeyDown = (event: React.KeyboardEvent, controller: Controller, next: Function) => {\n  next();\n\n  const { startBlock, selection } = controller.value;\n  if (isEnterHotKey(event) && startBlock && selection.isCollapsed) {\n    const { data, key } = startBlock;\n\n    if (!data.shd || !data.shd.fill) {\n      return controller;\n    }\n\n    const newData = { ...data };\n    const { list } = newData;\n\n    if (list && list.level !== 0) {\n      // 非首级列表继承样式,不清除\n      return controller;\n    }\n    delete newData.shd;\n\n    return controller.command(Commands.setNodeByKey, key, { data: newData });\n  }\n  return controller;\n};\n\nexport default onKeyDown;\n\n"],"file":"onKeyDown.js"}