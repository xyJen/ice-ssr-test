"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _everCangjie = require("@ali/4ever-cangjie");

var _isHotkey = require("is-hotkey");

const isEnterHotKey = (0, _isHotkey.isKeyHotkey)('enter'); // 回车清除段落底纹

const onKeyDown = (event, controller, next) => {
  next();
  const {
    startBlock,
    selection
  } = controller.value;

  if (isEnterHotKey(event) && startBlock && selection.isCollapsed) {
    const {
      data,
      key
    } = startBlock;

    if (!data.shd || !data.shd.fill) {
      return controller;
    }

    const newData = { ...data
    };
    const {
      list
    } = newData;

    if (list && list.level !== 0) {
      // 非首级列表继承样式,不清除
      return controller;
    }

    delete newData.shd;
    return controller.command(_everCangjie.Commands.setNodeByKey, key, {
      data: newData
    });
  }

  return controller;
};

var _default = onKeyDown;
exports.default = _default;
//# sourceMappingURL=onKeyDown.js.map