"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _everCangjie = require("@ali/4ever-cangjie");

const selectRangeFromNode = (controller, node) => {
  const {
    selection: range,
    document
  } = controller.value;

  const selection = _everCangjie.Selection.create(range.moveToRangeOfNode(node, controller).convertToTextPoints(document));

  return controller.command(_everCangjie.Commands.select, selection);
};

const selectRangeFromNodes = (controller, nodes) => {
  const startBlock = nodes[0];
  const endBlock = nodes[nodes.length - 1];
  const anchor = controller.query(_everCangjie.Queries.pointAtStartOfNode, startBlock);
  const focus = controller.query(_everCangjie.Queries.pointAtEndOfNode, endBlock);

  const selection = _everCangjie.Selection.create({
    anchor,
    focus
  });

  return controller.command(_everCangjie.Commands.select, selection);
};

const selectRange = (controller, payload) => {
  const {
    nodeOrNodes
  } = payload;

  if (Array.isArray(nodeOrNodes)) {
    return selectRangeFromNodes(controller, nodeOrNodes);
  } else {
    return selectRangeFromNode(controller, nodeOrNodes);
  }
};

var _default = selectRange;
exports.default = _default;
//# sourceMappingURL=selectRange.js.map