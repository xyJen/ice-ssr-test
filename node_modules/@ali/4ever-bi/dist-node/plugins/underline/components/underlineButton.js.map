{"version":3,"sources":["../../../../../src/plugins/underline/components/underlineButton.tsx"],"names":["MOD","environment","IS_MAC","shortcutText","isDisabled","controller","isCollapsedAtEdge","value","selection","disabled","query","Boolean","UnderlineButton","props","locale","rest","isActive","handleClick","React","useCallback","run","PluginRoles","underline","buttonTitle","DELIMITER","character","repeat","size","text","space"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;uBAL4B,a;AAO5B,MAAMA,GAAG,GAAGC,yBAAYC,MAAZ,GAAqB,GAArB,GAA2B,MAAvC;AACA,MAAMC,YAAY,GAAI,GAAEH,GAAI,IAA5B;;AAOA,MAAMI,UAAU,GAAIC,UAAD,IAA4B;AAC7C,QAAM;AAAEC,IAAAA;AAAF,MAAwBD,UAAU,CAACE,KAAX,CAAiBC,SAA/C;AACA,QAAMC,QAAQ,GACZH,iBAAiB,IACjBD,UAAU,CAACK,KAAX,CAAiB,oBAAjB,CADA,IAEAL,UAAU,CAACK,KAAX,CAAiB,iBAAjB,CAFA,IAGAL,UAAU,CAACK,KAAX,CAAiB,yBAAjB,CAHA,IAIAL,UAAU,CAACK,KAAX,CAAiB,uBAAjB,CALF;AAMA,SAAOC,OAAO,CAACF,QAAD,CAAd;AACD,CATD;;AAWe,SAASG,eAAT,CAAyBC,KAAzB,EAAsD;AACnE,QAAM;AAAER,IAAAA,UAAF;AAAcS,IAAAA,MAAd;AAAsB,OAAGC;AAAzB,MAAkCF,KAAxC;AAEA,QAAMG,QAAQ,GAAGX,UAAU,CAACK,KAAX,CAAiB,aAAjB,CAAjB;AAEA,QAAMO,WAAW,GAAGC,KAAK,CAACC,WAAN,CAClB,MAAMd,UAAU,CAACe,GAAX,CAAe,UAAf,EAA2B,+BAA3B,CADY,EAElB,CAACf,UAAD,CAFkB,CAApB;AAKA,sBACE,eAAC,0BAAD,6BACMU,IADN;AAEE,IAAA,YAAY,EAAEZ,YAFhB;AAGE,IAAA,MAAM,EAAC,sBAHT;AAIE,IAAA,MAAM,EAAEa,QAJV;AAKE,IAAA,QAAQ,EAAEZ,UAAU,CAACC,UAAD,CALtB;AAME,IAAA,OAAO,EAAEY,WANX;AAOE,IAAA,IAAI,EAAEI,wBAAYC,SAPpB;AAQE,IAAA,OAAO,eACL,eAAC,iCAAD;AACE,MAAA,KAAK,EAAER,MAAM,CAACS,WADhB;AAEE,MAAA,QAAQ,EAAEpB,YAFZ;AAGE,MAAA,WAAW,EAAE,eAAeqB,qBAAUC,SAAV,CAAoBC,MAApB,CAA2BF,qBAAUG,IAArC,CAAf,IAA6Db,MAAM,EAAEc,IAAR,IAAgB,MAA7E,IAAuFJ,qBAAUC,SAAV,CAAoBC,MAApB,CAA2BF,qBAAUG,IAArC,CAAvF,GAAoI,GAApI,IAA2Ib,MAAM,EAAEe,KAAR,IAAiB,OAA5J;AAHf;AATJ,KADF;AAkBD","sourcesContent":["import * as React from 'react';\nimport { Controller, environment } from '@ali/4ever-cangjie';\nimport { UnderlineButton as Button } from '@ali/we-toolbar';\nimport { PluginRoles } from '@ali/4ever-bamboo';\nimport { IconButtonShortcut } from '@ali/4ever-component';\nimport { toggleUnderline } from '../actions';\nimport { DELIMITER } from '../constants';\n\nconst MOD = environment.IS_MAC ? 'âŒ˜' : 'Ctrl';\nconst shortcutText = `${MOD}+U`;\n\nexport interface UnderlineButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n}\n\nconst isDisabled = (controller: Controller) => {\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const disabled =\n    isCollapsedAtEdge ||\n    controller.query('isSelectionInImage') ||\n    controller.query('isSelectionInHr') ||\n    controller.query('isSelectionInListSymbol') ||\n    controller.query('isSelectionInLinkCard');\n  return Boolean(disabled);\n};\n\nexport default function UnderlineButton(props: UnderlineButtonProps) {\n  const { controller, locale, ...rest } = props;\n\n  const isActive = controller.query('isUnderline');\n\n  const handleClick = React.useCallback(\n    () => controller.run('onAction', toggleUnderline()),\n    [controller],\n  );\n\n  return (\n    <Button\n      {...rest}\n      shortcutText={shortcutText}\n      testid=\"bi-toolbar-underline\"\n      active={isActive}\n      disabled={isDisabled(controller)}\n      onClick={handleClick}\n      role={PluginRoles.underline}\n      tooltip={\n        <IconButtonShortcut\n          title={locale.buttonTitle}\n          shortcut={shortcutText}\n          description={'Markdown: ' + DELIMITER.character.repeat(DELIMITER.size) + (locale?.text || 'Text') + DELIMITER.character.repeat(DELIMITER.size) + ' ' + (locale?.space || 'Space')}\n        />\n      }\n    />\n  );\n}\n"],"file":"underlineButton.js"}