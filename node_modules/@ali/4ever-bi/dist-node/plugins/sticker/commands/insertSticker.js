"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = insertSticker;

var _everCangjie = require("@ali/4ever-cangjie");

var _constants = require("../constants");

var _utils = require("../utils");

function insertSticker(controller, payload) {
  const marks = (0, _utils.getMarksAtAnchor)(controller);
  const {
    code,
    node
  } = payload;
  controller.command(_everCangjie.Commands.insertInline, _everCangjie.Inline.create({
    type: _constants.STICKER_NODE_TYPE,
    data: {
      code
    },
    nodes: [_everCangjie.Text.create('').addMarks(0, 0, marks)]
  }));
  if (!node) return controller; // 通过面板连续添加表情，需要移除表情的选中状态

  return controller.command(_everCangjie.Commands.moveToStartOfNextText).command(_everCangjie.Commands.focus);
}
//# sourceMappingURL=insertSticker.js.map