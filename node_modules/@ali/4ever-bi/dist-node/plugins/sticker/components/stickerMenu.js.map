{"version":3,"sources":["../../../../../src/plugins/sticker/components/stickerMenu.tsx"],"names":["WithStickerMenu","Component","StickerMenu","props","menuItem","controller","value","title","rest","isCollapsedAtEdge","selection","isDisabled","query","handleClick","run","STICKER_PLACEHOLDER_DATA","visible","PluginRoles","sticker","menu","MenuItem","inlineMenu","InlineMenuItem"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAGA;;AACA;;uBAL4B,a;AAG5B;;AAIA,SAASA,eAAT,CAAyBC,SAAzB,EAAmD;AACjD,SAAO,SAASC,WAAT,CAAqBC,KAArB,EAAgD;AACrD,UAAM;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAA2BF,KAAjC;AACA,UAAM;AAAEG,MAAAA;AAAF,QAAYD,UAAlB;AACA,UAAM;AAAEE,MAAAA,KAAF;AAAS,SAAGC;AAAZ,QAAqBJ,QAA3B;AAEA,UAAM;AAAEK,MAAAA;AAAF,QAAwBJ,UAAU,CAACC,KAAX,CAAiBI,SAA/C;AACA,UAAMC,UAAU,GACdN,UAAU,CAACO,KAAX,CAAiB,kBAAjB,KACAH,iBADA,IAEAJ,UAAU,CAACO,KAAX,CAAiB,oBAAjB,CAFA,IAGAP,UAAU,CAACO,KAAX,CAAiB,mBAAjB,CAHA,IAIAP,UAAU,CAACO,KAAX,CAAiB,sBAAjB,CAJA,IAKAP,UAAU,CAACO,KAAX,CAAiB,uBAAjB,CANF;AAQA,UAAMC,WAAW,GAAG,wBAAY,MAAM;AACpCR,MAAAA,UAAU,CAACS,GAAX,CAAe,UAAf,EAA2B,4BAAcC,mCAAd,CAA3B;AACAV,MAAAA,UAAU,CAACS,GAAX,CACE,UADF,EAEE,qCAAuB;AACrBE,QAAAA,OAAO,EAAE;AADY,OAAvB,CAFF;AAMD,KARmB,EAQjB,CAACX,UAAD,CARiB,CAApB;AAUA,wBACE,eAAC,SAAD,6BAAeG,IAAf;AAAqB,MAAA,QAAQ,EAAEG,UAA/B;AAA2C,MAAA,OAAO,EAAEE,WAApD;AAAiE,MAAA,IAAI,EAAEI,wBAAYC;AAAnF,QACGX,KAAK,IAAI,EADZ,CADF;AAKD,GA7BD;AA8BD;;AAEM,MAAMY,IAAI,GAAGnB,eAAe,CAACoB,kBAAD,CAA5B;;AAEA,MAAMC,UAAU,GAAGrB,eAAe,CAACsB,wBAAD,CAAlC","sourcesContent":["import React, { useCallback } from 'react';\nimport { MenuItem, InlineMenuItem } from '@ali/we-design';\nimport { PluginRoles } from '@ali/4ever-bamboo';\nimport { MenuItemInnerProps } from '@ali/4ever-component';\n;\nimport { insertSticker, setStickerPanelVisible } from '../actions';\nimport { STICKER_PLACEHOLDER_DATA } from '../constants';\n\nfunction WithStickerMenu(Component: React.FC<any>) {\n  return function StickerMenu(props: MenuItemInnerProps) {\n    const { menuItem, controller } = props;\n    const { value } = controller;\n    const { title, ...rest } = menuItem;\n\n    const { isCollapsedAtEdge } = controller.value.selection;\n    const isDisabled =\n      controller.query('isDisableSticker') ||\n      isCollapsedAtEdge ||\n      controller.query('isSelectionInImage') ||\n      controller.query('isSelectionInLink') ||\n      controller.query('isSelectionInMention') ||\n      controller.query('isSelectionInLinkCard');\n\n    const handleClick = useCallback(() => {\n      controller.run('onAction', insertSticker(STICKER_PLACEHOLDER_DATA));\n      controller.run(\n        'onAction',\n        setStickerPanelVisible({\n          visible: true,\n        }),\n      );\n    }, [controller]);\n\n    return (\n      <Component {...rest} disabled={isDisabled} onClick={handleClick} role={PluginRoles.sticker}>\n        {title || ''}\n      </Component>\n    );\n  };\n}\n\nexport const menu = WithStickerMenu(MenuItem);\n\nexport const inlineMenu = WithStickerMenu(InlineMenuItem);\n"],"file":"stickerMenu.js"}