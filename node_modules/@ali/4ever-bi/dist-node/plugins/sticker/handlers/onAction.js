"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = onAction;

var _commands = require("../commands");

var _actions = require("../actions");

var _everCangjie = require("@ali/4ever-cangjie");

function onAction(action, controller, next) {
  const {
    type,
    payload
  } = action;

  if (type === _actions.STICKER_INSERT) {
    return controller.command(_commands.insertSticker, payload);
  }

  if (type === _actions.STICKER_SET) {
    return controller.command(_commands.setSticker, payload);
  }

  if (type === _actions.STICKER_PANEL_SET_VISIBLE) {
    return controller.command(_commands.setStickerPanelVisible, payload);
  }

  if (type === _actions.STICKER_MOVE_CARET) {
    return controller.command(_commands.moveCaret, payload);
  }

  if (type === _actions.STICKER_SET_RANGE) {
    return controller.command(_commands.setRange, payload);
  }

  if (type === _actions.INSERT_MARKDOWN_EMOJI) {
    const {
      key,
      start,
      end,
      emoji
    } = payload;
    const curNode = controller.value.document.getNode(key);
    controller.command(_everCangjie.Commands.moveAnchorToKey, key, start).command(_everCangjie.Commands.moveFocusToKey, key, end).command(_everCangjie.Commands.insertText, emoji, []);
    return curNode ? controller.command(_everCangjie.Commands.moveToEndOfNode, curNode) : controller;
  }

  return next();
}
//# sourceMappingURL=onAction.js.map