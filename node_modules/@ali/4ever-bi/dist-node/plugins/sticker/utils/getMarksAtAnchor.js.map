{"version":3,"sources":["../../../../../src/plugins/sticker/utils/getMarksAtAnchor.ts"],"names":["getMarksAtAnchor","controller","document","selection","value","anchor","anchorNode","getNode","key","marks","Text","isText","getMarks","Mark","create","type","SzMark","TYPE","data","query","szUnit","HighlightMark"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;AACA;AACA;AACA;AACe,SAASA,gBAAT,CAA0BC,UAA1B,EAAkD;AAC/D,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAA0BF,UAAU,CAACG,KAA3C;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAaF,SAAnB;AACA,QAAMG,UAAU,GAAGJ,QAAQ,CAACK,OAAT,CAAiBF,MAAM,CAACG,GAAxB,CAAnB;AACA,QAAMC,KAAK,GAAGC,kBAAKC,MAAL,CAAYL,UAAZ,IAA0BA,UAAU,CAACM,QAAX,EAA1B,GAAkD,EAAhE;AACA,SAAO,CACL,GAAGH,KADE,EAELI,kBAAKC,MAAL,CAAY;AACVC,IAAAA,IAAI,EAAEC,eAAOC,IADH;AAEVC,IAAAA,IAAI,EAAE;AACJd,MAAAA,KAAK,EAAEH,UAAU,CAACkB,KAAX,CAAiB,SAAjB,CADH;AAEJC,MAAAA,MAAM,EAAE;AAFJ;AAFI,GAAZ,CAFK,EASLP,kBAAKC,MAAL,CAAY;AACVC,IAAAA,IAAI,EAAEM,sBAAcJ,IADV;AAEVC,IAAAA,IAAI,EAAE;AACJd,MAAAA,KAAK,EAAEH,UAAU,CAACkB,KAAX,CAAiB,cAAjB;AADH;AAFI,GAAZ,CATK,CAAP;AAgBD","sourcesContent":["import { Controller, Mark, Text } from '@ali/4ever-cangjie';\nimport { SzMark, HighlightMark } from '@ali/4ever-mo';\n\n/**\n * @description 继承粘贴时光标所在位置 startBlock的style及type\n * @param {controller}\n * */\nexport default function getMarksAtAnchor(controller: Controller) {\n  const { document, selection } = controller.value;\n  const { anchor } = selection;\n  const anchorNode = document.getNode(anchor.key);\n  const marks = Text.isText(anchorNode) ? anchorNode.getMarks() : [];\n  return [\n    ...marks,\n    Mark.create({\n      type: SzMark.TYPE,\n      data: {\n        value: controller.query('getSize'),\n        szUnit: 'pt',\n      },\n    }),\n    Mark.create({\n      type: HighlightMark.TYPE,\n      data: {\n        value: controller.query('getHighlight'),\n      },\n    }),\n  ];\n}\n"],"file":"getMarksAtAnchor.js"}