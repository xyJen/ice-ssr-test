{"version":3,"sources":["../../../../../src/plugins/sticker/utils/getStickersAtRange.ts"],"names":["getStickersAtRange","controller","value","ranges","inlines","reduce","pre","range","rangeInlines","document","getLeafInlinesAtRange","Array","prototype","push","apply","filter","inline","type","Sticker","TYPE"],"mappings":";;;;;;;AACA;;AACA;;AAEA;AACA;AACA;AACA;AACe,SAASA,kBAAT,CAA4BC,UAA5B,EAAoD;AACjE,QAAM;AAAEC,IAAAA;AAAF,MAAYD,UAAlB;AACA,QAAME,MAAM,GAAG,oCAAoBF,UAApB,CAAf;AACA,QAAMG,OAAO,GAAGD,MAAM,CAACE,MAAP,CAAc,CAACC,GAAD,EAAqBC,KAArB,KAA+C;AAC3E,UAAMC,YAAY,GAAGN,KAAK,CAACO,QAAN,CAAeC,qBAAf,CAAqCH,KAArC,CAArB;AACAI,IAAAA,KAAK,CAACC,SAAN,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2BR,GAA3B,EAAgCE,YAAhC;AACA,WAAOF,GAAP;AACD,GAJe,EAIb,EAJa,CAAhB;AAMA,SAAOF,OAAO,CAACW,MAAR,CAAgBC,MAAD,IAAYA,MAAM,CAACC,IAAP,KAAgBC,gBAAQC,IAAnD,CAAP;AACD","sourcesContent":["import { Controller, Inline, RangeSelection } from '@ali/4ever-cangjie';\nimport { Sticker } from '@ali/4ever-mo';\nimport { getRangesFromEditor }  from '@ali/4ever-utils';\n\n/**\n * @description 获取选区内的 sticker 节点\n * @param {controller}\n * */\nexport default function getStickersAtRange(controller: Controller) {\n  const { value } = controller;\n  const ranges = getRangesFromEditor(controller);\n  const inlines = ranges.reduce((pre: Array<Inline>, range: RangeSelection) => {\n    const rangeInlines = value.document.getLeafInlinesAtRange(range);\n    Array.prototype.push.apply(pre, rangeInlines);\n    return pre;\n  }, []);\n\n  return inlines.filter((inline) => inline.type === Sticker.TYPE);\n}\n"],"file":"getStickersAtRange.js"}