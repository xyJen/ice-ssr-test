"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = getMatchedEmojiQuery;

function getMatchedEmojiQuery(text, shouldTrailDelimiter) {
  if (!text) return null; // 仅允许小写字母a-z和下划线
  // 必须以:开头,可能以:结尾

  const pattern = shouldTrailDelimiter ? `\\:[a-z0-9+-_]+:$` : `\\:[a-z0-9+-_]+:?$`;
  const matchArray = text.match(RegExp(pattern));

  if (matchArray) {
    const matchStr = matchArray[0];
    const endWithColon = matchStr.endsWith(':');
    const queryStartPosition = text.length - matchStr.length + 1;
    const queryEndPosition = endWithColon ? text.length - 1 : text.length;
    return {
      query: text.slice(queryStartPosition, queryEndPosition),
      offsetWithDelimiter: {
        start: text.length - matchStr.length,
        end: text.length
      }
    };
  }

  return null;
}
//# sourceMappingURL=getMatchedEmojiQuery.js.map