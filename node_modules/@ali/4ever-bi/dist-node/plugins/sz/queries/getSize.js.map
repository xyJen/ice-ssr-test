{"version":3,"sources":["../../../../../src/plugins/sz/queries/getSize.ts"],"names":["getSize","controller","defaultSz","symbolSize","ListPlugin","getSymbolStyleByKey","parseFloat","activeSzMark","environment","IS_MOBILE","NaN","sz","SzUtil","fromMark","IS_ANDROID","Math","round"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAGe,SAASA,OAAT,CAAiBC,UAAjB,EAAyCC,SAAzC,EAA6D;AAC1E,QAAMC,UAAU,GAAGC,uBAAWC,mBAAX,CAA+BJ,UAA/B,EAA2C,IAA3C,CAAnB;;AACA,MAAIE,UAAJ,EAAgB,OAAOG,UAAU,CAACH,UAAD,CAAjB,CAF0D,CAI1E;;AACA,QAAMI,YAAY,GAAG,8BAAgBN,UAAhB,EAA4BC,SAA5B,CAArB;;AAEA,MAAI,CAACK,YAAD,IAAiB,CAACC,yBAAYC,SAAlC,EAA6C;AAC3C;AACA,WAAOC,GAAP;AACD;;AAED,MAAIC,EAAU,GAAGC,mBAAOC,QAAP,CAAgBN,YAAhB,CAAjB;;AAEA,MAAIC,yBAAYM,UAAhB,EAA4B;AAC1B;AACAH,IAAAA,EAAE,GAAGI,IAAI,CAACC,KAAL,CAAWL,EAAX,CAAL;AACD;;AAED,SAAOA,EAAP;AACD","sourcesContent":["import { Controller, environment } from '@ali/4ever-cangjie';\nimport { ListPlugin, SzUtil } from '@ali/4ever-bamboo';\nimport getActiveSzMark from '../utils/getActiveSzMark';\n\n\nexport default function getSize(controller: Controller, defaultSz?: number) {\n  const symbolSize = ListPlugin.getSymbolStyleByKey(controller, 'sz');\n  if (symbolSize) return parseFloat(symbolSize);\n\n  // 多个 mark 兼容手段：取最后一个mark\n  const activeSzMark = getActiveSzMark(controller, defaultSz);\n\n  if (!activeSzMark && !environment.IS_MOBILE) {\n    // PC端不显示多个字号\n    return NaN;\n  }\n\n  let sz: number = SzUtil.fromMark(activeSzMark);\n\n  if (environment.IS_ANDROID) {\n    // 安卓老版本显示小数为0，这里兼容一下\n    sz = Math.round(sz);\n  }\n\n  return sz;\n}\n"],"file":"getSize.js"}