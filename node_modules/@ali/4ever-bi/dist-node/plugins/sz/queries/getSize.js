"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = getSize;

var _everCangjie = require("@ali/4ever-cangjie");

var _everBamboo = require("@ali/4ever-bamboo");

var _getActiveSzMark = _interopRequireDefault(require("../utils/getActiveSzMark"));

function getSize(controller, defaultSz) {
  const symbolSize = _everBamboo.ListPlugin.getSymbolStyleByKey(controller, 'sz');

  if (symbolSize) return parseFloat(symbolSize); // 多个 mark 兼容手段：取最后一个mark

  const activeSzMark = (0, _getActiveSzMark.default)(controller, defaultSz);

  if (!activeSzMark && !_everCangjie.environment.IS_MOBILE) {
    // PC端不显示多个字号
    return NaN;
  }

  let sz = _everBamboo.SzUtil.fromMark(activeSzMark);

  if (_everCangjie.environment.IS_ANDROID) {
    // 安卓老版本显示小数为0，这里兼容一下
    sz = Math.round(sz);
  }

  return sz;
}
//# sourceMappingURL=getSize.js.map