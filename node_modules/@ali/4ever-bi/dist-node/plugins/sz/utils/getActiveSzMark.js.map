{"version":3,"sources":["../../../../../src/plugins/sz/utils/getActiveSzMark.ts"],"names":["createEmptySzMarkHandler","defaultSz","emptySzMarkHandler","controller","text","document","startText","value","key","sz","Mark","create","type","data","szUnit","getActiveSzMark","query"],"mappings":";;;;;;;;;AAAA;;AAEA;;AAEA,SAASA,wBAAT,CAAkCC,SAAlC,EAAsD;AACpD,SAAO,SAASC,kBAAT,CAA4BC,UAA5B,EAAoDC,IAApD,EAAiE;AACtE,UAAM;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAA0BH,UAAU,CAACI,KAA3C;AACA,UAAMC,GAAG,GAAGJ,IAAI,EAAEI,GAAN,IAAaF,SAAS,EAAEE,GAApC;AACA,UAAMC,EAAE,GAAG,2BAAaJ,QAAb,EAAuBG,GAAvB,EAA4BP,SAA5B,CAAX;AACA,WAAO,CAACS,kBAAKC,MAAL,CAAY;AAClBC,MAAAA,IAAI,EAAE,IADY;AAElBC,MAAAA,IAAI,EAAE;AACJN,QAAAA,KAAK,EAAEE,EADH;AAEJK,QAAAA,MAAM,EAAE;AAFJ;AAFY,KAAZ,CAAD,CAAP;AAOD,GAXD;AAYD;;AAEc,SAASC,eAAT,CAAyBZ,UAAzB,EAAiDF,SAAjD,EAAqE;AAClF,SAAOE,UAAU,CAACa,KAAX,CAAiB,eAAjB,EAAkC,IAAlC,EAAwChB,wBAAwB,CAACC,SAAD,CAAhE,CAAP;AACD","sourcesContent":["import { Controller, Text, Mark } from '@ali/4ever-cangjie';\n\nimport getDefaultSz from './getDefaultSz';\n\nfunction createEmptySzMarkHandler(defaultSz?: number) {\n  return function emptySzMarkHandler(controller: Controller, text?: Text) {\n    const { document, startText } = controller.value;\n    const key = text?.key || startText?.key;\n    const sz = getDefaultSz(document, key, defaultSz);\n    return [Mark.create({\n      type: 'sz',\n      data: {\n        value: sz,\n        szUnit: 'pt',\n      },\n    })];\n  }\n}\n\nexport default function getActiveSzMark(controller: Controller, defaultSz?: number) {\n  return controller.query('getActiveMark', 'sz', createEmptySzMarkHandler(defaultSz));\n}\n"],"file":"getActiveSzMark.js"}