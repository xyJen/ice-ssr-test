"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = getDefaultSz;

var _everCangjie = require("@ali/4ever-cangjie");

var _everUtils = require("@ali/4ever-utils");

var _everPluginHeading = require("@ali/4ever-plugin-heading");

const {
  DEFAULT: DEFAULT_FONT_SIZE
} = _everUtils.fontSize;
/**
 * 获取默认字号
 * 当 leaf 的 mark 中获取不到字号信息时, 根据 block 的类型, 获取正文或者标题默认的字号
 * @param document 
 * @param key 
 * @param defaultSz 配置的默认字号 
 * @returns number
 */

function getDefaultSz(document, key, defaultSz) {
  if (!key) return defaultSz || DEFAULT_FONT_SIZE;
  const block = document.getClosestBlock(key);
  let sz = defaultSz || DEFAULT_FONT_SIZE;

  if (block && _everPluginHeading.Heading.isHeading(block)) {
    sz = _everUtils.SzUtil.fromHeadingType(block.type);
  }

  if (_everCangjie.environment.IS_ANDROID) {
    // 安卓老版本显示小数为0，这里兼容一下
    sz = Math.round(sz);
  }

  return sz;
}
//# sourceMappingURL=getDefaultSz.js.map