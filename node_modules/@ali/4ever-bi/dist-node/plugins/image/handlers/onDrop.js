"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createOnDrop;

var _everCangjie = require("@ali/4ever-cangjie");

var _onInsertImage = _interopRequireDefault(require("./onInsertImage"));

function createOnDrop(imageConfig, state) {
  return function onDrop(event, controller, next) {
    event.preventDefault();

    const data = _everCangjie.transferUtils.getEventTransfer(event, controller);

    if (data.type === 'files') {
      const {
        files
      } = data;
      const imageFiles = files.filter(file => file.type.indexOf('image/') >= 0);
      if (imageFiles.length === 0) return next();
      return (0, _onInsertImage.default)(controller, imageFiles, imageConfig, state);
    }

    return next();
  };
}
//# sourceMappingURL=onDrop.js.map