{"version":3,"sources":["../../../../../src/plugins/image/handlers/onQuery.ts"],"names":["createOnQuery","config","onQuery","qry","controller","next","type","inlineToolbarLayout","sidebarLayout"],"mappings":";;;;;;;AACA;;AAGA,SAASA,aAAT,CAAuBC,MAAvB,EAAqE;AACnE,SAAO,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,UAAtB,EAAkCC,IAAlC,EAAwC;AAC7C,UAAM;AAAEC,MAAAA;AAAF,QAAWH,GAAjB;AACA,UAAM;AAAEI,MAAAA,mBAAF;AAAuBC,MAAAA;AAAvB,QAAyCP,MAA/C;;AACA,QAAIK,IAAI,KAAK,6BAAb,EAA4C;AAC1C,aAAOC,mBAAmB,IAAI,+BAA9B;AACD;;AAED,QAAID,IAAI,KAAK,uBAAb,EAAsC;AACpC,aAAOE,aAAa,IAAI,8BAAiBP,MAAjB,CAAxB;AACD;;AACD,WAAOI,IAAI,EAAX;AACD,GAXD;AAYD;;eAEcL,a","sourcesContent":["import { Plugin } from '@ali/4ever-cangjie';\nimport { getToolbarLayout, getSidebarLayout } from '../config';\nimport { ImagePluginConfig } from '../types';\n\nfunction createOnQuery(config: ImagePluginConfig): Plugin['onQuery'] {\n  return function onQuery(qry, controller, next) {\n    const { type } = qry;\n    const { inlineToolbarLayout, sidebarLayout } = config;\n    if (type === 'getImageInlineToolbarLayout') {\n      return inlineToolbarLayout || getToolbarLayout();\n    }\n\n    if (type === 'getImageSidebarLayout') {\n      return sidebarLayout || getSidebarLayout(config);\n    }\n    return next();\n  };\n}\n\nexport default createOnQuery;\n"],"file":"onQuery.js"}