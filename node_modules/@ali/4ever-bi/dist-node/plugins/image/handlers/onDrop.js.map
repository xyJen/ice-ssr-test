{"version":3,"sources":["../../../../../src/plugins/image/handlers/onDrop.ts"],"names":["createOnDrop","imageConfig","state","onDrop","event","controller","next","preventDefault","data","transferUtils","getEventTransfer","type","files","imageFiles","filter","file","indexOf","length"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEe,SAASA,YAAT,CAAsBC,WAAtB,EAAmCC,KAAnC,EAA0C;AACvD,SAAO,SAASC,MAAT,CAAgBC,KAAhB,EAAwCC,UAAxC,EAAgEC,IAAhE,EAAgF;AACrFF,IAAAA,KAAK,CAACG,cAAN;;AACA,UAAMC,IAAI,GAAGC,2BAAcC,gBAAd,CAA+BN,KAA/B,EAAsCC,UAAtC,CAAb;;AAEA,QAAKG,IAAD,CAA2BG,IAA3B,KAAoC,OAAxC,EAAiD;AAC/C,YAAM;AAAEC,QAAAA;AAAF,UAAYJ,IAAlB;AACA,YAAMK,UAAU,GAAGD,KAAK,CAACE,MAAN,CAAaC,IAAI,IAAIA,IAAI,CAACJ,IAAL,CAAUK,OAAV,CAAkB,QAAlB,KAA+B,CAApD,CAAnB;AACA,UAAIH,UAAU,CAACI,MAAX,KAAsB,CAA1B,EAA6B,OAAOX,IAAI,EAAX;AAE7B,aAAO,4BAAcD,UAAd,EAA0BQ,UAA1B,EAAsCZ,WAAtC,EAAmDC,KAAnD,CAAP;AACD;;AAED,WAAOI,IAAI,EAAX;AACD,GAbD;AAcD","sourcesContent":["import { transferUtils, Controller } from '@ali/4ever-cangjie';\nimport onInsertImage from './onInsertImage';\n\nexport default function createOnDrop(imageConfig, state) {\n  return function onDrop(event: React.DragEvent, controller: Controller, next: Function) {\n    event.preventDefault();\n    const data = transferUtils.getEventTransfer(event, controller);\n\n    if ((data as { type: string }).type === 'files') {\n      const { files } = data;\n      const imageFiles = files.filter(file => file.type.indexOf('image/') >= 0);\n      if (imageFiles.length === 0) return next();\n\n      return onInsertImage(controller, imageFiles, imageConfig, state);\n    }\n\n    return next();\n  };\n}\n"],"file":"onDrop.js"}