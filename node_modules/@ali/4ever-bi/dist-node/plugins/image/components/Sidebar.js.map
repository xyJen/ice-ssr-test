{"version":3,"sources":["../../../../../src/plugins/image/components/Sidebar.tsx"],"names":["SidebarBox","styled","div","SidebarItemsBox","TipBox","IconBox","Sidebar","props","controller","locale","document","selection","value","layout","query","focusNode","React","useMemo","isCollapsed","focus","node","getClosestVoid","key","Image","isImage","selectImageTip","displayName"],"mappings":";;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;uBAH4B,a;;AAM5B,MAAMA,UAAU,gBAAGC,0BAAOC,GAAV,kBAAhB;;AAIA,MAAMC,eAAe,gBAAGF,0BAAOC,GAAV,yBAArB;;AAIA,MAAME,MAAM,gBAAGH,0BAAOC,GAAV,8GAAZ;;AASA,MAAMG,OAAO,gBAAGJ,0BAAOC,GAAV,mBAAb;;wBA6BU,eAAC,OAAD,qBAAS;AAAK,EAAA,GAAG,EAAC,8FAAT;AAAwG,EAAA,KAAK,EAAE;AAA/G,EAAT,C;;AApBV,MAAMI,OAA+B,GAAIC,KAAD,IAAW;AACjD,QAAM;AAAEC,IAAAA,UAAF;AAAcC,IAAAA;AAAd,MAAyBF,KAA/B;AAEA,QAAM;AAAEG,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAA0BH,UAAU,CAACI,KAA3C;AAEA,QAAMC,MAAM,GAAIL,UAAU,CAACM,KAAX,CAAiB,uBAAjB,KAA6C,EAA7D;AAEA,QAAMC,SAAS,GAAGC,KAAK,CAACC,OAAN,CAAc,MAAM;AACpC,UAAM;AAAEC,MAAAA,WAAF;AAAeC,MAAAA;AAAf,QAAyBR,SAA/B;;AACA,QAAIO,WAAJ,EAAiB;AACf,YAAME,IAAI,GAAGV,QAAQ,CAACW,cAAT,CAAwBF,KAAK,CAACG,GAA9B,EAAmCd,UAAnC,CAAb;AACA,aAAOe,cAAMC,OAAN,CAAcJ,IAAd,IAAsBA,IAAtB,GAA6B,IAApC;AACD;;AACD,WAAO,IAAP;AACD,GAPiB,EAOf,CAACZ,UAAD,EAAaE,QAAb,EAAuBC,SAAvB,CAPe,CAAlB;;AASA,MAAI,CAACI,SAAL,EAAgB;AACd,wBACE,eAAC,UAAD,qBACE,eAAC,MAAD,cAEGN,MAAM,CAACgB,cAFV,CADF,CADF;AAQD;;AACD,sBACE,eAAC,eAAD,qBACE,eAAC,2BAAD;AAAc,IAAA,MAAM,EAAEZ;AAAtB,IADF,CADF;AAKD,CA/BD;;AAiCAP,OAAO,CAACoB,WAAR,GAAsB,SAAtB;eAEepB,O","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { Image } from '@ali/4ever-mo';\nimport styled from 'styled-components';\nimport { SidebarItems, ISidebarItemsLayout } from '@ali/4ever-component';\n\n\nconst SidebarBox = styled.div`\n  height: 100%;\n`;\n\nconst SidebarItemsBox = styled.div`\n  margin-bottom: 60px;\n`;\n\nconst TipBox = styled.div`\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  font-size: 14px;\n`;\n\nconst IconBox = styled.div`\n  height: 100px;\n`;\n\nexport interface SidebarProps {\n  controller: Controller;\n  locale: Record<string, string>;\n}\n\nconst Sidebar: React.FC<SidebarProps> = (props) => {\n  const { controller, locale } = props;\n\n  const { document, selection } = controller.value;\n\n  const layout = (controller.query('getImageSidebarLayout') || []) as ISidebarItemsLayout;\n\n  const focusNode = React.useMemo(() => {\n    const { isCollapsed, focus } = selection;\n    if (isCollapsed) {\n      const node = document.getClosestVoid(focus.key, controller);\n      return Image.isImage(node) ? node : null;\n    }\n    return null;\n  }, [controller, document, selection]);\n\n  if (!focusNode) {\n    return (\n      <SidebarBox>\n        <TipBox>\n          <IconBox><img src='https://img.alicdn.com/imgextra/i4/O1CN01wWQTqW1RcV9LQrOlh_!!6000000002132-2-tps-540-540.png' width={100} /></IconBox>\n          {locale.selectImageTip}\n        </TipBox>\n      </SidebarBox>\n    );\n  }\n  return (\n    <SidebarItemsBox>\n      <SidebarItems layout={layout} />\n    </SidebarItemsBox>\n  );\n};\n\nSidebar.displayName = 'Sidebar';\n\nexport default Sidebar;\n"],"file":"Sidebar.js"}