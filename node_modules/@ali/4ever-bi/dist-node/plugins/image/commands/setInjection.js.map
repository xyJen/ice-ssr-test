{"version":3,"sources":["../../../../../src/plugins/image/commands/setInjection.ts"],"names":["controller","node","data","injections","value","curInjection","find","inj","key","injection","Injection","create","setInjections","filter"],"mappings":";;;;;;;AAAA;;eAEe,CAACA,UAAD,EAAyBC,IAAzB,EAAqCC,IAArC,KAA8C;AAC3D,QAAM;AAAEC,IAAAA;AAAF,MAAiBH,UAAU,CAACI,KAAlC;AACA,QAAMC,YAAY,GAAGF,UAAU,CAACG,IAAX,CAAgBC,GAAG,IAAIA,GAAG,CAACC,GAAJ,KAAYP,IAAI,CAACO,GAAxC,KAAgD,EAArE;;AACA,QAAMC,SAAS,GAAGC,uBAAUC,MAAV,CAAiB;AACjCH,IAAAA,GAAG,EAAEP,IAAI,CAACO,GADuB;AAEjCN,IAAAA,IAAI,EAAE,EACJ,IAAIG,YAAY,CAACH,IAAb,IAAqB,EAAzB,CADI;AAEJ,SAAGA;AAFC;AAF2B,GAAjB,CAAlB;;AAQAF,EAAAA,UAAU,CAACY,aAAX,CAAyB,CACvB,GAAGT,UAAU,CAACU,MAAX,CAAkBN,GAAG,IAAIA,GAAG,CAACC,GAAJ,KAAYP,IAAI,CAACO,GAA1C,CADoB,EAEvBC,SAFuB,CAAzB;AAID,C","sourcesContent":["import { Injection, Controller, Node } from '@ali/4ever-cangjie';\n\nexport default (controller: Controller, node: Node, data) => {\n  const { injections } = controller.value;\n  const curInjection = injections.find(inj => inj.key === node.key) || {} as Injection;\n  const injection = Injection.create({\n    key: node.key,\n    data: {\n      ...(curInjection.data || {}),\n      ...data,\n    },\n  });\n\n  controller.setInjections([\n    ...injections.filter(inj => inj.key !== node.key),\n    injection,\n  ]);\n};\n"],"file":"setInjection.js"}