{"version":3,"sources":["../../../../../src/plugins/lineheight/components/getLineHeightMenuList.tsx"],"names":["actionList","key","text","isDisabled","controller","value","isCollapsedAtEdge","selection","query","renderSubMenu","props","menuItem","MenuContentWrapper","React","Fragment","title","rest","line","lineRule","lineValue","parseFloat","undefined","handleClick","height","split","run","heights","map","config","PluginRoles","lineHeight"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA;;AACA;;AAGA;;uBAL4B,a;AAI5B;AAQA,MAAMA,UAAyB,GAAG,CAChC;AACEC,EAAAA,GAAG,EAAE,CADP;AAEEC,EAAAA,IAAI,EAAE;AAFR,CADgC,EAKhC;AACED,EAAAA,GAAG,EAAE,IADP;AAEEC,EAAAA,IAAI,EAAE;AAFR,CALgC,EAShC;AACED,EAAAA,GAAG,EAAE,GADP;AAEEC,EAAAA,IAAI,EAAE;AAFR,CATgC,EAahC;AACED,EAAAA,GAAG,EAAE,CADP;AAEEC,EAAAA,IAAI,EAAE;AAFR,CAbgC,EAiBhC;AACED,EAAAA,GAAG,EAAE,GADP;AAEEC,EAAAA,IAAI,EAAE;AAFR,CAjBgC,EAqBhC;AACED,EAAAA,GAAG,EAAE,CADP;AAEEC,EAAAA,IAAI,EAAE;AAFR,CArBgC,CAAlC;;AA2BA,MAAMC,UAAU,GAAIC,UAAD,IAA4B;AAC7C,QAAM;AAAEC,IAAAA;AAAF,MAAYD,UAAlB;AACA,QAAM;AAAEE,IAAAA;AAAF,MAAwBD,KAAK,CAACE,SAApC;AACA,SAAOD,iBAAiB,IACnBF,UAAU,CAACI,KAAX,CAAiB,oBAAjB,CADE,IAEFJ,UAAU,CAACI,KAAX,CAAiB,iBAAjB,CAFE,IAGFJ,UAAU,CAACI,KAAX,CAAiB,uBAAjB,CAHE,IAIFJ,UAAU,CAACI,KAAX,CAAiB,uBAAjB,CAJL;AAKD,CARD;;AAUA,MAAMC,aAAa,GAAIC,KAAD,IAA8B;AAClD,QAAM;AAAEN,IAAAA,UAAF;AAAcO,IAAAA;AAAd,MAA2BD,KAAjC;AACA,QAAM;AAAEE,IAAAA,kBAAkB,GAAGC,KAAK,CAACC,QAA7B;AAAuCC,IAAAA,KAAvC;AAA8C,OAAGC;AAAjD,MAA0DL,QAAhE;AACA,QAAM;AAAEM,IAAAA,IAAF;AAAQC,IAAAA,QAAQ,GAAG;AAAnB,MAA8Bd,UAAU,CAACI,KAAX,CAAiB,eAAjB,CAApC,CAHkD,CAIlD;;AACA,QAAMW,SAAS,GAAGC,UAAU,CAACF,QAAQ,KAAK,MAAb,GAAsBG,SAAtB,GAAkCJ,IAAnC,CAA5B;;AAEA,QAAMK,WAAW,GAAIrB,GAAD,IAAS;AAC3B,UAAMsB,MAAM,GAAGH,UAAU,CAACnB,GAAG,CAACuB,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAD,CAAzB;AACApB,IAAAA,UAAU,CAACqB,GAAX,CAAe,UAAf,EAA2B,4BAAcF,MAAd,CAA3B;AACD,GAHD;;AAKA,QAAMG,OAAO,GAAG1B,UAAU,CAAC2B,GAAX,CAAgBC,MAAD,IAAyB;AACtD,UAAM3B,GAAG,GAAI,cAAa2B,MAAM,CAAC3B,GAAI,EAArC;AACA,wBACE,eAAC,kBAAD;AACE,MAAA,QAAQ,EAAEkB,SAAS,KAAKS,MAAM,CAAC3B,GADjC;AAEE,MAAA,OAAO,EAAEA,GAFX;AAGE,MAAA,GAAG,EAAEA,GAHP;AAIE,MAAA,OAAO,EAAEqB,WAJX;AAKE,MAAA,IAAI,EAAG,GAAEO,wBAAYC,UAAW,IAAGF,MAAM,CAAC1B,IAAK;AALjD,OAME0B,MAAM,CAAC1B,IANT,CADF;AAUD,GAZe,CAAhB;AAcA,sBACE,eAAC,iBAAD,6BAAac,IAAb;AAAmB,IAAA,KAAK,EAAEL,QAAQ,CAACI,KAAT,IAAkB,EAA5C;AAAgD,IAAA,QAAQ,EAAEZ,UAAU,CAACC,UAAD;AAApE,mBACE,eAAC,kBAAD,QACGsB,OADH,CADF,CADF;AAOD,CAjCD;;eAmCejB,a","sourcesContent":["import * as React from 'react';\nimport { Controller, Value } from '@ali/4ever-cangjie';\nimport { SubMenu, MenuItem } from '@ali/we-design';\nimport { PluginRoles } from '@ali/4ever-bamboo';\nimport { SubMenuInnerProps } from '@ali/4ever-component';\n;\nimport { setLineHeight } from '../actions';\n\ninterface IConfigItem {\n  key: number;\n  text: string;\n}\n\nconst actionList: IConfigItem[] = [\n  {\n    key: 1,\n    text: '1',\n  },\n  {\n    key: 1.15,\n    text: '1.15',\n  },\n  {\n    key: 1.5,\n    text: '1.5',\n  },\n  {\n    key: 2,\n    text: '2',\n  },\n  {\n    key: 2.5,\n    text: '2.5',\n  },\n  {\n    key: 3,\n    text: '3',\n  },\n];\n\nconst isDisabled = (controller: Controller) => {\n  const { value } = controller;\n  const { isCollapsedAtEdge } = value.selection;\n  return isCollapsedAtEdge\n    || controller.query('isSelectionInImage')\n    || controller.query('isSelectionInHr')\n    || controller.query('isSelectionInTaskList')\n    || controller.query('isSelectionInLinkCard');\n};\n\nconst renderSubMenu = (props: SubMenuInnerProps) => {\n  const { controller, menuItem } = props;\n  const { MenuContentWrapper = React.Fragment, title, ...rest } = menuItem;\n  const { line, lineRule = 'auto' } = controller.query('getLineHeight');\n  // 组件只支持多倍行距\n  const lineValue = parseFloat(lineRule !== 'auto' ? undefined : line);\n\n  const handleClick = (key) => {\n    const height = parseFloat(key.split('_')[1]);\n    controller.run('onAction', setLineHeight(height));\n  };\n\n  const heights = actionList.map((config: IConfigItem) => {\n    const key = `lineheight_${config.key}`;\n    return (\n      <MenuItem\n        selected={lineValue === config.key}\n        menuKey={key}\n        key={key}\n        onClick={handleClick}\n        role={`${PluginRoles.lineHeight}-${config.text}`}\n      >{config.text}\n      </MenuItem>\n    );\n  });\n\n  return (\n    <SubMenu {...rest} title={menuItem.title || ''} disabled={isDisabled(controller)}>\n      <MenuContentWrapper>\n        {heights}\n      </MenuContentWrapper>\n    </SubMenu>\n  );\n};\n\nexport default renderSubMenu;\n"],"file":"getLineHeightMenuList.js"}