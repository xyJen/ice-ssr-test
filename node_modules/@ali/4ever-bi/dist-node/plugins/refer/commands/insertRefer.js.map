{"version":3,"sources":["../../../../../src/plugins/refer/commands/insertRefer.ts"],"names":["controller","files","command","Commands","focus","query","insertBlock","forEach","file","insertInline","type","data","id","name","fileName","fileType","corpId","spaceId","fileId","fileSize","viewType","height","moveToStartOfNextText","insertText","flush"],"mappings":";;;;;;;;;AAAA;;AACA;;eAce,CAACA,UAAD,EAAyBC,KAAK,GAAG,EAAjC,KAAwC;AACrDD,EAAAA,UAAU,CAACE,OAAX,CAAmBC,sBAASC,KAA5B;;AACA,MAAIJ,UAAU,CAACK,KAAX,CAAiB,wBAAjB,CAAJ,EAAgD;AAC9CL,IAAAA,UAAU,CAACE,OAAX,CAAmBC,sBAASG,WAA5B,EAAyC,WAAzC;AACD;;AAEDL,EAAAA,KAAK,CAACM,OAAN,CAAeC,IAAD,IAAiB;AAC7BR,IAAAA,UAAU,CACPE,OADH,CACWC,sBAASM,YADpB,EACkC;AAC9BC,MAAAA,IAAI,EAAE,OADwB;AAE9BC,MAAAA,IAAI,EAAE;AACJC,QAAAA,EAAE,EAAE,iBADA;AAEJC,QAAAA,IAAI,EAAEL,IAAI,CAACM,QAFP;AAGJJ,QAAAA,IAAI,EAAE,SAHF;AAIJK,QAAAA,QAAQ,EAAEP,IAAI,CAACO,QAJX;AAKJC,QAAAA,MAAM,EAAER,IAAI,CAACQ,MALT;AAMJC,QAAAA,OAAO,EAAET,IAAI,CAACS,OANV;AAOJC,QAAAA,MAAM,EAAEV,IAAI,CAACU,MAPT;AAQJC,QAAAA,QAAQ,EAAEX,IAAI,CAACW,QARX;AASJC,QAAAA,QAAQ,EAAEZ,IAAI,CAACY,QAAL,IAAiB,MATvB;AAUJC,QAAAA,MAAM,EAAEb,IAAI,CAACa;AAVT;AAFwB,KADlC,EAgBGnB,OAhBH,CAgBWC,sBAASmB,qBAhBpB,EAiBGpB,OAjBH,CAiBWC,sBAASoB,UAjBpB,EAiBgC,GAjBhC;AAkBD,GAnBD;AAoBA,SAAOvB,UAAU,CAACwB,KAAX,EAAP;AACD,C","sourcesContent":["import { Controller, Commands } from '@ali/4ever-cangjie';\nimport uuid from 'uuid/v4';\n\n\ninterface IFile {\n  fileName: string;\n  fileType: string;\n  corpId: string;\n  spaceId: string;\n  fileId: string;\n  fileSize: string;\n  viewType: string;\n  height: string;\n}\n\nexport default (controller: Controller, files = []) => {\n  controller.command(Commands.focus);\n  if (controller.query('isCollapsedInBlockVoid')) {\n    controller.command(Commands.insertBlock, 'paragraph');\n  }\n\n  files.forEach((file: IFile) => {\n    controller\n      .command(Commands.insertInline, {\n        type: 'refer',\n        data: {\n          id: uuid(),\n          name: file.fileName,\n          type: 'dingpan',\n          fileType: file.fileType,\n          corpId: file.corpId,\n          spaceId: file.spaceId,\n          fileId: file.fileId,\n          fileSize: file.fileSize,\n          viewType: file.viewType || 'link',\n          height: file.height,\n        },\n      })\n      .command(Commands.moveToStartOfNextText)\n      .command(Commands.insertText, ' ');\n  });\n  return controller.flush();\n};\n"],"file":"insertRefer.js"}