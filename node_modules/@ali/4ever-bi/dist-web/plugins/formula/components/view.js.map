{"version":3,"sources":["../../../../../src/plugins/formula/components/view.tsx"],"names":["React","useState","useEffect","styled","css","FormulaPlugin","getKatexString","Wrapper","div","readOnly","isEditing","undefined","isSelected","FormulaContainer","Formula","props","formula","domString","setDomString","trim","__html"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;qBAC4B,a;AAA5B,OAAOC,MAAP,IAAiBC,GAAjB,QAA4B,mBAA5B;AACA,SAASC,aAAT,QAA8B,mBAA9B;AACA;IAEQC,c,GAAmBD,a,CAAnBC,c;AASR,IAAMC,OAAO,gBAAGJ,MAAM,CAACK,GAAV,mHAQT;AAAA,MAAGC,QAAH,QAAGA,QAAH;AAAA,SAAmBA,QAAQ,GACzBL,GADyB,wBAIzBA,GAJyB,uJAA3B;AAAA,CARS,EAyBT;AAAA,MAAGM,SAAH,SAAGA,SAAH;AAAA,SAAoBA,SAAS,GAAGN,GAAH,oEAG3BO,SAHF;AAAA,CAzBS,EA8BT;AAAA,MAAGC,UAAH,SAAGA,UAAH;AAAA,SAAqBA,UAAU,GAAGR,GAAH,+CAE7BO,SAFF;AAAA,CA9BS,CAAb;AAmCA,IAAME,gBAAgB,gBAAGV,MAAM,CAACK,GAAV,wCAAtB;AAKA,IAAMM,OAAO,gBAAGX,MAAM,CAACK,GAAV,oCAAb;AAKA,gBAAe,UAACO,KAAD,EAAkB;AAAA,MACvBC,OADuB,GACsBD,KADtB,CACvBC,OADuB;AAAA,MACdN,SADc,GACsBK,KADtB,CACdL,SADc;AAAA,MACHE,UADG,GACsBG,KADtB,CACHH,UADG;AAAA,MACSH,QADT,GACsBM,KADtB,CACSN,QADT;;AAAA,kBAEGR,QAAQ,CAAC,EAAD,CAFX;AAAA,MAExBgB,SAFwB;AAAA,MAEbC,YAFa;;AAI/BhB,EAAAA,SAAS,CAAC,YAAM;AACdgB,IAAAA,YAAY,CAACZ,cAAc,CAACU,OAAO,CAACG,IAAR,EAAD,CAAf,CAAZ;AACD,GAFQ,EAEN,CAACH,OAAD,CAFM,CAAT;AAIA,sBACE,eAAC,OAAD;AACE,IAAA,SAAS,EAAEN,SADb;AAEE,IAAA,UAAU,EAAEE,UAAU,IAAI,CAACF,SAF7B;AAGE,IAAA,QAAQ,EAAED;AAHZ,kBAKE,eAAC,gBAAD,qBACE,eAAC,OAAD;AAAS,IAAA,uBAAuB,EAAE;AAAEW,MAAAA,MAAM,EAAEH;AAAV;AAAlC,IADF,CALF,CADF;AAWD,CAnBD","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled, { css } from 'styled-components';\nimport { FormulaPlugin } from '@ali/4ever-bamboo';\nimport '../katex.css';\n\nconst { getKatexString } = FormulaPlugin;\n\ninterface Props {\n  formula: string;\n  isEditing: boolean;\n  isSelected?: boolean;\n  readOnly?: boolean;\n}\n\nconst Wrapper = styled.div<Pick<Props, 'isEditing' | 'isSelected' | 'readOnly'>>`\n  display: flex;\n  align-items: center;\n  min-height: 32px;\n  border-radius: 4px;\n  position: relative;\n  z-index: 1;\n\n  ${({ readOnly }) => (readOnly\n    ? css`\n      cursor: default;\n      `\n    : css`\n      cursor: pointer;\n\n      &:hover {\n        background-color: rgba(126, 134, 142, 0.12);\n      }\n\n      &:active {\n        background-color: hsla(210, 6.6115702479338845%, 52.54901960784314%, 0.12);\n      }\n    `\n  )}\n\n  ${({ isEditing }) => (isEditing ? css`\n    background-color: rgba(126, 134, 142, 0.12);\n    margin-right: -20px;\n  ` : undefined)}\n\n  ${({ isSelected }) => (isSelected ? css`\n    background-color: rgba(0, 106, 254, 0.12);\n  ` : undefined)}\n`;\n\nconst FormulaContainer = styled.div`\n  overflow-x: auto;\n  overflow-y: hidden;\n`;\n\nconst Formula = styled.div`\n  margin: 0px 4px;\n  font-size: 11pt;\n`;\n\nexport default (props: Props) => {\n  const { formula, isEditing, isSelected, readOnly } = props;\n  const [domString, setDomString] = useState('');\n\n  useEffect(() => {\n    setDomString(getKatexString(formula.trim()));\n  }, [formula]);\n\n  return (\n    <Wrapper\n      isEditing={isEditing}\n      isSelected={isSelected && !isEditing}\n      readOnly={readOnly}\n    >\n      <FormulaContainer>\n        <Formula dangerouslySetInnerHTML={{ __html: domString }} />\n      </FormulaContainer>\n    </Wrapper>\n  );\n};\n"],"file":"view.js"}