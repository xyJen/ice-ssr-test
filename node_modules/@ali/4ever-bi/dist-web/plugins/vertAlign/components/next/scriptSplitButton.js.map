{"version":3,"sources":["../../../../../../src/plugins/vertAlign/components/next/scriptSplitButton.tsx"],"names":["React","ScriptSplit","PluginRoles","toggleSup","toggleSub","SHORTCUT","ScriptSplitButton","props","controller","locale","rest","isSup","query","isSub","isCollapsedAtEdge","value","selection","isDisabled","onScriptChange","useCallback","run","supItem","useMemo","title","supButtonTitle","shortCut","sup","description","text","space","subItem","subButtonTitle","sub","curScript","undefined","vertAlign"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAC5B,SAA+BC,WAA/B,QAAkD,sBAAlD;AACA,SAASC,WAAT,QAA4B,mBAA5B;AACA,SAASC,SAAT,EAAoBC,SAApB;AACA,SAASC,QAAT;AAOA,eAAe,SAASC,iBAAT,CAA2BC,KAA3B,EAAkD;AAAA,MACvDC,UADuD,GACvBD,KADuB,CACvDC,UADuD;AAAA,MAC3CC,MAD2C,GACvBF,KADuB,CAC3CE,MAD2C;AAAA,MAChCC,IADgC,iCACvBH,KADuB;;AAE/D,MAAMI,KAAK,GAAGH,UAAU,CAACI,KAAX,CAAiB,OAAjB,CAAd;AACA,MAAMC,KAAK,GAAGL,UAAU,CAACI,KAAX,CAAiB,OAAjB,CAAd;AAH+D,MAIvDE,iBAJuD,GAIjCN,UAAU,CAACO,KAAX,CAAiBC,SAJgB,CAIvDF,iBAJuD;AAK/D,MAAMG,UAAU,GAAGH,iBAAiB,IAC/BN,UAAU,CAACI,KAAX,CAAiB,oBAAjB,CADc,IAEdJ,UAAU,CAACI,KAAX,CAAiB,iBAAjB,CAFc,IAGdJ,UAAU,CAACI,KAAX,CAAiB,sBAAjB,CAHc,IAIdJ,UAAU,CAACI,KAAX,CAAiB,mBAAjB,CAJc,IAKdJ,UAAU,CAACI,KAAX,CAAiB,yBAAjB,CALc,IAMdJ,UAAU,CAACI,KAAX,CAAiB,uBAAjB,CANL;AAQA,MAAMM,cAAc,GAAGlB,KAAK,CAACmB,WAAN,CAAkB,UAACJ,KAAD,EAA4B;AACnEP,IAAAA,UAAU,CAACY,GAAX,CAAe,UAAf,EAA2BL,KAAK,KAAK,KAAV,GAAkBX,SAAS,EAA3B,GAAgCD,SAAS,EAApE;AACD,GAFsB,EAEpB,CAACK,UAAD,CAFoB,CAAvB;AAIA,MAAMa,OAAO,GAAGrB,KAAK,CAACsB,OAAN,CAAc;AAAA,WAAO;AACnCC,MAAAA,KAAK,EAAE,CAAAd,MAAM,QAAN,YAAAA,MAAM,CAAEe,cAAR,KAA0B,EADE;AAEnCC,MAAAA,QAAQ,EAAEpB,QAAQ,CAACqB,GAFgB;AAGnCC,MAAAA,WAAW,mBAAgB,CAAAlB,MAAM,QAAN,YAAAA,MAAM,CAAEmB,IAAR,KAAgB,MAAhC,YAA2C,CAAAnB,MAAM,QAAN,YAAAA,MAAM,CAAEoB,KAAR,KAAiB,OAA5D;AAHwB,KAAP;AAAA,GAAd,EAIZ,EAJY,CAAhB;AAMA,MAAMC,OAAO,GAAG9B,KAAK,CAACsB,OAAN,CAAc;AAAA,WAAO;AACnCC,MAAAA,KAAK,EAAE,CAAAd,MAAM,QAAN,YAAAA,MAAM,CAAEsB,cAAR,KAA0B,EADE;AAEnCN,MAAAA,QAAQ,EAAEpB,QAAQ,CAAC2B,GAFgB;AAGnCL,MAAAA,WAAW,mBAAgB,CAAAlB,MAAM,QAAN,YAAAA,MAAM,CAAEmB,IAAR,KAAgB,MAAhC,YAA2C,CAAAnB,MAAM,QAAN,YAAAA,MAAM,CAAEoB,KAAR,KAAiB,OAA5D;AAHwB,KAAP;AAAA,GAAd,EAIZ,EAJY,CAAhB;AAMA,MAAMI,SAAS,GAAGpB,KAAK,GAAG,KAAH,GAAWF,KAAK,GAAG,OAAH,GAAauB,SAApD;AAEA,sBACE,eAAC,WAAD;AACE,IAAA,MAAM,EAAC,mBADT;AAEE,IAAA,QAAQ,EAAE,CAAC,CAACjB,UAFd;AAGE,IAAA,cAAc,EAAEC,cAHlB;AAIE,IAAA,SAAS,EAAEe,SAJb;AAKE,IAAA,IAAI,EAAE/B,WAAW,CAACiC,SALpB;AAME,IAAA,OAAO,EAAEL,OANX;AAOE,IAAA,OAAO,EAAET;AAPX,KAQMX,IARN,EADF;AAYD","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { IToolbarButtonConfig, ScriptSplit } from '@ali/4ever-component';\nimport { PluginRoles } from '@ali/4ever-bamboo';\nimport { toggleSup, toggleSub } from '../../actions';\nimport { SHORTCUT } from '../../utils';\n\nexport interface SupButtonProps extends IToolbarButtonConfig {\n  controller: Controller;\n  locale?: Record<string, string>;\n}\n\nexport default function ScriptSplitButton(props: SupButtonProps) {\n  const { controller, locale, ...rest } = props;\n  const isSup = controller.query('isSup');\n  const isSub = controller.query('isSub');\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled = isCollapsedAtEdge\n    || controller.query('isSelectionInImage')\n    || controller.query('isSelectionInHr')\n    || controller.query('isSelectionInMention')\n    || controller.query('isSelectionInLink')\n    || controller.query('isSelectionInListSymbol')\n    || controller.query('isSelectionInLinkCard');\n\n  const onScriptChange = React.useCallback((value: 'sub' | 'super') => {\n    controller.run('onAction', value === 'sub' ? toggleSub() : toggleSup());\n  }, [controller]);\n\n  const supItem = React.useMemo(() => ({\n    title: locale?.supButtonTitle || '',\n    shortCut: SHORTCUT.sup,\n    description: `Markdown: ^${locale?.text || 'Text'}^ ${locale?.space || 'Space'}`,\n  }), []);\n\n  const subItem = React.useMemo(() => ({\n    title: locale?.subButtonTitle || '',\n    shortCut: SHORTCUT.sub,\n    description: `Markdown: ~${locale?.text || 'Text'}~ ${locale?.space || 'Space'}`,\n  }), []);\n\n  const curScript = isSub ? 'sub' : isSup ? 'super' : undefined;\n\n  return (\n    <ScriptSplit\n      testid=\"bi-toolbar-script\"\n      disabled={!!isDisabled}\n      onScriptChange={onScriptChange}\n      curScript={curScript}\n      role={PluginRoles.vertAlign}\n      subItem={subItem}\n      supItem={supItem}\n      {...rest}\n    />\n  );\n}\n"],"file":"scriptSplitButton.js"}