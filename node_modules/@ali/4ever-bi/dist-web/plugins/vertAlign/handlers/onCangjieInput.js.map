{"version":3,"sources":["../../../../../src/plugins/vertAlign/handlers/onCangjieInput.ts"],"names":["createSpaceHandler","createOnCangjieInput","onSubSpace","mark","type","data","value","delimiter","character","size","onSupSpace","onCangjieInput","event","controller","next","detail"],"mappings":"AACA,SAASA,kBAAT,QAAmC,kBAAnC;AAEA,eAAe,SAASC,oBAAT,GAAgC;AAC7C,MAAMC,UAAU,GAAGF,kBAAkB,CAAC;AACpCG,IAAAA,IAAI,EAAE;AAAEC,MAAAA,IAAI,EAAE,WAAR;AAAqBC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,KAAK,EAAE;AAAT;AAA3B,KAD8B;AAEpCC,IAAAA,SAAS,EAAE,CAAC;AAAEC,MAAAA,SAAS,EAAE,GAAb;AAAkBC,MAAAA,IAAI,EAAE;AAAxB,KAAD;AAFyB,GAAD,CAArC;AAIA,MAAMC,UAAU,GAAGV,kBAAkB,CAAC;AACpCG,IAAAA,IAAI,EAAE;AAAEC,MAAAA,IAAI,EAAE,WAAR;AAAqBC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,KAAK,EAAE;AAAT;AAA3B,KAD8B;AAEpCC,IAAAA,SAAS,EAAE,CAAC;AAAEC,MAAAA,SAAS,EAAE,GAAb;AAAkBC,MAAAA,IAAI,EAAE;AAAxB,KAAD;AAFyB,GAAD,CAArC;AAKA,SAAO,SAASE,cAAT,CACLC,KADK,EAELC,UAFK,EAGLC,IAHK,EAIL;AACA,QAAIF,KAAK,CAACG,MAAN,CAAaV,IAAb,KAAsB,GAA1B,EAA+B;AAC7B,aAAOS,IAAI,EAAX;AACD;;AACD,WAAOZ,UAAU,CAACU,KAAD,EAAQC,UAAR,EAAoB,YAAM;AACzCH,MAAAA,UAAU,CAACE,KAAD,EAAQC,UAAR,EAAoBC,IAApB,CAAV;AACD,KAFgB,CAAjB;AAGD,GAXD;AAYD","sourcesContent":["import { CangjieInputEvent, Controller } from '@ali/4ever-cangjie';\nimport { createSpaceHandler } from '@ali/4ever-utils';\n\nexport default function createOnCangjieInput() {\n  const onSubSpace = createSpaceHandler({\n    mark: { type: 'vertAlign', data: { value: 'subscript' } },\n    delimiter: [{ character: '~', size: 1 }],\n  });\n  const onSupSpace = createSpaceHandler({\n    mark: { type: 'vertAlign', data: { value: 'superscript' } },\n    delimiter: [{ character: '^', size: 1 }],\n  });\n\n  return function onCangjieInput(\n    event: CangjieInputEvent,\n    controller: Controller,\n    next: Function,\n  ) {\n    if (event.detail.data !== ' ') {\n      return next();\n    }\n    return onSubSpace(event, controller, () => {\n      onSupSpace(event, controller, next);\n    });\n  };\n}\n"],"file":"onCangjieInput.js"}