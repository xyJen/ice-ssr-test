import { getClosestContainerBlock, getInnerFullWidth } from '@ali/4ever-utils';
export default (function (width, height, controller) {
  var container = getClosestContainerBlock(controller.value);
  var natural = {
    width: width,
    height: height
  };

  if (!container) {
    return natural;
  }

  var document = controller.value.document;
  var maxWidth = Math.max(getInnerFullWidth(container, document) || 0, 0);

  if (maxWidth < natural.width) {
    return {
      width: maxWidth,
      height: maxWidth / natural.width * natural.height,
      isAutoFit: true
    };
  }

  return natural;
});
//# sourceMappingURL=calcImageSize.js.map