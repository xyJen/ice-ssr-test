import { Inline } from '@ali/4ever-cangjie';
import { isEmpty } from 'lodash-es';

/**
 * 删除某些特定 URL 的 img，这个问题主要用来处理 Word 拷贝图文的情况，图片的链接是本地文件，无法读取
 * @param fragment
 * @param dropImage
 */
export function dropImages(fragment, shouldSkipImageURL) {
  var drops = fragment.filterDescendants(function (node) {
    return Inline.isInline(node) && node.type === 'image' && !isEmpty(node.data) && shouldSkipImageURL(node.data.src);
  });
  var result = fragment;
  drops.forEach(function (drop) {
    var path = result.getPath(drop.key);

    if (path) {
      result = result.removeNode(path);
    }
  });
  return result;
}
/**
 * 过滤出可以 transfer 的图片
 * @param fragment
 * @param filterTransfer
 */

export function filterTransferableImages(fragment, shouldTransferImageURL) {
  var images = fragment.filterDescendants(function (node) {
    return Inline.isInline(node) && node.type === 'image' && !!shouldTransferImageURL && shouldTransferImageURL(node.data.src);
  });
  return images;
}
//# sourceMappingURL=filterImages.js.map