{"version":3,"sources":["../../../../src/plugins/image/index.ts"],"names":["toolbar","menubar","sidebar","createRenderNode","createRenderEditable","DEPRECATED_ACTIONS","actions","insertImage","onAction","onQuery","onDrop","onCangjiePaste","quickInsert","insertImageFile","createOnCommand","createContextMenu","createRenderHoverToolbar","createOnCangjieInput","onKeyDown","utils","queries","createRenderToolbar","moFactory","state","createImagePlugin","config","imageConfig","image","contextMenu","sideBarTrigger","renderNode","renderEditable","renderToolbar","locale","renderHoverToolbar","commands","onCommand","onCangjieInput","models","klass","type"],"mappings":";AAAA,OAAOA,OAAP;AACA,OAAOC,OAAP;AACA,OAAOC,OAAP;AACA,OAAOC,gBAAP;AACA,OAAOC,oBAAP;AACA,SAASC,kBAAT,EAA6BC,OAA7B;AACA,OAAOC,WAAP;AACA,OAAOC,QAAP;AACA,OAAOC,OAAP;AACA,OAAOC,MAAP;AACA,OAAOC,cAAP;AACA,OAAOC,WAAP;AACA,OAAOC,eAAP;AAEA,OAAOC,eAAP;AACA,OAAOC,iBAAP;AACA,OAAOC,wBAAP;AACA,OAAOC,oBAAP;AACA,OAAOC,SAAP;AACA,OAAO,KAAKC,KAAZ;AACA,SAASC,OAAT;AACA,OAAOC,mBAAP;AAEA,SAASC,SAAT,QAA0B,yBAA1B;AAEA,IAAMC,KAAK,GAAG,EAAd;AAEA,SACElB,kBAAkB,IAAIC,OADxB;;AAIA,SAASkB,iBAAT,CAA2BC,MAA3B,EAA6D;AAC3D,MAAMC,WAAW,GAAID,MAAM,CAACE,KAAP,IAAgB,EAArC;AACA,sBACKL,SAAS,CAAC,EAAD,CADd;AAEEpB,IAAAA,OAAO,EAAEA,OAAO,CAACuB,MAAD,CAFlB;AAGEzB,IAAAA,OAAO,EAAEA,OAAO,CAAC0B,WAAD,CAHlB;AAIEzB,IAAAA,OAAO,EAAEA,OAAO,CAACyB,WAAD,CAJlB;AAKEE,IAAAA,WAAW,EAAEb,iBAAiB,CAACW,WAAD,EAAcD,MAAM,CAACI,cAArB,CALhC;AAMEC,IAAAA,UAAU,EAAE3B,gBAAgB,CAACuB,WAAD,EAAcH,KAAd,CAN9B;AAOEQ,IAAAA,cAAc,EAAE3B,oBAAoB,CAACsB,WAAD,CAPtC;AAQEM,IAAAA,aAAa,EAAEX,mBAAmB,CAACK,WAAW,CAACO,MAAZ,IAAsB,EAAvB,CARpC;AASEC,IAAAA,kBAAkB,EAAElB,wBAAwB,CAACU,WAAD,CAT9C;AAUES,IAAAA,QAAQ,EAAE;AACR5B,MAAAA,WAAW,EAAXA,WADQ;AAER;AACAM,MAAAA,eAAe,EAAEA,eAAe,CAACa,WAAD,EAAcH,KAAd;AAHxB,KAVZ;AAeEH,IAAAA,OAAO,EAAPA,OAfF;AAgBEd,IAAAA,OAAO,EAAPA,OAhBF;AAiBE8B,IAAAA,SAAS,EAAEtB,eAAe,CAACW,MAAD,EAASF,KAAT,CAjB5B;AAkBEf,IAAAA,QAAQ,EAAEA,QAAQ,CAACiB,MAAD,CAlBpB;AAmBEhB,IAAAA,OAAO,EAAEA,OAAO,CAACiB,WAAD,CAnBlB;AAoBEf,IAAAA,cAAc,EAAEA,cAAc,CAACc,MAAD,EAASF,KAAT,CApBhC;AAqBEc,IAAAA,cAAc,EAAEpB,oBAAoB,CAACS,WAAD,EAAcH,KAAd,CArBtC;AAsBEb,IAAAA,MAAM,EAAEA,MAAM,CAACgB,WAAD,EAAcH,KAAd,CAtBhB;AAuBEL,IAAAA,SAAS,EAATA,SAvBF;AAwBEN,IAAAA,WAAW,EAAXA,WAxBF;AAyBE0B,IAAAA,MAAM,EAAE;AACNC,MAAAA,KAAK,EAAE,QADD;AAENC,MAAAA,IAAI,EAAE;AAFA;AAzBV;AA8BD;;AAEDhB,iBAAiB,CAAClB,OAAlB,GAA4BD,kBAA5B;AACAmB,iBAAiB,CAACL,KAAlB,GAA0BA,KAA1B;AACA,eAAeK,iBAAf","sourcesContent":["import toolbar from './toolbar';\nimport menubar from './menubar';\nimport sidebar from './sidebar';\nimport createRenderNode from './createRenderNode';\nimport createRenderEditable from './createRenderEditable';\nimport { DEPRECATED_ACTIONS, actions } from './actions';\nimport insertImage from './commands/insertImage';\nimport onAction from './handlers/onAction';\nimport onQuery from './handlers/onQuery';\nimport onDrop from './handlers/onDrop';\nimport onCangjiePaste from './handlers/onCangjiePaste';\nimport quickInsert from './quickInsertConfig';\nimport insertImageFile from './commands/insertImageFile';\nimport { BiPluginConfig, BiPlugin } from '../../types';\nimport createOnCommand from './handlers/onCommand';\nimport createContextMenu from './handlers/createContextMenu';\nimport createRenderHoverToolbar from './createRenderHoverToolbar';\nimport createOnCangjieInput from './handlers/onCangjieInput';\nimport onKeyDown from './handlers/onKeyDown';\nimport * as utils from './utils';\nimport { queries } from './queries';\nimport createRenderToolbar from './createRenderToolbar';\nimport type { ImagePluginConfig } from './types';\nimport { moFactory } from '@ali/4ever-plugin-image';\n\nconst state = {};\n\nexport {\n  DEPRECATED_ACTIONS as actions,\n};\n\nfunction createImagePlugin(config: BiPluginConfig): BiPlugin {\n  const imageConfig = (config.image || {}) as ImagePluginConfig;\n  return {\n    ...moFactory({}),\n    sidebar: sidebar(config),\n    toolbar: toolbar(imageConfig),\n    menubar: menubar(imageConfig),\n    contextMenu: createContextMenu(imageConfig, config.sideBarTrigger),\n    renderNode: createRenderNode(imageConfig, state),\n    renderEditable: createRenderEditable(imageConfig),\n    renderToolbar: createRenderToolbar(imageConfig.locale || {}),\n    renderHoverToolbar: createRenderHoverToolbar(imageConfig),\n    commands: {\n      insertImage,\n      // @ts-ignore\n      insertImageFile: insertImageFile(imageConfig, state),\n    },\n    queries,\n    actions,\n    onCommand: createOnCommand(config, state),\n    onAction: onAction(config),\n    onQuery: onQuery(imageConfig),\n    onCangjiePaste: onCangjiePaste(config, state),\n    onCangjieInput: createOnCangjieInput(imageConfig, state),\n    onDrop: onDrop(imageConfig, state),\n    onKeyDown,\n    quickInsert,\n    models: {\n      klass: 'inline',\n      type: 'image',\n    },\n  };\n}\n\ncreateImagePlugin.actions = DEPRECATED_ACTIONS;\ncreateImagePlugin.utils = utils;\nexport default createImagePlugin;\nexport type { ImagePluginConfig };\n"],"file":"index.js"}