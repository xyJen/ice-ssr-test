{"version":3,"sources":["../../../../../src/plugins/image/commands/insertImage.ts"],"names":["Commands","generateKey","insertImage","controller","maybeImages","query","command","insertBlock","images","Array","isArray","forEach","image","insertInline","type","data","id","name","src","width","height","extraData","moveToStartOfNextText","insertText","focus"],"mappings":"AAAA,SAAqBA,QAArB,QAAqC,oBAArC;AACA,SAASC,WAAT,QAA2B,kBAA3B;AAWA,eAAe,SAASC,WAAT,CACbC,UADa,EAEbC,WAFa,EAGb;AACA,MAAID,UAAU,CAACE,KAAX,CAAiB,wBAAjB,CAAJ,EAAgD;AAC9CF,IAAAA,UAAU,CAACG,OAAX,CAAmBN,QAAQ,CAACO,WAA5B,EAAyC,WAAzC;AACD;;AAED,MAAMC,MAAM,GAAGC,KAAK,CAACC,OAAN,CAAcN,WAAd,IAA6BA,WAA7B,GAA2C,CAACA,WAAD,CAA1D;AACAI,EAAAA,MAAM,CAACG,OAAP,CAAe,UAACC,KAAD,EAAW;AACxBT,IAAAA,UAAU,CACPG,OADH,CACWN,QAAQ,CAACa,YADpB,EACkC;AAC9BC,MAAAA,IAAI,EAAE,OADwB;AAE9BC,MAAAA,IAAI,EAAE;AACJC,QAAAA,EAAE,EAAEf,WAAW,EADX;AAEJgB,QAAAA,IAAI,EAAE,EAFF;AAGJC,QAAAA,GAAG,EAAEN,KAAK,CAACM,GAHP;AAIJC,QAAAA,KAAK,EAAEP,KAAK,CAACO,KAJT;AAKJC,QAAAA,MAAM,EAAER,KAAK,CAACQ,MALV;AAMJC,QAAAA,SAAS,EAAET,KAAK,CAACS;AANb;AAFwB,KADlC,EAYGf,OAZH,CAYWN,QAAQ,CAACsB,qBAZpB,EAaGhB,OAbH,CAaWN,QAAQ,CAACuB,UAbpB,EAagC,GAbhC;AAcD,GAfD;AAiBA,SAAOpB,UAAU,CAACG,OAAX,CAAmBN,QAAQ,CAACwB,KAA5B,CAAP;AACD","sourcesContent":["import { Controller, Commands } from '@ali/4ever-cangjie';\nimport { generateKey} from '@ali/4ever-utils';\n\n\nexport interface ImageProperties {\n  src: string;\n  width?: number;\n  height?: number;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  extraData?: Record<string, any>;\n}\n\nexport default function insertImage(\n  controller: Controller,\n  maybeImages: ImageProperties | ImageProperties[],\n) {\n  if (controller.query('isCollapsedInBlockVoid')) {\n    controller.command(Commands.insertBlock, 'paragraph');\n  }\n\n  const images = Array.isArray(maybeImages) ? maybeImages : [maybeImages];\n  images.forEach((image) => {\n    controller\n      .command(Commands.insertInline, {\n        type: 'image',\n        data: {\n          id: generateKey(),\n          name: '',\n          src: image.src,\n          width: image.width,\n          height: image.height,\n          extraData: image.extraData,\n        },\n      })\n      .command(Commands.moveToStartOfNextText)\n      .command(Commands.insertText, ' ');\n  });\n\n  return controller.command(Commands.focus);\n}\n"],"file":"insertImage.js"}