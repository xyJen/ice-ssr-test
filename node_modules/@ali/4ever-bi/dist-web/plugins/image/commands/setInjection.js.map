{"version":3,"sources":["../../../../../src/plugins/image/commands/setInjection.ts"],"names":["Injection","controller","node","data","injections","value","curInjection","find","inj","key","injection","create","setInjections","filter"],"mappings":";AAAA,SAASA,SAAT,QAA4C,oBAA5C;AAEA,gBAAe,UAACC,UAAD,EAAyBC,IAAzB,EAAqCC,IAArC,EAA8C;AAAA,MACnDC,UADmD,GACpCH,UAAU,CAACI,KADyB,CACnDD,UADmD;AAE3D,MAAME,YAAY,GAAGF,UAAU,CAACG,IAAX,CAAgB,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,GAAJ,KAAYP,IAAI,CAACO,GAArB;AAAA,GAAnB,KAAgD,EAArE;AACA,MAAMC,SAAS,GAAGV,SAAS,CAACW,MAAV,CAAiB;AACjCF,IAAAA,GAAG,EAAEP,IAAI,CAACO,GADuB;AAEjCN,IAAAA,IAAI,eACEG,YAAY,CAACH,IAAb,IAAqB,EADvB,EAECA,IAFD;AAF6B,GAAjB,CAAlB;AAQAF,EAAAA,UAAU,CAACW,aAAX,WACKR,UAAU,CAACS,MAAX,CAAkB,UAAAL,GAAG;AAAA,WAAIA,GAAG,CAACC,GAAJ,KAAYP,IAAI,CAACO,GAArB;AAAA,GAArB,CADL,GAEEC,SAFF;AAID,CAfD","sourcesContent":["import { Injection, Controller, Node } from '@ali/4ever-cangjie';\n\nexport default (controller: Controller, node: Node, data) => {\n  const { injections } = controller.value;\n  const curInjection = injections.find(inj => inj.key === node.key) || {} as Injection;\n  const injection = Injection.create({\n    key: node.key,\n    data: {\n      ...(curInjection.data || {}),\n      ...data,\n    },\n  });\n\n  controller.setInjections([\n    ...injections.filter(inj => inj.key !== node.key),\n    injection,\n  ]);\n};\n"],"file":"setInjection.js"}