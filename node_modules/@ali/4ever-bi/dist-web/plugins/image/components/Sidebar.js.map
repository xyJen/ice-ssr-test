{"version":3,"sources":["../../../../../src/plugins/image/components/Sidebar.tsx"],"names":["React","Image","styled","SidebarItems","SidebarBox","div","SidebarItemsBox","TipBox","IconBox","Sidebar","props","controller","locale","value","document","selection","layout","query","focusNode","useMemo","isCollapsed","focus","node","getClosestVoid","key","isImage","selectImageTip","displayName"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAC5B,SAASC,KAAT,QAAsB,eAAtB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,YAAT,QAAkD,sBAAlD;AAGA,IAAMC,UAAU,gBAAGF,MAAM,CAACG,GAAV,kBAAhB;AAIA,IAAMC,eAAe,gBAAGJ,MAAM,CAACG,GAAV,yBAArB;AAIA,IAAME,MAAM,gBAAGL,MAAM,CAACG,GAAV,8GAAZ;AASA,IAAMG,OAAO,gBAAGN,MAAM,CAACG,GAAV,mBAAb;;wBA6BU,eAAC,OAAD,qBAAS;AAAK,EAAA,GAAG,EAAC,8FAAT;AAAwG,EAAA,KAAK,EAAE;AAA/G,EAAT,C;;AApBV,IAAMI,OAA+B,GAAG,SAAlCA,OAAkC,CAACC,KAAD,EAAW;AAAA,MACzCC,UADyC,GAClBD,KADkB,CACzCC,UADyC;AAAA,MAC7BC,MAD6B,GAClBF,KADkB,CAC7BE,MAD6B;AAAA,0BAGjBD,UAAU,CAACE,KAHM;AAAA,MAGzCC,QAHyC,qBAGzCA,QAHyC;AAAA,MAG/BC,SAH+B,qBAG/BA,SAH+B;AAKjD,MAAMC,MAAM,GAAIL,UAAU,CAACM,KAAX,CAAiB,uBAAjB,KAA6C,EAA7D;AAEA,MAAMC,SAAS,GAAGlB,KAAK,CAACmB,OAAN,CAAc,YAAM;AAAA,QAC5BC,WAD4B,GACLL,SADK,CAC5BK,WAD4B;AAAA,QACfC,KADe,GACLN,SADK,CACfM,KADe;;AAEpC,QAAID,WAAJ,EAAiB;AACf,UAAME,IAAI,GAAGR,QAAQ,CAACS,cAAT,CAAwBF,KAAK,CAACG,GAA9B,EAAmCb,UAAnC,CAAb;AACA,aAAOV,KAAK,CAACwB,OAAN,CAAcH,IAAd,IAAsBA,IAAtB,GAA6B,IAApC;AACD;;AACD,WAAO,IAAP;AACD,GAPiB,EAOf,CAACX,UAAD,EAAaG,QAAb,EAAuBC,SAAvB,CAPe,CAAlB;;AASA,MAAI,CAACG,SAAL,EAAgB;AACd,wBACE,eAAC,UAAD,qBACE,eAAC,MAAD,cAEGN,MAAM,CAACc,cAFV,CADF,CADF;AAQD;;AACD,sBACE,eAAC,eAAD,qBACE,eAAC,YAAD;AAAc,IAAA,MAAM,EAAEV;AAAtB,IADF,CADF;AAKD,CA/BD;;AAiCAP,OAAO,CAACkB,WAAR,GAAsB,SAAtB;AAEA,eAAelB,OAAf","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { Image } from '@ali/4ever-mo';\nimport styled from 'styled-components';\nimport { SidebarItems, ISidebarItemsLayout } from '@ali/4ever-component';\n\n\nconst SidebarBox = styled.div`\n  height: 100%;\n`;\n\nconst SidebarItemsBox = styled.div`\n  margin-bottom: 60px;\n`;\n\nconst TipBox = styled.div`\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  font-size: 14px;\n`;\n\nconst IconBox = styled.div`\n  height: 100px;\n`;\n\nexport interface SidebarProps {\n  controller: Controller;\n  locale: Record<string, string>;\n}\n\nconst Sidebar: React.FC<SidebarProps> = (props) => {\n  const { controller, locale } = props;\n\n  const { document, selection } = controller.value;\n\n  const layout = (controller.query('getImageSidebarLayout') || []) as ISidebarItemsLayout;\n\n  const focusNode = React.useMemo(() => {\n    const { isCollapsed, focus } = selection;\n    if (isCollapsed) {\n      const node = document.getClosestVoid(focus.key, controller);\n      return Image.isImage(node) ? node : null;\n    }\n    return null;\n  }, [controller, document, selection]);\n\n  if (!focusNode) {\n    return (\n      <SidebarBox>\n        <TipBox>\n          <IconBox><img src='https://img.alicdn.com/imgextra/i4/O1CN01wWQTqW1RcV9LQrOlh_!!6000000002132-2-tps-540-540.png' width={100} /></IconBox>\n          {locale.selectImageTip}\n        </TipBox>\n      </SidebarBox>\n    );\n  }\n  return (\n    <SidebarItemsBox>\n      <SidebarItems layout={layout} />\n    </SidebarItemsBox>\n  );\n};\n\nSidebar.displayName = 'Sidebar';\n\nexport default Sidebar;\n"],"file":"Sidebar.js"}