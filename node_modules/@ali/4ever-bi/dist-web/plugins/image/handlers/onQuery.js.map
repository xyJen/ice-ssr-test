{"version":3,"sources":["../../../../../src/plugins/image/handlers/onQuery.ts"],"names":["getToolbarLayout","getSidebarLayout","createOnQuery","config","onQuery","qry","controller","next","type","inlineToolbarLayout","sidebarLayout"],"mappings":"AACA,SAASA,gBAAT,EAA2BC,gBAA3B;;AAGA,SAASC,aAAT,CAAuBC,MAAvB,EAAqE;AACnE,SAAO,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,UAAtB,EAAkCC,IAAlC,EAAwC;AAAA,QACrCC,IADqC,GAC5BH,GAD4B,CACrCG,IADqC;AAAA,QAErCC,mBAFqC,GAEEN,MAFF,CAErCM,mBAFqC;AAAA,QAEhBC,aAFgB,GAEEP,MAFF,CAEhBO,aAFgB;;AAG7C,QAAIF,IAAI,KAAK,6BAAb,EAA4C;AAC1C,aAAOC,mBAAmB,IAAIT,gBAAgB,EAA9C;AACD;;AAED,QAAIQ,IAAI,KAAK,uBAAb,EAAsC;AACpC,aAAOE,aAAa,IAAIT,gBAAgB,CAACE,MAAD,CAAxC;AACD;;AACD,WAAOI,IAAI,EAAX;AACD,GAXD;AAYD;;AAED,eAAeL,aAAf","sourcesContent":["import { Plugin } from '@ali/4ever-cangjie';\nimport { getToolbarLayout, getSidebarLayout } from '../config';\nimport { ImagePluginConfig } from '../types';\n\nfunction createOnQuery(config: ImagePluginConfig): Plugin['onQuery'] {\n  return function onQuery(qry, controller, next) {\n    const { type } = qry;\n    const { inlineToolbarLayout, sidebarLayout } = config;\n    if (type === 'getImageInlineToolbarLayout') {\n      return inlineToolbarLayout || getToolbarLayout();\n    }\n\n    if (type === 'getImageSidebarLayout') {\n      return sidebarLayout || getSidebarLayout(config);\n    }\n    return next();\n  };\n}\n\nexport default createOnQuery;\n"],"file":"onQuery.js"}