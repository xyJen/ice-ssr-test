{"version":3,"sources":["../../../../../src/plugins/image/handlers/onDrop.ts"],"names":["transferUtils","onInsertImage","createOnDrop","imageConfig","state","onDrop","event","controller","next","preventDefault","data","getEventTransfer","type","files","imageFiles","filter","file","indexOf","length"],"mappings":"AAAA,SAASA,aAAT,QAA0C,oBAA1C;AACA,OAAOC,aAAP;AAEA,eAAe,SAASC,YAAT,CAAsBC,WAAtB,EAAmCC,KAAnC,EAA0C;AACvD,SAAO,SAASC,MAAT,CAAgBC,KAAhB,EAAwCC,UAAxC,EAAgEC,IAAhE,EAAgF;AACrFF,IAAAA,KAAK,CAACG,cAAN;AACA,QAAMC,IAAI,GAAGV,aAAa,CAACW,gBAAd,CAA+BL,KAA/B,EAAsCC,UAAtC,CAAb;;AAEA,QAAKG,IAAD,CAA2BE,IAA3B,KAAoC,OAAxC,EAAiD;AAAA,UACvCC,KADuC,GAC7BH,IAD6B,CACvCG,KADuC;AAE/C,UAAMC,UAAU,GAAGD,KAAK,CAACE,MAAN,CAAa,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACJ,IAAL,CAAUK,OAAV,CAAkB,QAAlB,KAA+B,CAAnC;AAAA,OAAjB,CAAnB;AACA,UAAIH,UAAU,CAACI,MAAX,KAAsB,CAA1B,EAA6B,OAAOV,IAAI,EAAX;AAE7B,aAAOP,aAAa,CAACM,UAAD,EAAaO,UAAb,EAAyBX,WAAzB,EAAsCC,KAAtC,CAApB;AACD;;AAED,WAAOI,IAAI,EAAX;AACD,GAbD;AAcD","sourcesContent":["import { transferUtils, Controller } from '@ali/4ever-cangjie';\nimport onInsertImage from './onInsertImage';\n\nexport default function createOnDrop(imageConfig, state) {\n  return function onDrop(event: React.DragEvent, controller: Controller, next: Function) {\n    event.preventDefault();\n    const data = transferUtils.getEventTransfer(event, controller);\n\n    if ((data as { type: string }).type === 'files') {\n      const { files } = data;\n      const imageFiles = files.filter(file => file.type.indexOf('image/') >= 0);\n      if (imageFiles.length === 0) return next();\n\n      return onInsertImage(controller, imageFiles, imageConfig, state);\n    }\n\n    return next();\n  };\n}\n"],"file":"onDrop.js"}