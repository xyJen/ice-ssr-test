import { isKeyHotkey } from 'is-hotkey';
import setInjection from "../commands/setInjection";
var isEnter = isKeyHotkey('enter');
var isEscape = isKeyHotkey('escape');
export default function onKeyDown(event, controller, next) {
  var _controller$value = controller.value,
      injections = _controller$value.injections,
      focusInline = _controller$value.focusInline;

  if (!(focusInline && focusInline.type === 'image')) {
    return next();
  }

  if (isEnter(event) || isEscape(event)) {
    var croppingImage = injections.find(function (inj) {
      return inj.key === focusInline.key;
    });

    if (croppingImage && croppingImage.data.isImageCropping) {
      setInjection(controller, focusInline, {
        isImageCropping: false
      });
      event.preventDefault();
      return controller;
    }
  }

  return next();
}
//# sourceMappingURL=onKeyDown.js.map