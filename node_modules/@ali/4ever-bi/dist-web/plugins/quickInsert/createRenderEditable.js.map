{"version":3,"sources":["../../../../src/plugins/quickInsert/createRenderEditable.tsx"],"names":["React","QuickInsertTrigger","getQuickInsertKeyword","createRenderEditable","groups","insertMap","config","renderEditable","_","controller","next","isNecessary","query","decoration","value","mark","data","plugin","text","type"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAC5B,OAAOC,kBAAP;AAEA,SAASC,qBAAT,QAAsC,kBAAtC;;AAEA,SAASC,oBAAT,CACEC,MADF,EAEEC,SAFF,EAGEC,MAHF,EAI4B;AAC1B;AACA,SAAO,SAASC,cAAT,CAAwBC,CAAxB,EAA2BC,UAA3B,EAAuCC,IAAvC,EAA6C;AAClD,QAAMC,WAAW,GAAGF,UAAU,CAACG,KAAX,CAAiB,0BAAjB,CAApB;;AACA,QAAI,CAACD,WAAL,EAAkB;AAChB,aAAOD,IAAI,EAAX;AACD;;AACD,QAAMG,UAAU,GAAGJ,UAAU,CAACG,KAAX,CAAiB,0BAAjB,CAAnB;AACA,QAAME,KAAK,GAAGD,UAAH,oBAAGA,UAAU,CAAEE,IAAZ,CAAiBC,IAAjB,CAAsBC,MAApC,CANkD,CAOlD;;AACA,QAAMC,IAAI,GAAGhB,qBAAqB,CAACO,UAAD,EAAa;AAACU,MAAAA,IAAI,EAAE;AAAP,KAAb,CAAlC;AACA,wBACE,qCACGT,IAAI,EADP,eAEE,eAAC,kBAAD;AACE,MAAA,MAAM,EAAEN,MADV;AAEE,MAAA,KAAK,EAAEU,KAFT;AAGE,MAAA,IAAI,EAAEI,IAHR;AAIE,MAAA,UAAU,EAAET,UAJd;AAKE,MAAA,SAAS,EAAEJ,SALb;AAME,MAAA,MAAM,EAAEC;AANV,MAFF,CADF;AAaD,GAtBD;AAuBD;;AAED,eAAeH,oBAAf","sourcesContent":["import * as React from 'react';\nimport { Plugin } from '@ali/4ever-cangjie';\nimport QuickInsertTrigger from './components/quickInsertTrigger';\nimport { InsertGroup, InsertItem, QuickInsertPluginConfig } from './types';\nimport { getQuickInsertKeyword } from '@ali/4ever-utils';\n\nfunction createRenderEditable(\n  groups: InsertGroup[],\n  insertMap: Record<string, InsertItem>,\n  config: QuickInsertPluginConfig,\n): Plugin['renderEditable'] {\n  // @ts-ignore\n  return function renderEditable(_, controller, next) {\n    const isNecessary = controller.query('isSelectionInQuickInsert');\n    if (!isNecessary) {\n      return next();\n    }\n    const decoration = controller.query('getQuickInsertDecoration');\n    const value = decoration?.mark.data.plugin;\n    // 这里应该根据注册的插件传入type\n    const text = getQuickInsertKeyword(controller, {type: 'mention'});\n    return (\n      <>\n        {next()}\n        <QuickInsertTrigger\n          groups={groups}\n          value={value}\n          text={text}\n          controller={controller}\n          insertMap={insertMap}\n          config={config}\n        />\n      </>\n    );\n  };\n}\n\nexport default createRenderEditable;\n"],"file":"createRenderEditable.js"}