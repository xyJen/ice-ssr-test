{"version":3,"sources":["../../../../../src/plugins/quickInsert/commands/reset.ts"],"names":["RangeSelection","insert","reset","controller","plugin","decorations","value","insertDecoration","find","item","mark","type","start","end","offset","command","create","anchor","focus","setDecorations"],"mappings":"AAAA,SAASA,cAAT,QAA2C,oBAA3C;AACA,OAAOC,MAAP;AAEA,eAAe,SAASC,KAAT,CAAeC,UAAf,EAAuCC,MAAvC,EAA+C;AAAA,MACpDC,WADoD,GACpCF,UAAU,CAACG,KADyB,CACpDD,WADoD;AAG5D,MAAME,gBAAgB,GAAGF,WAAW,CAACG,IAAZ,CACvB,UAACC,IAAD;AAAA,WAAUA,IAAI,CAACC,IAAL,CAAUC,IAAV,KAAmB,cAA7B;AAAA,GADuB,CAAzB;;AAIA,MAAI,CAACJ,gBAAL,EAAuB;AACrB,WAAOJ,UAAP;AACD;;AAT2D,MAWpDS,KAXoD,GAWrCL,gBAXqC,CAWpDK,KAXoD;AAAA,MAW7CC,GAX6C,GAWrCN,gBAXqC,CAW7CM,GAX6C;;AAa5D,MAAID,KAAK,CAACE,MAAN,KAAiBD,GAAG,CAACC,MAAzB,EAAiC;AAC/BX,IAAAA,UAAU,CAACY,OAAX,CACE,eADF,EAEEf,cAAc,CAACgB,MAAf,CAAsB;AACpBC,MAAAA,MAAM,EAAEL,KADY;AAEpBM,MAAAA,KAAK,EAAEL;AAFa,KAAtB,CAFF;AAOD;;AAED,SAAOV,UAAU,CAACgB,cAAX,CAA0B,EAA1B,EAA8BJ,OAA9B,CAAsCd,MAAtC,EAA8C;AAAEG,IAAAA,MAAM,EAANA;AAAF,GAA9C,CAAP;AACD","sourcesContent":["import { RangeSelection, Controller } from '@ali/4ever-cangjie';\nimport insert from './insert';\n\nexport default function reset(controller: Controller, plugin) {\n  const { decorations } = controller.value;\n\n  const insertDecoration = decorations.find(\n    (item) => item.mark.type === 'quick-insert',\n  );\n\n  if (!insertDecoration) {\n    return controller;\n  }\n\n  const { start, end } = insertDecoration;\n\n  if (start.offset !== end.offset) {\n    controller.command(\n      'deleteAtRange',\n      RangeSelection.create({\n        anchor: start,\n        focus: end,\n      }),\n    );\n  }\n\n  return controller.setDecorations([]).command(insert, { plugin });\n}\n"],"file":"reset.js"}