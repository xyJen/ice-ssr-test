{"version":3,"sources":["../../../../../src/plugins/quickInsert/handlers/onAction.ts"],"names":["Commands","QUICK_INSERT_INSERT","QUICK_INSERT_RESET","QUICK_INSERT_REMOVE","remove","reset","insert","onAction","action","controller","next","type","payload","plugin","command","focus"],"mappings":"AAAA,SAAqBA,QAArB,QAAqC,oBAArC;AAEA,SACEC,mBADF,EAEEC,kBAFF,EAGEC,mBAHF;AAMA,OAAOC,MAAP;AACA,OAAOC,KAAP;AACA,OAAOC,MAAP;AAEA,eAAe,SAASC,QAAT,CACbC,MADa,EAEbC,UAFa,EAGbC,IAHa,EAIb;AAAA,MACQC,IADR,GAC0BH,MAD1B,CACQG,IADR;AAAA,MACcC,OADd,GAC0BJ,MAD1B,CACcI,OADd;;AAGA,MAAID,IAAI,KAAKV,mBAAb,EAAkC;AAAA,QACxBY,MADwB,GACbD,OADa,CACxBC,MADwB;AAEhC,WAAOJ,UAAU,CAACK,OAAX,CAAmBR,MAAnB,EAA2B;AAAEO,MAAAA,MAAM,EAANA;AAAF,KAA3B,EAAuCC,OAAvC,CAA+Cd,QAAQ,CAACe,KAAxD,CAAP;AACD;;AAED,MAAIJ,IAAI,KAAKT,kBAAb,EAAiC;AAAA,eACZU,OADY;AAAA,QACvBC,OADuB,QACvBA,MADuB;AAE/B,WAAOJ,UAAU,CAACK,OAAX,CAAmBT,KAAnB,EAA0BQ,OAA1B,CAAP;AACD;;AAED,MAAIF,IAAI,KAAKR,mBAAb,EAAkC;AAChC,WAAOM,UAAU,CAACK,OAAX,CAAmBV,MAAnB,CAAP;AACD;;AAED,SAAOM,IAAI,EAAX;AACD","sourcesContent":["import { Controller, Commands } from '@ali/4ever-cangjie';\nimport { Action } from '../../../types';\nimport {\n  QUICK_INSERT_INSERT,\n  QUICK_INSERT_RESET,\n  QUICK_INSERT_REMOVE,\n  ResetQuickInsertPayload,\n} from '../actions';\nimport remove from '../commands/remove';\nimport reset from '../commands/reset';\nimport insert from '../commands/insert';\n\nexport default function onAction(\n  action: Action,\n  controller: Controller,\n  next: () => void,\n) {\n  const { type, payload } = action;\n\n  if (type === QUICK_INSERT_INSERT) {\n    const { plugin } = payload;\n    return controller.command(insert, { plugin }).command(Commands.focus);\n  }\n\n  if (type === QUICK_INSERT_RESET) {\n    const { plugin } = payload as ResetQuickInsertPayload;\n    return controller.command(reset, plugin);\n  }\n\n  if (type === QUICK_INSERT_REMOVE) {\n    return controller.command(remove);\n  }\n\n  return next();\n}\n"],"file":"onAction.js"}