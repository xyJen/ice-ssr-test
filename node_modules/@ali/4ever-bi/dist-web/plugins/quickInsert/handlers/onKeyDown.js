import isKeyHotkey from 'is-hotkey';
import remove from "../commands/remove";
import isSelectionInQuickInsert from "../queries/isSelectionInQuickInsert";
var isEscHotkey = isKeyHotkey('esc');
var isBackspaceHotkey = isKeyHotkey('backspace');
export default function onKeyDown(event, controller, next) {
  if (isSelectionInQuickInsert(controller)) {
    if (isEscHotkey(event)) {
      controller.command(remove);
    }

    if (isBackspaceHotkey(event)) {
      var _controller$value = controller.value,
          selection = _controller$value.selection,
          decorations = _controller$value.decorations;
      var quickInsertDecoration = decorations.find(function (_ref) {
        var mark = _ref.mark;
        return mark.type === 'quick-insert';
      });

      if (selection.focus.moveBackward().offset === quickInsertDecoration.start.offset) {
        return controller.command(remove);
      }
    }
  }

  return next();
}
//# sourceMappingURL=onKeyDown.js.map