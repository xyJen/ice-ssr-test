{"version":3,"sources":["../../../../../src/plugins/refer/commands/insertRefer.ts"],"names":["Commands","uuid","controller","files","command","focus","query","insertBlock","forEach","file","insertInline","type","data","id","name","fileName","fileType","corpId","spaceId","fileId","fileSize","viewType","height","moveToStartOfNextText","insertText","flush"],"mappings":"AAAA,SAAqBA,QAArB,QAAqC,oBAArC;AACA,OAAOC,IAAP,MAAiB,SAAjB;AAcA,gBAAe,UAACC,UAAD,EAAyBC,KAAzB,EAAwC;AAAA,MAAfA,KAAe;AAAfA,IAAAA,KAAe,GAAP,EAAO;AAAA;;AACrDD,EAAAA,UAAU,CAACE,OAAX,CAAmBJ,QAAQ,CAACK,KAA5B;;AACA,MAAIH,UAAU,CAACI,KAAX,CAAiB,wBAAjB,CAAJ,EAAgD;AAC9CJ,IAAAA,UAAU,CAACE,OAAX,CAAmBJ,QAAQ,CAACO,WAA5B,EAAyC,WAAzC;AACD;;AAEDJ,EAAAA,KAAK,CAACK,OAAN,CAAc,UAACC,IAAD,EAAiB;AAC7BP,IAAAA,UAAU,CACPE,OADH,CACWJ,QAAQ,CAACU,YADpB,EACkC;AAC9BC,MAAAA,IAAI,EAAE,OADwB;AAE9BC,MAAAA,IAAI,EAAE;AACJC,QAAAA,EAAE,EAAEZ,IAAI,EADJ;AAEJa,QAAAA,IAAI,EAAEL,IAAI,CAACM,QAFP;AAGJJ,QAAAA,IAAI,EAAE,SAHF;AAIJK,QAAAA,QAAQ,EAAEP,IAAI,CAACO,QAJX;AAKJC,QAAAA,MAAM,EAAER,IAAI,CAACQ,MALT;AAMJC,QAAAA,OAAO,EAAET,IAAI,CAACS,OANV;AAOJC,QAAAA,MAAM,EAAEV,IAAI,CAACU,MAPT;AAQJC,QAAAA,QAAQ,EAAEX,IAAI,CAACW,QARX;AASJC,QAAAA,QAAQ,EAAEZ,IAAI,CAACY,QAAL,IAAiB,MATvB;AAUJC,QAAAA,MAAM,EAAEb,IAAI,CAACa;AAVT;AAFwB,KADlC,EAgBGlB,OAhBH,CAgBWJ,QAAQ,CAACuB,qBAhBpB,EAiBGnB,OAjBH,CAiBWJ,QAAQ,CAACwB,UAjBpB,EAiBgC,GAjBhC;AAkBD,GAnBD;AAoBA,SAAOtB,UAAU,CAACuB,KAAX,EAAP;AACD,CA3BD","sourcesContent":["import { Controller, Commands } from '@ali/4ever-cangjie';\nimport uuid from 'uuid/v4';\n\n\ninterface IFile {\n  fileName: string;\n  fileType: string;\n  corpId: string;\n  spaceId: string;\n  fileId: string;\n  fileSize: string;\n  viewType: string;\n  height: string;\n}\n\nexport default (controller: Controller, files = []) => {\n  controller.command(Commands.focus);\n  if (controller.query('isCollapsedInBlockVoid')) {\n    controller.command(Commands.insertBlock, 'paragraph');\n  }\n\n  files.forEach((file: IFile) => {\n    controller\n      .command(Commands.insertInline, {\n        type: 'refer',\n        data: {\n          id: uuid(),\n          name: file.fileName,\n          type: 'dingpan',\n          fileType: file.fileType,\n          corpId: file.corpId,\n          spaceId: file.spaceId,\n          fileId: file.fileId,\n          fileSize: file.fileSize,\n          viewType: file.viewType || 'link',\n          height: file.height,\n        },\n      })\n      .command(Commands.moveToStartOfNextText)\n      .command(Commands.insertText, ' ');\n  });\n  return controller.flush();\n};\n"],"file":"insertRefer.js"}