import { Commands } from '@ali/4ever-cangjie';
import toggleQuote from "../commands/toggleQuote";
import isBlockquoteDisabled from "../utils/isBlockquoteDisabled";
var validDelimiters = ['>', 'ã€‹'];
export default function onCangjieInput(event, controller, next) {
  var _controller$value = controller.value,
      startBlock = _controller$value.startBlock,
      selection = _controller$value.selection,
      document = _controller$value.document;
  if (event.detail.data !== ' ' || !startBlock) return next();

  var _char = startBlock.text.slice(0, selection.convertToTextPoints(document).start.offset);

  if (validDelimiters.includes(_char) && startBlock.type === 'paragraph' && !startBlock.data.list && !startBlock.data.blockquote && !isBlockquoteDisabled(controller)) {
    event.preventDefault();
    controller.command(Commands.moveFocusToStartOfNode, startBlock).command(Commands.del);
    return toggleQuote(controller).dispatch('createTriggerMarkdownAction', {
      mdType: 'blockquote'
    });
  }

  return next();
}
//# sourceMappingURL=onCangjieInput.js.map