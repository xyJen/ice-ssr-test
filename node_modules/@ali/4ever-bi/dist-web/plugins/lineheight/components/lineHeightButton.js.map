{"version":3,"sources":["../../../../../src/plugins/lineheight/components/lineHeightButton.tsx"],"names":["React","LineHeightSelect","PluginRoles","setLineHeight","MemoLineHeightSelect","memo","sideBarTriggerFactory","Component","sideBarTrigger","props","LineHeightButton","controller","locale","toolbarMode","rest","query","line","lineRule","lineValue","parseFloat","undefined","isCollapsedAtEdge","value","selection","isDisabled","handleChange","useCallback","run","handleClickCustomize","open","buttonTitle","lineHeightSelect"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;qBAC4B,a;AAC5B,SAASC,gBAAT,QAAiC,iBAAjC;AACA,SAASC,WAAT,QAA4B,mBAA5B;AAEA,SAASC,aAAT;AACA;AAEA,IAAMC,oBAAoB,gBAAGJ,KAAK,CAACK,IAAN,CAAWJ,gBAAX,CAA7B;AAaA,OAAO,SAASK,qBAAT,CAAwCC,SAAxC,EAA2EC,cAA3E,EAAiH;AACtH,SAAO,UAACC,KAAD,EAAW;AAChB,wBAAO,eAAC,SAAD,eAAeA,KAAf;AAAsB,MAAA,cAAc,EAAED;AAAtC,OAAP;AACD,GAFD;AAGD;;AAED,IAAME,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACD,KAAD,EAAkC;AAAA,MACjDE,UADiD,GACYF,KADZ,CACjDE,UADiD;AAAA,MACrCC,MADqC,GACYH,KADZ,CACrCG,MADqC;AAAA,MAC7BC,WAD6B,GACYJ,KADZ,CAC7BI,WAD6B;AAAA,MAChBL,cADgB,GACYC,KADZ,CAChBD,cADgB;AAAA,MACGM,IADH,iCACYL,KADZ;;AAAA,0BAErBE,UAAU,CAACI,KAAX,CAAiB,eAAjB,CAFqB;AAAA,MAEjDC,IAFiD,qBAEjDA,IAFiD;AAAA,gDAE3CC,QAF2C;AAAA,MAE3CA,QAF2C,sCAEhC,MAFgC,0BAGzD;;;AACA,MAAMC,SAAS,GAAGC,UAAU,CAACF,QAAQ,KAAK,MAAb,GAAsBG,SAAtB,GAAkCJ,IAAnC,CAA5B;AAJyD,MAKjDK,iBALiD,GAK3BV,UAAU,CAACW,KAAX,CAAiBC,SALU,CAKjDF,iBALiD;AAMzD,MAAMG,UAAU,GACdH,iBAAiB,IACdV,UAAU,CAACI,KAAX,CAAiB,oBAAjB,CADH,IAEGJ,UAAU,CAACI,KAAX,CAAiB,iBAAjB,CAFH,IAGGJ,UAAU,CAACI,KAAX,CAAiB,uBAAjB,CAHH,IAIGJ,UAAU,CAACI,KAAX,CAAiB,yBAAjB,CAJH,IAKGJ,UAAU,CAACI,KAAX,CAAiB,uBAAjB,CANL;AAQA,MAAMU,YAAY,GAAGzB,KAAK,CAAC0B,WAAN,CAAkB,UAACJ,KAAD,EAAmB;AACxDX,IAAAA,UAAU,CAACgB,GAAX,CAAe,UAAf,EAA2BxB,aAAa,CAACmB,KAAD,CAAxC;AACD,GAFoB,EAElB,CAACX,UAAD,CAFkB,CAArB;;AAIA,MAAMiB,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AACjC,QAAIpB,cAAc,IAAIA,cAAc,CAACqB,IAArC,EAA2C;AACzCrB,MAAAA,cAAc,CAACqB,IAAf,CAAoB,WAApB;AACD;AACF,GAJD;;AAMA,sBACE,eAAC,oBAAD,eACMf,IADN;AAEE,IAAA,MAAM,EAAC,uBAFT;AAGE,IAAA,KAAK,EAAEI,SAHT;AAIE,IAAA,QAAQ,EAAEM,UAJZ;AAKE,IAAA,QAAQ,EAAEC,YALZ;AAME,IAAA,WAAW,EAAEjB,cAAc,IAAIA,cAAc,CAACqB,IAAjC,GAAwCD,oBAAxC,GAA+DR,SAN9E;AAOE,IAAA,OAAO,EAAER,MAAM,CAACkB,WAPlB;AAQE,IAAA,IAAI,EAAE5B,WAAW,CAAC6B;AARpB,KADF;AAYD,CApCD;;AAsCA,eAAerB,gBAAf","sourcesContent":["import React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { LineHeightSelect } from '@ali/we-toolbar';\nimport { PluginRoles } from '@ali/4ever-bamboo';\nimport { ToolbarMode } from '@ali/4ever-component';\nimport { setLineHeight } from '../actions';\n;\n\nconst MemoLineHeightSelect = React.memo(LineHeightSelect);\n\ninterface ISideBarTriggerProps {\n  open?: Function;\n}\n\nexport interface LineHeightButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n  toolbarMode?: ToolbarMode;\n  sideBarTrigger?: ISideBarTriggerProps;\n}\n\nexport function sideBarTriggerFactory<T = any>(Component: React.ComponentType<T>, sideBarTrigger: ISideBarTriggerProps) {\n  return (props) => {\n    return <Component {...props} sideBarTrigger={sideBarTrigger} />;\n  };\n}\n\nconst LineHeightButton = (props: LineHeightButtonProps) => {\n  const { controller, locale, toolbarMode, sideBarTrigger, ...rest } = props;\n  const { line, lineRule = 'auto' } = controller.query('getLineHeight');\n  // 组件只支持多倍行距，undefined 或 固定值情况视为 NaN 以便组件不勾选\n  const lineValue = parseFloat(lineRule !== 'auto' ? undefined : line);\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled =\n    isCollapsedAtEdge\n    || controller.query('isSelectionInImage')\n    || controller.query('isSelectionInHr')\n    || controller.query('isSelectionInTaskList')\n    || controller.query('isSelectionInListSymbol')\n    || controller.query('isSelectionInLinkCard');\n\n  const handleChange = React.useCallback((value: number) => {\n    controller.run('onAction', setLineHeight(value));\n  }, [controller]);\n\n  const handleClickCustomize = () => {\n    if (sideBarTrigger && sideBarTrigger.open) {\n      sideBarTrigger.open('paragraph');\n    }\n  };\n\n  return (\n    <MemoLineHeightSelect\n      {...rest}\n      testid=\"bi-toolbar-lineheight\"\n      value={lineValue}\n      disabled={isDisabled}\n      onChange={handleChange}\n      onCustomize={sideBarTrigger && sideBarTrigger.open ? handleClickCustomize : undefined}\n      tooltip={locale.buttonTitle}\n      role={PluginRoles.lineHeightSelect}\n    />\n  );\n};\n\nexport default LineHeightButton;\n"],"file":"lineHeightButton.js"}