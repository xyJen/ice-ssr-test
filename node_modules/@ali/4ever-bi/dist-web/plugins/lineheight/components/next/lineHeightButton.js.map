{"version":3,"sources":["../../../../../../src/plugins/lineheight/components/next/lineHeightButton.tsx"],"names":["React","PluginRoles","LineHeightSelect","setLineHeight","sideBarTriggerFactory","Component","sideBarTrigger","props","LineHeightButton","controller","locale","rest","query","line","lineRule","lineValue","parseFloat","undefined","isCollapsedAtEdge","value","selection","isDisabled","handleChange","useCallback","run","handleClickCustomize","open","buttonTitle","lineHeightSelect","customButtonTitle"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;qBAC4B,a;AAC5B,SAASC,WAAT,QAA6B,mBAA7B;AACA,SAASC,gBAAT,QAAuD,sBAAvD;AACA;AACA;AACA,SAASC,aAAT;AAaA,OAAO,SAASC,qBAAT,CAAwCC,SAAxC,EAA2EC,cAA3E,EAAiH;AACtH,SAAO,UAACC,KAAD,EAAW;AAChB,wBAAO,eAAC,SAAD,eAAeA,KAAf;AAAsB,MAAA,cAAc,EAAED;AAAtC,OAAP;AACD,GAFD;AAGD;;AAED,IAAME,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACD,KAAD,EAAkC;AAAA,MACjDE,UADiD,GACDF,KADC,CACjDE,UADiD;AAAA,MACrCC,MADqC,GACDH,KADC,CACrCG,MADqC;AAAA,MAC7BJ,cAD6B,GACDC,KADC,CAC7BD,cAD6B;AAAA,MACVK,IADU,iCACDJ,KADC;;AAAA,0BAErBE,UAAU,CAACG,KAAX,CAAiB,eAAjB,CAFqB;AAAA,MAEjDC,IAFiD,qBAEjDA,IAFiD;AAAA,gDAE3CC,QAF2C;AAAA,MAE3CA,QAF2C,sCAEhC,MAFgC,0BAGzD;;;AACA,MAAMC,SAAS,GAAGC,UAAU,CAACF,QAAQ,KAAK,MAAb,GAAsBG,SAAtB,GAAkCJ,IAAnC,CAA5B;AAJyD,MAKjDK,iBALiD,GAK3BT,UAAU,CAACU,KAAX,CAAiBC,SALU,CAKjDF,iBALiD;AAOzD,MAAMG,UAAU,GACdH,iBAAiB,IACdT,UAAU,CAACG,KAAX,CAAiB,oBAAjB,CADH,IAEGH,UAAU,CAACG,KAAX,CAAiB,iBAAjB,CAFH,IAGGH,UAAU,CAACG,KAAX,CAAiB,uBAAjB,CAHH,IAIGH,UAAU,CAACG,KAAX,CAAiB,yBAAjB,CAJH,IAKGH,UAAU,CAACG,KAAX,CAAiB,uBAAjB,CANL;AAQA,MAAMU,YAAY,GAAGtB,KAAK,CAACuB,WAAN,CAAkB,UAACJ,KAAD,EAAmB;AACxDV,IAAAA,UAAU,CAACe,GAAX,CAAe,UAAf,EAA2BrB,aAAa,CAACgB,KAAD,CAAxC;AACD,GAFoB,EAElB,CAACV,UAAD,CAFkB,CAArB;AAIA,MAAMgB,oBAAoB,GAAGzB,KAAK,CAACuB,WAAN,CAAkB,YAAM;AACnD,QAAIjB,cAAc,IAAIA,cAAc,CAACoB,IAArC,EAA2C;AACzCpB,MAAAA,cAAc,CAACoB,IAAf,CAAoB,WAApB;AACD;AACF,GAJ4B,EAI1B,CAACpB,cAAD,CAJ0B,CAA7B;AAMA,sBACE,eAAC,gBAAD;AACE,IAAA,MAAM,EAAC,uBADT;AAEE,IAAA,KAAK,EAAES,SAFT;AAGE,IAAA,QAAQ,EAAE,CAAC,CAACM,UAHd;AAIE,IAAA,QAAQ,EAAEC,YAJZ;AAKE,IAAA,WAAW,EAAEhB,cAAc,IAAIA,cAAc,CAACoB,IAAjC,GAAwCD,oBAAxC,GAA+DR,SAL9E;AAME,IAAA,OAAO,EAAEP,MAAF,oBAAEA,MAAM,CAAEiB,WANnB;AAOE,IAAA,IAAI,EAAE1B,WAAW,CAAC2B,gBAPpB;AAQE,IAAA,iBAAiB,EAAElB,MAAF,oBAAEA,MAAM,CAAEmB;AAR7B,KASMlB,IATN,EADF;AAaD,CAtCD;;AAwCA,eAAeH,gBAAf","sourcesContent":["import React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { PluginRoles, } from '@ali/4ever-bamboo';\nimport { LineHeightSelect, IToolbarButtonConfig } from '@ali/4ever-component';\n;\n;\nimport { setLineHeight } from '../../actions';\n\n\nexport interface ISideBarTriggerProps {\n  open?: Function;\n}\n\nexport interface LineHeightButtonProps extends IToolbarButtonConfig {\n  controller: Controller;\n  locale?: Record<string, string>;\n  sideBarTrigger?: ISideBarTriggerProps;\n}\n\nexport function sideBarTriggerFactory<T = any>(Component: React.ComponentType<T>, sideBarTrigger: ISideBarTriggerProps) {\n  return (props) => {\n    return <Component {...props} sideBarTrigger={sideBarTrigger} />;\n  };\n}\n\nconst LineHeightButton = (props: LineHeightButtonProps) => {\n  const { controller, locale, sideBarTrigger, ...rest } = props;\n  const { line, lineRule = 'auto' } = controller.query('getLineHeight');\n  // 组件只支持多倍行距，undefined 或 固定值情况视为 NaN 以便组件不勾选\n  const lineValue = parseFloat(lineRule !== 'auto' ? undefined : line);\n  const { isCollapsedAtEdge } = controller.value.selection;\n\n  const isDisabled =\n    isCollapsedAtEdge\n    || controller.query('isSelectionInImage')\n    || controller.query('isSelectionInHr')\n    || controller.query('isSelectionInTaskList')\n    || controller.query('isSelectionInListSymbol')\n    || controller.query('isSelectionInLinkCard');\n\n  const handleChange = React.useCallback((value: number) => {\n    controller.run('onAction', setLineHeight(value));\n  }, [controller]);\n\n  const handleClickCustomize = React.useCallback(() => {\n    if (sideBarTrigger && sideBarTrigger.open) {\n      sideBarTrigger.open('paragraph');\n    }\n  }, [sideBarTrigger]);\n\n  return (\n    <LineHeightSelect\n      testid=\"bi-toolbar-lineheight\"\n      value={lineValue}\n      disabled={!!isDisabled}\n      onChange={handleChange}\n      onCustomize={sideBarTrigger && sideBarTrigger.open ? handleClickCustomize : undefined}\n      tooltip={locale?.buttonTitle}\n      role={PluginRoles.lineHeightSelect}\n      customButtonTitle={locale?.customButtonTitle}\n      {...rest}\n    />\n  );\n};\n\nexport default LineHeightButton;\n"],"file":"lineHeightButton.js"}