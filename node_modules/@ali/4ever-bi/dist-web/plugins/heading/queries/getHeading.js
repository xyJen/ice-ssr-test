import { environment, Block } from '@ali/4ever-cangjie';
import { Heading, Paragraph } from '@ali/4ever-mo';
import { getRangesFromEditor } from '@ali/4ever-utils';
import getHeadingAtRanges from "../utils/getHeadingAtRanges";
export default function getHeading(controller) {
  var _controller$value = controller.value,
      startBlock = _controller$value.startBlock,
      endBlock = _controller$value.endBlock; // 多个块级元素时返回空，以便区分正文（移动端不做此处理）

  var emptyHeading = environment.IS_MOBILE ? 'paragraph' : ''; // 尽量避免遍历 ranges

  if ((startBlock == null ? void 0 : startBlock.type) !== (endBlock == null ? void 0 : endBlock.type)) return emptyHeading;
  var ranges = getRangesFromEditor(controller);
  var headings = getHeadingAtRanges(controller, ranges);

  if (headings.length === 1) {
    var heading = Block.create({
      type: headings[0]
    });

    if (Paragraph.isParagraph(heading) || Heading.isHeading(heading)) {
      return heading.type;
    }
  }

  return emptyHeading;
}
//# sourceMappingURL=getHeading.js.map