{"version":3,"sources":["../../../../../src/plugins/heading/queries/isCollapsedAtEmptyHeading.ts"],"names":["Text","Heading","isCollapsedAtEmptyHeading","controller","range","isCollapsed","isCollapsedAtEdge","document","value","block","getClosestBlock","focus","key","isHeading","text","isTextList","nodes"],"mappings":"AAAA,SAASA,IAAT,QAA4C,oBAA5C;AACA,SAASC,OAAT,QAAwB,eAAxB;AAEA,eAAe,SAASC,yBAAT,CAAmCC,UAAnC,EAA2DC,KAA3D,EAAsF;AAAA,MAC3FC,WAD2F,GACxDD,KADwD,CAC3FC,WAD2F;AAAA,MAC9EC,iBAD8E,GACxDF,KADwD,CAC9EE,iBAD8E,EAEnG;;AACA,MAAI,CAACD,WAAD,IAAgBC,iBAApB,EAAuC,OAAO,KAAP;AAH4D,MAK3FC,QAL2F,GAK9EJ,UAAU,CAACK,KALmE,CAK3FD,QAL2F;AAMnG,MAAME,KAAK,GAAGF,QAAQ,CAACG,eAAT,CAAyBN,KAAK,CAACO,KAAN,CAAYC,GAArC,CAAd,CANmG,CAQnG;;AACA,MAAI,CAACX,OAAO,CAACY,SAAR,CAAkBJ,KAAlB,CAAL,EAA+B,OAAO,KAAP;AAE/B,SAAO,CAAAA,KAAK,QAAL,YAAAA,KAAK,CAAEK,IAAP,MAAgB,EAAhB,IAAsBd,IAAI,CAACe,UAAL,CAAgBN,KAAK,CAACO,KAAtB,CAA7B;AACD","sourcesContent":["import { Text, Controller, Selection } from '@ali/4ever-cangjie';\nimport { Heading } from '@ali/4ever-mo';\n\nexport default function isCollapsedAtEmptyHeading(controller: Controller, range: Selection): boolean {\n  const { isCollapsed, isCollapsedAtEdge } = range;\n  // 边缘不算\n  if (!isCollapsed || isCollapsedAtEdge) return false;\n\n  const { document } = controller.value;\n  const block = document.getClosestBlock(range.focus.key);\n\n  // 段落和标题以外的块级元素不算\n  if (!Heading.isHeading(block)) return false;\n\n  return block?.text === '' && Text.isTextList(block.nodes);\n}\n"],"file":"isCollapsedAtEmptyHeading.js"}