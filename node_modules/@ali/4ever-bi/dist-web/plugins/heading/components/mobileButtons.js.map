{"version":3,"sources":["../../../../../src/plugins/heading/components/mobileButtons.tsx"],"names":["React","styled","setHeading","toggleBlockquote","disableBlockquote","isDisabled","MOBILE_TOOLBAR","fontSize","width","fw","icon","paragraph","blockquote","Title","div","props","isBlockActive","type","block","data","useClick","controller","hType","handleClick","useCallback","run","createMobileHeading","Object","keys","reduce","result","Wrapper","item","value","focusBlock","anchorBlock","isActive","locale","title","replace"],"mappings":"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","sourcesContent":["/* eslint-disable no-param-reassign */\n/* eslint-disable react-hooks/rules-of-hooks */\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { Block } from '@ali/4ever-cangjie';\nimport { setHeading } from '../actions';\nimport { toggleBlockquote, disableBlockquote } from '@ali/4ever-utils';\nimport type { MobileToolbarButtonProps } from '@ali/4ever-component';\nimport { isDisabled } from './headingSimpleButton';\n\nconst MOBILE_TOOLBAR = {\n  'heading-1': {\n    fontSize: 17,\n    width: 81,\n    fw: 'bold',\n    icon: 'h1',\n  },\n  'heading-2': {\n    fontSize: 16,\n    width: 74,\n    fw: 'bold',\n    icon: 'h2',\n  },\n  'heading-3': {\n    fontSize: 15,\n    width: 67,\n    fw: 'bold',\n    icon: 'h3',\n  },\n  'heading-4': {\n    fontSize: 14,\n    width: 62,\n    fw: 'bold',\n    icon: 'h4',\n  },\n  paragraph: {\n    fontSize: 14,\n    width: 55,\n    fw: 'inherit',\n    icon: 'paragraph',\n  },\n  blockquote: {\n    fontSize: 14,\n    width: 55,\n    fw: 'inherit',\n    icon: 'blockquote',\n  },\n};\n\nconst Title = styled.div<{ fontSize: number; fw: 'bold' | 'inherit' }>`\n  color: black;\n  font-weight: ${(props) => props.fw};\n  font-size: ${(props) => props.fontSize}px;\n`;\n\nfunction isBlockActive(type: string, block: Block | null) {\n  if (!block) {\n    return false;\n  }\n  if (type === 'blockquote') {\n    return block.data.blockquote;\n  }\n  if (type === 'paragraph') {\n    return block.type === type && !block.data.blockquote;\n  }\n  return block.type === type;\n}\n\nfunction useClick(controller, hType) {\n  const handleClick = React.useCallback(() => {\n    if (hType === 'blockquote') {\n      controller.run('onAction', setHeading('paragraph'));\n      controller.run('onAction', toggleBlockquote());\n    } else {\n      controller.run('onAction', setHeading(hType));\n      controller.run('onAction', disableBlockquote());\n    }\n  }, [controller, hType]);\n  return handleClick;\n}\n\nexport default function createMobileHeading() {\n  return Object.keys(MOBILE_TOOLBAR).reduce((result, hType) => {\n    result[`${hType}MobileBig`] = (props: MobileToolbarButtonProps) => {\n      const { icon } = MOBILE_TOOLBAR[hType];\n      const { controller, Wrapper, item } = props;\n\n      const { focusBlock, anchorBlock } = controller.value;\n      const isActive =\n        focusBlock === anchorBlock && isBlockActive(hType, focusBlock);\n      const handleClick = useClick(controller, hType);\n      return (\n        <Wrapper\n          item={item}\n          type=\"big\"\n          onClick={handleClick}\n          isFocused={isActive}\n          isDisabled={isDisabled(controller)}\n          icon={icon}\n        />\n      );\n    };\n    result[`${hType}Mobile`] = (props: MobileToolbarButtonProps) => {\n      const { controller, Wrapper, item, locale } = props;\n      const handleClick = useClick(controller, hType);\n      const title = locale && locale[`${hType.replace('-', '')}Mobile`];\n\n      const { focusBlock, anchorBlock } = controller.value;\n      const isActive =\n        focusBlock === anchorBlock && isBlockActive(hType, focusBlock);\n      const { fontSize, width, fw } = MOBILE_TOOLBAR[hType];\n\n      return (\n        <React.Fragment>\n          <Wrapper\n            item={item}\n            type=\"horiz\"\n            width={width}\n            isActive={isActive}\n            isDisabled={isDisabled(controller)}\n            onClick={handleClick}\n          >\n            <Title fontSize={fontSize} fw={fw}>\n              {title}\n            </Title>\n          </Wrapper>\n        </React.Fragment>\n      );\n    };\n    return result;\n  }, {});\n}\n"],"file":"mobileButtons.js"}