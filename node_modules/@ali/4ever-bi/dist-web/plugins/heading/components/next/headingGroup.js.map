{"version":3,"sources":["../../../../../../src/plugins/heading/components/next/headingGroup.tsx"],"names":["React","FontSizeMaxSelect","PluginRoles","toggleBlockquote","setHeading","BLOCKQUOTE_KEY","getHeadingGroupWidth","toolbarWidth","HeadingGroup","props","controller","locale","width","rest","type","query","isCollapsedAtEdge","value","selection","isDisabled","handleChange","useCallback","headingStr","run","headingGroup"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAASC,iBAAT,QAAwD,sBAAxD;AACA,SAASC,WAAT,QAA4B,mBAA5B;AAEA,SAASC,gBAAT,QAAiC,kBAAjC;AACA,SAASC,UAAT;AACA;AAEA,IAAMC,cAAc,GAAG,YAAvB;AAQA,OAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,OAAgD;AAAA,MAA7CC,YAA6C,QAA7CA,YAA6C;;AAClF,MAAIA,YAAY,GAAG,IAAnB,EAAyB;AAAE,WAAO,GAAP;AAAa;;AACxC,MAAIA,YAAY,GAAG,IAAnB,EAAyB;AAAE,WAAO,GAAP;AAAa;;AACxC,MAAIA,YAAY,GAAG,IAAnB,EAAyB;AAAE,WAAO,GAAP;AAAa;;AACxC,MAAIA,YAAY,GAAG,IAAnB,EAAyB;AAAE,WAAO,GAAP;AAAa;;AACxC,SAAO,GAAP;AACD,CANM;AAQP,eAAe,SAASC,YAAT,CAAsBC,KAAtB,EAAgD;AAAA,MACrDC,UADqD,GACRD,KADQ,CACrDC,UADqD;AAAA,MACzCC,MADyC,GACRF,KADQ,CACzCE,MADyC;AAAA,qBACRF,KADQ,CACjCG,KADiC;AAAA,MACjCA,KADiC,6BACzB,GADyB;AAAA,MACjBC,IADiB,iCACRJ,KADQ;;AAE7D,MAAMK,IAAI,GAAGJ,UAAU,CAACK,KAAX,CAAiB,eAAjB,IAAoCV,cAApC,GAAqDK,UAAU,CAACK,KAAX,CAAiB,YAAjB,CAAlE;AAF6D,MAGrDC,iBAHqD,GAG/BN,UAAU,CAACO,KAAX,CAAiBC,SAHc,CAGrDF,iBAHqD;AAI7D,MAAMG,UAAU,GAAGH,iBAAiB,IAAIN,UAAU,CAACK,KAAX,CAAiB,iBAAjB,CAArB,IAA4DL,UAAU,CAACK,KAAX,CAAiB,yBAAjB,CAA/E;AACA,MAAMK,YAAY,GAAGpB,KAAK,CAACqB,WAAN,CAAkB,UAACC,UAAD,EAAwB;AAC7D,QAAIA,UAAU,KAAKjB,cAAnB,EAAmC;AACjC,UAAIS,IAAI,KAAK,WAAb,EAA0B;AACxB;AACAJ,QAAAA,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BnB,UAAU,CAAC,WAAD,CAArC;AACD;;AACDM,MAAAA,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BpB,gBAAgB,EAA3C;AACD,KAND,MAMO;AACL,UAAIW,IAAI,KAAKT,cAAb,EAA6B;AAC3B;AACAK,QAAAA,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BpB,gBAAgB,EAA3C;AACD;;AACDO,MAAAA,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BnB,UAAU,CAACkB,UAAD,CAArC;AACD;AACF,GAdoB,EAclB,CAACZ,UAAD,EAAaI,IAAb,CAdkB,CAArB;AAgBA,sBACE,eAAC,iBAAD;AACE,IAAA,MAAM,EAAC,0BADT;AAEE,IAAA,QAAQ,EAAE,CAAC,CAACK,UAFd;AAGE,IAAA,KAAK,EAAEL,IAHT;AAIE,IAAA,QAAQ,EAAEM,YAJZ;AAKE,IAAA,KAAK,EAAER,KALT;AAME,IAAA,IAAI,EAAEV,WAAW,CAACsB,YANpB;AAOE,IAAA,MAAM,EAAEb;AAPV,KAQME,IARN,EADF;AAYD","sourcesContent":["import * as React from 'react';\nimport { FontSizeMaxSelect, IToolbarButtonConfig } from '@ali/4ever-component';\nimport { PluginRoles } from '@ali/4ever-bamboo';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { toggleBlockquote } from '@ali/4ever-utils';\nimport { setHeading } from '../../actions';\n;\n\nconst BLOCKQUOTE_KEY = 'blockquote';\n\ninterface HeadingGroupProps extends IToolbarButtonConfig {\n  controller: Controller;\n  locale?: Record<string, string>;\n  width?: number\n}\n\nexport const getHeadingGroupWidth = ({ toolbarWidth }: { toolbarWidth: number }) => {\n  if (toolbarWidth > 1720) { return 492; }\n  if (toolbarWidth > 1644) { return 414; }\n  if (toolbarWidth > 1568) { return 340; }\n  if (toolbarWidth > 1492) { return 264; }\n  return 188;\n}\n\nexport default function HeadingGroup(props: HeadingGroupProps) {\n  const { controller, locale, width = 188, ...rest } = props;\n  const type = controller.query('hasBlockQuote') ? BLOCKQUOTE_KEY : controller.query('getHeading');\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled = isCollapsedAtEdge || controller.query('isSelectionInHr') || controller.query('isSelectionInListSymbol');\n  const handleChange = React.useCallback((headingStr: string) => {\n    if (headingStr === BLOCKQUOTE_KEY) {\n      if (type !== 'paragraph') {\n        // 变成引用同时去除标题\n        controller.run('onAction', setHeading('paragraph'));\n      }\n      controller.run('onAction', toggleBlockquote());\n    } else {\n      if (type === BLOCKQUOTE_KEY) {\n        // 变成标题同时去除引用\n        controller.run('onAction', toggleBlockquote());\n      }\n      controller.run('onAction', setHeading(headingStr));\n    }\n  }, [controller, type]);\n\n  return (\n    <FontSizeMaxSelect\n      testid=\"bi-toolbar-heading-group\"\n      disabled={!!isDisabled}\n      value={type}\n      onChange={handleChange}\n      width={width}\n      role={PluginRoles.headingGroup}\n      locale={locale}\n      {...rest}\n    />\n  );\n}\n"],"file":"headingGroup.js"}