{"version":3,"sources":["../../../../../src/plugins/heading/components/headingGroup.tsx"],"names":["React","FontSizeMaxSelect","PluginRoles","toggleBlockquote","setHeading","BLOCKQUOTE_KEY","MemoFontSizeMaxSelect","memo","HeadingGroup","props","controller","type","query","isCollapsedAtEdge","value","selection","isDisabled","handleChange","useCallback","headingStr","run","headingGroup"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAASC,iBAAT,QAAkC,iBAAlC;AAEA,SAASC,WAAT,QAA4B,mBAA5B;AACA,SAASC,gBAAT,QAAiC,kBAAjC;AACA,SAASC,UAAT;AACA;AAEA,IAAMC,cAAc,GAAG,YAAvB;AACA,IAAMC,qBAAqB,gBAAGN,KAAK,CAACO,IAAN,CAAWN,iBAAX,CAA9B;AAMA,eAAe,SAASO,YAAT,CAAsBC,KAAtB,EAAgD;AAAA,MACrDC,UADqD,GACtCD,KADsC,CACrDC,UADqD;AAE7D,MAAMC,IAAI,GAAGD,UAAU,CAACE,KAAX,CAAiB,eAAjB,IAAoCP,cAApC,GAAqDK,UAAU,CAACE,KAAX,CAAiB,YAAjB,CAAlE;AAF6D,MAGrDC,iBAHqD,GAG/BH,UAAU,CAACI,KAAX,CAAiBC,SAHc,CAGrDF,iBAHqD;AAI7D,MAAMG,UAAU,GAAGH,iBAAiB,IAAIH,UAAU,CAACE,KAAX,CAAiB,iBAAjB,CAArB,IAA4DF,UAAU,CAACE,KAAX,CAAiB,yBAAjB,CAA/E;AACA,MAAMK,YAAY,GAAGjB,KAAK,CAACkB,WAAN,CAAkB,UAACC,UAAD,EAAwB;AAC7D,QAAIA,UAAU,KAAKd,cAAnB,EAAmC;AACjC,UAAIM,IAAI,KAAK,WAAb,EAA0B;AACxB;AACAD,QAAAA,UAAU,CAACU,GAAX,CAAe,UAAf,EAA2BhB,UAAU,CAAC,WAAD,CAArC;AACD;;AACDM,MAAAA,UAAU,CAACU,GAAX,CAAe,UAAf,EAA2BjB,gBAAgB,EAA3C;AACD,KAND,MAMO;AACL,UAAIQ,IAAI,KAAKN,cAAb,EAA6B;AAC3B;AACAK,QAAAA,UAAU,CAACU,GAAX,CAAe,UAAf,EAA2BjB,gBAAgB,EAA3C;AACD;;AACDO,MAAAA,UAAU,CAACU,GAAX,CAAe,UAAf,EAA2BhB,UAAU,CAACe,UAAD,CAArC;AACD;AACF,GAdoB,EAclB,CAACT,UAAD,EAAaC,IAAb,CAdkB,CAArB;AAgBA,sBACE,eAAC,qBAAD;AACE,IAAA,MAAM,EAAC,0BADT;AAEE,IAAA,QAAQ,EAAE,CAAC,CAACK,UAFd;AAGE,IAAA,KAAK,EAAEL,IAHT;AAIE,IAAA,QAAQ,EAAEM,YAJZ,CAKE;AALF;AAME,IAAA,aAAa,EAAE,IANjB;AAOE,IAAA,IAAI,EAAEf,WAAW,CAACmB;AAPpB,IADF;AAWD","sourcesContent":["import * as React from 'react';\nimport { FontSizeMaxSelect } from '@ali/we-toolbar';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { PluginRoles } from '@ali/4ever-bamboo';\nimport { toggleBlockquote } from '@ali/4ever-utils';\nimport { setHeading } from '../actions';\n;\n\nconst BLOCKQUOTE_KEY = 'blockquote';\nconst MemoFontSizeMaxSelect = React.memo(FontSizeMaxSelect);\n\ninterface HeadingGroupProps {\n  controller: Controller;\n}\n\nexport default function HeadingGroup(props: HeadingGroupProps) {\n  const { controller } = props;\n  const type = controller.query('hasBlockQuote') ? BLOCKQUOTE_KEY : controller.query('getHeading');\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled = isCollapsedAtEdge || controller.query('isSelectionInHr') || controller.query('isSelectionInListSymbol');\n  const handleChange = React.useCallback((headingStr: string) => {\n    if (headingStr === BLOCKQUOTE_KEY) {\n      if (type !== 'paragraph') {\n        // 变成引用同时去除标题\n        controller.run('onAction', setHeading('paragraph'));\n      }\n      controller.run('onAction', toggleBlockquote());\n    } else {\n      if (type === BLOCKQUOTE_KEY) {\n        // 变成标题同时去除引用\n        controller.run('onAction', toggleBlockquote());\n      }\n      controller.run('onAction', setHeading(headingStr));\n    }\n  }, [controller, type]);\n\n  return (\n    <MemoFontSizeMaxSelect\n      testid=\"bi-toolbar-heading-group\"\n      disabled={!!isDisabled}\n      value={type}\n      onChange={handleChange}\n      // 这个值是标题仅显示两项且工具栏未显示更多时的长度，若工具栏的内容变化，需要更新\n      toolbarLength={1290}\n      role={PluginRoles.headingGroup}\n    />\n  );\n}\n"],"file":"headingGroup.js"}