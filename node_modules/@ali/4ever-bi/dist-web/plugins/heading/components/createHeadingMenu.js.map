{"version":3,"sources":["../../../../../src/plugins/heading/components/createHeadingMenu.tsx"],"names":["React","MenuItem","InlineMenuItem","Heading","Paragraph","setHeading","transformHeading","isSelectionInOnlyHeading","createHeadingMenu","Component","headingType","HeadingMenu","props","menuItem","controller","action","title","rest","isDisabled","query","TYPE","value","handleClick","run","heading1","Heading1","heading2","Heading2","heading3","Heading3","heading4","Heading4","paragraph","heading1Inline","heading2Inline","heading3Inline","heading4Inline"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAASC,QAAT,EAAmBC,cAAnB,QAAyC,gBAAzC;AACA,SAASC,OAAT,EAAkBC,SAAlB,QAAmC,eAAnC;AAEA,SAASC,UAAT,EAAqBC,gBAArB;AACA,SAASC,wBAAT;;AAEA,SAASC,iBAAT,CAA2BC,SAA3B,EAAqDC,WAArD,EAA0E;AACxE,SAAO,SAASC,WAAT,CAAqBC,KAArB,EAAgD;AAAA,QAC7CC,QAD6C,GACpBD,KADoB,CAC7CC,QAD6C;AAAA,QACnCC,UADmC,GACpBF,KADoB,CACnCE,UADmC;;AAAA,QAE7CC,MAF6C,GAElBF,QAFkB,CAE7CE,MAF6C;AAAA,QAErCC,KAFqC,GAElBH,QAFkB,CAErCG,KAFqC;AAAA,QAE3BC,IAF2B,iCAElBJ,QAFkB;;AAIrD,QAAMK,UAAU,GACdJ,UAAU,CAACK,KAAX,CAAiB,uBAAjB,KACGL,UAAU,CAACK,KAAX,CAAiB,6BAAjB,CADH,IAEIJ,MAAM,KAAK,QAAX,IAAuBL,WAAW,KAAKN,SAAS,CAACgB,IAAjD,IAAyDb,wBAAwB,CAACO,UAAU,CAACO,KAAZ,EAAmBjB,SAAS,CAACgB,IAA7B,CAHvF;;AAKA,QAAME,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB,UAAIP,MAAM,KAAK,QAAf,EAAyB;AACvB,eAAOD,UAAU,CAACS,GAAX,CAAe,UAAf,EAA2BjB,gBAAgB,CAACI,WAAD,CAA3C,CAAP;AACD;;AACDI,MAAAA,UAAU,CAACS,GAAX,CAAe,UAAf,EAA2BlB,UAAU,CAACK,WAAD,CAArC;AACD,KALD;;AAOA,wBACE,eAAC,SAAD;AAAW,MAAA,QAAQ,EAAEQ;AAArB,OAAqCD,IAArC;AAA2C,MAAA,OAAO,EAAEK,WAApD;AAAiE,MAAA,IAAI,EAAEZ;AAAvE,QACGM,KADH,CADF;AAKD,GArBD;AAsBD;;AAED,OAAO,IAAMQ,QAAQ,GAAGhB,iBAAiB,CAACP,QAAD,EAAWE,OAAO,CAACsB,QAAR,CAAiBL,IAA5B,CAAlC;AACP,OAAO,IAAMM,QAAQ,GAAGlB,iBAAiB,CAACP,QAAD,EAAWE,OAAO,CAACwB,QAAR,CAAiBP,IAA5B,CAAlC;AACP,OAAO,IAAMQ,QAAQ,GAAGpB,iBAAiB,CAACP,QAAD,EAAWE,OAAO,CAAC0B,QAAR,CAAiBT,IAA5B,CAAlC;AACP,OAAO,IAAMU,QAAQ,GAAGtB,iBAAiB,CAACP,QAAD,EAAWE,OAAO,CAAC4B,QAAR,CAAiBX,IAA5B,CAAlC;AACP,OAAO,IAAMY,SAAS,GAAGxB,iBAAiB,CAACP,QAAD,EAAW,WAAX,CAAnC;AACP,OAAO,IAAMgC,cAAc,GAAGzB,iBAAiB,CAACN,cAAD,EAAiBC,OAAO,CAACsB,QAAR,CAAiBL,IAAlC,CAAxC;AACP,OAAO,IAAMc,cAAc,GAAG1B,iBAAiB,CAACN,cAAD,EAAiBC,OAAO,CAACwB,QAAR,CAAiBP,IAAlC,CAAxC;AACP,OAAO,IAAMe,cAAc,GAAG3B,iBAAiB,CAACN,cAAD,EAAiBC,OAAO,CAAC0B,QAAR,CAAiBT,IAAlC,CAAxC;AACP,OAAO,IAAMgB,cAAc,GAAG5B,iBAAiB,CAACN,cAAD,EAAiBC,OAAO,CAAC4B,QAAR,CAAiBX,IAAlC,CAAxC","sourcesContent":["import * as React from 'react';\nimport { MenuItem, InlineMenuItem } from '@ali/we-design';\nimport { Heading, Paragraph } from '@ali/4ever-mo';\nimport { MenuItemInnerProps } from '@ali/4ever-component';\nimport { setHeading, transformHeading } from '../actions';\nimport { isSelectionInOnlyHeading } from '../utils/isSelectionInHeading';\n\nfunction createHeadingMenu(Component: React.FC<any>, headingType: string) {\n  return function HeadingMenu(props: MenuItemInnerProps) {\n    const { menuItem, controller } = props;\n    const { action, title, ...rest } = menuItem;\n\n    const isDisabled =\n      controller.query('isSelectionInLinkCard')\n      || controller.query('isSelectionInSubjectHeading')\n      || (action !== 'format' && headingType === Paragraph.TYPE && isSelectionInOnlyHeading(controller.value, Paragraph.TYPE));\n\n    const handleClick = () => {\n      if (action === 'format') {\n        return controller.run('onAction', transformHeading(headingType));\n      }\n      controller.run('onAction', setHeading(headingType));\n    };\n\n    return (\n      <Component disabled={isDisabled} {...rest} onClick={handleClick} role={headingType}>\n        {title}\n      </Component>\n    );\n  };\n}\n\nexport const heading1 = createHeadingMenu(MenuItem, Heading.Heading1.TYPE);\nexport const heading2 = createHeadingMenu(MenuItem, Heading.Heading2.TYPE);\nexport const heading3 = createHeadingMenu(MenuItem, Heading.Heading3.TYPE);\nexport const heading4 = createHeadingMenu(MenuItem, Heading.Heading4.TYPE);\nexport const paragraph = createHeadingMenu(MenuItem, 'paragraph');\nexport const heading1Inline = createHeadingMenu(InlineMenuItem, Heading.Heading1.TYPE);\nexport const heading2Inline = createHeadingMenu(InlineMenuItem, Heading.Heading2.TYPE);\nexport const heading3Inline = createHeadingMenu(InlineMenuItem, Heading.Heading3.TYPE);\nexport const heading4Inline = createHeadingMenu(InlineMenuItem, Heading.Heading4.TYPE);\n"],"file":"createHeadingMenu.js"}