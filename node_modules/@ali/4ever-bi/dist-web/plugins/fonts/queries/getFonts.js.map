{"version":3,"sources":["../../../../../src/plugins/fonts/queries/getFonts.ts"],"names":["getActiveFontsMark","defaultFonts","getFonts","controller","inheritedFonts","symbolFont","query","activeFontsMark","data","eastAsia","ascii"],"mappings":"AAGA,OAAOA,kBAAP,IAA6BC,YAA7B;AAEA,eAAe,SAASC,QAAT,CAAkBC,UAAlB,EAA0CC,cAA1C,EAA0E;AACvF,MAAMC,UAAU,GAAGF,UAAU,CAACG,KAAX,CAAiB,qBAAjB,EAAwC,OAAxC,CAAnB;AACA,MAAID,UAAJ,EAAgB,OAAOA,UAAP;AAChB,MAAME,eAAe,GAAGP,kBAAkB,CAACG,UAAD,EAAaC,cAAb,CAA1C;;AAEA,MAAIG,eAAJ,EAAqB;AAAA,gCACSA,eAAe,CAACC,IADzB;AAAA,QACXC,QADW,yBACXA,QADW;AAAA,QACDC,KADC,yBACDA,KADC;;AAEnB,QAAID,QAAQ,IAAIA,QAAQ,KAAKR,YAA7B,EAA2C;AACzC;AACA,aAAOQ,QAAP;AACD,KAHD,MAGO,IAAIC,KAAK,IAAIA,KAAK,KAAKT,YAAvB,EAAqC;AAC1C,aAAOS,KAAP;AACD;;AACD,WAAOT,YAAP;AACD,GAdsF,CAgBvF;;;AACA,SAAO,EAAP;AACD","sourcesContent":["\nimport { Controller } from '@ali/4ever-cangjie';\nimport { FontsMarkData } from '@ali/4ever-mo';\nimport getActiveFontsMark, { defaultFonts } from '../utils/getActiveFontsMark';\n\nexport default function getFonts(controller: Controller, inheritedFonts?: FontsMarkData) {\n  const symbolFont = controller.query('getSymbolStyleByKey', 'fonts');\n  if (symbolFont) return symbolFont;\n  const activeFontsMark = getActiveFontsMark(controller, inheritedFonts);\n\n  if (activeFontsMark) {\n    const { eastAsia, ascii } = activeFontsMark.data;\n    if (eastAsia && eastAsia !== defaultFonts) {\n      // 优先显示中文字体\n      return eastAsia;\n    } else if (ascii && ascii !== defaultFonts) {\n      return ascii;\n    }\n    return defaultFonts;\n  }\n\n  // 没有公共字体则返回空，以便区别默认\n  return '';\n}\n"],"file":"getFonts.js"}