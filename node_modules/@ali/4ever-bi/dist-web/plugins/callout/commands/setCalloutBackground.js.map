{"version":3,"sources":["../../../../../src/plugins/callout/commands/setCalloutBackground.ts"],"names":["Commands","ColorBlocks","setCalloutBackground","controller","key","background","node","value","document","getNode","isColorBlocks","metadata","data","bgcolor","command","setNodeByKey"],"mappings":";AAAA,SAAqBA,QAArB,QAAqC,oBAArC;AACA,SAASC,WAAT,QAA4B,eAA5B;AAEA,OAAO,SAASC,oBAAT,CACLC,UADK,EAELC,GAFK,EAGLC,UAHK,EAIL;AACA,MAAMC,IAAI,GAAGH,UAAU,CAACI,KAAX,CAAiBC,QAAjB,CAA0BC,OAA1B,CAAkCL,GAAlC,CAAb;;AACA,MAAI,CAACH,WAAW,CAACS,aAAZ,CAA0BJ,IAA1B,CAAL,EAAsC;AACpC,WAAOH,UAAP;AACD;;AACD,MAAMQ,QAAQ,gBACTL,IAAI,CAACM,IAAL,CAAUD,QADD,CAAd;;AAGA,MAAIN,UAAJ,EAAgB;AACdM,IAAAA,QAAQ,CAACE,OAAT,GAAmBR,UAAnB;AACD,GAFD,MAEO;AACL,WAAOM,QAAQ,CAACE,OAAhB;AACD;;AAED,SAAOV,UAAU,CAACW,OAAX,CAAmBd,QAAQ,CAACe,YAA5B,EAA0CX,GAA1C,EAA+C;AACpDQ,IAAAA,IAAI,eACCN,IAAI,CAACM,IADN;AAEFD,MAAAA,QAAQ,EAARA;AAFE;AADgD,GAA/C,CAAP;AAMD","sourcesContent":["import { Controller, Commands } from '@ali/4ever-cangjie';\nimport { ColorBlocks } from '@ali/4ever-mo';\n\nexport function setCalloutBackground(\n  controller: Controller,\n  key: string,\n  background?: string,\n) {\n  const node = controller.value.document.getNode(key);\n  if (!ColorBlocks.isColorBlocks(node)) {\n    return controller;\n  }\n  const metadata = {\n    ...node.data.metadata,\n  };\n  if (background) {\n    metadata.bgcolor = background;\n  } else {\n    delete metadata.bgcolor;\n  }\n\n  return controller.command(Commands.setNodeByKey, key, {\n    data: {\n      ...node.data,\n      metadata,\n    },\n  });\n}\n"],"file":"setCalloutBackground.js"}