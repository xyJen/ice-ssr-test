{"version":3,"sources":["../../../../../src/plugins/callout/mobile/index.ts"],"names":["StickerPlugin","isEmptyParagraph","CalloutPlugin","createRenderNode","commands","createOnAction","createOnQuery","onKeyDown","onCangjieCopyOrCut","queries","actions","moFactory","DEFAULT_STICKERS","Sticker","createCalloutPlugin","config","callout","locale","stickerConfig","lang","customSticker","sticker","params","renderNode","onCangjieCopy","onCangjieCut","onQuery","onAction","getNodeStyle","placeholder","text","when","controller","node","query"],"mappings":";AAAA,SACEA,aADF,EAEEC,gBAFF,EAGEC,aAHF,QAIO,mBAJP;AAMA,OAAOC,gBAAP;AACA,OAAO,KAAKC,QAAZ;AACA,OAAOC,cAAP;AACA,OAAOC,aAAP;AACA,OAAOC,SAAP;AACA,OAAOC,kBAAP;AACA,OAAOC,OAAP;AACA,OAAO,KAAKC,OAAZ;AACA,SAASC,SAAT,QAA0B,gCAA1B;IAEQC,gB,GAA8BZ,a,CAA9BY,gB;IAAkBC,O,GAAYb,a,CAAZa,O;;AAE1B,SAASC,mBAAT,CAA6BC,MAA7B,EAA+D;AAAA,wBACpCA,MADoC,CACrDC,OADqD;AAAA,MACrDA,OADqD,gCAC3C,EAD2C;AAAA,MAErDC,MAFqD,GAE1CD,OAF0C,CAErDC,MAFqD;;AAG7D,MAAMC,aAAa;AACjB;AACAC,IAAAA,IAAI,EAAE,OAFW;AAGjB;AACAC,IAAAA,aAAa,EAAE,CAACR,gBAAD;AAJE,KAKdG,MAAM,CAACM,OALO,CAAnB;;AAOA,MAAMA,OAAO,GAAG,IAAIR,OAAJ,CAAYK,aAAZ,CAAhB;AACA,MAAMI,MAAM,GAAG;AACbJ,IAAAA,aAAa,EAAbA,aADa;AAEbG,IAAAA,OAAO,EAAPA,OAFa;AAGbJ,IAAAA,MAAM,EAAED,OAAO,CAACC;AAHH,GAAf;AAMA,sBACKN,SAAS,CAAC,EAAD,CADd;AAEEY,IAAAA,UAAU,EAAEpB,gBAAgB,CAACmB,MAAD,CAF9B;AAGE;AACAE,IAAAA,aAAa,EAAEhB,kBAJjB;AAKEiB,IAAAA,YAAY,EAAEjB,kBALhB;AAMEkB,IAAAA,OAAO,EAAEpB,aAAa,EANxB;AAOEqB,IAAAA,QAAQ,EAAEtB,cAAc,CAACW,OAAD,CAP1B;AAQEY,IAAAA,YAAY,EAAE1B,aAAa,CAAC0B,YAR9B;AASE;AACAxB,IAAAA,QAAQ,EAARA,QAVF;AAWEG,IAAAA,SAAS,EAATA,SAXF;AAYEE,IAAAA,OAAO,EAAPA,OAZF;AAaEoB,IAAAA,WAAW,EAAE;AACXC,MAAAA,IAAI,EAAEb,MAAF,oBAAEA,MAAM,CAAEY,WADH;AAEXE,MAAAA,IAAI,EAAE,cAACC,UAAD,EAAaC,IAAb,EAAsB;AAC1B,eACEhC,gBAAgB,CAACgC,IAAD,CAAhB,IACAD,UAAU,CAACE,KAAX,CAAiB,sBAAjB,EAAyCD,IAAzC,MAAmDA,IADnD,IAEAD,UAAU,CAACE,KAAX,CAAiB,oBAAjB,EAAuCD,IAAvC,MAAiDA,IAHnD;AAKD;AARU;AAbf;AAwBD;;AAEDnB,mBAAmB,CAACJ,OAApB,GAA8BA,OAA9B;AAEA,eAAeI,mBAAf","sourcesContent":["import {\n  StickerPlugin,\n  isEmptyParagraph,\n  CalloutPlugin,\n} from '@ali/4ever-bamboo';\nimport { BiPlugin, BiPluginConfig } from '../../../types';\nimport createRenderNode from './createRenderNode';\nimport * as commands from '../commands';\nimport createOnAction from '../handlers/createOnAction';\nimport createOnQuery from '../handlers/createOnQuery';\nimport onKeyDown from '../handlers/onKeyDown';\nimport onCangjieCopyOrCut from '../handlers/onCangjieCopyOrCut';\nimport queries from '../queries';\nimport * as actions from '../actions';\nimport { moFactory } from '@ali/4ever-plugin-color-blocks';\n\nconst { DEFAULT_STICKERS, Sticker } = StickerPlugin;\n\nfunction createCalloutPlugin(config: BiPluginConfig): BiPlugin {\n  const { callout = {} } = config;\n  const { locale } = callout;\n  const stickerConfig = {\n    // @ts-ignore\n    lang: 'zh_CN',\n    // @ts-ignore\n    customSticker: [DEFAULT_STICKERS],\n    ...config.sticker,\n  };\n  const sticker = new Sticker(stickerConfig);\n  const params = {\n    stickerConfig,\n    sticker,\n    locale: callout.locale,\n  };\n\n  return {\n    ...moFactory({}),\n    renderNode: createRenderNode(params),\n    // Copy Cut 拦截作用于高亮块全选时\n    onCangjieCopy: onCangjieCopyOrCut,\n    onCangjieCut: onCangjieCopyOrCut,\n    onQuery: createOnQuery(),\n    onAction: createOnAction(callout),\n    getNodeStyle: CalloutPlugin.getNodeStyle,\n    // @ts-ignore 这里是 createCommands\n    commands,\n    onKeyDown,\n    queries,\n    placeholder: {\n      text: locale?.placeholder,\n      when: (controller, node) => {\n        return (\n          isEmptyParagraph(node) &&\n          controller.query('getCalloutStartBlock', node) === node &&\n          controller.query('getCalloutEndBlock', node) === node\n        );\n      },\n    },\n  };\n}\n\ncreateCalloutPlugin.actions = actions;\n\nexport default createCalloutPlugin;\n"],"file":"index.js"}