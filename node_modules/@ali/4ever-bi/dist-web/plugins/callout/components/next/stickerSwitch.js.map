{"version":3,"sources":["../../../../../../src/plugins/callout/components/next/stickerSwitch.tsx"],"names":["React","IconButton","IconEmoji","PluginRoles","setMetaData","setMetaDataAction","StickerSwitchButton","props","controller","locale","getNode","node","useState","data","metadata","showstk","showStk","setShowStk","handleClick","useCallback","v","run","needBlur","showEmoji","calloutSticker"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;qBAC4B,a;AAA5B,SAASC,UAAT,EAAqBC,SAArB,QAAsC,sBAAtC;AACA,SAASC,WAAT,QAA4B,mBAA5B;AAIA,SAASC,WAAW,IAAIC,iBAAxB;;wBA+BY,eAAC,SAAD,O;;AAvBZ,OAAO,IAAMC,mBAAkD,GAAG,SAArDA,mBAAqD,CAACC,KAAD,EAAW;AAAA;;AAAA,MACnEC,UADmE,GACnCD,KADmC,CACnEC,UADmE;AAAA,MACvDC,MADuD,GACnCF,KADmC,CACvDE,MADuD;AAAA,MAC/CC,OAD+C,GACnCH,KADmC,CAC/CG,OAD+C;AAE3E,MAAMC,IAAI,GAAGD,OAAO,EAApB;;AAF2E,wBAG7CV,KAAK,CAACY,QAAN,CAAe,CAAAD,IAAI,QAAJ,0BAAAA,IAAI,CAAEE,IAAN,uDAAYC,QAAZ,yCAAsBC,OAAtB,KAAgC,KAA/C,CAH6C;AAAA,MAGpEC,OAHoE;AAAA,MAG3DC,UAH2D;;AAK3E,MAAMC,WAAW,GAAGlB,KAAK,CAACmB,WAAN,CAAkB,YAAM;AAC1CF,IAAAA,UAAU,CAAC,UAAAG,CAAC,EAAI;AACd,UAAMP,IAAkC,GAAG,EAA3C,CADc,CAEd;;AACAA,MAAAA,IAAI,CAACE,OAAL,GAAe,CAACK,CAAhB;AACA,UAAMT,IAAI,GAAGD,OAAO,EAApB;AACAF,MAAAA,UAAU,CAACa,GAAX,CAAe,eAAf;AACAV,MAAAA,IAAI,IAAIH,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BhB,iBAAiB,CAAC;AAAEM,QAAAA,IAAI,EAAJA,IAAF;AAAQE,QAAAA,IAAI,EAAJA,IAAR;AAAcS,QAAAA,QAAQ,EAAE;AAAxB,OAAD,CAA5C,CAAR;AACA,aAAO,CAACF,CAAR;AACD,KARS,CAAV;AASD,GAVmB,EAUjB,EAViB,CAApB;AAYA,MAAI,CAACT,IAAL,EAAW,OAAO,IAAP;AAEX,sBACE,eAAC,UAAD;AACE,IAAA,OAAO,EAAEO,WADX;AAEE,IAAA,MAAM,EAAEF,OAFV;AAGE,IAAA,IAAI,MAHN;AAIE,IAAA,OAAO,EAAE,CAAAP,MAAM,QAAN,YAAAA,MAAM,CAAEc,SAAR,KAAqB,cAJhC;AAKE,IAAA,IAAI,EAAEpB,WAAW,CAACqB;AALpB,IADF;AASD,CA5BM","sourcesContent":["import React from 'react';\nimport { IconButton, IconEmoji } from '@ali/4ever-component';\nimport { PluginRoles } from '@ali/4ever-bamboo';\nimport { ColorBlocksMetaData, ColorBlocks } from '@ali/4ever-mo';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { Locale } from '../../types';\nimport { setMetaData as setMetaDataAction } from '../../actions';\n\nexport interface IColorIconMenuProps {\n  controller: Controller;\n  getNode: () => ColorBlocks | null;\n  locale: Locale;\n}\n\nexport const StickerSwitchButton: React.FC<IColorIconMenuProps> = (props) => {\n  const { controller, locale, getNode } = props;\n  const node = getNode();\n  const [showStk, setShowStk] = React.useState(node?.data?.metadata?.showstk ||false);\n\n  const handleClick = React.useCallback(() => {\n    setShowStk(v => {\n      const data: Partial<ColorBlocksMetaData> = {};\n      // @ts-ignore\n      data.showstk = !v;\n      const node = getNode();\n      controller.run('onCangjieBlur');\n      node && controller.run('onAction', setMetaDataAction({ node, data, needBlur: true }));\n      return !v;\n    });\n  }, []);\n\n  if (!node) return null;\n\n  return (\n    <IconButton\n      onClick={handleClick}\n      active={showStk}\n      icon={<IconEmoji />}\n      tooltip={locale?.showEmoji || 'Show sticker'}\n      role={PluginRoles.calloutSticker}\n    />\n  );\n}"],"file":"stickerSwitch.js"}