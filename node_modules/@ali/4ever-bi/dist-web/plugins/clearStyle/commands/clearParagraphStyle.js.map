{"version":3,"sources":["../../../../../src/plugins/clearStyle/commands/clearParagraphStyle.ts"],"names":["Commands","Heading","clearParagraphStyle","controller","range","forceClear","value","document","allBlocks","getLeafBlocksAtRange","forEach","block","shouldClear","isCollapsed","length","query","type","isHeading","data","list","blockquote","jc","ind","spacing","shd","rest","command","setNodeByKey","key"],"mappings":";;AAAA,SAAqBA,QAArB,QAAgD,oBAAhD;AACA,SAASC,OAAT,QAAwB,eAAxB;AAEA,eAAe,SAASC,mBAAT,CAA6BC,UAA7B,EAAqDC,KAArD,EAAuEC,UAAvE,EAA2F;AAAA,MAApBA,UAAoB;AAApBA,IAAAA,UAAoB,GAAP,KAAO;AAAA;;AAAA,MAChGC,KADgG,GACtFH,UADsF,CAChGG,KADgG;AAAA,MAEhGC,QAFgG,GAEnFD,KAFmF,CAEhGC,QAFgG;AAIxG,MAAMC,SAAS,GAAGD,QAAQ,CAACE,oBAAT,CAA8BL,KAA9B,CAAlB;AAEAI,EAAAA,SAAS,CAACE,OAAV,CAAkB,UAACC,KAAD,EAAW;AAC3B,QAAMC,WAAW,GAAGP,UAAU,KAAID,KAAJ,oBAAIA,KAAK,CAAES,WAAX,CAAV,IAAoCL,SAAS,CAACM,MAAV,GAAmB,CAAvD,IAA4DX,UAAU,CAACY,KAAX,CAAiB,qBAAjB,CAAhF;;AACA,QAAIJ,KAAK,IAAIC,WAAb,EAA0B;AACxB;AACA,UAAMI,IAAI,GAAGf,OAAO,CAACgB,SAAR,CAAkBN,KAAlB,IAA2B,WAA3B,GAAyCA,KAAK,CAACK,IAA5D,CAFwB,CAGxB;;AAHwB,wBAIqCL,KAAK,CAACO,IAJ3C;AAAA,UAIhBC,IAJgB,eAIhBA,IAJgB;AAAA,UAIVC,UAJU,eAIVA,UAJU;AAAA,UAIEC,EAJF,eAIEA,EAJF;AAAA,UAIMC,GAJN,eAIMA,GAJN;AAAA,UAIWC,OAJX,eAIWA,OAJX;AAAA,UAIoBC,GAJpB,eAIoBA,GAJpB;AAAA,UAI4BC,IAJ5B;;AAKxBtB,MAAAA,UAAU,CAACuB,OAAX,CAAmB1B,QAAQ,CAAC2B,YAA5B,EAA0ChB,KAAK,CAACiB,GAAhD,EAAqD;AACnDZ,QAAAA,IAAI,EAAJA,IADmD;AAEnDE,QAAAA,IAAI,eACCO,IADD;AAF+C,OAArD;AAMD;AACF,GAdD;AAeA,SAAOtB,UAAP;AACD","sourcesContent":["import { Controller, Commands, Selection } from '@ali/4ever-cangjie';\nimport { Heading } from '@ali/4ever-mo';\n\nexport default function clearParagraphStyle(controller: Controller, range: Selection, forceClear = false) {\n  const { value } = controller;\n  const { document } = value;\n\n  const allBlocks = document.getLeafBlocksAtRange(range);\n\n  allBlocks.forEach((block) => {\n    const shouldClear = forceClear || range?.isCollapsed || allBlocks.length > 1 || controller.query('isSelectWholeBlocks');\n    if (block && shouldClear) {\n      // 将heading变为正文\n      const type = Heading.isHeading(block) ? 'paragraph' : block.type;\n      // 去除列表、引用、对齐方式、缩进、段间距、纹理\n      const { list, blockquote, jc, ind, spacing, shd, ...rest } = block.data;\n      controller.command(Commands.setNodeByKey, block.key, {\n        type,\n        data: {\n          ...rest,\n        },\n      });\n    }\n  });\n  return controller;\n}\n"],"file":"clearParagraphStyle.js"}