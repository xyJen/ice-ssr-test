import _extends from "@babel/runtime/helpers/extends";
import _objectWithoutPropertiesLoose from "@babel/runtime/helpers/objectWithoutPropertiesLoose";
import { Commands } from '@ali/4ever-cangjie';
import { Heading } from '@ali/4ever-mo';
export default function clearParagraphStyle(controller, range, forceClear) {
  if (forceClear === void 0) {
    forceClear = false;
  }

  var value = controller.value;
  var document = value.document;
  var allBlocks = document.getLeafBlocksAtRange(range);
  allBlocks.forEach(function (block) {
    var shouldClear = forceClear || (range == null ? void 0 : range.isCollapsed) || allBlocks.length > 1 || controller.query('isSelectWholeBlocks');

    if (block && shouldClear) {
      // 将heading变为正文
      var type = Heading.isHeading(block) ? 'paragraph' : block.type; // 去除列表、引用、对齐方式、缩进、段间距、纹理

      var _block$data = block.data,
          list = _block$data.list,
          blockquote = _block$data.blockquote,
          jc = _block$data.jc,
          ind = _block$data.ind,
          spacing = _block$data.spacing,
          shd = _block$data.shd,
          rest = _objectWithoutPropertiesLoose(_block$data, ["list", "blockquote", "jc", "ind", "spacing", "shd"]);

      controller.command(Commands.setNodeByKey, block.key, {
        type: type,
        data: _extends({}, rest)
      });
    }
  });
  return controller;
}
//# sourceMappingURL=clearParagraphStyle.js.map