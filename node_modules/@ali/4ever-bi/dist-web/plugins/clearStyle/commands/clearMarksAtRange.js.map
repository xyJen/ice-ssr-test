{"version":3,"sources":["../../../../../src/plugins/clearStyle/commands/clearMarksAtRange.ts"],"names":["removeMarkAtRange","createClearMarksAtRange","ignores","clearMarksAtRange","controller","range","value","document","marks","getMarksAtRange","length","forEach","mark","includes","type"],"mappings":"AACA,SAASA,iBAAT,QAAkC,kBAAlC;AAEA,eAAe,SAASC,uBAAT,CAAiCC,OAAjC,EAAyD;AAAA,MAAxBA,OAAwB;AAAxBA,IAAAA,OAAwB,GAAJ,EAAI;AAAA;;AACtE,SAAO,SAASC,iBAAT,CAA2BC,UAA3B,EAAmDC,KAAnD,EAAqE;AAAA,QAClEC,KADkE,GACxDF,UADwD,CAClEE,KADkE;AAAA,QAElEC,QAFkE,GAErDD,KAFqD,CAElEC,QAFkE;AAG1E,QAAMC,KAAK,GAAGD,QAAQ,CAACE,eAAT,CAAyBJ,KAAzB,CAAd;;AACA,QAAIG,KAAK,CAACE,MAAV,EAAkB;AAChBF,MAAAA,KAAK,CAACG,OAAN,CAAc,UAACC,IAAD,EAAU;AACtB,YAAIV,OAAO,CAACW,QAAR,CAAiBD,IAAI,CAACE,IAAtB,CAAJ,EAAiC;AAC/B;AACD;;AACDd,QAAAA,iBAAiB,CAACI,UAAD,EAAaC,KAAb,EAAoBO,IAAI,CAACE,IAAzB,CAAjB;AACD,OALD;AAMD;;AAED,WAAOV,UAAP;AACD,GAdD;AAeD","sourcesContent":["import { Controller, Selection } from '@ali/4ever-cangjie';\nimport { removeMarkAtRange } from '@ali/4ever-utils';\n\nexport default function createClearMarksAtRange(ignores: string[] = []) {\n  return function clearMarksAtRange(controller: Controller, range: Selection) {\n    const { value } = controller;\n    const { document } = value;\n    const marks = document.getMarksAtRange(range);\n    if (marks.length) {\n      marks.forEach((mark) => {\n        if (ignores.includes(mark.type)) {\n          return;\n        }\n        removeMarkAtRange(controller, range, mark.type);\n      });\n    }\n\n    return controller;\n  };\n}\n"],"file":"clearMarksAtRange.js"}