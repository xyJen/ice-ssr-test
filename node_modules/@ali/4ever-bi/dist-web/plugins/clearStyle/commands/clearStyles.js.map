{"version":3,"sources":["../../../../../src/plugins/clearStyle/commands/clearStyles.ts"],"names":["createClearMarksAtRange","getRangesFromEditor","clearParagraphStyle","createClearStyles","ignores","clearMarksAtRange","clearStyles","controller","ranges","targetRanges","Array","isArray","forEach","range","value","data","listSelections","length","dispatch"],"mappings":"AACA,OAAOA,uBAAP;AACA,SAASC,mBAAT,QAAoC,kBAApC;AACA,OAAOC,mBAAP;AAEA,eAAe,SAASC,iBAAT,CAA2BC,OAA3B,EAAmD;AAAA,MAAxBA,OAAwB;AAAxBA,IAAAA,OAAwB,GAAJ,EAAI;AAAA;;AAChE,MAAMC,iBAAiB,GAAGL,uBAAuB,CAACI,OAAD,CAAjD;AACA,SAAO,SAASE,WAAT,CAAqBC,UAArB,EAA6CC,MAA7C,EAAmE;AACxE;AACA,QAAMC,YAAY,GAAGC,KAAK,CAACC,OAAN,CAAcH,MAAd,IAAwBA,MAAxB,GAAiCP,mBAAmB,CAACM,UAAD,CAAzE;AACAE,IAAAA,YAAY,CAACG,OAAb,CAAqB,UAACC,KAAD,EAAW;AAC9BR,MAAAA,iBAAiB,CAACE,UAAD,EAAaM,KAAb,CAAjB;AACAX,MAAAA,mBAAmB,CAACK,UAAD,EAAaM,KAAb,EAAoB,CAAC,CAACL,MAAtB,CAAnB;AACD,KAHD;AAHwE,QAQhEM,KARgE,GAQtDP,UARsD,CAQhEO,KARgE;;AASxE,QAAIA,KAAK,CAACC,IAAN,CAAWC,cAAX,IAA6BF,KAAK,CAACC,IAAN,CAAWC,cAAX,CAA0BC,MAA1B,GAAmC,CAApE,EAAuE;AACrEV,MAAAA,UAAU,CAACW,QAAX,CAAoB,cAApB,EAAoCJ,KAAK,CAACC,IAAN,CAAWC,cAA/C,EAA+D,KAA/D;AACAT,MAAAA,UAAU,CAACW,QAAX,CAAoB,qBAApB;AACD;;AAGD,WAAOX,UAAP;AACD,GAhBD;AAiBD","sourcesContent":["import { Controller, Selection } from '@ali/4ever-cangjie';\nimport createClearMarksAtRange from './clearMarksAtRange';\nimport { getRangesFromEditor } from '@ali/4ever-utils';\nimport clearParagraphStyle from './clearParagraphStyle';\n\nexport default function createClearStyles(ignores: string[] = []) {\n  const clearMarksAtRange = createClearMarksAtRange(ignores);\n  return function clearStyles(controller: Controller, ranges?: Selection[]) {\n    // 移动端第二参数会莫名其妙传入 true\n    const targetRanges = Array.isArray(ranges) ? ranges : getRangesFromEditor(controller);\n    targetRanges.forEach((range) => {\n      clearMarksAtRange(controller, range);\n      clearParagraphStyle(controller, range, !!ranges);\n    });\n\n    const { value } = controller;\n    if (value.data.listSelections && value.data.listSelections.length > 0) {\n      controller.dispatch('selectSymbol', value.data.listSelections, false);\n      controller.dispatch('clearListSelections');\n    }\n\n\n    return controller;\n  };\n}\n"],"file":"clearStyles.js"}