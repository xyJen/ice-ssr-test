{"version":3,"sources":["../../../../../src/plugins/sz/components/SzSimpleButton.tsx"],"names":["React","isNaN","PluginRoles","FontSizeSelect","setSz","useDefaultSz","styled","MemoFontSizeSelect","memo","Wrapper","div","style","fontSize","minWidth","szList","SzSimpleButton","props","controller","locale","toolbarMode","rest","defaultSz","sz","query","buttonTitle","isCollapsedAtEdge","value","selection","isDisabled","handleChange","useCallback","size","run","szSelect"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAC5B,SAASC,KAAT,EAAgBC,WAAhB,QAAmC,mBAAnC;AACA,SAASC,cAAT,QAA+B,iBAA/B;AAEA,SAASC,KAAT;AACA,SAASC,YAAT,QAA6B,sBAA7B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,IAAMC,kBAAkB,gBAAGP,KAAK,CAACQ,IAAN,CAAWL,cAAX,CAA3B;AAEA,IAAMM,OAAO,gBAAGH,MAAM,CAACI,GAAV,yDAAb;AAMA,IAAMC,KAA0B,GAAG;AACjCC,EAAAA,QAAQ,EAAE,IADuB;AAEjCC,EAAAA,QAAQ,EAAE;AAFuB,CAAnC;AAKA,OAAO,IAAMC,MAAM,GAAG,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,EAAY,EAAZ,EAAgB,EAAhB,EAAoB,EAApB,EAAwB,EAAxB,EAA4B,EAA5B,EAAgC,EAAhC,EAAoC,EAApC,EAAwC,EAAxC,EAA4C,EAA5C,EAAgD,EAAhD,EAAoD,EAApD,EAAwD,EAAxD,EAA4D,EAA5D,CAAf;AAQP,eAAe,SAASC,cAAT,CAAwBC,KAAxB,EAA8C;AAAA,MACnDC,UADmD,GACND,KADM,CACnDC,UADmD;AAAA,MACvCC,MADuC,GACNF,KADM,CACvCE,MADuC;AAAA,MAC/BC,WAD+B,GACNH,KADM,CAC/BG,WAD+B;AAAA,MACfC,IADe,iCACNJ,KADM;;AAE3D,MAAMK,SAAS,GAAGhB,YAAY,EAA9B;AACA,MAAIiB,EAA0B,GAAGL,UAAU,CAACM,KAAX,CAAiB,SAAjB,EAA4BF,SAA5B,CAAjC;;AACA,MAAIpB,KAAK,CAACqB,EAAD,CAAT,EAAe;AACbA,IAAAA,EAAE,GAAGJ,MAAM,CAACM,WAAZ;AACD;;AAN0D,MAOnDC,iBAPmD,GAO7BR,UAAU,CAACS,KAAX,CAAiBC,SAPY,CAOnDF,iBAPmD;AAQ3D,MAAMG,UAAU,GACdH,iBAAiB,IACdR,UAAU,CAACM,KAAX,CAAiB,oBAAjB,CADH,IAEGN,UAAU,CAACM,KAAX,CAAiB,iBAAjB,CAFH,IAGGN,UAAU,CAACM,KAAX,CAAiB,uBAAjB,CAJL;AAMA,MAAMM,YAAY,GAAG7B,KAAK,CAAC8B,WAAN,CAAkB,UAACC,IAAD;AAAA,WAAkBd,UAAU,CAACe,GAAX,CAAe,UAAf,EAA2B5B,KAAK,CAAC2B,IAAD,CAAhC,CAAlB;AAAA,GAAlB,EAA6E,CAACd,UAAD,CAA7E,CAArB;AACA,sBACE,eAAC,OAAD,qBACE,eAAC,kBAAD;AACE,IAAA,UAAU,EAAE;AADd,KAEMG,IAFN;AAGE,IAAA,MAAM,EAAC,eAHT;AAIE,IAAA,KAAK,EAAEN,MAJT;AAKE,IAAA,QAAQ,EAAEc,UALZ,CAME;AANF;AAOE,IAAA,KAAK,OAAKN,EAPZ;AAQE,IAAA,QAAQ,EAAEO,YARZ;AASE,IAAA,QAAQ,EAAE,KATZ;AAUE,IAAA,YAAY,EAAEX,MAAM,CAACM,WAVvB;AAWE,IAAA,KAAK,EAAEb,KAXT;AAYE,IAAA,IAAI,EAAET,WAAW,CAAC+B;AAZpB,KADF,CADF;AAkBD","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { isNaN, PluginRoles } from '@ali/4ever-bamboo';\nimport { FontSizeSelect } from '@ali/we-toolbar';\nimport { NewToolbarMode as ToolbarMode } from '@ali/4ever-component';\nimport { setSz } from '../actions';\nimport { useDefaultSz } from '@ali/4ever-component';\nimport styled from 'styled-components';\n\nconst MemoFontSizeSelect = React.memo(FontSizeSelect);\n\nconst Wrapper = styled.div`\n  .select_trigger_wrap .select_left_wrap {\n    font-size: 1\n  }\n`;\n\nconst style: React.CSSProperties = {\n  fontSize: 14.5,\n  minWidth: 25,\n};\n\nexport const szList = [9, 10, 11, 12, 14, 16, 18, 20, 22, 24, 26, 28, 36, 42, 48, 72];\n\nexport interface SzButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n  toolbarMode?: ToolbarMode;\n}\n\nexport default function SzSimpleButton(props: SzButtonProps) {\n  const { controller, locale, toolbarMode, ...rest } = props;\n  const defaultSz = useDefaultSz();\n  let sz: string | number | null = controller.query('getSize', defaultSz);\n  if (isNaN(sz)) {\n    sz = locale.buttonTitle;\n  }\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled =\n    isCollapsedAtEdge\n    || controller.query('isSelectionInImage')\n    || controller.query('isSelectionInHr')\n    || controller.query('isSelectionInLinkCard');\n\n  const handleChange = React.useCallback((size: number) => controller.run('onAction', setSz(size)), [controller]);\n  return (\n    <Wrapper>\n      <MemoFontSizeSelect\n        allowInput={false}\n        {...rest}\n        testid=\"bi-toolbar-sz\"\n        sizes={szList}\n        disabled={isDisabled}\n        // @ts-ignore 字号是 string 还是 number？\n        value={`${sz}`}\n        onChange={handleChange}\n        bordered={false}\n        shortcutText={locale.buttonTitle}\n        style={style}\n        role={PluginRoles.szSelect}\n      />\n    </Wrapper>\n  );\n}\n"],"file":"SzSimpleButton.js"}