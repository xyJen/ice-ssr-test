{"version":3,"sources":["../../../../../src/plugins/sz/utils/getActiveSzMark.ts"],"names":["Mark","getDefaultSz","createEmptySzMarkHandler","defaultSz","emptySzMarkHandler","controller","text","value","document","startText","key","sz","create","type","data","szUnit","getActiveSzMark","query"],"mappings":"AAAA,SAA2BA,IAA3B,QAAuC,oBAAvC;AAEA,OAAOC,YAAP;;AAEA,SAASC,wBAAT,CAAkCC,SAAlC,EAAsD;AACpD,SAAO,SAASC,kBAAT,CAA4BC,UAA5B,EAAoDC,IAApD,EAAiE;AAAA,4BACtCD,UAAU,CAACE,KAD2B;AAAA,QAC9DC,QAD8D,qBAC9DA,QAD8D;AAAA,QACpDC,SADoD,qBACpDA,SADoD;AAEtE,QAAMC,GAAG,GAAG,CAAAJ,IAAI,QAAJ,YAAAA,IAAI,CAAEI,GAAN,MAAaD,SAAb,oBAAaA,SAAS,CAAEC,GAAxB,CAAZ;AACA,QAAMC,EAAE,GAAGV,YAAY,CAACO,QAAD,EAAWE,GAAX,EAAgBP,SAAhB,CAAvB;AACA,WAAO,CAACH,IAAI,CAACY,MAAL,CAAY;AAClBC,MAAAA,IAAI,EAAE,IADY;AAElBC,MAAAA,IAAI,EAAE;AACJP,QAAAA,KAAK,EAAEI,EADH;AAEJI,QAAAA,MAAM,EAAE;AAFJ;AAFY,KAAZ,CAAD,CAAP;AAOD,GAXD;AAYD;;AAED,eAAe,SAASC,eAAT,CAAyBX,UAAzB,EAAiDF,SAAjD,EAAqE;AAClF,SAAOE,UAAU,CAACY,KAAX,CAAiB,eAAjB,EAAkC,IAAlC,EAAwCf,wBAAwB,CAACC,SAAD,CAAhE,CAAP;AACD","sourcesContent":["import { Controller, Text, Mark } from '@ali/4ever-cangjie';\n\nimport getDefaultSz from './getDefaultSz';\n\nfunction createEmptySzMarkHandler(defaultSz?: number) {\n  return function emptySzMarkHandler(controller: Controller, text?: Text) {\n    const { document, startText } = controller.value;\n    const key = text?.key || startText?.key;\n    const sz = getDefaultSz(document, key, defaultSz);\n    return [Mark.create({\n      type: 'sz',\n      data: {\n        value: sz,\n        szUnit: 'pt',\n      },\n    })];\n  }\n}\n\nexport default function getActiveSzMark(controller: Controller, defaultSz?: number) {\n  return controller.query('getActiveMark', 'sz', createEmptySzMarkHandler(defaultSz));\n}\n"],"file":"getActiveSzMark.js"}