{"version":3,"sources":["../../../../../src/plugins/sz/utils/getDefaultSz.ts"],"names":["environment","SzUtil","fontSize","Heading","DEFAULT_FONT_SIZE","DEFAULT","getDefaultSz","document","key","defaultSz","block","getClosestBlock","sz","isHeading","fromHeadingType","type","IS_ANDROID","Math","round"],"mappings":"AAAA,SAAmBA,WAAnB,QAAsC,oBAAtC;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,kBAAjC;AACA,SAASC,OAAT,QAAwB,2BAAxB;IAGWC,iB,GACPF,Q,CADFG,O;AAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,YAAT,CAAsBC,QAAtB,EAA0CC,GAA1C,EAAwDC,SAAxD,EAA4E;AACzF,MAAI,CAACD,GAAL,EAAU,OAAOC,SAAS,IAAIL,iBAApB;AAEV,MAAMM,KAAK,GAAGH,QAAQ,CAACI,eAAT,CAAyBH,GAAzB,CAAd;AACA,MAAII,EAAU,GAAGH,SAAS,IAAIL,iBAA9B;;AACA,MAAIM,KAAK,IAAIP,OAAO,CAACU,SAAR,CAAkBH,KAAlB,CAAb,EAAuC;AACrCE,IAAAA,EAAE,GAAGX,MAAM,CAACa,eAAP,CAAuBJ,KAAK,CAACK,IAA7B,CAAL;AACD;;AAED,MAAIf,WAAW,CAACgB,UAAhB,EAA4B;AAC1B;AACAJ,IAAAA,EAAE,GAAGK,IAAI,CAACC,KAAL,CAAWN,EAAX,CAAL;AACD;;AACD,SAAOA,EAAP;AACD","sourcesContent":["import { Document, environment } from '@ali/4ever-cangjie';\nimport { SzUtil, fontSize } from '@ali/4ever-utils';\nimport { Heading } from '@ali/4ever-plugin-heading';\n\nconst {\n  DEFAULT: DEFAULT_FONT_SIZE,\n} = fontSize;\n \n/**\n * 获取默认字号\n * 当 leaf 的 mark 中获取不到字号信息时, 根据 block 的类型, 获取正文或者标题默认的字号\n * @param document \n * @param key \n * @param defaultSz 配置的默认字号 \n * @returns number\n */\nexport default function getDefaultSz(document: Document, key?: string, defaultSz?: number) {\n  if (!key) return defaultSz || DEFAULT_FONT_SIZE;\n\n  const block = document.getClosestBlock(key);\n  let sz: number = defaultSz || DEFAULT_FONT_SIZE;\n  if (block && Heading.isHeading(block)) {\n    sz = SzUtil.fromHeadingType(block.type);\n  }\n\n  if (environment.IS_ANDROID) {\n    // 安卓老版本显示小数为0，这里兼容一下\n    sz = Math.round(sz);\n  }\n  return sz;\n}\n"],"file":"getDefaultSz.js"}