import { environment } from '@ali/4ever-cangjie';
import { SzUtil, fontSize } from '@ali/4ever-utils';
import { Heading } from '@ali/4ever-plugin-heading';
var DEFAULT_FONT_SIZE = fontSize.DEFAULT;
/**
 * 获取默认字号
 * 当 leaf 的 mark 中获取不到字号信息时, 根据 block 的类型, 获取正文或者标题默认的字号
 * @param document 
 * @param key 
 * @param defaultSz 配置的默认字号 
 * @returns number
 */

export default function getDefaultSz(document, key, defaultSz) {
  if (!key) return defaultSz || DEFAULT_FONT_SIZE;
  var block = document.getClosestBlock(key);
  var sz = defaultSz || DEFAULT_FONT_SIZE;

  if (block && Heading.isHeading(block)) {
    sz = SzUtil.fromHeadingType(block.type);
  }

  if (environment.IS_ANDROID) {
    // 安卓老版本显示小数为0，这里兼容一下
    sz = Math.round(sz);
  }

  return sz;
}
//# sourceMappingURL=getDefaultSz.js.map