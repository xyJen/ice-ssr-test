{"version":3,"sources":["../../../../../src/plugins/sz/queries/getSize.ts"],"names":["environment","ListPlugin","SzUtil","getActiveSzMark","getSize","controller","defaultSz","symbolSize","getSymbolStyleByKey","parseFloat","activeSzMark","IS_MOBILE","NaN","sz","fromMark","IS_ANDROID","Math","round"],"mappings":"AAAA,SAAqBA,WAArB,QAAwC,oBAAxC;AACA,SAASC,UAAT,EAAqBC,MAArB,QAAmC,mBAAnC;AACA,OAAOC,eAAP;AAGA,eAAe,SAASC,OAAT,CAAiBC,UAAjB,EAAyCC,SAAzC,EAA6D;AAC1E,MAAMC,UAAU,GAAGN,UAAU,CAACO,mBAAX,CAA+BH,UAA/B,EAA2C,IAA3C,CAAnB;AACA,MAAIE,UAAJ,EAAgB,OAAOE,UAAU,CAACF,UAAD,CAAjB,CAF0D,CAI1E;;AACA,MAAMG,YAAY,GAAGP,eAAe,CAACE,UAAD,EAAaC,SAAb,CAApC;;AAEA,MAAI,CAACI,YAAD,IAAiB,CAACV,WAAW,CAACW,SAAlC,EAA6C;AAC3C;AACA,WAAOC,GAAP;AACD;;AAED,MAAIC,EAAU,GAAGX,MAAM,CAACY,QAAP,CAAgBJ,YAAhB,CAAjB;;AAEA,MAAIV,WAAW,CAACe,UAAhB,EAA4B;AAC1B;AACAF,IAAAA,EAAE,GAAGG,IAAI,CAACC,KAAL,CAAWJ,EAAX,CAAL;AACD;;AAED,SAAOA,EAAP;AACD","sourcesContent":["import { Controller, environment } from '@ali/4ever-cangjie';\nimport { ListPlugin, SzUtil } from '@ali/4ever-bamboo';\nimport getActiveSzMark from '../utils/getActiveSzMark';\n\n\nexport default function getSize(controller: Controller, defaultSz?: number) {\n  const symbolSize = ListPlugin.getSymbolStyleByKey(controller, 'sz');\n  if (symbolSize) return parseFloat(symbolSize);\n\n  // 多个 mark 兼容手段：取最后一个mark\n  const activeSzMark = getActiveSzMark(controller, defaultSz);\n\n  if (!activeSzMark && !environment.IS_MOBILE) {\n    // PC端不显示多个字号\n    return NaN;\n  }\n\n  let sz: number = SzUtil.fromMark(activeSzMark);\n\n  if (environment.IS_ANDROID) {\n    // 安卓老版本显示小数为0，这里兼容一下\n    sz = Math.round(sz);\n  }\n\n  return sz;\n}\n"],"file":"getSize.js"}