import _extends from "@babel/runtime/helpers/extends";
import { Commands, Element } from '@ali/4ever-cangjie';
import { SET_NODE_UUID } from "../actions";
export default function onAction(action, controller, next) {
  var type = action.type;

  if (type === SET_NODE_UUID) {
    var _ref = action.payload,
        node = _ref.node,
        uuid = _ref.uuid;

    if (!Element.isElement(node)) {
      return;
    }

    return controller.withoutSaving(function () {
      controller.command(Commands.setNodeByKey, node.key, {
        type: node.type,
        data: _extends({}, node.data, {
          uuid: node.data.refblockUUID ? node.data.refblockUUID : uuid
        })
      });
    });
  }

  return next();
}
//# sourceMappingURL=onAction.js.map