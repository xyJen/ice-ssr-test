{"version":3,"sources":["../../../../../src/plugins/clearParagraphShd/handlers/onKeyDown.ts"],"names":["Commands","isKeyHotkey","isEnterHotKey","onKeyDown","event","controller","next","value","startBlock","selection","isCollapsed","data","key","shd","fill","newData","list","level","command","setNodeByKey"],"mappings":";AAAA,SAAqBA,QAArB,QAAqC,oBAArC;AACA,SAASC,WAAT,QAA4B,WAA5B;AAEA,IAAMC,aAAa,GAAGD,WAAW,CAAC,OAAD,CAAjC,C,CAEA;;AACA,IAAME,SAAS,GAAG,SAAZA,SAAY,CAACC,KAAD,EAA6BC,UAA7B,EAAqDC,IAArD,EAAwE;AACxFA,EAAAA,IAAI;AADoF,0BAGtDD,UAAU,CAACE,KAH2C;AAAA,MAGhFC,UAHgF,qBAGhFA,UAHgF;AAAA,MAGpEC,SAHoE,qBAGpEA,SAHoE;;AAIxF,MAAIP,aAAa,CAACE,KAAD,CAAb,IAAwBI,UAAxB,IAAsCC,SAAS,CAACC,WAApD,EAAiE;AAAA,QACvDC,IADuD,GACzCH,UADyC,CACvDG,IADuD;AAAA,QACjDC,GADiD,GACzCJ,UADyC,CACjDI,GADiD;;AAG/D,QAAI,CAACD,IAAI,CAACE,GAAN,IAAa,CAACF,IAAI,CAACE,GAAL,CAASC,IAA3B,EAAiC;AAC/B,aAAOT,UAAP;AACD;;AAED,QAAMU,OAAO,gBAAQJ,IAAR,CAAb;;AAP+D,QAQvDK,IARuD,GAQ9CD,OAR8C,CAQvDC,IARuD;;AAU/D,QAAIA,IAAI,IAAIA,IAAI,CAACC,KAAL,KAAe,CAA3B,EAA8B;AAC5B;AACA,aAAOZ,UAAP;AACD;;AACD,WAAOU,OAAO,CAACF,GAAf;AAEA,WAAOR,UAAU,CAACa,OAAX,CAAmBlB,QAAQ,CAACmB,YAA5B,EAA0CP,GAA1C,EAA+C;AAAED,MAAAA,IAAI,EAAEI;AAAR,KAA/C,CAAP;AACD;;AACD,SAAOV,UAAP;AACD,CAvBD;;AAyBA,eAAeF,SAAf","sourcesContent":["import { Controller, Commands } from '@ali/4ever-cangjie';\nimport { isKeyHotkey } from 'is-hotkey';\n\nconst isEnterHotKey = isKeyHotkey('enter');\n\n// 回车清除段落底纹\nconst onKeyDown = (event: React.KeyboardEvent, controller: Controller, next: Function) => {\n  next();\n\n  const { startBlock, selection } = controller.value;\n  if (isEnterHotKey(event) && startBlock && selection.isCollapsed) {\n    const { data, key } = startBlock;\n\n    if (!data.shd || !data.shd.fill) {\n      return controller;\n    }\n\n    const newData = { ...data };\n    const { list } = newData;\n\n    if (list && list.level !== 0) {\n      // 非首级列表继承样式,不清除\n      return controller;\n    }\n    delete newData.shd;\n\n    return controller.command(Commands.setNodeByKey, key, { data: newData });\n  }\n  return controller;\n};\n\nexport default onKeyDown;\n\n"],"file":"onKeyDown.js"}