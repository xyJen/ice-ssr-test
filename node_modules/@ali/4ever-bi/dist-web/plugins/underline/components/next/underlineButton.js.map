{"version":3,"sources":["../../../../../../src/plugins/underline/components/next/underlineButton.tsx"],"names":["React","environment","PluginRoles","UnderlineButton","Button","toggleUnderline","DELIMITER","MOD","IS_MAC","shortcutText","isDisabled","controller","isCollapsedAtEdge","value","selection","disabled","query","Boolean","props","locale","rest","isActive","handleClick","useCallback","run","tooltip","useMemo","description","character","repeat","size","text","space","title","buttonTitle","shortCut","underline"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAAqBC,WAArB,QAAwC,oBAAxC;AACA,SAASC,WAAT,QAA6B,mBAA7B;AACA,SAA+BC,eAAe,IAAIC,MAAlD,QAAgE,sBAAhE;AACA;AACA,SAASC,eAAT;AACA,SAASC,SAAT;AAEA,IAAMC,GAAG,GAAGN,WAAW,CAACO,MAAZ,GAAqB,GAArB,GAA2B,MAAvC;AACA,IAAMC,YAAY,GAAMF,GAAN,OAAlB;;AAOA,IAAMG,UAAU,GAAG,SAAbA,UAAa,CAACC,UAAD,EAA4B;AAAA,MACrCC,iBADqC,GACfD,UAAU,CAACE,KAAX,CAAiBC,SADF,CACrCF,iBADqC;AAE7C,MAAMG,QAAQ,GACZH,iBAAiB,IACjBD,UAAU,CAACK,KAAX,CAAiB,oBAAjB,CADA,IAEAL,UAAU,CAACK,KAAX,CAAiB,iBAAjB,CAFA,IAGAL,UAAU,CAACK,KAAX,CAAiB,yBAAjB,CAHA,IAIAL,UAAU,CAACK,KAAX,CAAiB,uBAAjB,CALF;AAMA,SAAOC,OAAO,CAACF,QAAD,CAAd;AACD,CATD;;AAWA,eAAe,SAASZ,eAAT,CAAyBe,KAAzB,EAAsD;AAAA,MAC3DP,UAD2D,GACjBO,KADiB,CAC3DP,UAD2D;AAAA,MAC/CQ,MAD+C,GACjBD,KADiB,CAC/CC,MAD+C;AAAA,MACvCJ,QADuC,GACjBG,KADiB,CACvCH,QADuC;AAAA,MAC1BK,IAD0B,iCACjBF,KADiB;;AAGnE,MAAMG,QAAQ,GAAGV,UAAU,CAACK,KAAX,CAAiB,aAAjB,CAAjB;AAEA,MAAMM,WAAW,GAAGtB,KAAK,CAACuB,WAAN,CAClB;AAAA,WAAMZ,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BnB,eAAe,EAA1C,CAAN;AAAA,GADkB,EAElB,CAACM,UAAD,CAFkB,CAApB;AAKA,MAAMc,OAAO,GAAGzB,KAAK,CAAC0B,OAAN,CAAc,YAAM;AAClC,QAAMC,WAAW,GAAG,eAAerB,SAAS,CAACsB,SAAV,CAAoBC,MAApB,CAA2BvB,SAAS,CAACwB,IAArC,CAAf,IAA6D,CAAAX,MAAM,QAAN,YAAAA,MAAM,CAAEY,IAAR,KAAgB,MAA7E,IAAuFzB,SAAS,CAACsB,SAAV,CAAoBC,MAApB,CAA2BvB,SAAS,CAACwB,IAArC,CAAvF,GAAoI,GAApI,IAA2I,CAAAX,MAAM,QAAN,YAAAA,MAAM,CAAEa,KAAR,KAAiB,OAA5J,CAApB;AACA,WAAO;AACLC,MAAAA,KAAK,EAAE,CAAAd,MAAM,QAAN,YAAAA,MAAM,CAAEe,WAAR,KAAuB,EADzB;AAELP,MAAAA,WAAW,EAAXA,WAFK;AAGLQ,MAAAA,QAAQ,EAAE1B;AAHL,KAAP;AAKD,GAPe,EAOb,EAPa,CAAhB;AASA,sBACE,eAAC,MAAD;AACE,IAAA,MAAM,EAAC,sBADT;AAEE,IAAA,MAAM,EAAEY,QAFV;AAGE,IAAA,QAAQ,EAAEN,QAAQ,IAAIL,UAAU,CAACC,UAAD,CAHlC;AAIE,IAAA,OAAO,EAAEW,WAJX;AAKE,IAAA,KAAK,EAAEH,MAAF,oBAAEA,MAAM,CAAEe,WALjB;AAME,IAAA,OAAO,EAAET,OANX;AAOE,IAAA,IAAI,EAAEvB,WAAW,CAACkC;AAPpB,KAQMhB,IARN,EADF;AAYD","sourcesContent":["import * as React from 'react';\nimport { Controller, environment } from '@ali/4ever-cangjie';\nimport { PluginRoles, } from '@ali/4ever-bamboo';\nimport { IToolbarButtonConfig, UnderlineButton as Button } from '@ali/4ever-component';\n;\nimport { toggleUnderline } from '../../actions';\nimport { DELIMITER } from '../../constants';\n\nconst MOD = environment.IS_MAC ? 'âŒ˜' : 'Ctrl';\nconst shortcutText = `${MOD}+U`;\n\nexport interface UnderlineButtonProps extends IToolbarButtonConfig {\n  controller: Controller;\n  locale?: Record<string, string>;\n}\n\nconst isDisabled = (controller: Controller) => {\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const disabled =\n    isCollapsedAtEdge ||\n    controller.query('isSelectionInImage') ||\n    controller.query('isSelectionInHr') ||\n    controller.query('isSelectionInListSymbol') ||\n    controller.query('isSelectionInLinkCard');\n  return Boolean(disabled);\n};\n\nexport default function UnderlineButton(props: UnderlineButtonProps) {\n  const { controller, locale, disabled, ...rest } = props;\n\n  const isActive = controller.query('isUnderline');\n\n  const handleClick = React.useCallback(\n    () => controller.run('onAction', toggleUnderline()),\n    [controller],\n  );\n\n  const tooltip = React.useMemo(() => {\n    const description = 'Markdown: ' + DELIMITER.character.repeat(DELIMITER.size) + (locale?.text || 'Text') + DELIMITER.character.repeat(DELIMITER.size) + ' ' + (locale?.space || 'Space');\n    return {\n      title: locale?.buttonTitle || '',\n      description,\n      shortCut: shortcutText,\n    }\n  }, []);\n\n  return (\n    <Button\n      testid=\"bi-toolbar-underline\"\n      active={isActive}\n      disabled={disabled || isDisabled(controller)}\n      onClick={handleClick}\n      title={locale?.buttonTitle}\n      tooltip={tooltip}\n      role={PluginRoles.underline}\n      {...rest}\n    />\n  );\n}\n"],"file":"underlineButton.js"}