{"version":3,"sources":["../../../../../src/plugins/underline/components/underlineButton.tsx"],"names":["React","environment","UnderlineButton","Button","PluginRoles","IconButtonShortcut","toggleUnderline","DELIMITER","MOD","IS_MAC","shortcutText","isDisabled","controller","isCollapsedAtEdge","value","selection","disabled","query","Boolean","props","locale","rest","isActive","handleClick","useCallback","run","underline","buttonTitle","character","repeat","size","text","space"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAAqBC,WAArB,QAAwC,oBAAxC;AACA,SAASC,eAAe,IAAIC,MAA5B,QAA0C,iBAA1C;AACA,SAASC,WAAT,QAA4B,mBAA5B;AACA,SAASC,kBAAT,QAAmC,sBAAnC;AACA,SAASC,eAAT;AACA,SAASC,SAAT;AAEA,IAAMC,GAAG,GAAGP,WAAW,CAACQ,MAAZ,GAAqB,GAArB,GAA2B,MAAvC;AACA,IAAMC,YAAY,GAAMF,GAAN,OAAlB;;AAOA,IAAMG,UAAU,GAAG,SAAbA,UAAa,CAACC,UAAD,EAA4B;AAAA,MACrCC,iBADqC,GACfD,UAAU,CAACE,KAAX,CAAiBC,SADF,CACrCF,iBADqC;AAE7C,MAAMG,QAAQ,GACZH,iBAAiB,IACjBD,UAAU,CAACK,KAAX,CAAiB,oBAAjB,CADA,IAEAL,UAAU,CAACK,KAAX,CAAiB,iBAAjB,CAFA,IAGAL,UAAU,CAACK,KAAX,CAAiB,yBAAjB,CAHA,IAIAL,UAAU,CAACK,KAAX,CAAiB,uBAAjB,CALF;AAMA,SAAOC,OAAO,CAACF,QAAD,CAAd;AACD,CATD;;AAWA,eAAe,SAASd,eAAT,CAAyBiB,KAAzB,EAAsD;AAAA,MAC3DP,UAD2D,GAC3BO,KAD2B,CAC3DP,UAD2D;AAAA,MAC/CQ,MAD+C,GAC3BD,KAD2B,CAC/CC,MAD+C;AAAA,MACpCC,IADoC,iCAC3BF,KAD2B;;AAGnE,MAAMG,QAAQ,GAAGV,UAAU,CAACK,KAAX,CAAiB,aAAjB,CAAjB;AAEA,MAAMM,WAAW,GAAGvB,KAAK,CAACwB,WAAN,CAClB;AAAA,WAAMZ,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BnB,eAAe,EAA1C,CAAN;AAAA,GADkB,EAElB,CAACM,UAAD,CAFkB,CAApB;AAKA,sBACE,eAAC,MAAD,eACMS,IADN;AAEE,IAAA,YAAY,EAAEX,YAFhB;AAGE,IAAA,MAAM,EAAC,sBAHT;AAIE,IAAA,MAAM,EAAEY,QAJV;AAKE,IAAA,QAAQ,EAAEX,UAAU,CAACC,UAAD,CALtB;AAME,IAAA,OAAO,EAAEW,WANX;AAOE,IAAA,IAAI,EAAEnB,WAAW,CAACsB,SAPpB;AAQE,IAAA,OAAO,eACL,eAAC,kBAAD;AACE,MAAA,KAAK,EAAEN,MAAM,CAACO,WADhB;AAEE,MAAA,QAAQ,EAAEjB,YAFZ;AAGE,MAAA,WAAW,EAAE,eAAeH,SAAS,CAACqB,SAAV,CAAoBC,MAApB,CAA2BtB,SAAS,CAACuB,IAArC,CAAf,IAA6D,CAAAV,MAAM,QAAN,YAAAA,MAAM,CAAEW,IAAR,KAAgB,MAA7E,IAAuFxB,SAAS,CAACqB,SAAV,CAAoBC,MAApB,CAA2BtB,SAAS,CAACuB,IAArC,CAAvF,GAAoI,GAApI,IAA2I,CAAAV,MAAM,QAAN,YAAAA,MAAM,CAAEY,KAAR,KAAiB,OAA5J;AAHf;AATJ,KADF;AAkBD","sourcesContent":["import * as React from 'react';\nimport { Controller, environment } from '@ali/4ever-cangjie';\nimport { UnderlineButton as Button } from '@ali/we-toolbar';\nimport { PluginRoles } from '@ali/4ever-bamboo';\nimport { IconButtonShortcut } from '@ali/4ever-component';\nimport { toggleUnderline } from '../actions';\nimport { DELIMITER } from '../constants';\n\nconst MOD = environment.IS_MAC ? 'âŒ˜' : 'Ctrl';\nconst shortcutText = `${MOD}+U`;\n\nexport interface UnderlineButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n}\n\nconst isDisabled = (controller: Controller) => {\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const disabled =\n    isCollapsedAtEdge ||\n    controller.query('isSelectionInImage') ||\n    controller.query('isSelectionInHr') ||\n    controller.query('isSelectionInListSymbol') ||\n    controller.query('isSelectionInLinkCard');\n  return Boolean(disabled);\n};\n\nexport default function UnderlineButton(props: UnderlineButtonProps) {\n  const { controller, locale, ...rest } = props;\n\n  const isActive = controller.query('isUnderline');\n\n  const handleClick = React.useCallback(\n    () => controller.run('onAction', toggleUnderline()),\n    [controller],\n  );\n\n  return (\n    <Button\n      {...rest}\n      shortcutText={shortcutText}\n      testid=\"bi-toolbar-underline\"\n      active={isActive}\n      disabled={isDisabled(controller)}\n      onClick={handleClick}\n      role={PluginRoles.underline}\n      tooltip={\n        <IconButtonShortcut\n          title={locale.buttonTitle}\n          shortcut={shortcutText}\n          description={'Markdown: ' + DELIMITER.character.repeat(DELIMITER.size) + (locale?.text || 'Text') + DELIMITER.character.repeat(DELIMITER.size) + ' ' + (locale?.space || 'Space')}\n        />\n      }\n    />\n  );\n}\n"],"file":"underlineButton.js"}