{"version":3,"sources":["../../../../src/plugins/hoverToolbar/createOnMouseMove.ts"],"names":["debounce","HoverNode","HOVER_TRIGGER_TIME","isHoverInHoverToolbar","event","target","getAttribute","closest","hoverElementHandler","controller","hoverCapture","layouts","result","getNode","trigger","createOnMouseMove","configs","next","isDisabled","disabled","nativeEvent"],"mappings":"AAAA,SAASA,QAAT,QAAyB,WAAzB;AAEA,OAAOC,SAAP;AAIA,IAAMC,kBAAkB,GAAG,EAA3B;;AAEA,SAASC,qBAAT,CAA+BC,KAA/B,EAAkD;AAAA,MACxCC,MADwC,GAC7BD,KAD6B,CACxCC,MADwC;AAEhD,SAAQA,MAAD,CAAwBC,YAAxB,CAAqC,oBAArC,KAA+DD,MAAD,CAAwBE,OAAxB,CAAgC,6BAAhC,CAArE;AACD;;AAED,IAAMC,mBAAmB,GAAGR,QAAQ,CAClC,UAACI,KAAD,EAAoBK,UAApB,EAA4CC,YAA5C,EAAwEC,OAAxE,EAA2H;AACzH,MAAIR,qBAAqB,CAACC,KAAD,CAAzB,EAAkC;AAClC,MAAMQ,MAAM,GAAGX,SAAS,CAACY,OAAV,CAAkBT,KAAlB,EAAyBK,UAAzB,EAAqCE,OAArC,CAAf;AACAD,EAAAA,YAAY,CAACI,OAAb,CAAqBF,MAArB;AACD,CALiC,EAMlCV,kBANkC,CAApC;AASA,eAAe,SAASa,iBAAT,CACbL,YADa,EAEbM,OAFa,EAGb;AACA,SAAO,UAAUZ,KAAV,EAAmCK,UAAnC,EAA2DQ,IAA3D,EAAiE;AAAA,eAC/CD,OAAO,IAAI,EADoC;AAAA,QAC9DE,UAD8D,QAC9DA,UAD8D;;AAEtE,QAAMC,QAAQ,GAAGD,UAAU,IAAIA,UAAU,EAAzC;AACA,QAAIC,QAAJ,EAAc,OAAOF,IAAI,EAAX;AACdT,IAAAA,mBAAmB,CAACJ,KAAK,CAACgB,WAAP,EAAoBX,UAApB,EAAgCC,YAAhC,EAA8CM,OAA9C,oBAA8CA,OAAO,CAAEL,OAAvD,CAAnB;AACA,WAAOM,IAAI,EAAX;AACD,GAND;AAOD","sourcesContent":["import { debounce } from 'lodash-es';\nimport { Controller } from '@ali/4ever-cangjie';\nimport HoverNode from './utils/hoverNode';\nimport { HoverCapture } from './utils/hoverCapture';\nimport { IHoverToolbarPluginConfigs } from './types';\n\nconst HOVER_TRIGGER_TIME = 60;\n\nfunction isHoverInHoverToolbar(event: MouseEvent) {\n  const { target } = event;\n  return (target as HTMLElement).getAttribute('data-hover-toolbar') || (target as HTMLElement).closest('[data-hover-toolbar=\"true\"]');\n}\n\nconst hoverElementHandler = debounce(\n  (event: MouseEvent, controller: Controller, hoverCapture: HoverCapture, layouts: IHoverToolbarPluginConfigs['layouts']) => {\n    if (isHoverInHoverToolbar(event)) return;\n    const result = HoverNode.getNode(event, controller, layouts);\n    hoverCapture.trigger(result);\n  },\n  HOVER_TRIGGER_TIME,\n);\n\nexport default function createOnMouseMove(\n  hoverCapture: HoverCapture,\n  configs: IHoverToolbarPluginConfigs | undefined,\n) {\n  return function (event: React.MouseEvent, controller: Controller, next) {\n    const { isDisabled } = configs || {};\n    const disabled = isDisabled && isDisabled();\n    if (disabled) return next();\n    hoverElementHandler(event.nativeEvent, controller, hoverCapture, configs?.layouts);\n    return next();\n  };\n}\n"],"file":"createOnMouseMove.js"}