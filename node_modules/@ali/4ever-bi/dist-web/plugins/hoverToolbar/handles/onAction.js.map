{"version":3,"sources":["../../../../../src/plugins/hoverToolbar/handles/onAction.ts"],"names":["Commands","HOVER_TOOLBAR_COPY_NODE","HOVER_TOOLBAR_CUT_NODE","createOnAction","action","controller","next","type","payload","node","copyNodes","run","query","command","removeNodeByKey","key"],"mappings":"AAAA,SAAqBA,QAArB,QAAqC,oBAArC;AACA,SACEC,uBADF,EAEEC,sBAFF;AAKA,eAAe,SAASC,cAAT,GAA0B;AACvC,SAAO,UAACC,MAAD,EAASC,UAAT,EAAiCC,IAAjC,EAA0C;AAAA,QACvCC,IADuC,GACrBH,MADqB,CACvCG,IADuC;AAAA,QACjCC,OADiC,GACrBJ,MADqB,CACjCI,OADiC;;AAE/C,QAAID,IAAI,KAAKN,uBAAb,EAAsC;AAAA,UAC5BQ,IAD4B,GACnBD,OADmB,CAC5BC,IAD4B;AAEpC,UAAMC,SAAS,GAAGL,UAAU,CAACM,GAAX,CAAe,yBAAf,EAA0C,CAACF,IAAD,CAA1C,KAAqDA,IAAvE;AACAJ,MAAAA,UAAU,CAACO,KAAX,CAAiB,WAAjB,EAA8BF,SAA9B;AACA,aAAOL,UAAP;AACD;;AACD,QAAIE,IAAI,KAAKL,sBAAb,EAAqC;AAAA,UAC3BO,KAD2B,GAClBD,OADkB,CAC3BC,IAD2B;AAEnCJ,MAAAA,UAAU,CAACM,GAAX,CAAe,UAAf,EAA2B;AACzBJ,QAAAA,IAAI,EAAEN,uBADmB;AAEzBO,QAAAA,OAAO,EAAE;AACPC,UAAAA,IAAI,EAAJA;AADO;AAFgB,OAA3B;AAMAJ,MAAAA,UAAU,CAACQ,OAAX,CAAmBb,QAAQ,CAACc,eAA5B,EAA6CL,KAAI,CAACM,GAAlD;AACA,aAAOV,UAAP;AACD;;AACD,WAAOC,IAAI,EAAX;AACD,GApBD;AAqBD","sourcesContent":["import { Controller, Commands } from '@ali/4ever-cangjie';\nimport {\n  HOVER_TOOLBAR_COPY_NODE,\n  HOVER_TOOLBAR_CUT_NODE,\n} from '../actions';\n\nexport default function createOnAction() {\n  return (action, controller: Controller, next) => {\n    const { type, payload } = action;\n    if (type === HOVER_TOOLBAR_COPY_NODE) {\n      const { node } = payload;\n      const copyNodes = controller.run('beforeCopySelectedNodes', [node]) || node;\n      controller.query('copyNodes', copyNodes);\n      return controller;\n    }\n    if (type === HOVER_TOOLBAR_CUT_NODE) {\n      const { node } = payload;\n      controller.run('onAction', {\n        type: HOVER_TOOLBAR_COPY_NODE,\n        payload: {\n          node,\n        },\n      });\n      controller.command(Commands.removeNodeByKey, node.key);\n      return controller;\n    }\n    return next();\n  };\n}\n"],"file":"onAction.js"}