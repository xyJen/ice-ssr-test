{"version":3,"sources":["../../../../../src/plugins/formatPainter/handlers/onPasteFormat.ts"],"names":["pasteFormatAtRange","onPasteFormat","event","controller","next","value","tableSelection","query","formatClipboard","data","trigger","preventDefault","selection","startBlock","targetRange","isCollapsed","moveToRangeOfNode"],"mappings":"AACA,OAAOA,kBAAP;AAEA,eAAe,SAASC,aAAT,CAAuBC,KAAvB,EAA8BC,UAA9B,EAAsDC,IAAtD,EAA4D;AACzE,MAAMC,KAAY,GAAGF,UAAU,CAACE,KAAhC;AACA,MAAMC,cAAc,GAAGH,UAAU,CAACI,KAAX,CAAiB,mBAAjB,CAAvB;;AACA,MAAID,cAAJ,EAAoB;AAClB,WAAOF,IAAI,EAAX;AACD;;AAED,MAAMI,eAAe,GAAGH,KAAK,CAACI,IAAN,CAAWD,eAAnC;;AACA,MAAI,CAACA,eAAD,IAAoBA,eAAe,CAACE,OAAhB,KAA4B,UAApD,EAAgE;AAC9D,WAAON,IAAI,EAAX;AACD;;AAEDF,EAAAA,KAAK,CAACS,cAAN;AAZyE,MAcjEC,SAdiE,GAcvCP,KAduC,CAcjEO,SAdiE;AAAA,MActDC,UAdsD,GAcvCR,KAduC,CActDQ,UAdsD;AAezE,MAAMC,WAAW,GAAIF,SAAS,CAACG,WAAV,IAAyBF,UAA1B,GAChBD,SAAS,CAACI,iBAAV,CAA4BH,UAA5B,EAAwCV,UAAxC,CADgB,GAEhBS,SAFJ;AAIA,SAAOZ,kBAAkB,CAACG,UAAD,EAAaW,WAAb,CAAzB;AACD","sourcesContent":["import { Value, Controller } from '@ali/4ever-cangjie';\nimport pasteFormatAtRange from '../commands/pasteFormatAtRange';\n\nexport default function onPasteFormat(event, controller: Controller, next) {\n  const value: Value = controller.value;\n  const tableSelection = controller.query('hasTableSelection');\n  if (tableSelection) {\n    return next();\n  }\n\n  const formatClipboard = value.data.formatClipboard;\n  if (!formatClipboard || formatClipboard.trigger !== 'keyboard') {\n    return next();\n  }\n\n  event.preventDefault();\n\n  const { selection, startBlock } = value;\n  const targetRange = (selection.isCollapsed && startBlock)\n    ? selection.moveToRangeOfNode(startBlock, controller)\n    : selection;\n\n  return pasteFormatAtRange(controller, targetRange);\n}\n"],"file":"onPasteFormat.js"}