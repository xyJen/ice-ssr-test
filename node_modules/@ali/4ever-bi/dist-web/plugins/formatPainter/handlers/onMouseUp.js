import pasteFormatAtRange from "../commands/pasteFormatAtRange";
import isParagraphBlock from "../utils/isParagraphBlock";
export default function onMouseUp(_, controller, next) {
  var value = controller.value;
  var tableSelection = controller.query('hasTableSelection');

  if (tableSelection) {
    return next();
  }

  var formatClipboard = value.data.formatClipboard;

  if (!formatClipboard || formatClipboard.trigger !== 'toolbar') {
    return next();
  } // NOTE: Do not need `event.preventDefault()`.


  var range = value.selection;

  if (range.isCollapsed) {
    var document = value.document;
    var paragraph = document.getClosest(range.getStart(document).key, isParagraphBlock);

    if (!paragraph) {
      return next();
    } // TODO: 这里直接将整段都格式化，office上是仅格式化分段


    range = range.moveToRangeOfNode(paragraph, controller);
  }

  return pasteFormatAtRange(controller, range);
}
//# sourceMappingURL=onMouseUp.js.map