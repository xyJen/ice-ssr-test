import { isKeyHotkey } from 'is-hotkey';
import { getDocDefaultSz } from '@ali/4ever-component';
import onCopyFormat from "./onCopyFormat";
import onPasteFormat from "./onPasteFormat";
import { clearFormatClipboard } from "../actions";
var isCopyFormatHotKey = isKeyHotkey('mod+shift+c');
var isPasteFormatHotKey = isKeyHotkey('mod+shift+v');
var isEscape = isKeyHotkey('escape');
export default function onKeyDown(docStyleReference) {
  return function (event, controller, next) {
    if (isCopyFormatHotKey(event)) {
      return onCopyFormat(event, controller, getDocDefaultSz(docStyleReference == null ? void 0 : docStyleReference.docStyle));
    }

    if (isPasteFormatHotKey(event)) {
      return onPasteFormat(event, controller, next);
    }

    if (isEscape(event)) {
      var formatClipboard = controller.value.data.formatClipboard;
      var isActive = formatClipboard && formatClipboard.trigger === 'toolbar';

      if (isActive) {
        controller.run('onAction', clearFormatClipboard());
      }
    }

    return next();
  };
}
//# sourceMappingURL=onKeyDown.js.map