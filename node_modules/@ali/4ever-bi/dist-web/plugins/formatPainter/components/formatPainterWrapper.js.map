{"version":3,"sources":["../../../../../src/plugins/formatPainter/components/formatPainterWrapper.tsx"],"names":["React","useZoomContainer","useStyle","icon","FormatPainterWrapper","props","controller","children","onDocStyleChange","value","zoomContainer","docStyle","isFormatPainterActive","useMemo","formatClipboard","data","trigger","prevCursor","useRef","useEffect","current","style","cursor","displayName"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAAqBC,gBAArB,EAAiDC,QAAjD,QAAiE,oBAAjE;AAEA,IAAMC,IAAI,GAAG,wbAAb;;AAQA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,KAAD,EAAsC;AAAA,MAE/DC,UAF+D,GAK7DD,KAL6D,CAE/DC,UAF+D;AAAA,MAG/DC,QAH+D,GAK7DF,KAL6D,CAG/DE,QAH+D;AAAA,MAI/DC,gBAJ+D,GAK7DH,KAL6D,CAI/DG,gBAJ+D;AAAA,MAMzDC,KANyD,GAM/CH,UAN+C,CAMzDG,KANyD;AAOjE,MAAMC,aAAa,GAAGT,gBAAgB,EAAtC;AACA,MAAMU,QAAQ,GAAGT,QAAQ,EAAzB;AACA,MAAMU,qBAAqB,GAAGZ,KAAK,CAACa,OAAN,CAAc,YAAM;AAAA,QACxCC,eADwC,GACpBL,KAAK,CAACM,IADc,CACxCD,eADwC;AAEhD,WAAOA,eAAe,IAAIA,eAAe,CAACE,OAAhB,KAA4B,SAAtD;AACD,GAH6B,EAG3B,CAACP,KAAD,CAH2B,CAA9B;AAKA,MAAMQ,UAAU,GAAGjB,KAAK,CAACkB,MAAN,CAA4B,IAA5B,CAAnB;AACAlB,EAAAA,KAAK,CAACmB,SAAN,CAAgB,YAAM;AACpB,QAAI,CAACT,aAAL,EAAoB;AAClB;AACD;;AACD,QAAIE,qBAAJ,EAA2B;AACzBK,MAAAA,UAAU,CAACG,OAAX,GAAqBV,aAAa,CAACW,KAAd,CAAoBC,MAAzC;AACAZ,MAAAA,aAAa,CAACW,KAAd,CAAoBC,MAApB,YAAoCnB,IAApC;AACD,KAHD,MAGO,IAAIc,UAAU,CAACG,OAAX,KAAuB,IAA3B,EAAiC;AACtCV,MAAAA,aAAa,CAACW,KAAd,CAAoBC,MAApB,GAA6BL,UAAU,CAACG,OAAxC;AACD;AACF,GAVD,EAUG,CAACV,aAAD,EAAgBE,qBAAhB,CAVH;AAYAZ,EAAAA,KAAK,CAACmB,SAAN,CAAgB,YAAM;AACpBX,IAAAA,gBAAgB,IAAIA,gBAAgB,CAACG,QAAD,CAApC;AACD,GAFD,EAEG,CAACA,QAAD,EAAWH,gBAAX,CAFH;AAIA,SAAOD,QAAP;AACD,CAhCD;;AAkCAH,oBAAoB,CAACmB,WAArB,GAAmC,sBAAnC;AAEA,eAAenB,oBAAf","sourcesContent":["import * as React from 'react';\nimport { Controller, useZoomContainer, DocStyle, useStyle } from '@ali/4ever-cangjie';\n\nconst icon = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAFV3XwhAAAAAXNSR0IArs4c6QAAAPBJREFUOBGNk80NwjAMhV0EJxiBERmEiVgBtkDiwA0uiAM/At4X7CitmraWXmI7z47tNmZmZ6Ff6idvBYBmrmXt0ehP4Yu9ZAlppOBlJyxJooUxk3Jw4xFO9kyXTkSJhnxI5P5b/zWnp6w++bgzkthWDjAoNBsNU2hZT76yzHCRQROBm/QXhIhED4Ec/mM4u3vrGgY3KpB2jkEynUHc+x6dEnQVmFkNd52lWeaBykGtpS0z/SMLlBE5leetpsuDCXoad/CmJKpyJk3bb4rfmCdRFQbMbeWgu2QGDqe3KirinW6Ele+1dwuXj9H9IHKZ/QDGCkHllFqj6gAAAABJRU5ErkJggg==';\n\nexport interface FormatPainterWrapperProps {\n  controller: Controller;\n  children: React.ReactNode;\n  onDocStyleChange?: (style?: DocStyle) => void;\n}\n\nconst FormatPainterWrapper = (props: FormatPainterWrapperProps) => {\n  const {\n    controller,\n    children,\n    onDocStyleChange,\n  } = props;\n  const { value } = controller;\n  const zoomContainer = useZoomContainer();\n  const docStyle = useStyle();\n  const isFormatPainterActive = React.useMemo(() => {\n    const { formatClipboard } = value.data;\n    return formatClipboard && formatClipboard.trigger === 'toolbar';\n  }, [value]);\n\n  const prevCursor = React.useRef<string | null>(null);\n  React.useEffect(() => {\n    if (!zoomContainer) {\n      return;\n    }\n    if (isFormatPainterActive) {\n      prevCursor.current = zoomContainer.style.cursor;\n      zoomContainer.style.cursor = `url(${icon}),text`;\n    } else if (prevCursor.current !== null) {\n      zoomContainer.style.cursor = prevCursor.current;\n    }\n  }, [zoomContainer, isFormatPainterActive]);\n\n  React.useEffect(() => {\n    onDocStyleChange && onDocStyleChange(docStyle);\n  }, [docStyle, onDocStyleChange]);\n\n  return children;\n};\n\nFormatPainterWrapper.displayName = 'FormatPainterWrapper';\n\nexport default FormatPainterWrapper;\n"],"file":"formatPainterWrapper.js"}