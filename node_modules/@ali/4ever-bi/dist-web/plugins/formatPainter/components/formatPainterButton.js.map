{"version":3,"sources":["../../../../../src/plugins/formatPainter/components/formatPainterButton.tsx"],"names":["React","BrushButton","Button","PluginRoles","useDefaultSz","copyFormat","clearFormatClipboard","FormatPainterButton","props","controller","locale","rest","value","defaultSz","formatClipboard","data","isActive","trigger","shortcutText","doubleTitle","isCollapsedAtEdge","selection","isDisabled","edgeSelection","query","handleClick","useCallback","run","handleDoubleClick","formatPainter"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAC5B,SAASC,WAAW,IAAIC,MAAxB,QAAsC,iBAAtC;AACA,SAASC,WAAT,QAA4B,mBAA5B;AACA,SAASC,YAAT,QAA6B,sBAA7B;AACA;AACA;AACA,SAASC,UAAT,EAAqBC,oBAArB;AAOA,eAAe,SAASC,mBAAT,CAA6BC,KAA7B,EAA8D;AAAA,MACnEC,UADmE,GACnCD,KADmC,CACnEC,UADmE;AAAA,MACvDC,MADuD,GACnCF,KADmC,CACvDE,MADuD;AAAA,MAC5CC,IAD4C,iCACnCH,KADmC;;AAAA,MAEnEI,KAFmE,GAEzDH,UAFyD,CAEnEG,KAFmE;AAG3E,MAAMC,SAAS,GAAGT,YAAY,EAA9B;AAH2E,MAInEU,eAJmE,GAI/CF,KAAK,CAACG,IAJyC,CAInED,eAJmE;AAK3E,MAAME,QAAQ,GAAGF,eAAe,IAAIA,eAAe,CAACG,OAAhB,KAA4B,SAAhE;AACA,MAAMC,YAAY,GAAGR,MAAM,CAACS,WAAP,IAAsB,EAA3C;AAN2E,MAOnEC,iBAPmE,GAO7CR,KAAK,CAACS,SAPuC,CAOnED,iBAPmE;AAQ3E,MAAME,UAAU,GAAGF,iBAAiB,IAC/BR,KAAK,CAACG,IAAN,CAAWQ,aADG,IAEdd,UAAU,CAACe,KAAX,CAAiB,iBAAjB,CAFc,IAGdf,UAAU,CAACe,KAAX,CAAiB,oBAAjB,CAHc,IAIdf,UAAU,CAACe,KAAX,CAAiB,sBAAjB,CAJc,IAKdf,UAAU,CAACe,KAAX,CAAiB,yBAAjB,CALc,IAMdf,UAAU,CAACe,KAAX,CAAiB,uBAAjB,CANL;AAQA,MAAMC,WAAW,GAAGzB,KAAK,CAAC0B,WAAN,CAAkB,YAAM;AAC1C,QAAI,CAACZ,eAAL,EAAsB;AACpBL,MAAAA,UAAU,CAACkB,GAAX,CAAe,UAAf,EAA2BtB,UAAU,CAAC,QAAD,EAAWQ,SAAX,CAArC;AACA;AACD;;AACDJ,IAAAA,UAAU,CAACkB,GAAX,CAAe,UAAf,EAA2BrB,oBAAoB,EAA/C;AACD,GANmB,EAMjB,CAACG,UAAD,EAAaI,SAAb,EAAwBC,eAAxB,CANiB,CAApB;AAQA,MAAMc,iBAAiB,GAAG5B,KAAK,CAAC0B,WAAN,CAAkB,YAAM;AAChDjB,IAAAA,UAAU,CAACkB,GAAX,CAAe,UAAf,EAA2BtB,UAAU,CAAC,UAAD,EAAaQ,SAAb,CAArC;AACD,GAFyB,EAEvB,CAACJ,UAAD,EAAaI,SAAb,CAFuB,CAA1B;AAIA,sBACE,eAAC,MAAD,eACMF,IADN;AAEE,IAAA,YAAY,EAAEO,YAFhB;AAGE,IAAA,MAAM,EAAC,oBAHT;AAIE,IAAA,MAAM,EAAEF,QAJV;AAKE,IAAA,QAAQ,EAAEM,UALZ;AAME,IAAA,OAAO,EAAEG,WANX;AAOE,IAAA,aAAa,EAAEG,iBAPjB;AAQE,IAAA,IAAI,EAAEzB,WAAW,CAAC0B;AARpB,KADF;AAYD","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { BrushButton as Button } from '@ali/we-toolbar';\nimport { PluginRoles } from '@ali/4ever-bamboo';\nimport { useDefaultSz } from '@ali/4ever-component';\n;\n;\nimport { copyFormat, clearFormatClipboard } from '../actions';\n\nexport interface FormatPainterButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n}\n\nexport default function FormatPainterButton(props: FormatPainterButtonProps) {\n  const { controller, locale, ...rest } = props;\n  const { value } = controller;\n  const defaultSz = useDefaultSz();\n  const { formatClipboard } = value.data;\n  const isActive = formatClipboard && formatClipboard.trigger === 'toolbar';\n  const shortcutText = locale.doubleTitle || '';\n  const { isCollapsedAtEdge } = value.selection;\n  const isDisabled = isCollapsedAtEdge\n    || value.data.edgeSelection\n    || controller.query('isSelectionInHr')\n    || controller.query('isSelectionInImage')\n    || controller.query('isSelectionInMention')\n    || controller.query('isSelectionInListSymbol')\n    || controller.query('isSelectionInLinkCard');\n\n  const handleClick = React.useCallback(() => {\n    if (!formatClipboard) {\n      controller.run('onAction', copyFormat('single', defaultSz));\n      return;\n    }\n    controller.run('onAction', clearFormatClipboard());\n  }, [controller, defaultSz, formatClipboard]);\n\n  const handleDoubleClick = React.useCallback(() => {\n    controller.run('onAction', copyFormat('multiple', defaultSz));\n  }, [controller, defaultSz]);\n\n  return (\n    <Button\n      {...rest}\n      shortcutText={shortcutText}\n      testid=\"bi-toolbar-painter\"\n      active={isActive}\n      disabled={isDisabled}\n      onClick={handleClick}\n      onDoubleClick={handleDoubleClick}\n      role={PluginRoles.formatPainter}\n    />\n  );\n}\n"],"file":"formatPainterButton.js"}