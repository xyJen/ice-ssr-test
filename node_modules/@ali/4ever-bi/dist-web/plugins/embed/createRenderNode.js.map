{"version":3,"sources":["../../../../src/plugins/embed/createRenderNode.tsx"],"names":["React","Embed","UploadOrFailedCard","createRenderNode","config","embedConfig","embed","locale","embedLocaleConfig","downloadFile","transformDocURL","enableFilePreview","allowDownload","props","controller","next","node","data","src","type"],"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,OAAOC,KAAP;AACA,SAASC,kBAAT,QAAmC,oBAAnC;AAGA,eAAe,SAASC,gBAAT,CAA0BC,MAA1B,EAAkD;AAC/D,MAAMC,WAAW,GAAGD,MAAM,CAACE,KAAP,IAAgB,EAApC;AAD+D,4BAQ3DD,WAR2D,CAG7DE,MAH6D;AAAA,MAGrDC,iBAHqD,oCAGjC,EAHiC;AAAA,MAI7DC,YAJ6D,GAQ3DJ,WAR2D,CAI7DI,YAJ6D;AAAA,MAK7DC,eAL6D,GAQ3DL,WAR2D,CAK7DK,eAL6D;AAAA,8BAQ3DL,WAR2D,CAM7DM,iBAN6D;AAAA,MAM7DA,iBAN6D,sCAMzC,IANyC;AAAA,MAO7DC,aAP6D,GAQ3DP,WAR2D,CAO7DO,aAP6D;AAU/D,SAAO;AACLN,IAAAA,KAAK,EAAE,eAACO,KAAD,EAAQC,UAAR,EAAoBC,IAApB,EAA6B;AAAA,UAC1BC,IAD0B,GACjBH,KADiB,CAC1BG,IAD0B;;AAElC,UAAI,CAACA,IAAI,CAACC,IAAL,CAAUC,GAAf,EAAoB;AAClB,4BAAO,eAAC,kBAAD,eAAwBL,KAAxB;AAA+B,UAAA,IAAI,EAAEG,IAArC;AAA2C,UAAA,MAAM,EAAER,iBAAnD;AAAsE,UAAA,UAAU,EAAEM;AAAlF,WAAP;AACD,OAFD,MAEO,IAAIE,IAAI,CAACC,IAAL,CAAUE,IAAV,KAAmB,OAAnB,IAA8BH,IAAI,CAACC,IAAL,CAAUE,IAAV,KAAmB,OAArD,EAA8D;AACnE,4BACE,eAAC,KAAD,eACMN,KADN;AAEE,UAAA,UAAU,EAAEC,UAFd;AAGE,UAAA,UAAU,EAAEL,YAHd;AAIE,UAAA,SAAS,EAAEC,eAJb;AAKE,UAAA,MAAM,EAAEF,iBALV;AAME,UAAA,iBAAiB,EAAEG,iBANrB;AAOE,UAAA,aAAa,EAAEC;AAPjB,WADF;AAWD;;AACD,aAAOG,IAAI,EAAX;AACD;AAnBI,GAAP;AAqBD","sourcesContent":["import * as React from 'react';\nimport Embed from './components/embed';\nimport { UploadOrFailedCard } from '@ali/4ever-factory';\nimport { BiPluginConfig } from '../../types';\n\nexport default function createRenderNode(config: BiPluginConfig) {\n  const embedConfig = config.embed || {};\n  const {\n    locale: embedLocaleConfig = {},\n    downloadFile,\n    transformDocURL,\n    enableFilePreview = true,\n    allowDownload,\n  } = embedConfig;\n\n  return {\n    embed: (props, controller, next) => {\n      const { node } = props;\n      if (!node.data.src) {\n        return <UploadOrFailedCard {...props} node={node} locale={embedLocaleConfig} controller={controller} />;\n      } else if (node.data.type !== 'video' && node.data.type !== 'audio') {\n        return (\n          <Embed\n            {...props}\n            controller={controller}\n            onDownload={downloadFile}\n            onPreview={transformDocURL}\n            locale={embedLocaleConfig}\n            enableFilePreview={enableFilePreview}\n            allowDownload={allowDownload}\n          />\n        );\n      }\n      return next();\n    },\n  };\n}\n"],"file":"createRenderNode.js"}