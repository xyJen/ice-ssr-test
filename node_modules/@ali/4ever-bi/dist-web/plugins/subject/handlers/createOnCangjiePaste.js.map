{"version":3,"sources":["../../../../../src/plugins/subject/handlers/createOnCangjiePaste.ts"],"names":["selectSubjectRange","SELECTED_SUBJECT_KEY","hasSubjectBeenSelected","isSubjectHeading","createOnCangjiePaste","onCangjiePaste","event","controller","next","value","document","data","selectedKey","block","getNode","command"],"mappings":"AACA,SAASA,kBAAT;AACA,SAASC,oBAAT;AACA,SAASC,sBAAT;AACA,SAASC,gBAAT;;AAGA,SAASC,oBAAT,GAA0D;AACxD,SAAO,SAASC,cAAT,CAAwBC,KAAxB,EAA+BC,UAA/B,EAA2CC,IAA3C,EAAiD;AACtD,QAAIN,sBAAsB,CAACK,UAAD,CAA1B,EAAwC;AAAA,8BACXA,UAAU,CAACE,KADA;AAAA,UAC9BC,QAD8B,qBAC9BA,QAD8B;AAAA,UACpBC,IADoB,qBACpBA,IADoB;AAAA,UAENC,WAFM,GAEUD,IAFV,CAE7BV,oBAF6B;AAGtC,UAAMY,KAAK,GAAGH,QAAQ,CAACI,OAAT,CAAiBF,WAAjB,CAAd;;AACA,UAAIT,gBAAgB,CAACU,KAAD,CAApB,EAA6B;AAC3B;AACAN,QAAAA,UAAU,CAACQ,OAAX,CAAmBf,kBAAnB,EAAuCa,KAAvC;AACD;AACF;;AACD,WAAOL,IAAI,EAAX;AACD,GAXD;AAYD;;AAED,eAAeJ,oBAAf","sourcesContent":["import { Plugin } from '@ali/4ever-cangjie';\nimport { selectSubjectRange } from '../commands';\nimport { SELECTED_SUBJECT_KEY } from '../constants';\nimport { hasSubjectBeenSelected } from '../helpers';\nimport { isSubjectHeading } from '../utils';\nimport type { Subject } from '../utils';\n\nfunction createOnCangjiePaste(): Plugin['onCangjiePaste'] {\n  return function onCangjiePaste(event, controller, next) {\n    if (hasSubjectBeenSelected(controller)) {\n      const { document, data } = controller.value;\n      const { [SELECTED_SUBJECT_KEY]: selectedKey } = data;\n      const block = document.getNode(selectedKey);\n      if (isSubjectHeading(block)) {\n        // Paste 之前先全选议题\n        controller.command(selectSubjectRange, block as Subject);\n      }\n    }\n    return next();\n  };\n}\n\nexport default createOnCangjiePaste;\n"],"file":"createOnCangjiePaste.js"}