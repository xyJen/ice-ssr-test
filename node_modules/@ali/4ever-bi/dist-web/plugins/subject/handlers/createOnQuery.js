import { SzUtil } from '@ali/4ever-bamboo';
import { hasSubjectBeenSelected, isDisableNewLineGuide } from "../helpers";
import { isSubjectHeading } from "../utils";

function createOnQuery() {
  return function onQuery(event, controller, next) {
    var type = event.type,
        args = event.args; // 有 placeholder 展示则不显示 newLineGuide

    if (type === 'isNewLine') {
      var node = args[0].node;
      var document = controller.value.document;
      return !!node && next() && !isDisableNewLineGuide(node, document);
    } // 议题处读取 size 则默认 20px by @狗毛


    if (type === 'getSize') {
      var startBlock = controller.value.startBlock;

      if (isSubjectHeading(startBlock)) {
        return SzUtil.toPt(20, 'px');
      }
    } // 若议题组完全选中，则隐藏光标


    if (type === 'isHideSelection' && hasSubjectBeenSelected(controller)) {
      return true;
    }

    return next();
  };
}

export default createOnQuery;
//# sourceMappingURL=createOnQuery.js.map