{"version":3,"sources":["../../../../../src/plugins/subject/commands/finished.ts"],"names":["Commands","toggleFinished","controller","node","finished","subjectPr","data","command","setNodeByKey","key","toggleFinishedByKey","value","document","assertElement"],"mappings":";AAAA,SAAgBA,QAAhB,QAA4C,oBAA5C;AAGA,OAAO,SAASC,cAAT,CAAwBC,UAAxB,EAAgDC,IAAhD,EAA2EC,QAA3E,EAA8F;AACnG,MAAMC,SAA4B,gBAC7BF,IAAI,CAACG,IAAL,CAAUD,SADmB;AAEhCD,IAAAA,QAAQ,EAARA;AAFgC,IAAlC;;AAKA,MAAI,CAACA,QAAL,EAAe;AACb,WAAOC,SAAS,CAACD,QAAjB;AACD;;AAEDF,EAAAA,UAAU,CAACK,OAAX,CAAmBP,QAAQ,CAACQ,YAA5B,EAA0CL,IAAI,CAACM,GAA/C,EAAoD;AAClDH,IAAAA,IAAI,eACCH,IAAI,CAACG,IADN;AAEFD,MAAAA,SAAS,EAATA;AAFE;AAD8C,GAApD;AAOA,SAAOH,UAAP;AACD;AAED,OAAO,SAASQ,mBAAT,CAA6BR,UAA7B,EAAqDO,GAArD,EAAkEL,QAAlE,EAAqF;AAC1F,MAAMD,IAAI,GAAGD,UAAU,CAACS,KAAX,CAAiBC,QAAjB,CAA0BC,aAA1B,CAAwCJ,GAAxC,CAAb;AACA,SAAOR,cAAc,CAACC,UAAD,EAAaC,IAAb,EAA4BC,QAA5B,CAArB;AACD","sourcesContent":["import { Block, Commands, Controller } from '@ali/4ever-cangjie';\nimport { Heading1Data, SubjectProperties } from '@ali/4ever-mo';\n\nexport function toggleFinished(controller: Controller, node: Block<Heading1Data>, finished: boolean) {\n  const subjectPr: SubjectProperties = {\n    ...node.data.subjectPr,\n    finished,\n  };\n\n  if (!finished) {\n    delete subjectPr.finished;\n  }\n\n  controller.command(Commands.setNodeByKey, node.key, {\n    data: {\n      ...node.data,\n      subjectPr,\n    },\n  });\n\n  return controller;\n}\n\nexport function toggleFinishedByKey(controller: Controller, key: string, finished: boolean) {\n  const node = controller.value.document.assertElement(key);\n  return toggleFinished(controller, node as Block, finished);\n}\n"],"file":"finished.js"}