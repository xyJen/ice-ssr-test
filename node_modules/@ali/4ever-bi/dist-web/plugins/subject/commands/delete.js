import { Commands } from '@ali/4ever-cangjie';
import { getSubjectEndBlock } from "../queries";

/**
 * 删除 Subject 组
 * @param controller
 * @param subject
 * @returns
 */
export function deleteSubject(controller, subject) {
  var _controller$value = controller.value,
      selection = _controller$value.selection,
      document = _controller$value.document;
  var endBlock = controller.query(getSubjectEndBlock, subject);

  if (!endBlock) {
    return controller;
  }

  var prevBlock = document.getPreviousBlock(subject.key); // 若存在上一个兄弟节点，则选中上一个节点的末尾

  var sel = prevBlock ? selection.moveAnchorToEndOfNode(prevBlock, controller) : selection.moveAnchorToStartOfNode(subject, controller); // 选中议题 end 节点的末尾

  sel = sel.moveFocusToEndOfNode(endBlock, controller);
  return controller.command(Commands.select, sel).command(Commands.del);
}
//# sourceMappingURL=delete.js.map