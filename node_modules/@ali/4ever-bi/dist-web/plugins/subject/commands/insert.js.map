{"version":3,"sources":["../../../../../src/plugins/subject/commands/insert.ts"],"names":["Commands","Heading","findNextSubjectIndex","findPrevSubjectIndex","Heading1","insertSubject","controller","properties","from","direction","index","query","subject","create","data","subjectPr","command","insertNodeByPath","moveToEndOfNode"],"mappings":"AAAA,SAAgBA,QAAhB,QAA4C,oBAA5C;AACA,SAASC,OAAT,QAA2C,eAA3C;AACA,SAASC,oBAAT,EAA+BC,oBAA/B;IAEQC,Q,GAAaH,O,CAAbG,Q;AAER,OAAO,SAASC,aAAT,CAAuBC,UAAvB,EAA+CC,UAA/C,EAA8EC,IAA9E,EAA4FC,SAA5F,EAA4H;AACjI,MAAMC,KAAK,GAAGD,SAAS,KAAK,QAAd,GACVH,UAAU,CAACK,KAAX,CAAiBR,oBAAjB,EAAuCK,IAAvC,CADU,GAEVF,UAAU,CAACK,KAAX,CAAiBT,oBAAjB,EAAuCM,IAAvC,CAFJ;AAIA,MAAMI,OAAO,GAAGR,QAAQ,CAACS,MAAT,CAAgB;AAC9BC,IAAAA,IAAI,EAAE;AACJC,MAAAA,SAAS,EAAER;AADP;AADwB,GAAhB,CAAhB,CALiI,CAWjI;;AACA,SAAOD,UAAU,CACdU,OADI,CACIhB,QAAQ,CAACiB,gBADb,EAC+B,EAD/B,EACmCP,KADnC,EAC0CE,OAD1C,EAEJI,OAFI,CAEIhB,QAAQ,CAACkB,eAFb,EAE8BN,OAF9B,CAAP;AAGD","sourcesContent":["import { Block, Commands, Controller } from '@ali/4ever-cangjie';\nimport { Heading, SubjectProperties } from '@ali/4ever-mo';\nimport { findNextSubjectIndex, findPrevSubjectIndex } from '../queries';\n\nconst { Heading1 } = Heading;\n\nexport function insertSubject(controller: Controller, properties: SubjectProperties, from?: Block, direction?: 'before' | 'after') {\n  const index = direction === 'before'\n    ? controller.query(findPrevSubjectIndex, from)\n    : controller.query(findNextSubjectIndex, from);\n\n  const subject = Heading1.create({\n    data: {\n      subjectPr: properties,\n    },\n  });\n\n  // 插入议题节点\n  return controller\n    .command(Commands.insertNodeByPath, [], index, subject)\n    .command(Commands.moveToEndOfNode, subject);\n}\n"],"file":"insert.js"}