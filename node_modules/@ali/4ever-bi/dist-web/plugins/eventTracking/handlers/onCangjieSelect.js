import { eventTracking, TrackingType } from "../actions";
var isSelecting = false;
var shouldTrack = false;
var threshold = 1 / 50;
window.addEventListener('mouseup', function () {
  // 重置状态标记
  isSelecting = false;
  shouldTrack = false;
});
export default function onCangjieSelect(e, controller, next) {
  if (isSelecting === true && shouldTrack && e.detail.trigger !== 'selectStart') {
    // 采样
    controller.run('onAction', eventTracking({
      type: TrackingType.selectText
    }));
  }

  if (e.detail.trigger === 'selectStart') {
    isSelecting = true;
    shouldTrack = Math.random() < threshold;
  }

  return next();
}
//# sourceMappingURL=onCangjieSelect.js.map