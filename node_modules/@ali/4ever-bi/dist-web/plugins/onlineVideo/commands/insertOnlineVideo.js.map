{"version":3,"sources":["../../../../../src/plugins/onlineVideo/commands/insertOnlineVideo.ts"],"names":["Commands","uuid","state","editor","query","command","insertBlock","moveToStartOfNextText","id","focus","type","data","blur"],"mappings":"AAAA,SAAqBA,QAArB,QAAqC,oBAArC;AACA,OAAOC,IAAP,MAAiB,SAAjB;AAGA,gBAAe,UAACC,KAAD;AAAA,SAAoC,UAACC,MAAD,EAAwB;AACzE,QAAIA,MAAM,CAACC,KAAP,CAAa,wBAAb,CAAJ,EAA4C;AAC1CD,MAAAA,MAAM,CAACE,OAAP,CAAeL,QAAQ,CAACM,WAAxB,EAAqC,WAArC;AACD;;AACD,QAAIH,MAAM,CAACC,KAAP,CAAa,yBAAb,CAAJ,EAA6C;AAC3CD,MAAAA,MAAM,CAACE,OAAP,CAAeL,QAAQ,CAACO,qBAAxB;AACD;;AAED,QAAMC,EAAE,GAAGP,IAAI,EAAf;AACAE,IAAAA,MAAM,CACHE,OADH,CACWL,QAAQ,CAACS,KADpB,EAEGJ,OAFH,CAEWL,QAAQ,CAACM,WAFpB,EAEiC;AAC7BI,MAAAA,IAAI,EAAE,aADuB;AAE7BC,MAAAA,IAAI,EAAE;AACJH,QAAAA,EAAE,EAAFA;AADI;AAFuB,KAFjC,EAQGH,OARH,CAQWL,QAAQ,CAACM,WARpB,EAQiC,WARjC,EASGD,OATH,CASWL,QAAQ,CAACY,IATpB;AAWAV,IAAAA,KAAK,CAACM,EAAD,CAAL,GAAY,IAAZ;AAEA,WAAOL,MAAP;AACD,GAvBc;AAAA,CAAf","sourcesContent":["import { Controller, Commands } from '@ali/4ever-cangjie';\nimport uuid from 'uuid/v4';\n\n\nexport default (state: Record<string, boolean>) => (editor: Controller) => {\n  if (editor.query('isCollapsedInBlockVoid')) {\n    editor.command(Commands.insertBlock, 'paragraph');\n  }\n  if (editor.query('isCollapsedInInlineVoid')) {\n    editor.command(Commands.moveToStartOfNextText);\n  }\n\n  const id = uuid();\n  editor\n    .command(Commands.focus)\n    .command(Commands.insertBlock, {\n      type: 'onlineVideo',\n      data: {\n        id,\n      },\n    })\n    .command(Commands.insertBlock, 'paragraph')\n    .command(Commands.blur);\n\n  state[id] = true;\n\n  return editor;\n};\n"],"file":"insertOnlineVideo.js"}