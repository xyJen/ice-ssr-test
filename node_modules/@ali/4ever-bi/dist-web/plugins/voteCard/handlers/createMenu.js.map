{"version":3,"sources":["../../../../../src/plugins/voteCard/handlers/createMenu.tsx"],"names":["React","useCallback","Block","dayjs","VoteCardPlugin","Card","MenuItem","insertCardCommand","setCardInjectionCommand","DEFAULT_DATA","title","voteType","EnumVoteType","RADIO","optionInfoList","content","pos","optionTicket","userOptionTicket","endTime","add","valueOf","showTicketBeforeVoting","createMenubar","CalendarCardMenu","props","menuItem","controller","rest","handleClick","node","create","type","TYPE","data","cardType","height","metadata","command","editing","setIsFocused"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,QAAmC,OAAnC;qBAC4B,a;AAA5B,SAASC,KAAT,QAAsB,oBAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,QAA+B,mBAA/B;AACA,SAASC,IAAT,QAAqB,eAArB;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,iBAAT,EAA4BC,uBAA5B,QAA2D,oBAA3D;AAGA,IAAMC,YAA+C,GAAG;AACtDC,EAAAA,KAAK,EAAE,EAD+C;AAEtDC,EAAAA,QAAQ,EAAEP,cAAc,CAACQ,YAAf,CAA4BC,KAFgB;AAGtDC,EAAAA,cAAc,EAAE,CACd;AAAEC,IAAAA,OAAO,EAAE,EAAX;AAAeC,IAAAA,GAAG,EAAE,CAApB;AAAuBC,IAAAA,YAAY,EAAE,CAArC;AAAwCC,IAAAA,gBAAgB,EAAE;AAA1D,GADc,EAEd;AAAEH,IAAAA,OAAO,EAAE,EAAX;AAAeC,IAAAA,GAAG,EAAE,CAApB;AAAuBC,IAAAA,YAAY,EAAE,CAArC;AAAwCC,IAAAA,gBAAgB,EAAE;AAA1D,GAFc,CAHsC;AAOtDC,EAAAA,OAAO,EAAEhB,KAAK,GAAGiB,GAAR,CAAY,CAAZ,EAAe,MAAf,EAAuBC,OAAvB,EAP6C;AAQtDC,EAAAA,sBAAsB,EAAE;AAR8B,CAAxD;;AAWA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,SAAO,SAASC,gBAAT,CAA0BC,KAA1B,EAAsC;AAAA,QACnCC,QADmC,GACVD,KADU,CACnCC,QADmC;AAAA,QACzBC,UADyB,GACVF,KADU,CACzBE,UADyB;;AAAA,QAEnCjB,KAFmC,GAEhBgB,QAFgB,CAEnChB,KAFmC;AAAA,QAEzBkB,IAFyB,iCAEhBF,QAFgB;;AAI3C,QAAMG,WAAW,GAAG5B,WAAW,CAAC,YAAM;AACpC,UAAM6B,IAAI,GAAG5B,KAAK,CAAC6B,MAAN,CAAa;AACxBC,QAAAA,IAAI,EAAE3B,IAAI,CAAC4B,IADa;AAExBC,QAAAA,IAAI,EAAE;AACJC,UAAAA,QAAQ,EAAE,MADN;AAEJC,UAAAA,MAAM,EAAE,GAFJ;AAGJC,UAAAA,QAAQ,EAAE5B;AAHN;AAFkB,OAAb,CAAb;AASAkB,MAAAA,UAAU,CACPW,OADH,CACW/B,iBADX,EAC8BuB,IAD9B,EAEGQ,OAFH,CAEW9B,uBAFX,EAEoCsB,IAFpC,EAE0C;AAAES,QAAAA,OAAO,EAAE;AAAX,OAF1C,EAGGC,YAHH,CAGgB,KAHhB;AAID,KAd8B,EAc5B,CAACb,UAAD,CAd4B,CAA/B;AAgBA,wBACE,eAAC,QAAD,eAAcC,IAAd;AAAoB,MAAA,OAAO,EAAEC;AAA7B,QACGnB,KAAK,IAAI,EADZ,CADF;AAKD,GAzBD;AA0BD,CA3BD;;AA6BA,eAAea,aAAf","sourcesContent":["import React, { useCallback } from 'react';\nimport { Block } from '@ali/4ever-cangjie';\nimport dayjs from 'dayjs';\nimport { VoteCardPlugin } from '@ali/4ever-bamboo';\nimport { Card } from '@ali/4ever-mo';\nimport { MenuItem } from '@ali/we-design';\nimport { insertCardCommand, setCardInjectionCommand } from '@ali/4ever-factory';\n\n\nconst DEFAULT_DATA: Partial<VoteCardPlugin.IVoteData> = {\n  title: '',\n  voteType: VoteCardPlugin.EnumVoteType.RADIO,\n  optionInfoList: [\n    { content: '', pos: 1, optionTicket: 0, userOptionTicket: 0 },\n    { content: '', pos: 2, optionTicket: 0, userOptionTicket: 0 }\n  ],\n  endTime: dayjs().add(7, 'days').valueOf(),\n  showTicketBeforeVoting: false,\n}\n\nconst createMenubar = () => {\n  return function CalendarCardMenu(props: any) {\n    const { menuItem, controller } = props;\n    const { title, ...rest } = menuItem;\n\n    const handleClick = useCallback(() => {\n      const node = Block.create({\n        type: Card.TYPE,\n        data: {\n          cardType: 'vote',\n          height: 400,\n          metadata: DEFAULT_DATA,\n        },\n      });\n\n      controller\n        .command(insertCardCommand, node)\n        .command(setCardInjectionCommand, node, { editing: true })\n        .setIsFocused(false);\n    }, [controller]);\n\n    return (\n      <MenuItem {...rest} onClick={handleClick}>\n        {title || ''}\n      </MenuItem>\n    );\n  };\n};\n\nexport default createMenubar;\n"],"file":"createMenu.js"}