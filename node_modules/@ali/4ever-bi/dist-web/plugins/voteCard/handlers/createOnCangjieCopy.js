import { constants, transferUtils } from '@ali/4ever-cangjie';
import logger from '@ali/4ever-logger';
import filterFragment from "../util/filterFragment";
var MIME_TYPES = constants.MIME_TYPES;
export default function createOnCangjieCopy() {
  return function onCangjieCopyOrCut(event, _, next) {
    if (!event.clipboardData) {
      return next();
    }

    try {
      var encodedFragment = event.clipboardData.getData(MIME_TYPES.FRAGMENT);
      var fragment = transferUtils.decodeFragment(encodedFragment);
      var newFragment = filterFragment(fragment);
      event.clipboardData.setData(MIME_TYPES.FRAGMENT, transferUtils.encodeFragment(newFragment));
    } catch (error) {
      logger.error(error);
    }

    return next();
  };
}
//# sourceMappingURL=createOnCangjieCopy.js.map