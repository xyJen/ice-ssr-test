import getCardInfo from "./getCardInfo";
/**
 * 在编辑形态下，如果 title、desc、imgURL 都为 undefined，则说明请求失败，需要显示 error
 * 如果存在 injection 数据，说明是 loading 状态
 * @param readonly
 * @param title
 * @param desc
 * @param imgURL
 */

export var getLinkCardState = function getLinkCardState(readonly, node, injections) {
  // 只读情况下只返回 normal
  if (readonly) {
    return 'normal';
  } // injection 有状态，返回 loading


  if (injections && injections.length > 0) {
    var injection = injections.find(function (i) {
      return i.key === node.key;
    });

    if (injection) {
      if (injection.data.cardInfo) {
        return 'loading';
      }
    }
  }

  var cardInfo = getCardInfo(node);

  var _ref = cardInfo || {},
      title = _ref.title,
      desc = _ref.desc,
      imgURL = _ref.imgURL; // 数据都为 undefined 返回 error


  if (title === undefined && desc === undefined && imgURL === undefined) {
    return 'error';
  }

  return 'normal';
};
//# sourceMappingURL=getLinkCardState.js.map