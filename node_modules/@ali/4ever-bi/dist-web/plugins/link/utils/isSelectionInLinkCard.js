import { isLinkCardNode } from "./isLinkCard";
export default function isSelectionInLinkCard(value) {
  if (!value) {
    return false;
  }

  var document = value.document,
      selection = value.selection,
      injections = value.injections;

  if (!selection) {
    return false;
  }

  var start = selection.getStart(document);
  var startKey = start.key;

  if (!startKey) {
    return false;
  }

  var linkNode = document.getClosest(startKey, function (node) {
    return isLinkCardNode(node, injections);
  });

  if (linkNode) {
    return true;
  } // 对于 purelink 展示位 loading 卡片的瞬时状态，判断 start 的 offset 是否在范围内


  if (start.isTextPoint()) {
    var textNode = document.getNode(startKey);

    if (textNode && textNode.isText() && isLinkCardNode(textNode, injections)) {
      var _injection$data;

      var injection = injections.find(function (i) {
        return i.key === textNode.key;
      });
      var range = injection == null ? void 0 : (_injection$data = injection.data) == null ? void 0 : _injection$data.range;

      if (range) {
        var startOffset = range.startOffset,
            endOffset = range.endOffset;
        return start.offset > startOffset && start.offset < endOffset;
      }
    }
  }

  return false;
}
//# sourceMappingURL=isSelectionInLinkCard.js.map