import { transferUtils, Value, constants, Document } from '@ali/4ever-cangjie';
import { getHtmlFromValue, createClipboardManager } from '@ali/4ever-plugin-clipboard';
var MIME_TYPES = constants.MIME_TYPES;
export default function copyLink(controller, node, serializer) {
  var _clip$write;

  var _ref = node.data.metadata,
      href = _ref.href;
  var fragment = Document.create({
    nodes: [node]
  });
  var value = Value.create({
    document: fragment
  });
  var clip = createClipboardManager();
  clip.write((_clip$write = {}, _clip$write[MIME_TYPES.FRAGMENT] = transferUtils.encodeFragment(fragment), _clip$write[MIME_TYPES.HTML] = getHtmlFromValue(serializer, value), _clip$write[MIME_TYPES.TEXT] = href || serializer.valueToText(value), _clip$write));
  return controller;
}
//# sourceMappingURL=copyLink.js.map