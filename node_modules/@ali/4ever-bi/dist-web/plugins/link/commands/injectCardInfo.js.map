{"version":3,"sources":["../../../../../src/plugins/link/commands/injectCardInfo.ts"],"names":["Injection","injectCardInfo","controller","node","cardInfo","range","injections","value","injection","create","key","data","excludeInjections","filter","i","setInjections"],"mappings":"AAAA,SAAmCA,SAAnC,QAAoD,oBAApD;AAGA,eAAe,SAASC,cAAT,CAAwBC,UAAxB,EAAgDC,IAAhD,EAAqEC,QAArE,EAA8FC,KAA9F,EAA0H;AAAA,MAC/HC,UAD+H,GAChHJ,UAAU,CAACK,KADqG,CAC/HD,UAD+H;AAEvI,MAAME,SAAS,GAAGR,SAAS,CAACS,MAAV,CAAiB;AACjCC,IAAAA,GAAG,EAAEP,IAAI,CAACO,GADuB;AAEjCC,IAAAA,IAAI,EAAE;AACJP,MAAAA,QAAQ,EAARA,QADI;AAEJC,MAAAA,KAAK,EAALA;AAFI;AAF2B,GAAjB,CAAlB;AAOA,MAAMO,iBAA8B,GAAGN,UAAU,CAACO,MAAX,CAAkB,UAACC,CAAD;AAAA,WAAOA,CAAC,CAACJ,GAAF,KAAUP,IAAI,CAACO,GAAtB;AAAA,GAAlB,CAAvC;AACAR,EAAAA,UAAU,CAACa,aAAX,WAA6BH,iBAA7B,GAAgDJ,SAAhD;AACA,SAAON,UAAP;AACD","sourcesContent":["import { Controller, Inline, Text, Injection } from '@ali/4ever-cangjie';\nimport { ILinkCardInfo, IRange } from '../types';\n\nexport default function injectCardInfo(controller: Controller, node: Inline | Text, cardInfo: ILinkCardInfo, range?: IRange): Controller {\n  const { injections } = controller.value;\n  const injection = Injection.create({\n    key: node.key,\n    data: {\n      cardInfo,\n      range,\n    },\n  });\n  const excludeInjections: Injection[] = injections.filter((i) => i.key !== node.key);\n  controller.setInjections([...excludeInjections, injection]);\n  return controller;\n}\n"],"file":"injectCardInfo.js"}