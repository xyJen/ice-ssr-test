import { Commands, Text, Selection, TextPoint } from '@ali/4ever-cangjie';
import removePureLink from "./removePureLink";
export default function updatePureLink(controller, node, offset, text, href, srcHref) {
  // 存在文本或者链接变化时，将 pure link 转换为 text link
  if (srcHref !== href || text) {
    var nodeText = text.length ? text : href;
    var point = TextPoint.create({
      key: node.key,
      offset: offset
    });
    var selection = Selection.create({
      anchor: point,
      focus: point
    });
    return removePureLink(controller, node, offset, srcHref).command(Commands.select, selection).command(Commands.insertInline, {
      type: 'link',
      data: {
        href: href
      },
      nodes: [Text.create(nodeText)]
    });
  }

  return controller;
}
//# sourceMappingURL=updatePureLink.js.map