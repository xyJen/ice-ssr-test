{"version":3,"sources":["../../../../../src/plugins/sticker/components/stickerMenu.tsx"],"names":["React","useCallback","MenuItem","InlineMenuItem","PluginRoles","insertSticker","setStickerPanelVisible","STICKER_PLACEHOLDER_DATA","WithStickerMenu","Component","StickerMenu","props","menuItem","controller","value","title","rest","isCollapsedAtEdge","selection","isDisabled","query","handleClick","run","visible","sticker","menu","inlineMenu"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,QAAmC,OAAnC;qBAC4B,a;AAA5B,SAASC,QAAT,EAAmBC,cAAnB,QAAyC,gBAAzC;AACA,SAASC,WAAT,QAA4B,mBAA5B;AAEA;AACA,SAASC,aAAT,EAAwBC,sBAAxB;AACA,SAASC,wBAAT;;AAEA,SAASC,eAAT,CAAyBC,SAAzB,EAAmD;AACjD,SAAO,SAASC,WAAT,CAAqBC,KAArB,EAAgD;AAAA,QAC7CC,QAD6C,GACpBD,KADoB,CAC7CC,QAD6C;AAAA,QACnCC,UADmC,GACpBF,KADoB,CACnCE,UADmC;AAAA,QAE7CC,KAF6C,GAEnCD,UAFmC,CAE7CC,KAF6C;;AAAA,QAG7CC,KAH6C,GAG1BH,QAH0B,CAG7CG,KAH6C;AAAA,QAGnCC,IAHmC,iCAG1BJ,QAH0B;;AAAA,QAK7CK,iBAL6C,GAKvBJ,UAAU,CAACC,KAAX,CAAiBI,SALM,CAK7CD,iBAL6C;AAMrD,QAAME,UAAU,GACdN,UAAU,CAACO,KAAX,CAAiB,kBAAjB,KACAH,iBADA,IAEAJ,UAAU,CAACO,KAAX,CAAiB,oBAAjB,CAFA,IAGAP,UAAU,CAACO,KAAX,CAAiB,mBAAjB,CAHA,IAIAP,UAAU,CAACO,KAAX,CAAiB,sBAAjB,CAJA,IAKAP,UAAU,CAACO,KAAX,CAAiB,uBAAjB,CANF;AAQA,QAAMC,WAAW,GAAGpB,WAAW,CAAC,YAAM;AACpCY,MAAAA,UAAU,CAACS,GAAX,CAAe,UAAf,EAA2BjB,aAAa,CAACE,wBAAD,CAAxC;AACAM,MAAAA,UAAU,CAACS,GAAX,CACE,UADF,EAEEhB,sBAAsB,CAAC;AACrBiB,QAAAA,OAAO,EAAE;AADY,OAAD,CAFxB;AAMD,KAR8B,EAQ5B,CAACV,UAAD,CAR4B,CAA/B;AAUA,wBACE,eAAC,SAAD,eAAeG,IAAf;AAAqB,MAAA,QAAQ,EAAEG,UAA/B;AAA2C,MAAA,OAAO,EAAEE,WAApD;AAAiE,MAAA,IAAI,EAAEjB,WAAW,CAACoB;AAAnF,QACGT,KAAK,IAAI,EADZ,CADF;AAKD,GA7BD;AA8BD;;AAED,OAAO,IAAMU,IAAI,GAAGjB,eAAe,CAACN,QAAD,CAA5B;AAEP,OAAO,IAAMwB,UAAU,GAAGlB,eAAe,CAACL,cAAD,CAAlC","sourcesContent":["import React, { useCallback } from 'react';\nimport { MenuItem, InlineMenuItem } from '@ali/we-design';\nimport { PluginRoles } from '@ali/4ever-bamboo';\nimport { MenuItemInnerProps } from '@ali/4ever-component';\n;\nimport { insertSticker, setStickerPanelVisible } from '../actions';\nimport { STICKER_PLACEHOLDER_DATA } from '../constants';\n\nfunction WithStickerMenu(Component: React.FC<any>) {\n  return function StickerMenu(props: MenuItemInnerProps) {\n    const { menuItem, controller } = props;\n    const { value } = controller;\n    const { title, ...rest } = menuItem;\n\n    const { isCollapsedAtEdge } = controller.value.selection;\n    const isDisabled =\n      controller.query('isDisableSticker') ||\n      isCollapsedAtEdge ||\n      controller.query('isSelectionInImage') ||\n      controller.query('isSelectionInLink') ||\n      controller.query('isSelectionInMention') ||\n      controller.query('isSelectionInLinkCard');\n\n    const handleClick = useCallback(() => {\n      controller.run('onAction', insertSticker(STICKER_PLACEHOLDER_DATA));\n      controller.run(\n        'onAction',\n        setStickerPanelVisible({\n          visible: true,\n        }),\n      );\n    }, [controller]);\n\n    return (\n      <Component {...rest} disabled={isDisabled} onClick={handleClick} role={PluginRoles.sticker}>\n        {title || ''}\n      </Component>\n    );\n  };\n}\n\nexport const menu = WithStickerMenu(MenuItem);\n\nexport const inlineMenu = WithStickerMenu(InlineMenuItem);\n"],"file":"stickerMenu.js"}