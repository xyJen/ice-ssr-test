{"version":3,"sources":["../../../../../src/plugins/sticker/utils/getMarksAtAnchor.ts"],"names":["Mark","Text","SzMark","HighlightMark","getMarksAtAnchor","controller","value","document","selection","anchor","anchorNode","getNode","key","marks","isText","getMarks","create","type","TYPE","data","query","szUnit"],"mappings":"AAAA,SAAqBA,IAArB,EAA2BC,IAA3B,QAAuC,oBAAvC;AACA,SAASC,MAAT,EAAiBC,aAAjB,QAAsC,eAAtC;AAEA;AACA;AACA;AACA;;AACA,eAAe,SAASC,gBAAT,CAA0BC,UAA1B,EAAkD;AAAA,0BAC/BA,UAAU,CAACC,KADoB;AAAA,MACvDC,QADuD,qBACvDA,QADuD;AAAA,MAC7CC,SAD6C,qBAC7CA,SAD6C;AAAA,MAEvDC,MAFuD,GAE5CD,SAF4C,CAEvDC,MAFuD;AAG/D,MAAMC,UAAU,GAAGH,QAAQ,CAACI,OAAT,CAAiBF,MAAM,CAACG,GAAxB,CAAnB;AACA,MAAMC,KAAK,GAAGZ,IAAI,CAACa,MAAL,CAAYJ,UAAZ,IAA0BA,UAAU,CAACK,QAAX,EAA1B,GAAkD,EAAhE;AACA,mBACKF,KADL,GAEEb,IAAI,CAACgB,MAAL,CAAY;AACVC,IAAAA,IAAI,EAAEf,MAAM,CAACgB,IADH;AAEVC,IAAAA,IAAI,EAAE;AACJb,MAAAA,KAAK,EAAED,UAAU,CAACe,KAAX,CAAiB,SAAjB,CADH;AAEJC,MAAAA,MAAM,EAAE;AAFJ;AAFI,GAAZ,CAFF,EASErB,IAAI,CAACgB,MAAL,CAAY;AACVC,IAAAA,IAAI,EAAEd,aAAa,CAACe,IADV;AAEVC,IAAAA,IAAI,EAAE;AACJb,MAAAA,KAAK,EAAED,UAAU,CAACe,KAAX,CAAiB,cAAjB;AADH;AAFI,GAAZ,CATF;AAgBD","sourcesContent":["import { Controller, Mark, Text } from '@ali/4ever-cangjie';\nimport { SzMark, HighlightMark } from '@ali/4ever-mo';\n\n/**\n * @description 继承粘贴时光标所在位置 startBlock的style及type\n * @param {controller}\n * */\nexport default function getMarksAtAnchor(controller: Controller) {\n  const { document, selection } = controller.value;\n  const { anchor } = selection;\n  const anchorNode = document.getNode(anchor.key);\n  const marks = Text.isText(anchorNode) ? anchorNode.getMarks() : [];\n  return [\n    ...marks,\n    Mark.create({\n      type: SzMark.TYPE,\n      data: {\n        value: controller.query('getSize'),\n        szUnit: 'pt',\n      },\n    }),\n    Mark.create({\n      type: HighlightMark.TYPE,\n      data: {\n        value: controller.query('getHighlight'),\n      },\n    }),\n  ];\n}\n"],"file":"getMarksAtAnchor.js"}