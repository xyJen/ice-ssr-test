{"version":3,"sources":["../../../src/utils/getHighestSelectedBlocks.ts"],"names":["getHighestSelectedBlocks","value","document","startBlock","endBlock","ancestor","getCommonAncestor","key","startPath","getPath","endPath","nodes","slice"],"mappings":";;;;;;;AAEO,SAASA,wBAAT,CAAkCC,KAAlC,EAAyD;AAC9D,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,UAAZ;AAAwBC,IAAAA;AAAxB,MAAqCH,KAA3C;AAEA,MAAI,CAACE,UAAD,IAAe,CAACC,QAApB,EAA8B,OAAO,EAAP;;AAE9B,MAAID,UAAU,KAAKC,QAAnB,EAA6B;AAC3B,WAAO,CAACD,UAAD,CAAP;AACD;;AAED,QAAME,QAAQ,GAAGH,QAAQ,CAACI,iBAAT,CAA2BH,UAAU,CAACI,GAAtC,EAA2CH,QAAQ,CAACG,GAApD,CAAjB;AACA,MAAI,CAACF,QAAL,EAAe,OAAO,EAAP;AAEf,QAAMG,SAAS,GAAGH,QAAQ,CAACI,OAAT,CAAiBN,UAAU,CAACI,GAA5B,CAAlB;AACA,QAAMG,OAAO,GAAGL,QAAQ,CAACI,OAAT,CAAiBL,QAAQ,CAACG,GAA1B,CAAhB;AAEA,MAAI,CAACC,SAAD,IAAc,CAACE,OAAnB,EAA4B,OAAO,EAAP;AAE5B,SAAQL,QAAQ,CAACM,KAAV,CAA4BC,KAA5B,CAAkCJ,SAAS,CAAC,CAAD,CAA3C,EAAgDE,OAAO,CAAC,CAAD,CAAP,GAAa,CAA7D,CAAP;AACD","sourcesContent":["import { Value, Block } from '@ali/4ever-cangjie';\n\nexport function getHighestSelectedBlocks(value: Value): Block[] {\n  const { document, startBlock, endBlock } = value;\n\n  if (!startBlock || !endBlock) return [];\n\n  if (startBlock === endBlock) {\n    return [startBlock];\n  }\n\n  const ancestor = document.getCommonAncestor(startBlock.key, endBlock.key);\n  if (!ancestor) return [];\n\n  const startPath = ancestor.getPath(startBlock.key);\n  const endPath = ancestor.getPath(endBlock.key);\n\n  if (!startPath || !endPath) return [];\n\n  return (ancestor.nodes as Block[]).slice(startPath[0], endPath[0] + 1);\n}\n"],"file":"getHighestSelectedBlocks.js"}