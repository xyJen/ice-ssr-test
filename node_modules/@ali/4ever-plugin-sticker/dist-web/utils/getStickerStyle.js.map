{"version":3,"sources":["../../../src/utils/getStickerStyle.ts"],"names":["getStickerStyle","node","nodeData","data","text","nodes","textMarks","leaves","reduce","marks","leaf","length","Array","prototype","push","apply","sz","highlight","forEach","type","value"],"mappings":"AAGA,eAAe,SAASA,eAAT,CAAyBC,IAAzB,EAA4C;AAAA,MAC3CC,QAD2C,GAC9BD,IAD8B,CACjDE,IADiD,EAEzD;;AACA,MAAMC,IAAI,GAAGH,IAAI,CAACI,KAAL,CAAW,CAAX,CAAb;AACA,MAAMC,SAAS,GAAGF,IAAI,CAACG,MAAL,CAAYC,MAAZ,CAA2B,UAACC,KAAD,EAAQC,IAAR,EAAiB;AAC5D,QAAIA,IAAI,CAACD,KAAL,CAAWE,MAAf,EAAuB;AACrBC,MAAAA,KAAK,CAACC,SAAN,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2BN,KAA3B,EAAkCC,IAAI,CAACD,KAAvC;AACD;;AACD,WAAOA,KAAP;AACD,GALiB,EAKf,EALe,CAAlB;AAJyD,MAUnDO,EAVmD,GAUjCd,QAViC,CAUnDc,EAVmD;AAAA,MAU/CC,SAV+C,GAUjCf,QAViC,CAU/Ce,SAV+C;;AAWzD,MAAIX,SAAS,CAACK,MAAV,KAAqB,CAAzB,EAA4B;AAC1BL,IAAAA,SAAS,CAACY,OAAV,CAAkB,gBAAoB;AAAA,UAAjBC,IAAiB,QAAjBA,IAAiB;AAAA,UAAXhB,IAAW,QAAXA,IAAW;;AACpC;AACA,UAAIgB,IAAI,KAAK,IAAb,EAAmB;AACjBH,QAAAA,EAAE,GAAGb,IAAI,CAACiB,KAAV;AACD,OAFD,MAEO,IAAID,IAAI,KAAK,WAAb,EAA0B;AAC/BF,QAAAA,SAAS,GAAGd,IAAI,CAACiB,KAAjB;AACD;AACF,KAPD;AAQD,GATD,MASO;AACLH,IAAAA,SAAS,GAAG,IAAZ;AACD;;AACD,SAAO;AAAED,IAAAA,EAAE,EAAFA,EAAF;AAAMC,IAAAA,SAAS,EAATA;AAAN,GAAP;AACD","sourcesContent":["import { Text, Mark } from '@ali/4ever-cangjie';\nimport { default as StickerNode } from '../mo/models';\n\nexport default function getStickerStyle(node: StickerNode) {\n  const { data: nodeData } = node;\n  // 支持排版里的节点不支持 getFirstText 方法\n  const text = node.nodes[0] as Text;\n  const textMarks = text.leaves.reduce<Mark[]>((marks, leaf) => {\n    if (leaf.marks.length) {\n      Array.prototype.push.apply(marks, leaf.marks);\n    }\n    return marks;\n  }, []);\n  let { sz, highlight } = nodeData;\n  if (textMarks.length !== 0) {\n    textMarks.forEach(({ type, data }) => {\n      // bamboo 与 mo 存在互相引用，需要治理后才能使用 mo 中的 type\n      if (type === 'sz') {\n        sz = data.value;\n      } else if (type === 'highlight') {\n        highlight = data.value;\n      }\n    });\n  } else {\n    highlight = null;\n  }\n  return { sz, highlight };\n}\n"],"file":"getStickerStyle.js"}