{"version":3,"sources":["../../../src/utils/getStickerStyle.ts"],"names":["getStickerStyle","node","data","nodeData","text","nodes","textMarks","leaves","reduce","marks","leaf","length","Array","prototype","push","apply","sz","highlight","forEach","type","value"],"mappings":";;;;;;;AAGe,SAASA,eAAT,CAAyBC,IAAzB,EAA4C;AACzD,QAAM;AAAEC,IAAAA,IAAI,EAAEC;AAAR,MAAqBF,IAA3B,CADyD,CAEzD;;AACA,QAAMG,IAAI,GAAGH,IAAI,CAACI,KAAL,CAAW,CAAX,CAAb;AACA,QAAMC,SAAS,GAAGF,IAAI,CAACG,MAAL,CAAYC,MAAZ,CAA2B,CAACC,KAAD,EAAQC,IAAR,KAAiB;AAC5D,QAAIA,IAAI,CAACD,KAAL,CAAWE,MAAf,EAAuB;AACrBC,MAAAA,KAAK,CAACC,SAAN,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2BN,KAA3B,EAAkCC,IAAI,CAACD,KAAvC;AACD;;AACD,WAAOA,KAAP;AACD,GALiB,EAKf,EALe,CAAlB;AAMA,MAAI;AAAEO,IAAAA,EAAF;AAAMC,IAAAA;AAAN,MAAoBd,QAAxB;;AACA,MAAIG,SAAS,CAACK,MAAV,KAAqB,CAAzB,EAA4B;AAC1BL,IAAAA,SAAS,CAACY,OAAV,CAAkB,CAAC;AAAEC,MAAAA,IAAF;AAAQjB,MAAAA;AAAR,KAAD,KAAoB;AACpC;AACA,UAAIiB,IAAI,KAAK,IAAb,EAAmB;AACjBH,QAAAA,EAAE,GAAGd,IAAI,CAACkB,KAAV;AACD,OAFD,MAEO,IAAID,IAAI,KAAK,WAAb,EAA0B;AAC/BF,QAAAA,SAAS,GAAGf,IAAI,CAACkB,KAAjB;AACD;AACF,KAPD;AAQD,GATD,MASO;AACLH,IAAAA,SAAS,GAAG,IAAZ;AACD;;AACD,SAAO;AAAED,IAAAA,EAAF;AAAMC,IAAAA;AAAN,GAAP;AACD","sourcesContent":["import { Text, Mark } from '@ali/4ever-cangjie';\nimport { default as StickerNode } from '../mo/models';\n\nexport default function getStickerStyle(node: StickerNode) {\n  const { data: nodeData } = node;\n  // 支持排版里的节点不支持 getFirstText 方法\n  const text = node.nodes[0] as Text;\n  const textMarks = text.leaves.reduce<Mark[]>((marks, leaf) => {\n    if (leaf.marks.length) {\n      Array.prototype.push.apply(marks, leaf.marks);\n    }\n    return marks;\n  }, []);\n  let { sz, highlight } = nodeData;\n  if (textMarks.length !== 0) {\n    textMarks.forEach(({ type, data }) => {\n      // bamboo 与 mo 存在互相引用，需要治理后才能使用 mo 中的 type\n      if (type === 'sz') {\n        sz = data.value;\n      } else if (type === 'highlight') {\n        highlight = data.value;\n      }\n    });\n  } else {\n    highlight = null;\n  }\n  return { sz, highlight };\n}\n"],"file":"getStickerStyle.js"}