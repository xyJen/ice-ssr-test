"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = updateCard;

var _everCangjie = require("@ali/4ever-cangjie");

var _lodash = require("lodash");

function updateCard(controller, node, data) {
  const {
    key
  } = node;
  const targetNode = controller.value.document.getNode(key);
  if (!_everCangjie.Element.isElement(targetNode)) return controller;

  const setNode = () => {
    return controller.command(_everCangjie.Commands.setNodeByKey, key, {
      type: 'card',
      data: { ...targetNode.data,
        ...(0, _lodash.omit)(data, 'withoutSaving')
      }
    });
  };

  if (data.withoutSaving) {
    // @ts-ignore
    return controller.withoutSaving(() => {
      setNode();
    });
  }

  return setNode();
}
//# sourceMappingURL=setCardData.js.map