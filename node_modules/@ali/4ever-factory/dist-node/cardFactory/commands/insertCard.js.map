{"version":3,"sources":["../../../../src/cardFactory/commands/insertCard.ts"],"names":["controller","payload","finalNode","Block","isBlock","create","type","Card","TYPE","data","run","basicActions","createInsertBlockWithoutExtraBlankAction","node","key"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;eAiBe,CAACA,UAAD,EAAyBC,OAAzB,KAA2D;AACxE,QAAMC,SAAgB,GAAGC,mBAAMC,OAAN,CAAcH,OAAd,IAAyBA,OAAzB,GAAmCE,mBAAME,MAAN,CAAa;AACvEC,IAAAA,IAAI,EAAEC,qBAAKC,IAD4D;AAEvEC,IAAAA,IAAI,EAAE,EACJ,GAAGR;AADC;AAFiE,GAAb,CAA5D;AAOAD,EAAAA,UAAU,CAACU,GAAX,CAAe,UAAf,EAA2BC,2BAAaC,wCAAb,CAAsD;AAAEC,IAAAA,IAAI,EAAEX;AAAR,GAAtD,CAA3B;AAEA,0CAAwBA,SAAS,CAACY,GAAlC,EAAuC,IAAvC;AAEA,SAAOd,UAAP;AACD,C","sourcesContent":["import { Controller, Block } from '@ali/4ever-cangjie';\nimport { Card } from '@ali/4ever-plugin-card';\nimport { biActions as basicActions } from '@ali/4ever-plugin-basic';\nimport { setOwnerAndFirstCreated } from '../utils/cardStore';\n\nexport interface CardDataJSON {\n  /**\n   * 卡片子类型\n   */\n  cardType: string;\n  /**\n   * 卡片初始高度，排版需要\n   */\n  height: number;\n  /**\n   * 卡片元数据\n   */\n  metadata: any;\n}\n\nexport default (controller: Controller, payload: CardDataJSON | Block) => {\n  const finalNode: Block = Block.isBlock(payload) ? payload : Block.create({\n    type: Card.TYPE,\n    data: {\n      ...payload,\n    },\n  });\n  \n  controller.run('onAction', basicActions.createInsertBlockWithoutExtraBlankAction({ node: finalNode }));\n\n  setOwnerAndFirstCreated(finalNode.key, true);\n\n  return controller;\n};\n"],"file":"insertCard.js"}