{"version":3,"sources":["../../../src/cardFactory/index.tsx"],"names":["cardFactory","createPlugin","createCardPlugin","bizConfig","myPlugin","menubar","toolbar","onAction","onCangjiePaste","queries","onCangjieCopy","renderHoverToolbar","key","cardType","renderNode","Placeholder","onKeyDown","commands","insertCard","insertCardCommand","removeCard","removeCardCommand","setCardData","setCardDataCommand","setCardInjection","setCardInjectionCommand","lazyRenderStrategy","_","node","type","data","height","size","undefined","models","klass"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAIA;;AACA;;AACA;;AACA;;AAIO,SAASA,WAAT,CACLC,YADK,EAEL;AACA,SAAO,SAASC,gBAAT,CAA0BC,SAA1B,EAAqE;AAC1E,UAAMC,QAAQ,GAAGH,YAAY,CAACE,SAAD,CAA7B;AACA,UAAM;AAAEE,MAAAA,OAAF;AAAWC,MAAAA,OAAX;AAAoBC,MAAAA,QAApB;AAA8BC,MAAAA,cAA9B;AAA8CC,MAAAA,OAA9C;AAAuDC,MAAAA,aAAvD;AAAsEC,MAAAA;AAAtE,QAA6FP,QAAnG;AAEA,WAAO,EACL,GAAG,+BAAU,EAAV,CADE;AAELQ,MAAAA,GAAG,EAAER,QAAQ,CAACS,QAFT;AAGLA,MAAAA,QAAQ,EAAET,QAAQ,CAACS,QAHd;AAILR,MAAAA,OAJK;AAKL;AACAC,MAAAA,OANK;AAOLQ,MAAAA,UAAU,EAAE,+BAAiBV,QAAjB,EAA2BD,SAA3B,EAAsCY,0BAAtC,CAPP;AAQLC,MAAAA,SAAS,EAAE,+BARN;AASLT,MAAAA,QAAQ,EAAE,6BAAeA,QAAf,CATL;AAULG,MAAAA,aAAa,EAAE,kCAAoBA,aAApB,CAVV;AAWLF,MAAAA,cAAc,EAAE,mCAAqBA,cAArB,CAXX;AAYLS,MAAAA,QAAQ,EAAE;AACRC,QAAAA,UAAU,EAAEC,2BADJ;AAERC,QAAAA,UAAU,EAAEC,2BAFJ;AAGRC,QAAAA,WAAW,EAAEC,4BAHL;AAIRC,QAAAA,gBAAgB,EAAEC;AAJV,OAZL;AAkBLhB,MAAAA,OAAO,EAAE,EACP,GAAGA,OADI;;AAEPiB,QAAAA,kBAAkB,CAACC,CAAD,EAAIC,IAAJ,EAAU;AAC1B,iBAAOA,IAAI,CAACC,IAAL,KAAc,MAAd,IAAwB,OAAOD,IAAI,CAACE,IAAL,CAAUC,MAAjB,KAA4B,QAApD,GACH;AAAEC,YAAAA,IAAI,EAAE;AAAED,cAAAA,MAAM,EAAEH,IAAI,CAACE,IAAL,CAAUC;AAApB;AAAR,WADG,GAEHE,SAFJ;AAGD;;AANM,OAlBJ;AA0BLC,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAE,OADD;AAENN,QAAAA,IAAI,EAAE;AAFA,OA1BH;AA8BLlB,MAAAA;AA9BK,KAAP;AAgCD,GApCD;AAqCD","sourcesContent":["import createRenderNode from './createRenderNode';\nimport createOnKeyDown from './handlers/createOnKeyDown';\nimport createOnAction from './handlers/createOnAction';\nimport { removeCard, setCardData, setCardInjection, insertCard } from './actions';\nimport { insertCardCommand, removeCardCommand, setCardDataCommand, setCardInjectionCommand } from './commands';\n\nimport { CardPluginType, CustomizedBiCardPluginType } from './type';\nimport type { BiPluginConfig } from '@ali/4ever-cangjie';\nimport createOnCangjieCopy from './handlers/createOnCangjieCopy';\nimport createOnCangjiePaste from './handlers/createOnCangjiePaste';\nimport { Placeholder } from '@ali/4ever-component';\nimport { moFactory } from '@ali/4ever-plugin-card';\n\nexport type { CardLocale, CustomizedBiCardPluginType, CardPluginType, RenderCardProps } from './type';\n\nexport function cardFactory(\n  createPlugin: (bizConfig: BiPluginConfig) => CustomizedBiCardPluginType,\n) {\n  return function createCardPlugin(bizConfig: BiPluginConfig): CardPluginType {\n    const myPlugin = createPlugin(bizConfig);\n    const { menubar, toolbar, onAction, onCangjiePaste, queries, onCangjieCopy, renderHoverToolbar } = myPlugin;\n\n    return {\n      ...moFactory({}),\n      key: myPlugin.cardType,\n      cardType: myPlugin.cardType,\n      menubar,\n      // @ts-ignore\n      toolbar,\n      renderNode: createRenderNode(myPlugin, bizConfig, Placeholder),\n      onKeyDown: createOnKeyDown(),\n      onAction: createOnAction(onAction),\n      onCangjieCopy: createOnCangjieCopy(onCangjieCopy),\n      onCangjiePaste: createOnCangjiePaste(onCangjiePaste),\n      commands: {\n        insertCard: insertCardCommand,\n        removeCard: removeCardCommand,\n        setCardData: setCardDataCommand,\n        setCardInjection: setCardInjectionCommand,\n      },\n      queries: {\n        ...queries,\n        lazyRenderStrategy(_, node) {\n          return node.type === 'card' && typeof node.data.height === 'number'\n            ? { size: { height: node.data.height } }\n            : undefined;\n        },\n      },\n      models: {\n        klass: 'block',\n        type: 'card',\n      },\n      renderHoverToolbar,\n    };\n  };\n}\n\nexport {\n  removeCard,\n  setCardData,\n  setCardInjection,\n  insertCard,\n};\n"],"file":"index.js"}