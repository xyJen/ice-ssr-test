"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _react = _interopRequireDefault(require("react"));

var _lodash = require("lodash");

var _classnames = _interopRequireDefault(require("classnames"));

var _everPluginCard = require("@ali/4ever-plugin-card");

const _createElement = /*#__PURE__*/_react.default.createElement;

const Container = props => {
  const {
    children,
    cardStyle = {},
    node,
    attributes,
    isMobile,
    isSelected,
    restrictSize,
    controller
  } = props;
  const {
    cardType,
    height,
    spacing
  } = node.data;
  const {
    isFocused
  } = controller.value;
  const realHeight = isMobile ? 'auto' : height;

  const style = _react.default.useMemo(() => {
    let cssHeight = 'auto';
    let overflow = 'initial';

    if (restrictSize) {
      cssHeight = (0, _lodash.isNumber)(realHeight) ? `${realHeight}px` : realHeight;
      overflow = 'hidden';
    }

    const calcStyle = {
      height: cssHeight,
      width: '100%',
      overflow,
      ...cardStyle
    };
    return calcStyle;
  }, [realHeight, spacing, restrictSize]);

  const className = _react.default.useMemo(() => (0, _classnames.default)({
    selected: Boolean(isSelected && isFocused)
  }), [isSelected, isFocused]);

  return /*#__PURE__*/_createElement(_everPluginCard.CardWrapper, (0, _extends2.default)({
    style: style
  }, attributes, {
    "data-testid": cardType,
    "data-type": _everPluginCard.Card.TYPE,
    className: className
  }), children);
};

var _default = Container;
exports.default = _default;
//# sourceMappingURL=index.js.map