{"version":3,"sources":["../../../src/cardFactory/mobileCardFactory.tsx"],"names":["cardFactory","createPlugin","createCardPlugin","bizConfig","myPlugin","menubar","toolbar","onAction","onCangjiePaste","queries","onCangjieCopy","cardType","renderNode","Placeholder","onKeyDown","commands","insertCard","insertCardCommand","removeCard","removeCardCommand","setCardData","setCardDataCommand","setCardInjection","setCardInjectionCommand","lazyRenderStrategy","_","node","type","data","height","size","undefined","models","klass"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AAKO,SAASA,WAAT,CACLC,YADK,EAEL;AACA,SAAO,SAASC,gBAAT,CAA0BC,SAA1B,EAAqE;AAC1E,UAAMC,QAAQ,GAAGH,YAAY,CAACE,SAAD,CAA7B;AACA,UAAM;AAAEE,MAAAA,OAAF;AAAWC,MAAAA,OAAX;AAAoBC,MAAAA,QAApB;AAA8BC,MAAAA,cAA9B;AAA8CC,MAAAA,OAA9C;AAAuDC,MAAAA;AAAvD,QAAyEN,QAA/E;AAEA,WAAO;AACLO,MAAAA,QAAQ,EAAEP,QAAQ,CAACO,QADd;AAELC,MAAAA,UAAU,EAAE,+BAAiBR,QAAjB,EAA2BD,SAA3B,EAAsCU,0CAAtC,CAFP;AAGLC,MAAAA,SAAS,EAAE,+BAHN;AAILP,MAAAA,QAAQ,EAAE,6BAAeA,QAAf,CAJL;AAKLQ,MAAAA,QAAQ,EAAE;AACRC,QAAAA,UAAU,EAAEC,2BADJ;AAERC,QAAAA,UAAU,EAAEC,2BAFJ;AAGRC,QAAAA,WAAW,EAAEC,4BAHL;AAIRC,QAAAA,gBAAgB,EAAEC;AAJV,OALL;AAWLd,MAAAA,OAAO,EAAE,EACP,GAAGA,OADI;;AAEPe,QAAAA,kBAAkB,CAACC,CAAD,EAAIC,IAAJ,EAAU;AAC1B,iBAAOA,IAAI,CAACC,IAAL,KAAc,MAAd,IAAwB,OAAOD,IAAI,CAACE,IAAL,CAAUC,MAAjB,KAA4B,QAApD,GACH;AAAEC,YAAAA,IAAI,EAAE;AAAED,cAAAA,MAAM,EAAEH,IAAI,CAACE,IAAL,CAAUC;AAApB;AAAR,WADG,GAEHE,SAFJ;AAGD;;AANM,OAXJ;AAmBLC,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAE,OADD;AAENN,QAAAA,IAAI,EAAE;AAFA;AAnBH,KAAP;AAwBD,GA5BD;AA6BD","sourcesContent":["import createRenderNode from './createRenderNode';\nimport createOnKeyDown from './handlers/createOnKeyDown';\nimport createOnAction from './handlers/createOnAction';\nimport { removeCard, setCardData, setCardInjection, insertCard } from './actions';\nimport { insertCardCommand, removeCardCommand, setCardDataCommand, setCardInjectionCommand } from './commands';\n\nimport { CardPluginType, CustomizedBiCardPluginType } from './type';\nimport { Placeholder } from './createUnknownCardMobilePlugin';\nimport type { BiPluginConfig } from '@ali/4ever-cangjie';\n\nexport type { CardLocale, CustomizedBiCardPluginType, CardPluginType, RenderCardProps } from './type';\n\nexport function cardFactory(\n  createPlugin: (bizConfig: BiPluginConfig) => CustomizedBiCardPluginType,\n) {\n  return function createCardPlugin(bizConfig: BiPluginConfig): CardPluginType {\n    const myPlugin = createPlugin(bizConfig);\n    const { menubar, toolbar, onAction, onCangjiePaste, queries, onCangjieCopy } = myPlugin;\n\n    return {\n      cardType: myPlugin.cardType,\n      renderNode: createRenderNode(myPlugin, bizConfig, Placeholder),\n      onKeyDown: createOnKeyDown(),\n      onAction: createOnAction(onAction),\n      commands: {\n        insertCard: insertCardCommand,\n        removeCard: removeCardCommand,\n        setCardData: setCardDataCommand,\n        setCardInjection: setCardInjectionCommand,\n      },\n      queries: {\n        ...queries,\n        lazyRenderStrategy(_, node) {\n          return node.type === 'card' && typeof node.data.height === 'number'\n            ? { size: { height: node.data.height } }\n            : undefined;\n        },\n      },\n      models: {\n        klass: 'block',\n        type: 'card',\n      },\n    };\n  };\n}\n\nexport {\n  removeCard,\n  setCardData,\n  setCardInjection,\n  insertCard,\n};\n"],"file":"mobileCardFactory.js"}