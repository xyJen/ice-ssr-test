{"version":3,"sources":["../../../../src/tagFactory/queries/getTagAtFocusEdge.ts"],"names":["Inline","getTagAtFocusEdge","controller","dire","value","selection","focusText","document","start","getStart","isAtStartOfNode","preNode","getPreviousSibling","key","isInline","type","isAtEndOfNode","nextNode","getNextSibling"],"mappings":"AAAA,SAA8BA,MAA9B,QAA4C,oBAA5C;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,iBAAT,CAA2BC,UAA3B,EAAmDC,IAAnD,EAAiG;AAAA,0BACnED,UAAU,CAACE,KADwD;AAAA,MACtGC,SADsG,qBACtGA,SADsG;AAAA,MAC3FC,SAD2F,qBAC3FA,SAD2F;AAAA,MAChFC,QADgF,qBAChFA,QADgF;AAE9G,MAAI,CAACF,SAAD,IAAc,CAACC,SAAnB,EAA8B,OAAO,IAAP;AAC9B,MAAME,KAAK,GAAGH,SAAS,CAACI,QAAV,CAAmBF,QAAnB,CAAd;;AACA,MAAIJ,IAAI,KAAK,UAAT,IAAuBK,KAAK,CAACE,eAAN,CAAsBJ,SAAtB,CAA3B,EAA6D;AAC3D,QAAMK,OAAO,GAAGJ,QAAQ,CAACK,kBAAT,CAA4BN,SAAS,CAACO,GAAtC,CAAhB;AACA,QAAIF,OAAO,IAAIX,MAAM,CAACc,QAAP,CAAgBH,OAAhB,CAAX,IAAuCA,OAAO,CAACI,IAAR,KAAiB,KAA5D,EAAmE,OAAOJ,OAAP;AACpE,GAHD,MAGO,IAAIR,IAAI,KAAK,SAAT,IAAsBK,KAAK,CAACQ,aAAN,CAAoBV,SAApB,CAA1B,EAA0D;AAC/D,QAAMW,QAAQ,GAAGV,QAAQ,CAACW,cAAT,CAAwBZ,SAAS,CAACO,GAAlC,CAAjB;AACA,QAAII,QAAQ,IAAIjB,MAAM,CAACc,QAAP,CAAgBG,QAAhB,CAAZ,IAAyCA,QAAQ,CAACF,IAAT,KAAkB,KAA/D,EAAsE,OAAOE,QAAP;AACvE;;AACD,SAAO,IAAP;AACD","sourcesContent":["import { Controller, Element, Inline } from '@ali/4ever-cangjie';\n/**\n * 获取focus边缘的tag节点\n * @param controller\n * @param dire 方向\n */\nexport default function getTagAtFocusEdge(controller: Controller, dire: 'Backward' | 'Forward'): Element | null {\n  const { selection, focusText, document } = controller.value;\n  if (!selection || !focusText) return null;\n  const start = selection.getStart(document);\n  if (dire === 'Backward' && start.isAtStartOfNode(focusText)) {\n    const preNode = document.getPreviousSibling(focusText.key);\n    if (preNode && Inline.isInline(preNode) && preNode.type === 'tag') return preNode;\n  } else if (dire === 'Forward' && start.isAtEndOfNode(focusText)) {\n    const nextNode = document.getNextSibling(focusText.key);\n    if (nextNode && Inline.isInline(nextNode) && nextNode.type === 'tag') return nextNode;\n  }\n  return null;\n}"],"file":"getTagAtFocusEdge.js"}