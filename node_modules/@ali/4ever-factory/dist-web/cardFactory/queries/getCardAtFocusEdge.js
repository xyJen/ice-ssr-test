import { Block } from '@ali/4ever-cangjie';
/**
 * 获取focus边缘的card节点
 * @param controller
 * @param dire 方向
 */

export default function getCardAtFocusEdge(controller, dire) {
  var _controller$value = controller.value,
      selection = _controller$value.selection,
      focusBlock = _controller$value.focusBlock,
      document = _controller$value.document;
  if (!selection || !focusBlock) return null;
  var focus = selection.focus,
      anchor = selection.anchor;
  if (focus.isEdgePoint() && anchor.isEdgePoint() && focus.key === anchor.key && focusBlock.type === 'card') return focusBlock;
  var start = selection.getStart(document);

  if (dire === 'Backward' && start.isAtStartOfNode(focusBlock)) {
    var preNode = document.getPreviousSibling(focusBlock.key);
    if (preNode && Block.isBlock(preNode) && preNode.type === 'card') return preNode;
  } else if (dire === 'Forward' && start.isAtEndOfNode(focusBlock)) {
    var nextNode = document.getNextSibling(focusBlock.key);
    if (nextNode && Block.isBlock(nextNode) && nextNode.type === 'card') return nextNode;
  }

  return null;
}
//# sourceMappingURL=getCardAtFocusEdge.js.map