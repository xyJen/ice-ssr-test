{"version":3,"sources":["../../../../src/cardFactory/commands/insertCard.ts"],"names":["Block","Card","biActions","basicActions","setOwnerAndFirstCreated","controller","payload","finalNode","isBlock","create","type","TYPE","data","run","createInsertBlockWithoutExtraBlankAction","node","key"],"mappings":";AAAA,SAAqBA,KAArB,QAAkC,oBAAlC;AACA,SAASC,IAAT,QAAqB,wBAArB;AACA,SAASC,SAAS,IAAIC,YAAtB,QAA0C,yBAA1C;AACA,SAASC,uBAAT;AAiBA,gBAAe,UAACC,UAAD,EAAyBC,OAAzB,EAA2D;AACxE,MAAMC,SAAgB,GAAGP,KAAK,CAACQ,OAAN,CAAcF,OAAd,IAAyBA,OAAzB,GAAmCN,KAAK,CAACS,MAAN,CAAa;AACvEC,IAAAA,IAAI,EAAET,IAAI,CAACU,IAD4D;AAEvEC,IAAAA,IAAI,eACCN,OADD;AAFmE,GAAb,CAA5D;AAOAD,EAAAA,UAAU,CAACQ,GAAX,CAAe,UAAf,EAA2BV,YAAY,CAACW,wCAAb,CAAsD;AAAEC,IAAAA,IAAI,EAAER;AAAR,GAAtD,CAA3B;AAEAH,EAAAA,uBAAuB,CAACG,SAAS,CAACS,GAAX,EAAgB,IAAhB,CAAvB;AAEA,SAAOX,UAAP;AACD,CAbD","sourcesContent":["import { Controller, Block } from '@ali/4ever-cangjie';\nimport { Card } from '@ali/4ever-plugin-card';\nimport { biActions as basicActions } from '@ali/4ever-plugin-basic';\nimport { setOwnerAndFirstCreated } from '../utils/cardStore';\n\nexport interface CardDataJSON {\n  /**\n   * 卡片子类型\n   */\n  cardType: string;\n  /**\n   * 卡片初始高度，排版需要\n   */\n  height: number;\n  /**\n   * 卡片元数据\n   */\n  metadata: any;\n}\n\nexport default (controller: Controller, payload: CardDataJSON | Block) => {\n  const finalNode: Block = Block.isBlock(payload) ? payload : Block.create({\n    type: Card.TYPE,\n    data: {\n      ...payload,\n    },\n  });\n  \n  controller.run('onAction', basicActions.createInsertBlockWithoutExtraBlankAction({ node: finalNode }));\n\n  setOwnerAndFirstCreated(finalNode.key, true);\n\n  return controller;\n};\n"],"file":"insertCard.js"}