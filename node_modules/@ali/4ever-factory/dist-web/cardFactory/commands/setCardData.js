import _extends from "@babel/runtime/helpers/extends";
import { Element, Commands } from '@ali/4ever-cangjie';
import { omit } from 'lodash-es';
export default function updateCard(controller, node, data) {
  var key = node.key;
  var targetNode = controller.value.document.getNode(key);
  if (!Element.isElement(targetNode)) return controller;

  var setNode = function setNode() {
    return controller.command(Commands.setNodeByKey, key, {
      type: 'card',
      data: _extends({}, targetNode.data, omit(data, 'withoutSaving'))
    });
  };

  if (data.withoutSaving) {
    // @ts-ignore
    return controller.withoutSaving(function () {
      setNode();
    });
  }

  return setNode();
}
//# sourceMappingURL=setCardData.js.map