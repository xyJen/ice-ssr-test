{"version":3,"sources":["../../../src/cardFactory/mobileCardFactory.tsx"],"names":["createRenderNode","createOnKeyDown","createOnAction","removeCard","setCardData","setCardInjection","insertCard","insertCardCommand","removeCardCommand","setCardDataCommand","setCardInjectionCommand","Placeholder","cardFactory","createPlugin","createCardPlugin","bizConfig","myPlugin","menubar","toolbar","onAction","onCangjiePaste","queries","onCangjieCopy","cardType","renderNode","onKeyDown","commands","lazyRenderStrategy","_","node","type","data","height","size","undefined","models","klass"],"mappings":";AAAA,OAAOA,gBAAP;AACA,OAAOC,eAAP;AACA,OAAOC,cAAP;AACA,SAASC,UAAT,EAAqBC,WAArB,EAAkCC,gBAAlC,EAAoDC,UAApD;AACA,SAASC,iBAAT,EAA4BC,iBAA5B,EAA+CC,kBAA/C,EAAmEC,uBAAnE;AAGA,SAASC,WAAT;AAKA,OAAO,SAASC,WAAT,CACLC,YADK,EAEL;AACA,SAAO,SAASC,gBAAT,CAA0BC,SAA1B,EAAqE;AAC1E,QAAMC,QAAQ,GAAGH,YAAY,CAACE,SAAD,CAA7B;AAD0E,QAElEE,OAFkE,GAEKD,QAFL,CAElEC,OAFkE;AAAA,QAEzDC,OAFyD,GAEKF,QAFL,CAEzDE,OAFyD;AAAA,QAEhDC,QAFgD,GAEKH,QAFL,CAEhDG,QAFgD;AAAA,QAEtCC,cAFsC,GAEKJ,QAFL,CAEtCI,cAFsC;AAAA,QAEtBC,OAFsB,GAEKL,QAFL,CAEtBK,OAFsB;AAAA,QAEbC,aAFa,GAEKN,QAFL,CAEbM,aAFa;AAI1E,WAAO;AACLC,MAAAA,QAAQ,EAAEP,QAAQ,CAACO,QADd;AAELC,MAAAA,UAAU,EAAExB,gBAAgB,CAACgB,QAAD,EAAWD,SAAX,EAAsBJ,WAAtB,CAFvB;AAGLc,MAAAA,SAAS,EAAExB,eAAe,EAHrB;AAILkB,MAAAA,QAAQ,EAAEjB,cAAc,CAACiB,QAAD,CAJnB;AAKLO,MAAAA,QAAQ,EAAE;AACRpB,QAAAA,UAAU,EAAEC,iBADJ;AAERJ,QAAAA,UAAU,EAAEK,iBAFJ;AAGRJ,QAAAA,WAAW,EAAEK,kBAHL;AAIRJ,QAAAA,gBAAgB,EAAEK;AAJV,OALL;AAWLW,MAAAA,OAAO,eACFA,OADE;AAELM,QAAAA,kBAFK,8BAEcC,CAFd,EAEiBC,IAFjB,EAEuB;AAC1B,iBAAOA,IAAI,CAACC,IAAL,KAAc,MAAd,IAAwB,OAAOD,IAAI,CAACE,IAAL,CAAUC,MAAjB,KAA4B,QAApD,GACH;AAAEC,YAAAA,IAAI,EAAE;AAAED,cAAAA,MAAM,EAAEH,IAAI,CAACE,IAAL,CAAUC;AAApB;AAAR,WADG,GAEHE,SAFJ;AAGD;AANI,QAXF;AAmBLC,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAE,OADD;AAENN,QAAAA,IAAI,EAAE;AAFA;AAnBH,KAAP;AAwBD,GA5BD;AA6BD;AAED,SACE3B,UADF,EAEEC,WAFF,EAGEC,gBAHF,EAIEC,UAJF","sourcesContent":["import createRenderNode from './createRenderNode';\nimport createOnKeyDown from './handlers/createOnKeyDown';\nimport createOnAction from './handlers/createOnAction';\nimport { removeCard, setCardData, setCardInjection, insertCard } from './actions';\nimport { insertCardCommand, removeCardCommand, setCardDataCommand, setCardInjectionCommand } from './commands';\n\nimport { CardPluginType, CustomizedBiCardPluginType } from './type';\nimport { Placeholder } from './createUnknownCardMobilePlugin';\nimport type { BiPluginConfig } from '@ali/4ever-cangjie';\n\nexport type { CardLocale, CustomizedBiCardPluginType, CardPluginType, RenderCardProps } from './type';\n\nexport function cardFactory(\n  createPlugin: (bizConfig: BiPluginConfig) => CustomizedBiCardPluginType,\n) {\n  return function createCardPlugin(bizConfig: BiPluginConfig): CardPluginType {\n    const myPlugin = createPlugin(bizConfig);\n    const { menubar, toolbar, onAction, onCangjiePaste, queries, onCangjieCopy } = myPlugin;\n\n    return {\n      cardType: myPlugin.cardType,\n      renderNode: createRenderNode(myPlugin, bizConfig, Placeholder),\n      onKeyDown: createOnKeyDown(),\n      onAction: createOnAction(onAction),\n      commands: {\n        insertCard: insertCardCommand,\n        removeCard: removeCardCommand,\n        setCardData: setCardDataCommand,\n        setCardInjection: setCardInjectionCommand,\n      },\n      queries: {\n        ...queries,\n        lazyRenderStrategy(_, node) {\n          return node.type === 'card' && typeof node.data.height === 'number'\n            ? { size: { height: node.data.height } }\n            : undefined;\n        },\n      },\n      models: {\n        klass: 'block',\n        type: 'card',\n      },\n    };\n  };\n}\n\nexport {\n  removeCard,\n  setCardData,\n  setCardInjection,\n  insertCard,\n};\n"],"file":"mobileCardFactory.js"}