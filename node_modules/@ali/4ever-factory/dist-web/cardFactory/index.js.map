{"version":3,"sources":["../../../src/cardFactory/index.tsx"],"names":["createRenderNode","createOnKeyDown","createOnAction","removeCard","setCardData","setCardInjection","insertCard","insertCardCommand","removeCardCommand","setCardDataCommand","setCardInjectionCommand","createOnCangjieCopy","createOnCangjiePaste","Placeholder","moFactory","cardFactory","createPlugin","createCardPlugin","bizConfig","myPlugin","menubar","toolbar","onAction","onCangjiePaste","queries","onCangjieCopy","renderHoverToolbar","key","cardType","renderNode","onKeyDown","commands","lazyRenderStrategy","_","node","type","data","height","size","undefined","models","klass"],"mappings":";AAAA,OAAOA,gBAAP;AACA,OAAOC,eAAP;AACA,OAAOC,cAAP;AACA,SAASC,UAAT,EAAqBC,WAArB,EAAkCC,gBAAlC,EAAoDC,UAApD;AACA,SAASC,iBAAT,EAA4BC,iBAA5B,EAA+CC,kBAA/C,EAAmEC,uBAAnE;AAIA,OAAOC,mBAAP;AACA,OAAOC,oBAAP;AACA,SAASC,WAAT,QAA4B,sBAA5B;AACA,SAASC,SAAT,QAA0B,wBAA1B;AAIA,OAAO,SAASC,WAAT,CACLC,YADK,EAEL;AACA,SAAO,SAASC,gBAAT,CAA0BC,SAA1B,EAAqE;AAC1E,QAAMC,QAAQ,GAAGH,YAAY,CAACE,SAAD,CAA7B;AAD0E,QAElEE,OAFkE,GAEyBD,QAFzB,CAElEC,OAFkE;AAAA,QAEzDC,OAFyD,GAEyBF,QAFzB,CAEzDE,OAFyD;AAAA,QAEhDC,QAFgD,GAEyBH,QAFzB,CAEhDG,QAFgD;AAAA,QAEtCC,cAFsC,GAEyBJ,QAFzB,CAEtCI,cAFsC;AAAA,QAEtBC,OAFsB,GAEyBL,QAFzB,CAEtBK,OAFsB;AAAA,QAEbC,aAFa,GAEyBN,QAFzB,CAEbM,aAFa;AAAA,QAEEC,kBAFF,GAEyBP,QAFzB,CAEEO,kBAFF;AAI1E,wBACKZ,SAAS,CAAC,EAAD,CADd;AAEEa,MAAAA,GAAG,EAAER,QAAQ,CAACS,QAFhB;AAGEA,MAAAA,QAAQ,EAAET,QAAQ,CAACS,QAHrB;AAIER,MAAAA,OAAO,EAAPA,OAJF;AAKE;AACAC,MAAAA,OAAO,EAAPA,OANF;AAOEQ,MAAAA,UAAU,EAAE7B,gBAAgB,CAACmB,QAAD,EAAWD,SAAX,EAAsBL,WAAtB,CAP9B;AAQEiB,MAAAA,SAAS,EAAE7B,eAAe,EAR5B;AASEqB,MAAAA,QAAQ,EAAEpB,cAAc,CAACoB,QAAD,CAT1B;AAUEG,MAAAA,aAAa,EAAEd,mBAAmB,CAACc,aAAD,CAVpC;AAWEF,MAAAA,cAAc,EAAEX,oBAAoB,CAACW,cAAD,CAXtC;AAYEQ,MAAAA,QAAQ,EAAE;AACRzB,QAAAA,UAAU,EAAEC,iBADJ;AAERJ,QAAAA,UAAU,EAAEK,iBAFJ;AAGRJ,QAAAA,WAAW,EAAEK,kBAHL;AAIRJ,QAAAA,gBAAgB,EAAEK;AAJV,OAZZ;AAkBEc,MAAAA,OAAO,eACFA,OADE;AAELQ,QAAAA,kBAFK,8BAEcC,CAFd,EAEiBC,IAFjB,EAEuB;AAC1B,iBAAOA,IAAI,CAACC,IAAL,KAAc,MAAd,IAAwB,OAAOD,IAAI,CAACE,IAAL,CAAUC,MAAjB,KAA4B,QAApD,GACH;AAAEC,YAAAA,IAAI,EAAE;AAAED,cAAAA,MAAM,EAAEH,IAAI,CAACE,IAAL,CAAUC;AAApB;AAAR,WADG,GAEHE,SAFJ;AAGD;AANI,QAlBT;AA0BEC,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAE,OADD;AAENN,QAAAA,IAAI,EAAE;AAFA,OA1BV;AA8BET,MAAAA,kBAAkB,EAAlBA;AA9BF;AAgCD,GApCD;AAqCD;AAED,SACEvB,UADF,EAEEC,WAFF,EAGEC,gBAHF,EAIEC,UAJF","sourcesContent":["import createRenderNode from './createRenderNode';\nimport createOnKeyDown from './handlers/createOnKeyDown';\nimport createOnAction from './handlers/createOnAction';\nimport { removeCard, setCardData, setCardInjection, insertCard } from './actions';\nimport { insertCardCommand, removeCardCommand, setCardDataCommand, setCardInjectionCommand } from './commands';\n\nimport { CardPluginType, CustomizedBiCardPluginType } from './type';\nimport type { BiPluginConfig } from '@ali/4ever-cangjie';\nimport createOnCangjieCopy from './handlers/createOnCangjieCopy';\nimport createOnCangjiePaste from './handlers/createOnCangjiePaste';\nimport { Placeholder } from '@ali/4ever-component';\nimport { moFactory } from '@ali/4ever-plugin-card';\n\nexport type { CardLocale, CustomizedBiCardPluginType, CardPluginType, RenderCardProps } from './type';\n\nexport function cardFactory(\n  createPlugin: (bizConfig: BiPluginConfig) => CustomizedBiCardPluginType,\n) {\n  return function createCardPlugin(bizConfig: BiPluginConfig): CardPluginType {\n    const myPlugin = createPlugin(bizConfig);\n    const { menubar, toolbar, onAction, onCangjiePaste, queries, onCangjieCopy, renderHoverToolbar } = myPlugin;\n\n    return {\n      ...moFactory({}),\n      key: myPlugin.cardType,\n      cardType: myPlugin.cardType,\n      menubar,\n      // @ts-ignore\n      toolbar,\n      renderNode: createRenderNode(myPlugin, bizConfig, Placeholder),\n      onKeyDown: createOnKeyDown(),\n      onAction: createOnAction(onAction),\n      onCangjieCopy: createOnCangjieCopy(onCangjieCopy),\n      onCangjiePaste: createOnCangjiePaste(onCangjiePaste),\n      commands: {\n        insertCard: insertCardCommand,\n        removeCard: removeCardCommand,\n        setCardData: setCardDataCommand,\n        setCardInjection: setCardInjectionCommand,\n      },\n      queries: {\n        ...queries,\n        lazyRenderStrategy(_, node) {\n          return node.type === 'card' && typeof node.data.height === 'number'\n            ? { size: { height: node.data.height } }\n            : undefined;\n        },\n      },\n      models: {\n        klass: 'block',\n        type: 'card',\n      },\n      renderHoverToolbar,\n    };\n  };\n}\n\nexport {\n  removeCard,\n  setCardData,\n  setCardInjection,\n  insertCard,\n};\n"],"file":"index.js"}