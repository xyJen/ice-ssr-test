import { ACTION_COMMENT_SHOW } from '@ali/4ever-plugin-comment';
import { TOGGLE_FOLD, createCommentShow } from '@ali/4ever-plugin-heading-group';
import { injectFold } from "../commands/fold";

function createOnAction(customizedAction) {
  var handleCommentShow = createCommentShow({
    onAutoUnfold: function onAutoUnfold(controller, node) {
      return controller.command(injectFold, node, false);
    },
    inject: true
  });
  return function onAction(action, controller, next) {
    var type = action.type,
        payload = action.payload;

    if (type === TOGGLE_FOLD) {
      var _ref = payload,
          node = _ref.node,
          fold = _ref.fold;
      return controller.command(injectFold, node, fold);
    }

    if (type === ACTION_COMMENT_SHOW && payload) {
      handleCommentShow(controller, payload);
    }

    return customizedAction ? customizedAction(action, controller, next) : next();
  };
}

export default createOnAction;
//# sourceMappingURL=createOnAction.js.map