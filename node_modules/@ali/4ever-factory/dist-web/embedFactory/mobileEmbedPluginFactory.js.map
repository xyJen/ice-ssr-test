{"version":3,"sources":["../../../src/embedFactory/mobileEmbedPluginFactory.ts"],"names":["upperFirst","insertEmbed","insertFile","actions","onAction","mobileEmbedPluginFactory","params","moFactory","createRenderNode","commands","configName","customActions","config","pluginConfig","uploadFile","enableFilePreview","insertCommandName","key","renderNode","models","klass","type"],"mappings":";AAAA,SAASA,UAAT,QAA2B,WAA3B;AACA,OAAOC,WAAP;AACA,OAAOC,UAAP;AACA,OAAO,KAAKC,OAAZ;AACA,OAAOC,QAAP;AAIA,SAASD,OAAT;AAEA,eAAe,SAASE,wBAAT,CAAkCC,MAAlC,EAA8DC,SAA9D,EAAoF;AAAA,MACzFC,gBADyF,GACjBF,MADiB,CACzFE,gBADyF;AAAA,MACvEC,QADuE,GACjBH,MADiB,CACvEG,QADuE;AAAA,MAC7DC,UAD6D,GACjBJ,MADiB,CAC7DI,UAD6D;AAAA,wBACjBJ,MADiB,CACjDH,OADiD;AAAA,MACxCQ,aADwC,gCACxB,EADwB;AAEjG,SAAO,UAAUC,MAAV,EAA4B;AAAA;;AACjC,QAAMC,YAAY,GAAGD,MAAM,CAACF,UAAD,CAAN,IAAsB,EAA3C;AADiC,QAEzBI,UAFyB,GAEiBD,YAFjB,CAEzBC,UAFyB;AAAA,gCAEiBD,YAFjB,CAEbE,iBAFa;AAAA,QAEbA,iBAFa,sCAEO,KAFP,0BAIjC;;AACA,QAAMC,iBAAiB,cAAYhB,UAAU,CAACU,UAAD,CAA7C;AAEA,wBACKH,SAAS,CAAC,EAAD,CADd;AAEEU,MAAAA,GAAG,EAAEP,UAFP;AAGEQ,MAAAA,UAAU,EAAEV,gBAAgB,CAACI,MAAD,CAH9B;AAIEH,MAAAA,QAAQ,sCACLO,iBADK,IACef,WAAW,CAACa,UAAD,EAAaC,iBAAb,EAAgCL,UAAhC,CAD1B,YAENR,UAFM,GAENA,UAFM,cAGHO,QAHG,CAJV;AASEL,MAAAA,QAAQ,EAARA,QATF;AAUEe,MAAAA,MAAM,EAAE;AACNC,QAAAA,KAAK,EAAE,OADD;AAENC,QAAAA,IAAI,EAAE;AAFA;AAVV;AAeD,GAtBD;AAuBD","sourcesContent":["import { upperFirst } from 'lodash-es';\nimport insertEmbed from './commands/insertEmbed';\nimport insertFile from './commands/insertFile';\nimport * as actions from './actions';\nimport onAction from './handlers/onAction';\nimport { EmbedFactoryParams } from './types';\nimport { BiPlugin, MoFactory } from '@ali/4ever-cangjie';\n\nexport { actions };\n\nexport default function mobileEmbedPluginFactory(params: EmbedFactoryParams, moFactory: MoFactory) {\n  const { createRenderNode, commands, configName, actions: customActions = {} } = params;\n  return function (config): BiPlugin {\n    const pluginConfig = config[configName] || {};\n    const { uploadFile, enableFilePreview = false } = pluginConfig;\n\n    // 目前存在 insertVideo, insertAudio, insertEmbed 三个 command\n    const insertCommandName = `insert${upperFirst(configName)}`;\n\n    return {\n      ...moFactory({}),\n      key: configName,\n      renderNode: createRenderNode(config),\n      commands: {\n        [insertCommandName]: insertEmbed(uploadFile, enableFilePreview, configName),\n        insertFile,\n        ...commands,\n      },\n      onAction,\n      models: {\n        klass: 'block',\n        type: 'embed',\n      },\n    };\n  };\n}\n"],"file":"mobileEmbedPluginFactory.js"}