import { transferUtils } from '@ali/4ever-cangjie';
;
import onInsertFile from "./onInsertFile";
export default (function (onUpload, enableFilePreview) {
  return function (event, controller, next) {
    event.preventDefault();
    var data = transferUtils.getEventTransfer(event, controller);
    var files = data.files;

    if (!files) {
      return next();
    } // 都是图片的话走图片自己逻辑


    var uploadFiles = files.filter(function (file) {
      return file.type.indexOf('image') === -1;
    });
    if (uploadFiles.length === 0) return next(); // 表格内不允许拖拽文件

    var value = controller.value;

    if (controller.query('isSelectionInTaskList')) {
      return next();
    }

    if (data.type === 'files' && onUpload) {
      return onInsertFile(controller, onUpload, uploadFiles, enableFilePreview);
    }

    return next();
  };
});
//# sourceMappingURL=onDrop.js.map