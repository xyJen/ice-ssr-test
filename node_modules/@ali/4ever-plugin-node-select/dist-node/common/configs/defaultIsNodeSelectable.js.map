{"version":3,"sources":["../../../../src/common/configs/defaultIsNodeSelectable.ts"],"names":["defaultIsNodeSelectable","node","controller","isSubject","query","isColumnsParent","document","value","parent","getParent","key","isBlock","Block","Document","isDocument","grandParent"],"mappings":";;;;;;;AACA;;AAEO,SAASA,uBAAT,CAAiCC,IAAjC,EAA6CC,UAA7C,EAAqE;AAC1E,QAAMC,SAAS,GAAGD,UAAU,CAACE,KAAX,CAAiB,WAAjB,EAA8BH,IAA9B,CAAlB;AACA,MAAIE,SAAJ,EAAe,OAAO,KAAP;AACf,QAAME,eAAe,GAAGH,UAAU,CAACE,KAAX,CAAiB,iBAAjB,EAAoCH,IAApC,CAAxB;AACA,QAAM;AAAEK,IAAAA;AAAF,MAAeJ,UAAU,CAACK,KAAhC;AACA,QAAMC,MAAM,GAAGF,QAAQ,CAACG,SAAT,CAAmBR,IAAI,CAACS,GAAxB,CAAf;;AACA,QAAMC,OAAO,GAAGC,mBAAMD,OAAN,CAAcV,IAAd,CAAhB;;AACA,MAAI,CAACO,MAAD,IAAW,CAACG,OAAhB,EAAyB,OAAO,KAAP;AACzB,MAAIE,sBAASC,UAAT,CAAoBN,MAApB,KAA+B,CAACH,eAApC,EAAqD,OAAO,IAAP;AACrD,QAAMU,WAAW,GAAGT,QAAQ,CAACG,SAAT,CAAmBD,MAAM,CAACE,GAA1B,CAApB;AACA,SAAOG,sBAASC,UAAT,CAAoBC,WAApB,KAAoCb,UAAU,CAACE,KAAX,CAAiB,WAAjB,EAA8BI,MAA9B,CAApC,IAA6E,CAACH,eAArF;AACD","sourcesContent":["import type { Controller, Node } from '@ali/4ever-cangjie';\nimport { Block, Document } from '@ali/4ever-cangjie';\n\nexport function defaultIsNodeSelectable(node: Node, controller: Controller) {\n  const isSubject = controller.query('isSubject', node);\n  if (isSubject) return false;\n  const isColumnsParent = controller.query('isColumnsParent', node);\n  const { document } = controller.value;\n  const parent = document.getParent(node.key);\n  const isBlock = Block.isBlock(node);\n  if (!parent || !isBlock) return false;\n  if (Document.isDocument(parent) && !isColumnsParent) return true;\n  const grandParent = document.getParent(parent.key);\n  return Document.isDocument(grandParent) && controller.query('isSubject', parent) && !isColumnsParent;\n}\n"],"file":"defaultIsNodeSelectable.js"}