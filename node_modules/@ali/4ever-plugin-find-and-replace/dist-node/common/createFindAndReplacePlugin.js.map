{"version":3,"sources":["../../../src/common/createFindAndReplacePlugin.tsx"],"names":["ctlManager","ControllerManager","factory","config","cache","prevDocument","prevFocusIndex","findAndReplace","DEFAULT_CONFIG","renderContent","onChange","key","contextMenu","toolbar","buttons","default","locale","menubar","menu","renderMark","renderToolbar","onAction","onCleanup","createFindAndReplacePlugin","actions"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AAEA,MAAMA,UAAU,GAAG,IAAIC,wBAAJ,EAAnB;;AAEO,MAAMC,OAAmB,GAAIC,MAAD,IAAY;AAC7C,MAAIC,KAAa,GAAG;AAClBC,IAAAA,YAAY,EAAE,IADI;AAElBC,IAAAA,cAAc,EAAE,CAAC;AAFC,GAApB;AAIA,QAAM;AAAEC,IAAAA,cAAc,GAAGC;AAAnB,MAAsCL,MAA5C;AACA,QAAMM,aAAa,GAAG,kCAAoBF,cAApB,EAAoCP,UAApC,CAAtB;AACA,QAAMU,QAAQ,GAAG,6BAAeH,cAAf,EAA+BH,KAA/B,CAAjB;AAEA,SAAO;AACLO,IAAAA,GAAG,EAAHA,SADK;AAELC,IAAAA,WAAW,EAAE,gCAAkBL,cAAlB,EAAkCP,UAAlC,CAFR;AAGLa,IAAAA,OAAO,EAAE;AACPC,MAAAA,OAAO,EAAE;AACPC,QAAAA,OAAO,EAAE,2BAAaf,UAAb;AADF,OADF;AAIPgB,MAAAA,MAAM,EAAET,cAAc,EAAES,MAAhB,IAA0B;AAJ3B,KAHJ;AASLC,IAAAA,OAAO,EAAE;AACPC,MAAAA,IAAI,EAAE,yBAAWlB,UAAX;AADC,KATJ;AAYLmB,IAAAA,UAAU,EAAVA,mBAZK;AAaLV,IAAAA,aAbK;AAcLW,IAAAA,aAAa,EAAE,kCAAoBb,cAAc,EAAES,MAAhB,IAA0B,EAA9C,EAAkDhB,UAAlD,CAdV;AAeLqB,IAAAA,QAAQ,EAARA,iBAfK;AAgBLX,IAAAA,QAhBK;AAiBLY,IAAAA,SAAS,EAAE,MAAM;AACf;AACAlB,MAAAA,KAAK,GAAG,IAAR;AACD;AApBI,GAAP;AAsBD,CA/BM;;;;AAiCA,MAAMmB,0BAA0B,GAAIpB,MAAD,IAA4BD,OAAO,CAACC,MAAD,CAAtE;;;AAEPoB,0BAA0B,CAACC,OAA3B,GAAqCA,OAArC","sourcesContent":["import createButton from '../components/createButton';\nimport createMenu from '../components/createMenu';\nimport onAction from './handlers/onAction';\nimport createOnChange from './handlers/createOnChange';\nimport createRenderContent from './createRenderContent';\nimport createContextMenu from './createContextMenu';\nimport renderMark from './renderMark';\nimport { DEFAULT_CONFIG } from '../utils/constants';\nimport * as actions from './actions';\nimport { ControllerManager } from '../utils';\nimport createRenderToolbar from './createRenderToolbar';\nimport type { ICache } from '../utils/types';\nimport type { BiPluginConfig, ZhiFactory } from '@ali/4ever-cangjie';\nimport { key } from '../utils/meta';\n\nconst ctlManager = new ControllerManager();\n\nexport const factory: ZhiFactory = (config) => {\n  let cache: ICache = {\n    prevDocument: null,\n    prevFocusIndex: -1,\n  };\n  const { findAndReplace = DEFAULT_CONFIG } = config;\n  const renderContent = createRenderContent(findAndReplace, ctlManager);\n  const onChange = createOnChange(findAndReplace, cache);\n\n  return {\n    key,\n    contextMenu: createContextMenu(findAndReplace, ctlManager),\n    toolbar: {\n      buttons: {\n        default: createButton(ctlManager),\n      },\n      locale: findAndReplace?.locale || {},\n    },\n    menubar: {\n      menu: createMenu(ctlManager),\n    },\n    renderMark,\n    renderContent,\n    renderToolbar: createRenderToolbar(findAndReplace?.locale || {}, ctlManager),\n    onAction,\n    onChange,\n    onCleanup: () => {\n      // @ts-ignore 清理缓存\n      cache = null;\n    },\n  };\n};\n\nexport const createFindAndReplacePlugin = (config: BiPluginConfig) => factory(config);\n\ncreateFindAndReplacePlugin.actions = actions;\n"],"file":"createFindAndReplacePlugin.js"}