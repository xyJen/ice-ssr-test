{"version":3,"sources":["../../../src/common/createRenderContent.tsx"],"names":["createRenderContent","config","ctlManager","props","controller","next","draggableArea","DEFAULT_DRAGGABLE_AREA","initialPosition","DEFAULT_INITIAL_POSITION","isFindOnly","forbidden","locale","role","onScrollIntoFocus","onCustomScroll","onFilter","push","remove","isMainController"],"mappings":";;;;;;;;;;;AAAA;;AAIA;;AAEA;;uBAL4B,a;;AAOb,SAASA,mBAAT,CACbC,MADa,EAEbC,UAFa,EAGb;AACA,SAAO,CAACC,KAAD,EAA4BC,UAA5B,EAAoDC,IAApD,KAA6D;AAClE,UAAM;AACJC,MAAAA,aAAa,GAAGC,iCADZ;AAEJC,MAAAA,eAAe,GAAGC,mCAFd;AAGJC,MAAAA,UAAU,GAAG,KAHT;AAIJC,MAAAA,SAAS,GAAG,KAJR;AAKJC,MAAAA,MAAM,GAAG,EALL;AAMJC,MAAAA,IANI;AAOJC,MAAAA,iBAPI;AAQJC,MAAAA,cARI;AASJC,MAAAA;AATI,QAUFf,MAVJ;;AAYA,QAAIU,SAAJ,EAAe;AACb,aAAON,IAAI,EAAX;AACD,KAfiE,CAiBlE;;;AACAH,IAAAA,UAAU,CAACe,IAAX,CAAgBb,UAAhB,EAA4BS,IAA5B;AACA,0BAAU,MAAM;AACd,aAAO,MAAM;AACXX,QAAAA,UAAU,CAACgB,MAAX,CAAkBd,UAAlB;AACD,OAFD;AAGD,KAJD,EAIG,CAACA,UAAD,EAAaS,IAAb,CAJH;;AAMA,QAAIX,UAAU,CAACiB,gBAAX,CAA4Bf,UAA5B,CAAJ,EAA6C;AAC3C,0BACE,8CACGC,IAAI,EADP,eAEE,eAAC,4BAAD;AACE,QAAA,cAAc,EAAED,UADlB;AAEE,QAAA,aAAa,EAAEE,aAFjB;AAGE,QAAA,eAAe,EAAEE,eAHnB;AAIE,QAAA,UAAU,EAAEE,UAJd;AAKE,QAAA,MAAM,EAAEE,MALV;AAME,QAAA,UAAU,EAAEV,UANd;AAOE,QAAA,iBAAiB,EAAEY,iBAPrB;AAQE,QAAA,QAAQ,EAAEE,QARZ;AASE,QAAA,cAAc,EAAED;AATlB,QAFF,CADF;AAgBD,KAjBD,MAiBO;AACL,aAAOV,IAAI,EAAX;AACD;AACF,GA7CD;AA8CD","sourcesContent":["import React, { useEffect } from 'react';\nimport { Controller, RenderContentProps } from '@ali/4ever-cangjie';\n\nimport { FindAndReplaceConfig } from '../utils/types';\nimport FindAndReplaceModal from '../components/findAndReplaceModal';\nimport type { ControllerManager } from '../utils';\nimport { DEFAULT_DRAGGABLE_AREA, DEFAULT_INITIAL_POSITION } from '../utils/constants';\n\nexport default function createRenderContent(\n  config: FindAndReplaceConfig,\n  ctlManager: ControllerManager,\n) {\n  return (props: RenderContentProps, controller: Controller, next) => {\n    const {\n      draggableArea = DEFAULT_DRAGGABLE_AREA,\n      initialPosition = DEFAULT_INITIAL_POSITION,\n      isFindOnly = false,\n      forbidden = false,\n      locale = {},\n      role,\n      onScrollIntoFocus,\n      onCustomScroll,\n      onFilter,\n    } = config;\n\n    if (forbidden) {\n      return next();\n    }\n\n    // 收集所有实例\n    ctlManager.push(controller, role);\n    useEffect(() => {\n      return () => {\n        ctlManager.remove(controller);\n      };\n    }, [controller, role]);\n\n    if (ctlManager.isMainController(controller)) {\n      return (\n        <>\n          {next()}\n          <FindAndReplaceModal\n            mainController={controller}\n            draggableArea={draggableArea}\n            initialPosition={initialPosition}\n            isFindOnly={isFindOnly}\n            locale={locale}\n            ctlManager={ctlManager}\n            onScrollIntoFocus={onScrollIntoFocus}\n            onFilter={onFilter}\n            onCustomScroll={onCustomScroll}\n          />\n        </>\n      );\n    } else {\n      return next();\n    }\n  };\n}\n"],"file":"createRenderContent.js"}