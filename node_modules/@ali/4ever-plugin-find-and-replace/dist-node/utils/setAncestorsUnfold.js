"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _everPluginHeadingGroup = require("@ali/4ever-plugin-heading-group");

const setAncestorsUnfold = (controller, node) => {
  // 先展开标题
  const groups = controller.query('getHeadingAncestors', node);
  const parents = groups.filter(group => controller.userData.get(group, 'fold'));
  parents.forEach(parent => {
    controller.run('onAction', (0, _everPluginHeadingGroup.toggleFold)({
      node: parent,
      fold: false
    }));
  }); // 再展开议题
  // NOTE: 议题的层级比 H1 更高，如果大纲中存在 H1，则可能会被议题隐藏

  const subject = controller.query('getSubjectStartBlock', node);

  if (subject && subject !== node && controller.userData.get(subject, 'fold')) {
    controller.run('onAction', (0, _everPluginHeadingGroup.toggleFold)({
      node: subject,
      fold: false
    }));
  }
};

var _default = setAncestorsUnfold;
exports.default = _default;
//# sourceMappingURL=setAncestorsUnfold.js.map