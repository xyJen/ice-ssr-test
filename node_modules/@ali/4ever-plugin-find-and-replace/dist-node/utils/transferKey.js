"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _isPi = _interopRequireDefault(require("./isPi"));

const transferKey = (key, controller, findText) => {
  if (!(0, _isPi.default)(controller)) {
    return key;
  }

  const viewKeys = controller.query('getViewKeys', key);

  if (!viewKeys || viewKeys.length === 0) {
    return key;
  }

  let targetKey = viewKeys[0];
  const {
    document
  } = controller.value;

  if (findText) {
    viewKeys.forEach(k => {
      const node = document.getNode(k);

      if (node) {
        if (node.text.includes(findText)) {
          targetKey = k;
        }
      }
    });
  }

  return targetKey;
};

var _default = transferKey;
exports.default = _default;
//# sourceMappingURL=transferKey.js.map