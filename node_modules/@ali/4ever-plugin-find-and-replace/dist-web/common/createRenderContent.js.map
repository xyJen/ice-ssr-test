{"version":3,"sources":["../../../src/common/createRenderContent.tsx"],"names":["React","useEffect","FindAndReplaceModal","DEFAULT_DRAGGABLE_AREA","DEFAULT_INITIAL_POSITION","createRenderContent","config","ctlManager","props","controller","next","draggableArea","initialPosition","isFindOnly","forbidden","locale","role","onScrollIntoFocus","onCustomScroll","onFilter","push","remove","isMainController"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;qBAC4B,a;AAG5B,OAAOC,mBAAP;AAEA,SAASC,sBAAT,EAAiCC,wBAAjC;AAEA,eAAe,SAASC,mBAAT,CACbC,MADa,EAEbC,UAFa,EAGb;AACA,SAAO,UAACC,KAAD,EAA4BC,UAA5B,EAAoDC,IAApD,EAA6D;AAAA,gCAW9DJ,MAX8D,CAEhEK,aAFgE;AAAA,QAEhEA,aAFgE,sCAEhDR,sBAFgD;AAAA,gCAW9DG,MAX8D,CAGhEM,eAHgE;AAAA,QAGhEA,eAHgE,sCAG9CR,wBAH8C;AAAA,6BAW9DE,MAX8D,CAIhEO,UAJgE;AAAA,QAIhEA,UAJgE,mCAInD,KAJmD;AAAA,4BAW9DP,MAX8D,CAKhEQ,SALgE;AAAA,QAKhEA,SALgE,kCAKpD,KALoD;AAAA,yBAW9DR,MAX8D,CAMhES,MANgE;AAAA,QAMhEA,MANgE,+BAMvD,EANuD;AAAA,QAOhEC,IAPgE,GAW9DV,MAX8D,CAOhEU,IAPgE;AAAA,QAQhEC,iBARgE,GAW9DX,MAX8D,CAQhEW,iBARgE;AAAA,QAShEC,cATgE,GAW9DZ,MAX8D,CAShEY,cATgE;AAAA,QAUhEC,QAVgE,GAW9Db,MAX8D,CAUhEa,QAVgE;;AAalE,QAAIL,SAAJ,EAAe;AACb,aAAOJ,IAAI,EAAX;AACD,KAfiE,CAiBlE;;;AACAH,IAAAA,UAAU,CAACa,IAAX,CAAgBX,UAAhB,EAA4BO,IAA5B;AACAf,IAAAA,SAAS,CAAC,YAAM;AACd,aAAO,YAAM;AACXM,QAAAA,UAAU,CAACc,MAAX,CAAkBZ,UAAlB;AACD,OAFD;AAGD,KAJQ,EAIN,CAACA,UAAD,EAAaO,IAAb,CAJM,CAAT;;AAMA,QAAIT,UAAU,CAACe,gBAAX,CAA4Bb,UAA5B,CAAJ,EAA6C;AAC3C,0BACE,qCACGC,IAAI,EADP,eAEE,eAAC,mBAAD;AACE,QAAA,cAAc,EAAED,UADlB;AAEE,QAAA,aAAa,EAAEE,aAFjB;AAGE,QAAA,eAAe,EAAEC,eAHnB;AAIE,QAAA,UAAU,EAAEC,UAJd;AAKE,QAAA,MAAM,EAAEE,MALV;AAME,QAAA,UAAU,EAAER,UANd;AAOE,QAAA,iBAAiB,EAAEU,iBAPrB;AAQE,QAAA,QAAQ,EAAEE,QARZ;AASE,QAAA,cAAc,EAAED;AATlB,QAFF,CADF;AAgBD,KAjBD,MAiBO;AACL,aAAOR,IAAI,EAAX;AACD;AACF,GA7CD;AA8CD","sourcesContent":["import React, { useEffect } from 'react';\nimport { Controller, RenderContentProps } from '@ali/4ever-cangjie';\n\nimport { FindAndReplaceConfig } from '../utils/types';\nimport FindAndReplaceModal from '../components/findAndReplaceModal';\nimport type { ControllerManager } from '../utils';\nimport { DEFAULT_DRAGGABLE_AREA, DEFAULT_INITIAL_POSITION } from '../utils/constants';\n\nexport default function createRenderContent(\n  config: FindAndReplaceConfig,\n  ctlManager: ControllerManager,\n) {\n  return (props: RenderContentProps, controller: Controller, next) => {\n    const {\n      draggableArea = DEFAULT_DRAGGABLE_AREA,\n      initialPosition = DEFAULT_INITIAL_POSITION,\n      isFindOnly = false,\n      forbidden = false,\n      locale = {},\n      role,\n      onScrollIntoFocus,\n      onCustomScroll,\n      onFilter,\n    } = config;\n\n    if (forbidden) {\n      return next();\n    }\n\n    // 收集所有实例\n    ctlManager.push(controller, role);\n    useEffect(() => {\n      return () => {\n        ctlManager.remove(controller);\n      };\n    }, [controller, role]);\n\n    if (ctlManager.isMainController(controller)) {\n      return (\n        <>\n          {next()}\n          <FindAndReplaceModal\n            mainController={controller}\n            draggableArea={draggableArea}\n            initialPosition={initialPosition}\n            isFindOnly={isFindOnly}\n            locale={locale}\n            ctlManager={ctlManager}\n            onScrollIntoFocus={onScrollIntoFocus}\n            onFilter={onFilter}\n            onCustomScroll={onCustomScroll}\n          />\n        </>\n      );\n    } else {\n      return next();\n    }\n  };\n}\n"],"file":"createRenderContent.js"}