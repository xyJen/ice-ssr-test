import { toggleFold } from '@ali/4ever-plugin-heading-group';

var setAncestorsUnfold = function setAncestorsUnfold(controller, node) {
  // 先展开标题
  var groups = controller.query('getHeadingAncestors', node);
  var parents = groups.filter(function (group) {
    return controller.userData.get(group, 'fold');
  });
  parents.forEach(function (parent) {
    controller.run('onAction', toggleFold({
      node: parent,
      fold: false
    }));
  }); // 再展开议题
  // NOTE: 议题的层级比 H1 更高，如果大纲中存在 H1，则可能会被议题隐藏

  var subject = controller.query('getSubjectStartBlock', node);

  if (subject && subject !== node && controller.userData.get(subject, 'fold')) {
    controller.run('onAction', toggleFold({
      node: subject,
      fold: false
    }));
  }
};

export default setAncestorsUnfold;
//# sourceMappingURL=setAncestorsUnfold.js.map