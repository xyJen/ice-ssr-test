{"version":3,"sources":["../../../../src/components/next/FindAndReplaceButton.tsx"],"names":["React","toggleFindAndReplace","updateFindFragment","environment","SearchButton","MOD","IS_MAC","SHORTCUT","FindAndReplaceButton","props","controller","disabled","ctlManager","locale","tooltipProp","tooltip","rest","value","data","isVisible","findAndReplaceVisible","isDisabled","query","handleClick","useCallback","mainController","run","fragment","ctl","text","useMemo","title","buttonTitle","shortCut"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAASC,oBAAT,EAA+BC,kBAA/B;AACA,SAAqBC,WAArB,QAAwC,oBAAxC;AAEA,SAASC,YAAT,QAAmD,sBAAnD;AAEA,IAAMC,GAAG,GAAGF,WAAW,CAACG,MAAZ,GAAqB,GAArB,GAA2B,MAAvC;AACA,IAAMC,QAAQ,GAAMF,GAAN,OAAd;AAQA,OAAO,IAAMG,oBAAsC,GAAG,SAAzCA,oBAAyC,CAACC,KAAD,EAAW;AAAA,MACvDC,UADuD,GACqBD,KADrB,CACvDC,UADuD;AAAA,MAC3CC,QAD2C,GACqBF,KADrB,CAC3CE,QAD2C;AAAA,MACjCC,UADiC,GACqBH,KADrB,CACjCG,UADiC;AAAA,MACrBC,MADqB,GACqBJ,KADrB,CACrBI,MADqB;AAAA,MACJC,WADI,GACqBL,KADrB,CACbM,OADa;AAAA,MACYC,IADZ,iCACqBP,KADrB;;AAAA,8BAEzCC,UAAU,CAACO,KAF8B,CAEvDC,IAFuD;AAAA,MAEvDA,IAFuD,sCAEhD,EAFgD;AAI/D,MAAMC,SAAS,GAAGD,IAAI,CAACE,qBAAL,IAA8B,KAAhD;AACA,MAAMC,UAAU,GAAGV,QAAQ,IAAID,UAAU,CAACY,KAAX,CAAiB,yBAAjB,CAA/B;AAEA,MAAMC,WAAW,GAAGvB,KAAK,CAACwB,WAAN,CAAkB,YAAM;AAAA,QAClCC,cADkC,GACfb,UADe,CAClCa,cADkC;;AAE1C,QAAI,CAACA,cAAL,EAAqB;AACnB;AACD;;AAEDA,IAAAA,cAAc,CAACC,GAAf,CAAmB,UAAnB,EAA+BzB,oBAAoB,EAAnD;AAEA,QAAI0B,QAAQ,GAAG,EAAf;AACAf,IAAAA,UAAU,CAACc,GAAX,CAAe,UAACE,GAAD,EAAS;AAAA;;AACtB,UAAMC,IAAI,0BAAGD,GAAG,CAACX,KAAJ,CAAUU,QAAb,qBAAG,oBAAoBE,IAAjC;;AACA,UAAIA,IAAJ,EAAU;AACRF,QAAAA,QAAQ,GAAGE,IAAX;AACD;AACF,KALD;;AAMA,QAAIF,QAAJ,EAAc;AACZF,MAAAA,cAAc,CAACC,GAAf,CAAmB,UAAnB,EAA+BxB,kBAAkB,CAACyB,QAAD,CAAjD;AACD;AACF,GAlBmB,EAkBjB,EAlBiB,CAApB;AAoBA,MAAMZ,OAAO,GAAGf,KAAK,CAAC8B,OAAN,CAAc;AAAA;AAC5BC,MAAAA,KAAK,EAAE,CAAAlB,MAAM,QAAN,YAAAA,MAAM,CAAEmB,WAAR,KAAuB,QADF;AAE5BC,MAAAA,QAAQ,EAAE1B;AAFkB,OAGzBO,WAHyB;AAAA,GAAd,EAIZ,EAJY,CAAhB;AAMA,sBACE,eAAC,YAAD;AACE,IAAA,MAAM,EAAC,mBADT;AAEE,IAAA,MAAM,EAAEK,SAFV;AAGE,IAAA,OAAO,EAAEI,WAHX;AAIE,IAAA,KAAK,EAAEV,MAAF,oBAAEA,MAAM,CAAEmB,WAJjB;AAKE,IAAA,QAAQ,EAAEX,UALZ;AAME,IAAA,IAAI,EAAE,gBANR;AAOE,IAAA,OAAO,EAAEN;AAPX,KAQMC,IARN,EADF;AAYD,CA7CM","sourcesContent":["import * as React from 'react';\nimport { toggleFindAndReplace, updateFindFragment } from '../../common/actions';\nimport { Controller, environment } from '@ali/4ever-cangjie';\nimport type { ControllerManager } from '../../utils';\nimport { SearchButton, IToolbarButtonConfig } from '@ali/4ever-component';\n\nconst MOD = environment.IS_MAC ? 'âŒ˜' : 'Ctrl';\nconst SHORTCUT = `${MOD}+F`;\n\nexport interface Iprops extends IToolbarButtonConfig {\n  controller: Controller;\n  ctlManager: ControllerManager;\n  locale?: Record<string, string>;\n}\n\nexport const FindAndReplaceButton: React.FC<Iprops> = (props) => {\n  const { controller, disabled, ctlManager, locale, tooltip: tooltipProp, ...rest } = props;\n  const { data = {} } = controller.value;\n\n  const isVisible = data.findAndReplaceVisible || false;\n  const isDisabled = disabled || controller.query('isDisableFindAndReplace');\n\n  const handleClick = React.useCallback(() => {\n    const { mainController } = ctlManager;\n    if (!mainController) {\n      return;\n    }\n\n    mainController.run('onAction', toggleFindAndReplace());\n\n    let fragment = '';\n    ctlManager.run((ctl) => {\n      const text = ctl.value.fragment?.text;\n      if (text) {\n        fragment = text;\n      }\n    });\n    if (fragment) {\n      mainController.run('onAction', updateFindFragment(fragment));\n    }\n  }, []);\n\n  const tooltip = React.useMemo(() => ({\n    title: locale?.buttonTitle || 'Search',\n    shortCut: SHORTCUT,\n    ...tooltipProp,\n  }), []);\n\n  return (\n    <SearchButton\n      testid=\"bi-toolbar-search\"\n      active={isVisible}\n      onClick={handleClick}\n      title={locale?.buttonTitle}\n      disabled={isDisabled}\n      role={'findandreplace'}\n      tooltip={tooltip}\n      {...rest}\n    />\n  );\n};\n\n"],"file":"FindAndReplaceButton.js"}