import { getClosestContainerBlock, getInnerWidth } from '@ali/4ever-utils';
export var getImageMaxWidth = function getImageMaxWidth(value, node) {
  var closestBlock = getClosestContainerBlock(value, node);
  var maxWidth = getInnerWidth(closestBlock);
  var first = closestBlock.nodes[0];
  var maybeImage = closestBlock.nodes[1];
  var ind = closestBlock.data.ind;

  if (first.text === '' && maybeImage && maybeImage.type === 'image' && maybeImage.key === (node == null ? void 0 : node.key)) {
    if (typeof ind === 'object') {
      var _ref = ind || {},
          _ref$firstLine = _ref.firstLine,
          firstLine = _ref$firstLine === void 0 ? 0 : _ref$firstLine;

      maxWidth -= firstLine;
    }
  }

  return Math.max(maxWidth - 2, 0);
};
//# sourceMappingURL=getImageMaxWidth.js.map