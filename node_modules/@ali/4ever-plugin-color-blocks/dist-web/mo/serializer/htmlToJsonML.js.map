{"version":3,"sources":["../../../../src/mo/serializer/htmlToJsonML.ts"],"names":["Container","COLOR_MAP","name","onOpenTag","state","attrs","includes","type","split","metadata","showstk","bgcolor","undefined","colorBlocks","TYPE","subType","push","onCloseTag","colorBlock","pop","append"],"mappings":"AAEA,SAASA,SAAT,QAA0B,6BAA1B;AACA,SAASC,SAAT,QAA0B,2BAA1B;AAEA,eAAe;AACbC,EAAAA,IAAI,EAAE,WADO;AAGbC,EAAAA,SAAS,EAAE,mBAACC,KAAD,EAAeF,IAAf,EAA6BG,KAA7B,EAA4D;AACrE,QAAIH,IAAI,KAAK,KAAT,IAAkB,CAAC,CAACG,KAAK,SAAL,IAAe,EAAhB,EAAoBC,QAApB,CAA6B,aAA7B,CAAvB,EAAoE,OAAO,KAAP;AAEpE,QAAMC,IAAI,GAAGF,KAAK,SAAL,CAAYG,KAAZ,CAAkB,GAAlB,EAAuB,CAAvB,CAAb;AACA,QAAMC,QAAQ,GAAG;AACfC,MAAAA,OAAO,EAAE,KADM;AAEfC,MAAAA,OAAO,EAAEJ,IAAI,GAAGN,SAAS,CAACM,IAAD,CAAZ,GAAqBK;AAFnB,KAAjB;AAKA,QAAMC,WAAmB,GAAG,CAC1Bb,SAAS,CAACc,IADgB,EAE1B;AACEC,MAAAA,OAAO,EAAE,aADX;AAEEN,MAAAA,QAAQ,EAAEA;AAFZ,KAF0B,CAA5B;AAOAL,IAAAA,KAAK,CAACY,IAAN,CAAWH,WAAX;AACA,WAAO,IAAP;AACD,GArBY;AAuBbI,EAAAA,UAAU,EAAE,oBAACb,KAAD,EAAeF,IAAf,EAA6BG,KAA7B,EAA4D;AACtE,QAAIH,IAAI,KAAK,KAAT,IAAkB,CAAC,CAACG,KAAK,SAAL,IAAe,EAAhB,EAAoBC,QAApB,CAA6B,aAA7B,CAAvB,EAAoE,OAAO,KAAP;AACpE,QAAMY,UAAU,GAAGd,KAAK,CAACe,GAAN,EAAnB;AACAf,IAAAA,KAAK,CAACgB,MAAN,CAAaF,UAAb;AACA,WAAO,IAAP;AACD;AA5BY,CAAf","sourcesContent":["import { JsonML } from '@ali/4ever-utils';\nimport { MoState as State, MoAttributes as Attributes } from '@ali/4ever-cangjie'\nimport { Container } from '@ali/4ever-plugin-container';\nimport { COLOR_MAP } from '@ali/4ever-plugin-callout';\n\nexport default {\n  name: 'container',\n\n  onOpenTag: (state: State, name: string, attrs: Attributes): boolean => {\n    if (name !== 'div' || !(attrs.class || '').includes('colorBlocks')) return false;\n\n    const type = attrs.class.split(' ')[1];\n    const metadata = {\n      showstk: false,\n      bgcolor: type ? COLOR_MAP[type] : undefined,\n    };\n\n    const colorBlocks: JsonML = [\n      Container.TYPE,\n      {\n        subType: 'colorBlocks',\n        metadata: metadata,\n      },\n    ];\n    state.push(colorBlocks);\n    return true;\n  },\n\n  onCloseTag: (state: State, name: string, attrs: Attributes): boolean => {\n    if (name !== 'div' || !(attrs.class || '').includes('colorBlocks')) return false;\n    const colorBlock = state.pop();\n    state.append(colorBlock);\n    return true;\n  },\n};\n"],"file":"htmlToJsonML.js"}