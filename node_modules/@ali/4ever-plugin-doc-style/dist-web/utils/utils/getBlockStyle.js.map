{"version":3,"sources":["../../../../src/utils/utils/getBlockStyle.ts"],"names":["SpacingUtil","ShdUtil","getBlockStyle","node","docStyle","defaultStyle","style","block","docDefaults","data","pPr","inheritedData","toStyle","lineHeight","rest"],"mappings":";;AAEA,SAASA,WAAT,EAAsBC,OAAtB,QAAqC,kBAArC;AAEA,eAAe,SAASC,aAAT,CACbC,IADa,EAEbC,QAFa,EAGbC,YAHa,EAIE;AAAA;;AACf,MAAIC,KAAoB,GAAG,EAA3B;AACA,MAAMC,KAAK,GAAGJ,IAAd,CAFe,CAGf;;AAHe,aAIC,CAAAC,QAAQ,QAAR,qCAAAA,QAAQ,CAAEI,WAAV,2CAAuBC,IAAvB,KAA+B,EAJhC;AAAA,MAIPC,GAJO,QAIPA,GAJO,EAKf;;;AACA,MAAMC,aAAa,gBAAQD,GAAR,EAAgBL,YAAhB,CAAnB,CANe,CAQf;;;AACAC,EAAAA,KAAK,gBACAL,OAAO,CAACW,OAAR,CAAgBL,KAAhB,CADA,EAEAP,WAAW,CAACY,OAAZ,CAAoBL,KAApB,EAA2BI,aAA3B,CAFA,CAAL;AAKA;AACF;AACA;AACA;AACA;;AAlBiB,eAmBiBL,KAnBjB;AAAA,MAmBPO,UAnBO,UAmBPA,UAnBO;AAAA,MAmBQC,IAnBR;;AAqBf,SAAOA,IAAP;AACD","sourcesContent":["import { CSSProperties } from 'react';\nimport { DocStyle, Node, Block } from '@ali/4ever-cangjie';\nimport { SpacingUtil, ShdUtil } from '@ali/4ever-utils';\n\nexport default function getBlockStyle(\n  node: Node,\n  docStyle?: DocStyle,\n  defaultStyle?: Record<string, any>,\n): CSSProperties {\n  let style: CSSProperties = {};\n  const block = node as Block;\n  // 全局的继承样式\n  const { pPr } = docStyle?.docDefaults?.data || {};\n  // block 指定的默认样式优先级高于全局继承样式\n  const inheritedData = { ...pPr, ...defaultStyle };\n\n  // 段间距\n  style = {\n    ...ShdUtil.toStyle(block),\n    ...SpacingUtil.toStyle(block, inheritedData),\n  };\n\n  /**\n   * 不在这里渲染行高：\n   * 1. 放在外层不一定能确保 paragraph 被包裹的情况下能继承到（被中间某一层覆盖）\n   * 2. 放在外层可能影响 paragraph 到 leaf-block 之间的元素（例如列表）\n   */\n  const { lineHeight, ...rest } = style;\n\n  return rest;\n}\n"],"file":"getBlockStyle.js"}