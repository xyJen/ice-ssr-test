import { Block, Commands, Text } from "@ali/4ever-cangjie";
import { TemplateButton } from "../../mo";
export var createNormalizeNode = function createNormalizeNode() {
  return function (node, controller, next) {
    if (TemplateButton.isTemplateButton(node)) {
      // 确保模板按钮的直接子 Node 都是 Block
      if (node.nodes.length === 1 && !Block.isBlock(node.nodes[0])) {
        return function () {
          return controller.command(Commands.wrapBlockByKey, node.nodes[0].key, "paragraph");
        };
      } else if (node.nodes.length === 0) {
        return function () {
          controller.command(Commands.insertBlock, Block.create({
            type: "paragraph",
            nodes: [Text.create("")]
          }));
        };
      }
    }

    return next();
  };
};
//# sourceMappingURL=createNormalizeNode.js.map