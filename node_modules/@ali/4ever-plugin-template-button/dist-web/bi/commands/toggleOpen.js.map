{"version":3,"sources":["../../../../src/bi/commands/toggleOpen.ts"],"names":["Injection","TemplateButton","toggleOpen","controller","key","injections","value","isOpen","injection","create","data","metadata","mergeData","a","b","excludeInjections","filter","inj","setInjections","concat"],"mappings":";AAAA,SAAqBA,SAArB,QAAsC,oBAAtC;AACA,SAASC,cAAT;AAEA,OAAO,SAASC,UAAT,CACLC,UADK,EAELC,GAFK,EAGL;AAAA,MACQC,UADR,GACuBF,UAAU,CAACG,KADlC,CACQD,UADR;AAEA,MAAME,MAAM,GAAGN,cAAc,CAACM,MAAf,CAAsBJ,UAAtB,EAAkCC,GAAlC,CAAf;AACA,MAAMI,SAAS,GAAGR,SAAS,CAACS,MAAV,CAAiB;AACjCL,IAAAA,GAAG,EAAHA,GADiC;AAEjCM,IAAAA,IAAI,EAAE;AACJC,MAAAA,QAAQ,EAAE;AACRJ,QAAAA,MAAM,EAAE,CAACA;AADD;AADN,KAF2B;AAOjCK,IAAAA,SAPiC,qBAOvBC,CAPuB,EAOpBC,CAPoB,EAOjB;AACd,0BACKD,CADL,EAEKC,CAFL;AAGEH,QAAAA,QAAQ,eACHE,CAAC,CAACF,QADC,EAEHG,CAAC,CAACH,QAFC;AAHV;AAQD;AAhBgC,GAAjB,CAAlB;AAkBA,MAAMI,iBAAiB,GAAGV,UAAU,CAACW,MAAX,CAAkB,UAACC,GAAD;AAAA,WAASA,GAAG,CAACb,GAAJ,KAAYA,GAArB;AAAA,GAAlB,CAA1B;AACA,SAAOD,UAAU,CAACe,aAAX,CAAyBH,iBAAiB,CAACI,MAAlB,CAAyBX,SAAzB,CAAzB,CAAP;AACD","sourcesContent":["import { Controller, Injection } from '@ali/4ever-cangjie';\nimport { TemplateButton } from '../../mo';\n\nexport function toggleOpen(\n  controller: Controller,\n  key: string,\n) {\n  const { injections } = controller.value;\n  const isOpen = TemplateButton.isOpen(controller, key);\n  const injection = Injection.create({\n    key,\n    data: {\n      metadata: {\n        isOpen: !isOpen,\n      },\n    },\n    mergeData(a, b) {\n      return {\n        ...a,\n        ...b,\n        metadata: {\n          ...a.metadata,\n          ...b.metadata,\n        },\n      };\n    },\n  });\n  const excludeInjections = injections.filter((inj) => inj.key !== key);\n  return controller.setInjections(excludeInjections.concat(injection));\n}\n"],"file":"toggleOpen.js"}