{"version":3,"sources":["../../../../src/bi/queries/isSelectionInTemplateButton.ts"],"names":["TemplateButton","controller","value","document","selection","undefined","sort","start","end","isEdgePoint","startBlock","getClosest","key","isTemplateButton","endBlcok"],"mappings":"AACA,SAASA,cAAT;AAEA,eAAe,UAAUC,UAAV,EAAkC;AAAA,0BACfA,UAAU,CAACC,KADI;AAAA,MACvCC,QADuC,qBACvCA,QADuC;AAAA,MAC7BC,SAD6B,qBAC7BA,SAD6B;;AAE/C,MAAI,CAACA,SAAL,EAAgB;AACd,WAAOC,SAAP;AACD;;AAJ8C,wBAKxBD,SAAS,CAACE,IAAV,CAAeH,QAAf,CALwB;AAAA,MAKvCI,KALuC,mBAKvCA,KALuC;AAAA,MAKhCC,GALgC,mBAKhCA,GALgC;;AAM/C,MAAID,KAAK,CAACE,WAAN,MAAuBD,GAAG,CAACC,WAAJ,EAA3B,EAA8C;AAC5C,WAAOJ,SAAP;AACD;;AACD,MAAMK,UAAU,GAAGP,QAAQ,CAACQ,UAAT,CACjBJ,KAAK,CAACK,GADW,EAEjBZ,cAAc,CAACa,gBAFE,CAAnB;AAIA,MAAMC,QAAQ,GAAGX,QAAQ,CAACQ,UAAT,CACfH,GAAG,CAACI,GADW,EAEfZ,cAAc,CAACa,gBAFA,CAAjB;;AAIA,MAAIH,UAAU,IAAIA,UAAU,KAAKI,QAAjC,EAA2C;AACzC,WAAO,KAAP;AACD,GAFD,MAEO,IAAIJ,UAAJ,EAAgB;AACrB,WAAO,OAAP;AACD,GAFM,MAEA,IAAII,QAAJ,EAAc;AACnB,WAAO,KAAP;AACD;;AACD,SAAOT,SAAP;AACD","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport { TemplateButton } from '../../mo';\n\nexport default function (controller: Controller) {\n  const { document, selection } = controller.value;\n  if (!selection) {\n    return undefined;\n  }\n  const { start, end } = selection.sort(document);\n  if (start.isEdgePoint() || end.isEdgePoint()) {\n    return undefined;\n  }\n  const startBlock = document.getClosest(\n    start.key,\n    TemplateButton.isTemplateButton,\n  );\n  const endBlcok = document.getClosest(\n    end.key,\n    TemplateButton.isTemplateButton,\n  );\n  if (startBlock && startBlock === endBlcok) {\n    return 'all';\n  } else if (startBlock) {\n    return 'start';\n  } else if (endBlcok) {\n    return 'end';\n  }\n  return undefined;\n}\n"],"file":"isSelectionInTemplateButton.js"}