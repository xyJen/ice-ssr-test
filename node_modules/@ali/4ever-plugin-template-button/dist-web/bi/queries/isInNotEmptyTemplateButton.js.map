{"version":3,"sources":["../../../../src/bi/queries/isInNotEmptyTemplateButton.ts"],"names":["isInTemplateButton","TemplateButton","isEmptyNode","isInNotEmptyTemplateButton","controller","data","node","inTemplateButton","button","value","document","getClosest","key","isTemplateButton","isOpen","nodes","length"],"mappings":"AACA,OAAOA,kBAAP;AACA,SAASC,cAAT;AACA,SAASC,WAAT;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,0BAAT,CACbC,UADa,EAEbC,IAFa,EAGb;AAAA,MACQC,IADR,GACiBD,IADjB,CACQC,IADR;AAEA,MAAMC,gBAAgB,GAAGP,kBAAkB,CAACI,UAAD,EAAaC,IAAb,CAA3C;;AACA,MAAI,CAACE,gBAAL,EAAuB;AACrB,WAAO,KAAP;AACD;;AACD,MAAMC,MAAM,GAAGJ,UAAU,CAACK,KAAX,CAAiBC,QAAjB,CAA0BC,UAA1B,CACbL,IAAI,CAACM,GADQ,EAEbX,cAAc,CAACY,gBAFF,CAAf,CANA,CAUA;;AACA,MACEZ,cAAc,CAACa,MAAf,CAAsBV,UAAtB,EAAkCI,MAAM,CAACI,GAAzC,KACAJ,MAAM,CAACO,KAAP,CAAaC,MAAb,KAAwB,CADxB,IAEAd,WAAW,CAACE,UAAD,EAAaI,MAAM,CAACO,KAAP,CAAa,CAAb,CAAb,CAHb,EAIE;AACA,WAAO,KAAP;AACD;;AACD,SAAO,IAAP;AACD","sourcesContent":["import { Controller, Block } from '@ali/4ever-cangjie';\nimport isInTemplateButton from './isInTemplateButton';\nimport { TemplateButton } from '../../mo';\nimport { isEmptyNode } from '../utils';\n\ninterface QueryData {\n  node: Block;\n}\n\n/**\n * 是否在非空的模板按钮内（打开状态包含内容 || 非打开）\n * @param controller\n * @param data\n * @returns\n */\nexport default function isInNotEmptyTemplateButton(\n  controller: Controller,\n  data: QueryData,\n) {\n  const { node } = data;\n  const inTemplateButton = isInTemplateButton(controller, data);\n  if (!inTemplateButton) {\n    return false;\n  }\n  const button = controller.value.document.getClosest(\n    node.key,\n    TemplateButton.isTemplateButton,\n  ) as TemplateButton;\n  // 处于打开状态 且 内容为空\n  if (\n    TemplateButton.isOpen(controller, button.key) &&\n    button.nodes.length === 1 &&\n    isEmptyNode(controller, button.nodes[0])\n  ) {\n    return false;\n  }\n  return true;\n}\n"],"file":"isInNotEmptyTemplateButton.js"}