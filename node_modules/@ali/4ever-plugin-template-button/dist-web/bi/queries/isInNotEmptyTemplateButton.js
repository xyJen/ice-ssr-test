import isInTemplateButton from "./isInTemplateButton";
import { TemplateButton } from "../../mo";
import { isEmptyNode } from "../utils";

/**
 * 是否在非空的模板按钮内（打开状态包含内容 || 非打开）
 * @param controller
 * @param data
 * @returns
 */
export default function isInNotEmptyTemplateButton(controller, data) {
  var node = data.node;
  var inTemplateButton = isInTemplateButton(controller, data);

  if (!inTemplateButton) {
    return false;
  }

  var button = controller.value.document.getClosest(node.key, TemplateButton.isTemplateButton); // 处于打开状态 且 内容为空

  if (TemplateButton.isOpen(controller, button.key) && button.nodes.length === 1 && isEmptyNode(controller, button.nodes[0])) {
    return false;
  }

  return true;
}
//# sourceMappingURL=isInNotEmptyTemplateButton.js.map