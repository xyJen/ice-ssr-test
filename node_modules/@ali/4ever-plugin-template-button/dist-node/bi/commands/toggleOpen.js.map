{"version":3,"sources":["../../../../src/bi/commands/toggleOpen.ts"],"names":["toggleOpen","controller","key","injections","value","isOpen","TemplateButton","injection","Injection","create","data","metadata","mergeData","a","b","excludeInjections","filter","inj","setInjections","concat"],"mappings":";;;;;;;AAAA;;AACA;;AAEO,SAASA,UAAT,CACLC,UADK,EAELC,GAFK,EAGL;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAiBF,UAAU,CAACG,KAAlC;;AACA,QAAMC,MAAM,GAAGC,mBAAeD,MAAf,CAAsBJ,UAAtB,EAAkCC,GAAlC,CAAf;;AACA,QAAMK,SAAS,GAAGC,uBAAUC,MAAV,CAAiB;AACjCP,IAAAA,GADiC;AAEjCQ,IAAAA,IAAI,EAAE;AACJC,MAAAA,QAAQ,EAAE;AACRN,QAAAA,MAAM,EAAE,CAACA;AADD;AADN,KAF2B;;AAOjCO,IAAAA,SAAS,CAACC,CAAD,EAAIC,CAAJ,EAAO;AACd,aAAO,EACL,GAAGD,CADE;AAEL,WAAGC,CAFE;AAGLH,QAAAA,QAAQ,EAAE,EACR,GAAGE,CAAC,CAACF,QADG;AAER,aAAGG,CAAC,CAACH;AAFG;AAHL,OAAP;AAQD;;AAhBgC,GAAjB,CAAlB;;AAkBA,QAAMI,iBAAiB,GAAGZ,UAAU,CAACa,MAAX,CAAmBC,GAAD,IAASA,GAAG,CAACf,GAAJ,KAAYA,GAAvC,CAA1B;AACA,SAAOD,UAAU,CAACiB,aAAX,CAAyBH,iBAAiB,CAACI,MAAlB,CAAyBZ,SAAzB,CAAzB,CAAP;AACD","sourcesContent":["import { Controller, Injection } from '@ali/4ever-cangjie';\nimport { TemplateButton } from '../../mo';\n\nexport function toggleOpen(\n  controller: Controller,\n  key: string,\n) {\n  const { injections } = controller.value;\n  const isOpen = TemplateButton.isOpen(controller, key);\n  const injection = Injection.create({\n    key,\n    data: {\n      metadata: {\n        isOpen: !isOpen,\n      },\n    },\n    mergeData(a, b) {\n      return {\n        ...a,\n        ...b,\n        metadata: {\n          ...a.metadata,\n          ...b.metadata,\n        },\n      };\n    },\n  });\n  const excludeInjections = injections.filter((inj) => inj.key !== key);\n  return controller.setInjections(excludeInjections.concat(injection));\n}\n"],"file":"toggleOpen.js"}