{"version":3,"sources":["../../../../src/bi/queries/isInTemplateButton.ts"],"names":["isInTemplateButton","controller","data","node","parent","value","document","getParent","key","TemplateButton","isTemplateButton"],"mappings":";;;;;;;AACA;;AAKA;AACe,SAASA,kBAAT,CACbC,UADa,EAEbC,IAFa,EAGb;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAWD,IAAjB;AACA,MAAI,CAACC,IAAL,EAAW,OAAO,KAAP;AACX,MAAIC,MAAM,GAAGH,UAAU,CAACI,KAAX,CAAiBC,QAAjB,CAA0BC,SAA1B,CAAoCJ,IAAI,CAACK,GAAzC,CAAb;;AACA,SAAOJ,MAAM,IAAI,CAACK,mBAAeC,gBAAf,CAAgCN,MAAhC,CAAlB,EAA2D;AACzDA,IAAAA,MAAM,GAAGH,UAAU,CAACI,KAAX,CAAiBC,QAAjB,CAA0BC,SAA1B,CAAoCH,MAAM,CAACI,GAA3C,CAAT;AACD;;AACD,SAAO,CAAC,CAACJ,MAAT;AACD","sourcesContent":["import { Controller, Node, Block } from '@ali/4ever-cangjie';\nimport { TemplateButton } from '../../mo';\n\ninterface QueryData {\n  node: Node | Block | null;\n}\n// 此处不能缓存父子关系， 拖拽会改变父子关系\nexport default function isInTemplateButton(\n  controller: Controller,\n  data: QueryData,\n) {\n  const { node } = data;\n  if (!node) return false;\n  let parent = controller.value.document.getParent(node.key);\n  while (parent && !TemplateButton.isTemplateButton(parent)) {\n    parent = controller.value.document.getParent(parent.key);\n  }\n  return !!parent;\n}\n"],"file":"isInTemplateButton.js"}