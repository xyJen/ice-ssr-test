{"version":3,"sources":["../../../../src/bi/queries/isSelectionInTemplateButton.ts"],"names":["controller","document","selection","value","undefined","start","end","sort","isEdgePoint","startBlock","getClosest","key","TemplateButton","isTemplateButton","endBlcok"],"mappings":";;;;;;;AACA;;AAEe,kBAAUA,UAAV,EAAkC;AAC/C,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAA0BF,UAAU,CAACG,KAA3C;;AACA,MAAI,CAACD,SAAL,EAAgB;AACd,WAAOE,SAAP;AACD;;AACD,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAiBJ,SAAS,CAACK,IAAV,CAAeN,QAAf,CAAvB;;AACA,MAAII,KAAK,CAACG,WAAN,MAAuBF,GAAG,CAACE,WAAJ,EAA3B,EAA8C;AAC5C,WAAOJ,SAAP;AACD;;AACD,QAAMK,UAAU,GAAGR,QAAQ,CAACS,UAAT,CACjBL,KAAK,CAACM,GADW,EAEjBC,mBAAeC,gBAFE,CAAnB;AAIA,QAAMC,QAAQ,GAAGb,QAAQ,CAACS,UAAT,CACfJ,GAAG,CAACK,GADW,EAEfC,mBAAeC,gBAFA,CAAjB;;AAIA,MAAIJ,UAAU,IAAIA,UAAU,KAAKK,QAAjC,EAA2C;AACzC,WAAO,KAAP;AACD,GAFD,MAEO,IAAIL,UAAJ,EAAgB;AACrB,WAAO,OAAP;AACD,GAFM,MAEA,IAAIK,QAAJ,EAAc;AACnB,WAAO,KAAP;AACD;;AACD,SAAOV,SAAP;AACD","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport { TemplateButton } from '../../mo';\n\nexport default function (controller: Controller) {\n  const { document, selection } = controller.value;\n  if (!selection) {\n    return undefined;\n  }\n  const { start, end } = selection.sort(document);\n  if (start.isEdgePoint() || end.isEdgePoint()) {\n    return undefined;\n  }\n  const startBlock = document.getClosest(\n    start.key,\n    TemplateButton.isTemplateButton,\n  );\n  const endBlcok = document.getClosest(\n    end.key,\n    TemplateButton.isTemplateButton,\n  );\n  if (startBlock && startBlock === endBlcok) {\n    return 'all';\n  } else if (startBlock) {\n    return 'start';\n  } else if (endBlcok) {\n    return 'end';\n  }\n  return undefined;\n}\n"],"file":"isSelectionInTemplateButton.js"}