"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createNormalizeNode = void 0;

var _everCangjie = require("@ali/4ever-cangjie");

var _mo = require("../../mo");

const createNormalizeNode = () => {
  return (node, controller, next) => {
    if (_mo.TemplateButton.isTemplateButton(node)) {
      // 确保模板按钮的直接子 Node 都是 Block
      if (node.nodes.length === 1 && !_everCangjie.Block.isBlock(node.nodes[0])) {
        return () => controller.command(_everCangjie.Commands.wrapBlockByKey, node.nodes[0].key, "paragraph");
      } else if (node.nodes.length === 0) {
        return () => {
          controller.command(_everCangjie.Commands.insertBlock, _everCangjie.Block.create({
            type: "paragraph",
            nodes: [_everCangjie.Text.create("")]
          }));
        };
      }
    }

    return next();
  };
};

exports.createNormalizeNode = createNormalizeNode;
//# sourceMappingURL=createNormalizeNode.js.map