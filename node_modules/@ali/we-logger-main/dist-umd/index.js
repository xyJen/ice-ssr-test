!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self)["@ali/we-logger-main"]={})}(this,(function(t){"use strict";var e,n,i=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},t.exports.default=t.exports,t.exports.__esModule=!0,e.apply(this,arguments)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0})),r=(e=i)&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;!function(t){t[t.SUM=0]="SUM",t[t.AVG=1]="AVG",t[t.API=2]="API",t[t.LOG=3]="LOG"}(n||(n={}));var o,a=n;!function(t){t[t.TRACE=0]="TRACE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.FATAL=5]="FATAL"}(o||(o={}));var s=o,c=function(){function t(t){this._appender=void 0,this._enabled=!0,this._appender=t}var e=t.prototype;return e.getAppender=function(){return this._appender},e.isEnabled=function(){return this._enabled},e.disable=function(){this._enabled=!1},e.enable=function(){this._enabled=!0},e.setBaseInfo=function(t){try{this._appender.setBaseInfo(t)}catch(t){}},e.sum=function(t){if(this._enabled)try{if(this._appender.ignore(a[a.SUM],{key:t}))return;this._appender.sum(t)}catch(t){}},e.avg=function(t,e){if(this._enabled)try{if(this._appender.ignore(a[a.AVG],{key:t}))return;this._appender.avg(t,e)}catch(t){}},e.log=function(t,e,n){if(this._enabled)try{if(this._appender.ignore(a[a.LOG],{"log-level":s[t],"log-category":e,content:n}))return;this._appender.log(t,e,n)}catch(t){}},e.api=function(t){if(this._enabled)try{if(this._appender.ignore(a[a.API],t))return;this._appender.api(t)}catch(t){}},t}(),f=(new Date).valueOf(),h=function(){var t,e=0;try{t=window.performance.timing.fetchStart-window.performance.timing.navigationStart,e=Math.round(window.performance.now()-t)}catch(t){e=f?(new Date).valueOf()-f:0}return e},u=function(){function t(){this._traceId=void 0,this._enabled=!0,this._times={},this._baseInfo={},this._appenders=[],this.refreshTraceId()}var e=t.prototype;return e.getTraceId=function(){return this._traceId},e.refreshTraceId=function(t){return void 0===t&&(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})).substring(0,8)),this._traceId=t,this.setBaseInfo({trace_id:this._traceId}),this._traceId},e.isEnabled=function(){return this._enabled},e.enable=function(){this._enabled=!0},e.disable=function(){this._enabled=!1},e.getBaseInfo=function(){return this._baseInfo},e.getAppenders=function(){return this._appenders},e.append=function(t){var e=new c(t);try{e.setBaseInfo(this._baseInfo)}catch(t){}return this._appenders.push(e),this},e.remove=function(t){return this._appenders=this._appenders.filter((function(e){return e.getAppender()!==t})),this},e.setBaseInfo=function(t){var e=this;this._baseInfo=r({},this._baseInfo,t),this._appenders.forEach((function(t){try{t.setBaseInfo(e._baseInfo)}catch(t){}}))},e.time=function(t,e){this.timeStart(t);try{e()}finally{this.timeEnd(t)}},e.timeStart=function(t){this._times[t]=Date.now()},e.timeEnd=function(t){var e=Date.now();this._times[t]&&e>=this._times[t]&&this.avg(t,e-this._times[t]),delete this._times[t]},e.perf=function(t,e){void 0===e&&(e=h()),this.avg(t,e)},e.count=function(t){this.sum(t)},e.sum=function(t){this.isEnabled()&&this._appenders.forEach((function(e){try{e.sum(t)}catch(t){}}))},e.avg=function(t,e){void 0===e&&(e=0),this.isEnabled()&&this._appenders.forEach((function(n){try{n.avg(t,e)}catch(t){}}))},e.error=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logWithLevel.apply(this,[s.ERROR].concat(e))},e.fatal=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logWithLevel.apply(this,[s.FATAL].concat(e))},e.warn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logWithLevel.apply(this,[s.WARN].concat(e))},e.info=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logWithLevel.apply(this,[s.INFO].concat(e))},e.log=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logWithLevel.apply(this,[s.INFO].concat(e))},e.debug=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logWithLevel.apply(this,[s.DEBUG].concat(e))},e.trace=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.logWithLevel.apply(this,[s.TRACE].concat(e))},e.logWithLevel=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(this.isEnabled()&&n&&0!==n.length){var r,o="default";2===n.length?(o=String(n[0]),r=n[1]):1===n.length&&(r=n[0]),this._appenders.forEach((function(e){try{e.log(t,o,r)}catch(t){}}))}},e.api=function(t){this.isEnabled()&&this._appenders.forEach((function(e){try{e.api(t)}catch(t){}}))},t}(),p=function(){function t(){}var e=t.prototype;return e.ignore=function(t,e){return!1},e.setBaseInfo=function(t){},e.sum=function(t){},e.avg=function(t,e){},e.log=function(t,e,n){},e.api=function(t){},t}();t.Action=a,t.Level=s,t.NoopAppender=p,t.default=u,Object.defineProperty(t,"__esModule",{value:!0})}));
