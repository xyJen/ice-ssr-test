export default function requestIdle(fn) {
  var cancel;

  if (window.requestIdleCallback) {
    var frame = window.requestIdleCallback(fn);

    cancel = function cancel() {
      return window.cancelIdleCallback(frame);
    }; // @ts-ignore

  } else if (window.requestAnimationFrame) {
    var _frame = requestAnimationFrame(fn);

    cancel = function cancel() {
      return window.cancelAnimationFrame(_frame);
    };
  } else {
    // timeout by design，参考上面定义
    var timer = setTimeout(fn, 0);

    cancel = function cancel() {
      return clearTimeout(timer);
    };
  }

  return {
    cancel: cancel
  };
}
//# sourceMappingURL=requestIdle.js.map