{"version":3,"sources":["../../../../src/utils/utils/hoverCapture.ts"],"names":["callbacks","prev","on","c","push","off","filter","cb","trigger","msg","block","forEach"],"mappings":"AAQA,IAAIA,SAAqB,GAAG,EAA5B;AACA,IAAIC,IAAJ;;AAEA,SAASC,EAAT,CAAYC,CAAZ,EAAyB;AACvBH,EAAAA,SAAS,CAACI,IAAV,CAAeD,CAAf;AACD;;AAED,SAASE,GAAT,CAAaF,CAAb,EAA0B;AACxBH,EAAAA,SAAS,GAAGA,SAAS,CAACM,MAAV,CAAiB,UAACC,EAAD;AAAA,WAAQA,EAAE,KAAKJ,CAAf;AAAA,GAAjB,CAAZ;AACD;;AAED,SAASK,OAAT,CAAiBC,GAAjB,EAAuC;AAAA,MAAtBA,GAAsB;AAAtBA,IAAAA,GAAsB,GAAJ,EAAI;AAAA;;AACrC,MAAIR,IAAI,IAAIA,IAAI,CAACS,KAAL,KAAeD,GAAG,CAACC,KAA/B,EAAsC;AACpC;AACD;;AACDT,EAAAA,IAAI,GAAGQ,GAAP;AACAT,EAAAA,SAAS,CAACW,OAAV,CAAkB,UAACR,CAAD;AAAA,WAAOA,CAAC,CAACM,GAAD,CAAR;AAAA,GAAlB;AACD;;AAED,eAAe;AACbP,EAAAA,EAAE,EAAFA,EADa;AAEbG,EAAAA,GAAG,EAAHA,GAFa;AAGbG,EAAAA,OAAO,EAAPA;AAHa,CAAf","sourcesContent":["import { Block } from '@ali/4ever-cangjie';\n\nexport type CaptureMsg = {\n  block?: Block;\n};\n\ntype Callback = (msg: CaptureMsg) => void;\n\nlet callbacks: Callback[] = [];\nlet prev: CaptureMsg | undefined;\n\nfunction on(c: Callback) {\n  callbacks.push(c);\n}\n\nfunction off(c: Callback) {\n  callbacks = callbacks.filter((cb) => cb !== c);\n}\n\nfunction trigger(msg: CaptureMsg = {}) {\n  if (prev && prev.block === msg.block) {\n    return;\n  }\n  prev = msg;\n  callbacks.forEach((c) => c(msg));\n}\n\nexport default {\n  on,\n  off,\n  trigger,\n};\n"],"file":"hoverCapture.js"}