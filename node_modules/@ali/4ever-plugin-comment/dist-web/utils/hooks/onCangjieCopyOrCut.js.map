{"version":3,"sources":["../../../../src/utils/hooks/onCangjieCopyOrCut.ts"],"names":["transferUtils","constants","logger","filterFragment","MIME_TYPES","createOnCangjieCopyOrCut","onCangjieCopyOrCut","event","_","next","clipboardData","encodedFragment","getData","FRAGMENT","fragment","decodeFragment","newFragment","setData","encodeFragment","error"],"mappings":"AAAA,SACEA,aADF,EAGEC,SAHF,QAIO,oBAJP;AAKA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,cAAP;IAEQC,U,GAAeH,S,CAAfG,U;AAER,eAAe,SAASC,wBAAT,GAAoC;AACjD,SAAO,SAASC,kBAAT,CAA4BC,KAA5B,EAA0DC,CAA1D,EAA6DC,IAA7D,EAAmE;AACxE,QAAI,CAACF,KAAK,CAACG,aAAX,EAA0B;AACxB,aAAOD,IAAI,EAAX;AACD;;AAED,QAAI;AACF,UAAME,eAAe,GAAGJ,KAAK,CAACG,aAAN,CAAoBE,OAApB,CAA4BR,UAAU,CAACS,QAAvC,CAAxB;AACA,UAAMC,QAAQ,GAAGd,aAAa,CAACe,cAAd,CAA6BJ,eAA7B,CAAjB;AAEA,UAAMK,WAAW,GAAGb,cAAc,CAACW,QAAD,CAAlC;AACAP,MAAAA,KAAK,CAACG,aAAN,CAAoBO,OAApB,CACEb,UAAU,CAACS,QADb,EAEEb,aAAa,CAACkB,cAAd,CAA6BF,WAA7B,CAFF;AAID,KATD,CASE,OAAOG,KAAP,EAAmB;AACnBjB,MAAAA,MAAM,CAACiB,KAAP,CAAaA,KAAb;AACD;;AACD,WAAOV,IAAI,EAAX;AACD,GAlBD;AAmBD","sourcesContent":["import {\n  transferUtils,\n  CangjieClipboardEvent,\n  constants,\n} from '@ali/4ever-cangjie';\nimport logger from '@ali/4ever-logger';\nimport filterFragment from '../utils/filterFragment';\n\nconst { MIME_TYPES } = constants;\n\nexport default function createOnCangjieCopyOrCut() {\n  return function onCangjieCopyOrCut(event: CangjieClipboardEvent, _, next) {\n    if (!event.clipboardData) {\n      return next();\n    }\n\n    try {\n      const encodedFragment = event.clipboardData.getData(MIME_TYPES.FRAGMENT);\n      const fragment = transferUtils.decodeFragment(encodedFragment);\n\n      const newFragment = filterFragment(fragment);\n      event.clipboardData.setData(\n        MIME_TYPES.FRAGMENT,\n        transferUtils.encodeFragment(newFragment),\n      );\n    } catch (error: any) {\n      logger.error(error);\n    }\n    return next();\n  };\n}\n"],"file":"onCangjieCopyOrCut.js"}