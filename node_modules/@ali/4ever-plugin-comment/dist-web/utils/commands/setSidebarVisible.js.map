{"version":3,"sources":["../../../../src/utils/commands/setSidebarVisible.ts"],"names":["environment","cancelComment","setActiveId","getActiveId","setSidebarVisible","controller","visible","IS_MOBILE","IS_IPAD","activeId","run","undefined","setData","value","data","_commentSideBarVisible"],"mappings":";AAAA,SAAqBA,WAArB,QAAwC,oBAAxC;AACA,SAASC,aAAT,EAAwBC,WAAxB;AACA,SAASC,WAAT;AAEA,eAAe,SAASC,iBAAT,CACbC,UADa,EAEbC,OAFa,EAGb;AACA,MAAIN,WAAW,CAACO,SAAZ,IAAyB,CAACP,WAAW,CAACQ,OAA1C,EAAmD;AACjD,WAAOH,UAAP;AACD;;AACD,MAAMI,QAAQ,GAAGN,WAAW,CAACE,UAAD,CAA5B;;AACA,MAAII,QAAQ,IAAI,CAACH,OAAjB,EAA0B;AACxBD,IAAAA,UAAU,CAACK,GAAX,CAAe,UAAf,EAA2BR,WAAW,CAACS,SAAD,CAAtC;AACD;;AACD,GAACL,OAAD,IAAYD,UAAU,CAACK,GAAX,CAAe,UAAf,EAA2BT,aAAa,EAAxC,CAAZ;AACA,SAAOI,UAAU,CAACO,OAAX,cACFP,UAAU,CAACQ,KAAX,CAAiBC,IADf;AAELC,IAAAA,sBAAsB,EAAET;AAFnB,KAAP;AAID","sourcesContent":["import { Controller, environment } from '@ali/4ever-cangjie';\nimport { cancelComment, setActiveId } from '../actions';\nimport { getActiveId } from '../queries';\n\nexport default function setSidebarVisible(\n  controller: Controller,\n  visible: boolean,\n) {\n  if (environment.IS_MOBILE && !environment.IS_IPAD) {\n    return controller;\n  }\n  const activeId = getActiveId(controller);\n  if (activeId && !visible) {\n    controller.run('onAction', setActiveId(undefined));\n  }\n  !visible && controller.run('onAction', cancelComment());\n  return controller.setData({\n    ...controller.value.data,\n    _commentSideBarVisible: visible,\n  });\n}\n"],"file":"setSidebarVisible.js"}