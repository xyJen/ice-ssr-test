{"version":3,"sources":["../../../../src/utils/queries/getSiblings.ts"],"names":["getActiveId","ViewMark","getSiblings","controller","activeId","prev","next","decs","value","decorations","filter","d","isViewMark","mark","index","findIndex","data","contentId"],"mappings":"AACA,OAAOA,WAAP;AACA,SAASC,QAAT;AAEA,eAAe,SAASC,WAAT,CAAqBC,UAArB,EAA6C;AAAA;;AAC1D,MAAMC,QAAQ,GAAGJ,WAAW,CAACG,UAAD,CAA5B;AACA,MAAIE,IAAJ;AACA,MAAIC,IAAJ;;AACA,MAAI,CAACF,QAAL,EAAe;AACb,WAAO;AAAEC,MAAAA,IAAI,EAAJA,IAAF;AAAQC,MAAAA,IAAI,EAAJA;AAAR,KAAP;AACD;;AACD,MAAMC,IAAI,GAAGJ,UAAU,CAACK,KAAX,CAAiBC,WAAjB,CAA6BC,MAA7B,CAAoC,UAACC,CAAD;AAAA,WAC/CV,QAAQ,CAACW,UAAT,CAAoBD,CAAC,CAACE,IAAtB,CAD+C;AAAA,GAApC,CAAb;AAGA,MAAMC,KAAK,GAAGP,IAAI,CAACQ,SAAL,CACZ,UAACJ,CAAD;AAAA,WAAOV,QAAQ,CAACW,UAAT,CAAoBD,CAAC,CAACE,IAAtB,KAA+BF,CAAC,CAACE,IAAF,CAAOG,IAAP,CAAYC,SAAZ,KAA0Bb,QAAhE;AAAA,GADY,CAAd;;AAGA,MAAIU,KAAK,GAAG,CAAZ,EAAe;AACb,WAAO;AAAET,MAAAA,IAAI,EAAJA,IAAF;AAAQC,MAAAA,IAAI,EAAJA;AAAR,KAAP;AACD;;AACDD,EAAAA,IAAI,YAAGE,IAAI,CAACO,KAAK,GAAG,CAAT,CAAP,qBAAG,MAAiBD,IAAjB,CAAsBG,IAAtB,CAA2BC,SAAlC;AACAX,EAAAA,IAAI,aAAGC,IAAI,CAACO,KAAK,GAAG,CAAT,CAAP,qBAAG,OAAiBD,IAAjB,CAAsBG,IAAtB,CAA2BC,SAAlC;AAEA,SAAO;AAAEZ,IAAAA,IAAI,EAAJA,IAAF;AAAQC,IAAAA,IAAI,EAAJA;AAAR,GAAP;AACD","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport getActiveId from './getActiveId';\nimport { ViewMark } from '../models/marks';\n\nexport default function getSiblings(controller: Controller) {\n  const activeId = getActiveId(controller);\n  let prev: string | undefined;\n  let next: string | undefined;\n  if (!activeId) {\n    return { prev, next };\n  }\n  const decs = controller.value.decorations.filter((d) =>\n    ViewMark.isViewMark(d.mark),\n  );\n  const index = decs.findIndex(\n    (d) => ViewMark.isViewMark(d.mark) && d.mark.data.contentId === activeId,\n  );\n  if (index < 0) {\n    return { prev, next };\n  }\n  prev = decs[index - 1]?.mark.data.contentId;\n  next = decs[index + 1]?.mark.data.contentId;\n\n  return { prev, next };\n}\n"],"file":"getSiblings.js"}