{"version":3,"sources":["../../../../src/utils/components/HoverEffect.tsx"],"names":["React","styled","useZoom","COLOR","HoverEffectWrapper","div","HoverEffectNode","HoverEffect","blockKey","ref","useRef","zoom","useEffect","target","current","parentElement","nextElementSibling","node","undefined","getBoundingClientRect","top","width","height","selfTop","style","timer","requestAnimationFrame","backgroundColor","cancelAnimationFrame"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;qBAC4B,a;AAA5B,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AAEA,SAASC,KAAT;AAEA,IAAMC,kBAAkB,gBAAGH,MAAM,CAACI,GAAV,8DAAxB;AAQA,IAAMC,eAAe,gBAAGL,MAAM,CAACI,GAAV,mFAArB;AAQA,eAAe,SAASE,WAAT,OAAyD;AAAA,MAAlCC,QAAkC,QAAlCA,QAAkC;AACtE,MAAMC,GAAG,GAAGT,KAAK,CAACU,MAAN,CAA6B,IAA7B,CAAZ;AACA,MAAMC,IAAI,GAAGT,OAAO,EAApB;AACAF,EAAAA,KAAK,CAACY,SAAN,CAAgB,YAAM;AAAA;;AACpB,QAAMC,MAAM,mBAAGJ,GAAG,CAACK,OAAP,8CAAG,aAAaC,aAAhB,qBAAG,sBAA4BC,kBAA3C;AACA,QAAMC,IAAI,GAAGR,GAAG,CAACK,OAAjB;;AACA,QAAI,CAACD,MAAD,IAAW,CAACI,IAAhB,EAAsB;AACpB,aAAOC,SAAP;AACD;;AALmB,gCAMWL,MAAM,CAACM,qBAAP,EANX;AAAA,QAMZC,GANY,yBAMZA,GANY;AAAA,QAMPC,KANO,yBAMPA,KANO;AAAA,QAMAC,MANA,yBAMAA,MANA;;AAAA,iCAOKb,GAAG,CAACK,OAAJ,CAAYC,aAAZ,CAA0BI,qBAA1B,EAPL;AAAA,QAOPI,OAPO,0BAOZH,GAPY;;AAQpBH,IAAAA,IAAI,CAACO,KAAL,CAAWH,KAAX,GAAsBA,KAAK,GAAGV,IAA9B;AACAM,IAAAA,IAAI,CAACO,KAAL,CAAWF,MAAX,GAAuBA,MAAM,GAAGX,IAAhC;AACAM,IAAAA,IAAI,CAACO,KAAL,CAAWJ,GAAX,GAAoB,CAACA,GAAG,GAAGG,OAAP,IAAkBZ,IAAtC;AACA,QAAMc,KAAK,GAAGC,qBAAqB,CAAC,YAAM;AACxCT,MAAAA,IAAI,CAACO,KAAL,CAAWG,eAAX,GAA6BxB,KAA7B;AACD,KAFkC,CAAnC;AAGA,WAAO,YAAM;AACXyB,MAAAA,oBAAoB,CAACH,KAAD,CAApB;AACD,KAFD;AAGD,GAjBD,EAiBG,CAACd,IAAD,CAjBH;AAkBA,sBACE,eAAC,kBAAD;AAAoB,6BAAuBH;AAA3C,kBACE,eAAC,eAAD;AAAiB,IAAA,GAAG,EAAEC;AAAtB,IADF,CADF;AAKD","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { useZoom } from '@ali/4ever-cangjie';\n\nimport { COLOR } from '../constants';\n\nconst HoverEffectWrapper = styled.div`\n  z-index: 1;\n  width: 0;\n  height: 0;\n  float: left;\n  position: relative;\n`;\n\nconst HoverEffectNode = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  border-radius: 4px;\n  transition: background 0.25s;\n`;\n\nexport default function HoverEffect({ blockKey }: { blockKey: string }) {\n  const ref = React.useRef<HTMLDivElement>(null);\n  const zoom = useZoom();\n  React.useEffect(() => {\n    const target = ref.current?.parentElement?.nextElementSibling;\n    const node = ref.current;\n    if (!target || !node) {\n      return undefined;\n    }\n    const { top, width, height } = target.getBoundingClientRect();\n    const { top: selfTop } = ref.current.parentElement.getBoundingClientRect();\n    node.style.width = `${width / zoom}px`;\n    node.style.height = `${height / zoom}px`;\n    node.style.top = `${(top - selfTop) / zoom}px`;\n    const timer = requestAnimationFrame(() => {\n      node.style.backgroundColor = COLOR;\n    });\n    return () => {\n      cancelAnimationFrame(timer);\n    };\n  }, [zoom]);\n  return (\n    <HoverEffectWrapper data-drag-handler-key={blockKey}>\n      <HoverEffectNode ref={ref} />\n    </HoverEffectWrapper>\n  );\n}\n"],"file":"HoverEffect.js"}