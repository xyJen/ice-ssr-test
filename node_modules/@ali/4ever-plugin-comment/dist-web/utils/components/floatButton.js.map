{"version":3,"sources":["../../../../src/utils/components/floatButton.tsx"],"names":["React","styled","Tooltip","ToolbarAddCommentNormal","environment","CangjieSelectEvent","ACTION_COMMENT_CLICK","setActiveId","setSidebarVisible","showComment","blockEvent","BUTTON_SIZE","SIZE","BUTTON_SIZE_MOBILE","SIZE_MOBILE","tipStyle","IS_MOBILE","FloatWrapper","div","PCFloatWrapper","Icon","img","props","showShadow","AddCommentIcon","IconWrapper","AddIconWrapper","CommentIconWrapper","IconNumber","PCFloatButton","forwardRef","ref","top","onClick","children","tips","isNew","testId","wrapperProps","undefined","style","attrs","MobileFloatButton","CommentAddButton","memo","controller","range","onHover","handleClick","useCallback","event","run","selection","type","useRef","useEffect","node","current","timer","requestAnimationFrame","opacity","cancelAnimationFrame","handleMouseEnter","handleMouseLeave","useMemo","onMouseEnter","onMouseLeave","CommentBubble","isMultiple","count","contentId","showInline","onBubbleClick","countStr","setTimeout","transform","src","RealFloatButton"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-unused-prop-types */\nimport React from 'react';\nimport styled from 'styled-components';\nimport { Tooltip } from '@ali/we-design';\nimport { ToolbarAddCommentNormal } from '@ali/we-icon';\nimport {\n  Controller,\n  environment,\n  Selection,\n  CangjieSelectEvent,\n} from '@ali/4ever-cangjie';\nimport {\n  ACTION_COMMENT_CLICK,\n  setActiveId,\n  setSidebarVisible,\n  showComment,\n} from '../actions';\nimport blockEvent from '../utils/blockEvent';\nimport {\n  BUTTON_SIZE as SIZE,\n  BUTTON_SIZE_MOBILE as SIZE_MOBILE,\n} from '../utils/constants';\nimport { tipStyle } from '../common';\n\nconst { IS_MOBILE } = environment;\n\ninterface FloatButtonProps {\n  top: number;\n  controller: Controller;\n  showInline?: boolean;\n  testId?: string;\n  onClick?: (event: React.MouseEvent | React.TouchEvent) => void;\n  tips?: string;\n  children?: any;\n  isNew?: boolean;\n  wrapperProps?: any;\n}\n\ntype AddBubbleProps = FloatButtonProps & {\n  range?: Selection;\n  onHover?: (hover: boolean) => void;\n};\n\ntype CommentBubbleProps = FloatButtonProps & {\n  count: number;\n  contentId: string;\n  isMultiple?: boolean;\n  onBubbleClick?: (contentId: string) => void;\n};\n\nconst FloatWrapper = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n  cursor: pointer;\n  float: right;\n  width: ${SIZE_MOBILE}px;\n  height: ${SIZE_MOBILE}px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  box-sizing: content-box;\n  [data-comment-sidebar] &[data-comment-bubble] {\n    display: none;\n  }\n  [data-node-selecting] &[data-comment-bubble] {\n    display: none;\n  }\n`;\n\nconst PCFloatWrapper = styled(FloatWrapper)`\n  &:hover {\n    background: rgba(126, 134, 142, 0.12);\n    border-radius: 4px;\n  }\n`;\n\nconst Icon = styled.img<{ showShadow?: boolean }>`\n  width: ${IS_MOBILE ? SIZE : 20}px;\n  ${(props) =>\n    (props.showShadow\n      ? 'filter: drop-shadow(0px 2px 3px rgba(0, 137, 255, 0.4));'\n      : '')}\n`;\n\nconst AddCommentIcon = styled(ToolbarAddCommentNormal)`\n  font-size: ${IS_MOBILE ? SIZE : 20}px;\n`;\n\nconst IconWrapper = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst AddIconWrapper = styled(IconWrapper)`\n  opacity: 0;\n  transition: opacity 0.25s;\n`;\n\nconst CommentIconWrapper = styled(IconWrapper)`\n  transform: scale(0.75);\n  opacity: 0.5;\n  transition: opacity 0.25s, transform 0.25s;\n`;\n\nconst IconNumber = styled.div`\n  position: absolute;\n  width: ${SIZE}px;\n  height: ${SIZE}px;\n  line-height: ${SIZE}px;\n  padding-left: 0.5px;\n  transform: scale(0.9);\n  color: white;\n  text-align: center;\n  vertical-align: middle;\n  font-size: 8px;\n`;\n\n/**\n * 右侧悬浮 Icon\n */\nconst PCFloatButton = React.forwardRef(\n  (\n    {\n      top,\n      onClick,\n      children,\n      tips,\n      isNew,\n      testId,\n      wrapperProps,\n    }: FloatButtonProps,\n    ref: any,\n  ) => {\n    if (top === undefined) {\n      return null;\n    }\n    const style: React.CSSProperties = { top: `${top - SIZE / 2}px` };\n    const attrs = isNew ? {} : { 'data-comment-bubble': '' };\n    return (\n      <PCFloatWrapper\n        {...attrs}\n        {...wrapperProps}\n        data-comment-noblur\n        ref={ref}\n        style={style}\n        data-testid={testId}\n        onMouseDown={onClick}\n        onClick={blockEvent}\n      >\n        <Tooltip overlayStyle={tipStyle} title={tips} placement=\"bottom\">\n          {children}\n        </Tooltip>\n      </PCFloatWrapper>\n    );\n  },\n);\n\n/**\n * 右侧悬浮 Icon\n */\nfunction MobileFloatButton({ top, onClick, children }: FloatButtonProps) {\n  if (top === undefined) {\n    return null;\n  }\n  const style: React.CSSProperties = { top: `${top - SIZE / 2}px` };\n  return (\n    <FloatWrapper\n      style={style}\n      data-comment-bubble\n      onMouseDown={blockEvent}\n      onClick={blockEvent}\n      onTouchStart={onClick}\n    >\n      {children}\n    </FloatWrapper>\n  );\n}\n\n/**\n * 右侧悬浮 Icon - 添加评论\n */\nexport const CommentAddButton = React.memo((props: AddBubbleProps) => {\n  const { controller, range, onHover } = props;\n  const handleClick = React.useCallback(\n    (event: React.MouseEvent | React.TouchEvent) => {\n      blockEvent(event);\n      if (onHover && range) {\n        controller?.run(\n          'onCangjieSelect',\n          CangjieSelectEvent({\n            selection: range,\n          }),\n        );\n      }\n      controller?.run('onAction', {\n        type: ACTION_COMMENT_CLICK,\n      });\n    },\n    [controller, onHover, range],\n  );\n  const ref = React.useRef<HTMLDivElement>(null);\n  React.useEffect(() => {\n    const node = ref.current;\n    if (!node) {\n      return undefined;\n    }\n    const timer = requestAnimationFrame(() => {\n      node.style.opacity = onHover ? '0.4' : '1';\n    });\n    return () => {\n      cancelAnimationFrame(timer);\n    };\n  }, [onHover]);\n  React.useEffect(() => {\n    return () => {\n      onHover && onHover(false);\n    };\n  }, [onHover]);\n  const handleMouseEnter = React.useCallback(() => {\n    const node = ref.current;\n    if (!node || !onHover) {\n      return;\n    }\n    onHover(true);\n    node.style.opacity = '1';\n  }, [onHover]);\n  const handleMouseLeave = React.useCallback(() => {\n    const node = ref.current;\n    if (!node || !onHover) {\n      return;\n    }\n    onHover(false);\n    node.style.opacity = '0.4';\n  }, [onHover]);\n  const wrapperProps = React.useMemo(\n    () => ({\n      onMouseEnter: handleMouseEnter,\n      onMouseLeave: handleMouseLeave,\n    }),\n    [handleMouseEnter, handleMouseLeave],\n  );\n  return (\n    <PCFloatButton\n      {...props}\n      wrapperProps={wrapperProps}\n      isNew\n      testId=\"comment-add\"\n      onClick={handleClick}\n      tips={props.tips || 'add comment'}\n    >\n      <AddIconWrapper ref={ref}>\n        <AddCommentIcon />\n      </AddIconWrapper>\n    </PCFloatButton>\n  );\n});\n\n/**\n * 右侧悬浮 Icon - 已有评论\n */\nexport const CommentBubble = React.memo((props: CommentBubbleProps) => {\n  const { top, isMultiple, tips, count, contentId, controller, showInline, onBubbleClick } = props;\n  const countStr = `${count || ''}`;\n  const handleClick = (event: React.MouseEvent | React.TouchEvent) => {\n    blockEvent(event);\n    if (IS_MOBILE) {\n      /**\n       * 移动端容易触发 cangjie touch 事件 bug，导致无法 blur\n       * 这里先 hotfix 一下，后续等 cangjie touch 事件改造后，可以移除这里的 timeout\n       */\n      setTimeout(() => {\n        controller.run('onCangjieBlur');\n        controller.run('onAction', showComment(contentId));\n      }, 300);\n    } else if (showInline) {\n      controller.run('onCangjieBlur');\n      controller.run('onAction', showComment(contentId));\n    } else {\n      controller.run('onCangjieBlur');\n      controller.run('onAction', setActiveId(contentId));\n      controller.run('onAction', setSidebarVisible(true));\n    }\n    onBubbleClick && onBubbleClick(contentId);\n  };\n  const ref = React.useRef<HTMLDivElement>(null);\n  React.useEffect(() => {\n    const node = ref.current;\n    if (!node) {\n      return undefined;\n    }\n    const timer = requestAnimationFrame(() => {\n      node.style.opacity = '1';\n      node.style.transform = 'scale(1)';\n    });\n    return () => {\n      cancelAnimationFrame(timer);\n    };\n  }, [countStr]);\n  if (!countStr) {\n    return null;\n  }\n  const src = isMultiple\n    ? 'https://img.alicdn.com/imgextra/i3/O1CN01WGVJgh1DS3R5moD3Q_!!6000000000214-55-tps-20-20.svg'\n    : 'https://img.alicdn.com/imgextra/i3/O1CN01bFO13z1bcAy5NpEpj_!!6000000003485-55-tps-20-20.svg';\n  const RealFloatButton = IS_MOBILE ? MobileFloatButton : PCFloatButton;\n  return (\n    <RealFloatButton\n      controller={controller}\n      onClick={handleClick}\n      testId=\"comment-show\"\n      top={top}\n      tips={tips || 'Show Comment'}\n    >\n      <CommentIconWrapper ref={ref}>\n        <Icon showShadow src={src} />\n        {!isMultiple && <IconNumber>{countStr}</IconNumber>}\n      </CommentIconWrapper>\n    </RealFloatButton>\n  );\n});\n"],"file":"floatButton.js"}