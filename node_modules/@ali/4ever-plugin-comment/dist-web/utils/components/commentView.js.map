{"version":3,"sources":["../../../../src/utils/components/commentView.tsx"],"names":["React","HoverEffect","blockHoverEvent","CommentView","block","children","useState","isAddHover","setIsAddHover","handleBlockHover","useCallback","blk","isHover","key","useEffect","on","off"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;qBAC4B,a;AAC5B,OAAOC,WAAP;AACA,OAAOC,eAAP;AAOA,eAAe,SAASC,WAAT,OAA4D;AAAA,MAArCC,KAAqC,QAArCA,KAAqC;AAAA,MAA9BC,QAA8B,QAA9BA,QAA8B;;AAAA,wBACrCL,KAAK,CAACM,QAAN,CAAe,KAAf,CADqC;AAAA,MAClEC,UADkE;AAAA,MACtDC,aADsD;;AAGzE,MAAMC,gBAAgB,GAAGT,KAAK,CAACU,WAAN,CACvB,iBAA4C;AAAA,QAAlCC,GAAkC,SAAzCP,KAAyC;AAAA,QAA7BQ,OAA6B,SAA7BA,OAA6B;;AAC1C,QAAID,GAAG,CAACE,GAAJ,KAAYT,KAAK,CAACS,GAAtB,EAA2B;AACzB;AACD;;AACD,QAAID,OAAO,KAAKL,UAAhB,EAA4B;AAC1BC,MAAAA,aAAa,CAACI,OAAD,CAAb;AACD;AACF,GARsB,EASvB,CAACR,KAAD,EAAQG,UAAR,CATuB,CAAzB;AAYAP,EAAAA,KAAK,CAACc,SAAN,CAAgB,YAAM;AACpBZ,IAAAA,eAAe,CAACa,EAAhB,CAAmBN,gBAAnB;AACA,WAAO;AAAA,aAAMP,eAAe,CAACc,GAAhB,CAAoBP,gBAApB,CAAN;AAAA,KAAP;AACD,GAHD,EAGG,CAACA,gBAAD,CAHH;AAKA,sBACE,eAAC,KAAD,CAAO,QAAP,QACGF,UAAU,iBAAI,eAAC,WAAD;AAAa,IAAA,QAAQ,EAAEH,KAAK,CAACS;AAA7B,IADjB,EAEGR,QAFH,CADF;AAMD","sourcesContent":["import React from 'react';\nimport { Block } from '@ali/4ever-cangjie';\nimport HoverEffect from './HoverEffect';\nimport blockHoverEvent, { BlockHoverMsg } from '../utils/blockHoverEvent';\n\ninterface CommentDecsProps {\n  block: Block;\n  children: any;\n}\n\nexport default function CommentView({ block, children }: CommentDecsProps) {\n  const [isAddHover, setIsAddHover] = React.useState(false);\n\n  const handleBlockHover = React.useCallback(\n    ({ block: blk, isHover }: BlockHoverMsg) => {\n      if (blk.key !== block.key) {\n        return;\n      }\n      if (isHover !== isAddHover) {\n        setIsAddHover(isHover);\n      }\n    },\n    [block, isAddHover],\n  );\n\n  React.useEffect(() => {\n    blockHoverEvent.on(handleBlockHover);\n    return () => blockHoverEvent.off(handleBlockHover);\n  }, [handleBlockHover]);\n\n  return (\n    <React.Fragment>\n      {isAddHover && <HoverEffect blockKey={block.key} />}\n      {children}\n    </React.Fragment>\n  );\n}\n"],"file":"commentView.js"}