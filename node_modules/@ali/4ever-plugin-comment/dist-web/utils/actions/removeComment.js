import { Commands, Selection } from '@ali/4ever-cangjie';
import { ViewMark, DataMark } from "../models/marks";
import showComment from "./showComment";
export default function removeComment(contentId, controller) {
  var decorations = controller.value.decorations;
  var currentDec = decorations.find(function (dec) {
    return ViewMark.isViewMark(dec.mark) && dec.mark.data.contentId === contentId;
  });

  if (currentDec) {
    showComment(controller, undefined);
    var mark = DataMark.create({
      contentId: contentId
    });
    var anchor = currentDec.start,
        focus = currentDec.end;
    var range = Selection.create({
      anchor: anchor,
      focus: focus
    });

    if (range.isCollapsed) {
      controller.command(Commands.removeMarkByKey, anchor.key, 0, 0, mark);
    } else {
      controller.command(Commands.removeMarkAtRange, range, mark);
    }
  }
}
//# sourceMappingURL=removeComment.js.map