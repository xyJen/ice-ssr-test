{"version":3,"sources":["../../../../src/utils/components/HoverEffect.tsx"],"names":["HoverEffectWrapper","styled","div","HoverEffectNode","HoverEffect","blockKey","ref","React","useRef","zoom","useEffect","target","current","parentElement","nextElementSibling","node","undefined","top","width","height","getBoundingClientRect","selfTop","style","timer","requestAnimationFrame","backgroundColor","COLOR","cancelAnimationFrame"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;uBAH4B,a;;AAK5B,MAAMA,kBAAkB,gBAAGC,0BAAOC,GAAV,8DAAxB;;AAQA,MAAMC,eAAe,gBAAGF,0BAAOC,GAAV,mFAArB;;AAQe,SAASE,WAAT,CAAqB;AAAEC,EAAAA;AAAF,CAArB,EAAyD;AACtE,QAAMC,GAAG,GAAGC,eAAMC,MAAN,CAA6B,IAA7B,CAAZ;;AACA,QAAMC,IAAI,GAAG,2BAAb;;AACAF,iBAAMG,SAAN,CAAgB,MAAM;AACpB,UAAMC,MAAM,GAAGL,GAAG,CAACM,OAAJ,EAAaC,aAAb,EAA4BC,kBAA3C;AACA,UAAMC,IAAI,GAAGT,GAAG,CAACM,OAAjB;;AACA,QAAI,CAACD,MAAD,IAAW,CAACI,IAAhB,EAAsB;AACpB,aAAOC,SAAP;AACD;;AACD,UAAM;AAAEC,MAAAA,GAAF;AAAOC,MAAAA,KAAP;AAAcC,MAAAA;AAAd,QAAyBR,MAAM,CAACS,qBAAP,EAA/B;AACA,UAAM;AAAEH,MAAAA,GAAG,EAAEI;AAAP,QAAmBf,GAAG,CAACM,OAAJ,CAAYC,aAAZ,CAA0BO,qBAA1B,EAAzB;AACAL,IAAAA,IAAI,CAACO,KAAL,CAAWJ,KAAX,GAAoB,GAAEA,KAAK,GAAGT,IAAK,IAAnC;AACAM,IAAAA,IAAI,CAACO,KAAL,CAAWH,MAAX,GAAqB,GAAEA,MAAM,GAAGV,IAAK,IAArC;AACAM,IAAAA,IAAI,CAACO,KAAL,CAAWL,GAAX,GAAkB,GAAE,CAACA,GAAG,GAAGI,OAAP,IAAkBZ,IAAK,IAA3C;AACA,UAAMc,KAAK,GAAGC,qBAAqB,CAAC,MAAM;AACxCT,MAAAA,IAAI,CAACO,KAAL,CAAWG,eAAX,GAA6BC,gBAA7B;AACD,KAFkC,CAAnC;AAGA,WAAO,MAAM;AACXC,MAAAA,oBAAoB,CAACJ,KAAD,CAApB;AACD,KAFD;AAGD,GAjBD,EAiBG,CAACd,IAAD,CAjBH;;AAkBA,sBACE,eAAC,kBAAD;AAAoB,6BAAuBJ;AAA3C,kBACE,eAAC,eAAD;AAAiB,IAAA,GAAG,EAAEC;AAAtB,IADF,CADF;AAKD","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { useZoom } from '@ali/4ever-cangjie';\n\nimport { COLOR } from '../constants';\n\nconst HoverEffectWrapper = styled.div`\n  z-index: 1;\n  width: 0;\n  height: 0;\n  float: left;\n  position: relative;\n`;\n\nconst HoverEffectNode = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  border-radius: 4px;\n  transition: background 0.25s;\n`;\n\nexport default function HoverEffect({ blockKey }: { blockKey: string }) {\n  const ref = React.useRef<HTMLDivElement>(null);\n  const zoom = useZoom();\n  React.useEffect(() => {\n    const target = ref.current?.parentElement?.nextElementSibling;\n    const node = ref.current;\n    if (!target || !node) {\n      return undefined;\n    }\n    const { top, width, height } = target.getBoundingClientRect();\n    const { top: selfTop } = ref.current.parentElement.getBoundingClientRect();\n    node.style.width = `${width / zoom}px`;\n    node.style.height = `${height / zoom}px`;\n    node.style.top = `${(top - selfTop) / zoom}px`;\n    const timer = requestAnimationFrame(() => {\n      node.style.backgroundColor = COLOR;\n    });\n    return () => {\n      cancelAnimationFrame(timer);\n    };\n  }, [zoom]);\n  return (\n    <HoverEffectWrapper data-drag-handler-key={blockKey}>\n      <HoverEffectNode ref={ref} />\n    </HoverEffectWrapper>\n  );\n}\n"],"file":"HoverEffect.js"}