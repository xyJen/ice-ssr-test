{"version":3,"sources":["../../../../src/utils/components/BubblesNew.tsx"],"names":["BubblesWrapper","styled","div","SPACE_TO_DOC","environment","IS_MOBILE","EFFECT_DEBOUNCE_TIME","getSelectionFromBlock","block","controller","fakePoint","TextPoint","create","key","offset","emptySelection","Selection","anchor","focus","newRange","moveToRangeOfNode","flip","convertToTextPoints","value","document","set","isFromTable","type","useRightSpace","rightSpaceId","space","setSapce","React","useState","useEffect","docNode","domUtils","findDOMNodeSafely","contentNode","closest","constants","Selector","content","right","docRight","getBoundingClientRect","contentRight","rightSpace","Math","max","BubblesNew","configs","disableRangeAdd","onBubbleClick","container","bubbles","setBubbles","ref","useRef","hoverBlock","setHoverBlock","undefined","handleHover","useCallback","hoverCapture","on","off","decorations","selection","updatePosition","commentDecorations","filter","d","ViewMark","isViewMark","mark","hasHardSelection","isExpanded","getClosestVoid","isFocused","range","isCollapsed","rowItems","isFromPopup","top","refTop","current","documentNode","docTop","forEach","item","length","newBubbles","reduce","array","isMultiple","decoration","BUTTON_SIZE","isAdd","Boolean","isHard","count","contentId","data","push","updateRightSpace","useReducer","s","tryUpdateRightSpace","isWidthChanged","debouncedFunc","cancel","handleHovered","isHover","blockHoverEvent","trigger","zoom","wrapperStyle","useMemo","map","bubble","locale","addComment","showInline","showComent","round"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAYA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;uBArB4B,a;;AAuB5B,MAAMA,cAAc,gBAAGC,0BAAOC,GAAV,8BAApB;;AAKA,MAAMC,YAAY,GAAGC,yBAAYC,SAAZ,GAAwB,CAAC,CAAzB,GAA6B,CAAlD;AACA,MAAMC,oBAAoB,GAAG,GAA7B;;AAmBA,SAASC,qBAAT,CAA+BC,KAA/B,EAA6CC,UAA7C,EAAqE;AACnE,QAAMC,SAAS,GAAGC,uBAAUC,MAAV,CAAiB;AAAEC,IAAAA,GAAG,EAAE,GAAP;AAAYC,IAAAA,MAAM,EAAE;AAApB,GAAjB,CAAlB;;AACA,QAAMC,cAAc,GAAGC,uBAAUJ,MAAV,CAAiB;AACtCK,IAAAA,MAAM,EAAEP,SAD8B;AAEtCQ,IAAAA,KAAK,EAAER;AAF+B,GAAjB,CAAvB;;AAIA,QAAMS,QAAQ,GAAGJ,cAAc,CAACK,iBAAf,CAAiCZ,KAAjC,EAAwCC,UAAxC,EAAoDY,IAApD,EAAjB;AACA,SAAOL,uBAAUJ,MAAV,CACLO,QAAQ,CAACG,mBAAT,CAA6Bb,UAAU,CAACc,KAAX,CAAiBC,QAA9C,CADK,EAELC,GAFK,CAED,MAFC,EAEO;AAAEC,IAAAA,WAAW,EAAElB,KAAK,CAACmB,IAAN,KAAe;AAA9B,GAFP,CAAP;AAGD;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASC,aAAT,CAAuBnB,UAAvB,EAA+CoB,YAA/C,EAAqE;AACnE,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBC,KAAK,CAACC,QAAN,CAAe,CAAf,CAA1B;AACAD,EAAAA,KAAK,CAACE,SAAN,CAAgB,MAAM;AACpB,UAAM;AAAEV,MAAAA;AAAF,QAAef,UAAU,CAACc,KAAhC,CADoB,CAEpB;;AACA,UAAMY,OAAO,GAAGC,sBAASC,iBAAT,CAA2Bb,QAAQ,CAACX,GAApC,CAAhB;;AACA,UAAMyB,WAAW,GAAGH,OAAO,EAAEI,OAAT,CAAkB,IAAGC,uBAAUC,QAAV,CAAmBC,OAAQ,GAAhD,CAApB;;AACA,QAAI,CAACP,OAAD,IAAY,CAACG,WAAjB,EAA8B;AAC5B;AACD;;AACD,UAAM;AAAEK,MAAAA,KAAK,EAAEC;AAAT,QAAsBT,OAAO,CAACU,qBAAR,EAA5B;AACA,UAAM;AAAEF,MAAAA,KAAK,EAAEG;AAAT,QAA0BR,WAAW,CAACO,qBAAZ,EAAhC;AACA,UAAME,UAAU,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYH,YAAY,GAAGF,QAA3B,CAAnB;AACAb,IAAAA,QAAQ,CAACgB,UAAD,CAAR;AACD,GAZD,EAYG,CAACtC,UAAD,EAAaoB,YAAb,CAZH;AAaA,SAAOC,KAAP;AACD;;AAED,SAASoB,UAAT,CAAoB;AAAEC,EAAAA,OAAF;AAAW1C,EAAAA;AAAX,CAApB,EAAqD;AACnD,QAAM;AAAE2C,IAAAA,eAAF;AAAmBC,IAAAA;AAAnB,MAAqCF,OAAO,IAAI,EAAtD;AACA,QAAMG,SAAS,GAAG,oCAAlB;AACA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBxB,KAAK,CAACC,QAAN,CAAyB,EAAzB,CAA9B;AACA,QAAMwB,GAAG,GAAGzB,KAAK,CAAC0B,MAAN,CAA6B,IAA7B,CAAZ;AACA,QAAM,CAACC,UAAD,EAAaC,aAAb,IACJ5B,KAAK,CAACC,QAAN,CAAkC4B,SAAlC,CADF;AAGA,QAAMC,WAAW,GAAG9B,KAAK,CAAC+B,WAAN,CAClB,CAAC;AAAEvD,IAAAA;AAAF,GAAD,KAA2B;AACzB,QAAImD,UAAU,KAAKnD,KAAnB,EAA0B;AACxBoD,MAAAA,aAAa,CAACpD,KAAD,CAAb;AACD;AACF,GALiB,EAMlB,CAACmD,UAAD,CANkB,CAApB;AASA3B,EAAAA,KAAK,CAACE,SAAN,CAAgB,MAAM;AACpB8B,0BAAaC,EAAb,CAAgBH,WAAhB;;AACA,WAAO,MAAME,sBAAaE,GAAb,CAAiBJ,WAAjB,CAAb;AACD,GAHD,EAGG,CAACA,WAAD,CAHH;AAKA,QAAM;AAAEK,IAAAA,WAAF;AAAe3C,IAAAA,QAAf;AAAyB4C,IAAAA;AAAzB,MAAuC3D,UAAU,CAACc,KAAxD;AACA,QAAM8C,cAAc,GAAGrC,KAAK,CAAC+B,WAAN,CAAkB,MAAM;AAC7C,UAAMO,kBAAkB,GAAGH,WAAW,CAACI,MAAZ,CAAoBC,CAAD,IAAO;AACnD,aAAOC,gBAASC,UAAT,CAAoBF,CAAC,CAACG,IAAtB,CAAP;AACD,KAF0B,CAA3B;AAGA,UAAMC,gBAAgB,GACpBR,SAAS,EAAES,UAAX,IACCT,SAAS,IACR5C,QAAQ,CAACsD,cAAT,CAAwBV,SAAS,CAACnD,MAAV,CAAiBJ,GAAzC,EAA8CJ,UAA9C,CADD,IAECA,UAAU,CAACc,KAAX,CAAiBwD,SAJrB;AAKA,QAAIC,KAAJ;;AACA,QAAIJ,gBAAgB,IAAI,CAACxB,eAAzB,EAA0C;AACxC4B,MAAAA,KAAK,GAAGZ,SAAR;AACD,KAFD,MAEO,IAAIT,UAAU,IAAIS,SAAS,CAACa,WAA5B,EAAyC;AAC9CD,MAAAA,KAAK,GAAGzE,qBAAqB,CAACoD,UAAD,EAAalD,UAAb,CAA7B;AACD;;AACD,UAAMyE,QAAQ,GAAG,4CAAmB;AAClCzE,MAAAA,UADkC;AAElC0D,MAAAA,WAAW,EAAEG,kBAFqB;AAGlCF,MAAAA,SAAS,EAAEY,KAHuB;AAIlC1B,MAAAA,SAAS,EAAEA,SAAS,IAAIO,SAJU;AAKlCsB,MAAAA,WAAW,EAAE;AALqB,KAAnB,CAAjB;AAOA,UAAM;AAAEC,MAAAA,GAAG,EAAEC,MAAM,GAAG;AAAhB,QAAsB5B,GAAG,CAAC6B,OAAJ,EAAazC,qBAAb,MAAwC,EAApE,CAtB6C,CAuB7C;;AACA,UAAM0C,YAAY,GAAGnD,sBAASC,iBAAT,CAA2Bb,QAAQ,CAACX,GAApC,CAArB;;AACA,QAAI,CAAC0E,YAAL,EAAmB;AACjB;AACD;;AACD,UAAM;AAAEH,MAAAA,GAAG,EAAEI;AAAP,QAAkBD,YAAY,CAAC1C,qBAAb,EAAxB;AAEAqC,IAAAA,QAAQ,CAACO,OAAT,CAAkBC,IAAD,IAAU;AACzB;AACA,UACEA,IAAI,IACJ,CAACd,gBADD,IAEAc,IAAI,CAACtB,SAFL,IAGAsB,IAAI,CAACvB,WAAL,CAAiBwB,MAAjB,GAA0B,CAJ5B,EAKE;AACAD,QAAAA,IAAI,CAACtB,SAAL,GAAiBP,SAAjB;AACD;AACF,KAVD;AAWA,UAAM+B,UAAU,GAAGV,QAAQ,CAACW,MAAT,CAA0B,CAACC,KAAD,EAAQJ,IAAR,KAAiB;AAC5D,YAAMK,UAAU,GAAGL,IAAI,CAACvB,WAAL,CAAiBwB,MAAjB,GAA0B,CAA7C;AACA,YAAMK,UAAU,GAAGN,IAAI,CAACvB,WAAL,CAAiB,CAAjB,CAAnB;AACA,YAAMiB,GAAG,GAAGM,IAAI,CAACN,GAAL,GAAWI,MAAX,GAAoBH,MAApB,GAA6BY,yBAAc,CAAvD;AACA,YAAMC,KAAK,GAAGC,OAAO,CAACT,IAAI,CAACtB,SAAN,CAArB;AACA,YAAMjD,QAAQ,GACZ+E,KAAK,IAAIlB,KAAT,GACI;AAAEA,QAAAA,KAAF;AAASoB,QAAAA,MAAM,EAAED,OAAO,CAACvB,gBAAD;AAAxB,OADJ,GAEIf,SAHN;AAIA,UAAIwC,KAAK,GAAG,CAAZ;AACA,UAAIC,SAAS,GAAG,EAAhB;;AACA,UAAIN,UAAJ,EAAgB;AACd,cAAMrB,IAAI,GAAGqB,UAAU,CAACrB,IAAxB;AACA,SAAC;AAAE2B,UAAAA,SAAF;AAAaD,UAAAA;AAAb,YAAuB1B,IAAI,CAAC4B,IAA7B;AACD;;AACDT,MAAAA,KAAK,CAACU,IAAN,CAAW;AAAEpB,QAAAA,GAAF;AAAOW,QAAAA,UAAP;AAAmBM,QAAAA,KAAnB;AAA0BlF,QAAAA,QAA1B;AAAoCmF,QAAAA;AAApC,OAAX;AACA,aAAOR,KAAP;AACD,KAjBkB,EAiBhB,EAjBgB,CAAnB;AAkBAtC,IAAAA,UAAU,CAACoC,UAAD,CAAV;AACD,GA5DsB,EA4DpB,CACDzB,WADC,EAEDC,SAFC,EAGD5C,QAHC,EAIDf,UAJC,EAKD2C,eALC,EAMDO,UANC,EAODL,SAPC,CA5DoB,CAAvB;AAsEA,QAAM,CAACzB,YAAD,EAAe4E,gBAAf,IAAmCzE,KAAK,CAAC0E,UAAN,CACtCC,CAAD,IAAeA,CAAC,GAAG,CADoB,EAEvC,CAFuC,CAAzC;AAIA,QAAMC,mBAAmB,GAAG5E,KAAK,CAAC+B,WAAN,CAAmB8C,cAAD,IAA6B;AACzE,QAAIA,cAAJ,EAAoB;AAClBJ,MAAAA,gBAAgB;AACjB;AACF,GAJ2B,EAIzB,EAJyB,CAA5B;AAMA,8BAAWhD,GAAX,EAAgBY,cAAhB;AACA,8BAAWZ,GAAX,EAAgBmD,mBAAhB;AACA5E,EAAAA,KAAK,CAACE,SAAN,CAAgB,MAAM;AACpB,UAAM4E,aAAa,GAAG,sBAASzC,cAAT,EAAyB/D,oBAAzB,CAAtB;AACAwG,IAAAA,aAAa;AACb,WAAO,MAAM;AACXA,MAAAA,aAAa,CAACC,MAAd;AACD,KAFD;AAGD,GAND,EAMG,CAAC1C,cAAD,CANH;AAQA,QAAM2C,aAAa,GAAGhF,KAAK,CAAC+B,WAAN,CACnBkD,OAAD,IAAa;AACX,QAAItD,UAAJ,EAAgB;AACduD,+BAAgBC,OAAhB,CAAwB;AACtB3G,QAAAA,KAAK,EAAEmD,UADe;AAEtBsD,QAAAA;AAFsB,OAAxB;AAID;AACF,GARmB,EASpB,CAACtD,UAAD,CAToB,CAAtB;AAYA,QAAMZ,UAAU,GAAGnB,aAAa,CAACnB,UAAD,EAAaoB,YAAb,CAAhC;AACA,QAAMuF,IAAI,GAAG,2BAAb;AACA,QAAMC,YAAiC,GAAGrF,KAAK,CAACsF,OAAN,CACxC,OAAO;AACL3E,IAAAA,KAAK,EAAG,GAAE,CAACI,UAAU,GAAGkD,sBAAb,GAA2B9F,YAA5B,IAA4CiH,IAAK;AADtD,GAAP,CADwC,EAIxC,CAACrE,UAAD,EAAaqE,IAAb,CAJwC,CAA1C;AAOA,sBACE,eAAC,cAAD;AAAgB,mCAAhB;AAAwC,IAAA,GAAG,EAAE3D,GAA7C;AAAkD,IAAA,KAAK,EAAE4D;AAAzD,KACG9D,OAAO,CAACgE,GAAR,CAAaC,MAAD,IAAY;AACvB,UAAM;AAAErG,MAAAA,QAAF;AAAYmF,MAAAA,SAAZ;AAAuBP,MAAAA,UAAvB;AAAmCM,MAAAA,KAAnC;AAA0CjB,MAAAA;AAA1C,QAAkDoC,MAAxD;;AACA,QAAIrG,QAAQ,IAAI,CAACf,yBAAYC,SAA7B,EAAwC;AACtC,0BACE,eAAC,6BAAD;AACE,QAAA,GAAG,EAAEiG,SADP;AAEE,QAAA,UAAU,EAAE7F,UAFd;AAGE,QAAA,KAAK,EAAEU,QAAQ,CAAC6D,KAHlB;AAIE,QAAA,OAAO,EAAE7D,QAAQ,CAACiF,MAAT,GAAkBvC,SAAlB,GAA8BmD,aAJzC;AAKE,QAAA,GAAG,EAAE5B,GAAG,GAAGgC,IALb;AAME,QAAA,IAAI,EAAEjE,OAAO,EAAEsE,MAAT,EAAiBC;AANzB,QADF;AAUD;;AAED,QAAI,CAACvG,QAAL,EAAe;AACb,0BACE,eAAC,0BAAD;AACE,QAAA,GAAG,EAAEmF,SADP;AAEE,QAAA,UAAU,EAAE7F,UAFd;AAGE,QAAA,UAAU,EAAEsF,UAHd;AAIE,QAAA,KAAK,EAAEM,KAJT;AAKE,QAAA,SAAS,EAAEC,SALb;AAME,QAAA,UAAU,EAAEnD,OAAO,EAAEwE,UANvB;AAOE,QAAA,IAAI,EAAExE,OAAO,EAAEsE,MAAT,EAAiBG,UAPzB;AAQE,QAAA,GAAG,EAAE5E,IAAI,CAAC6E,KAAL,CAAWzC,GAAG,GAAGgC,IAAjB,CARP;AASE,QAAA,aAAa,EAAE/D;AATjB,QADF;AAaD;;AACD,WAAO,IAAP;AACD,GA/BA,CADH,CADF;AAoCD;;eAEcH,U","sourcesContent":["import * as React from 'react';\nimport styled from 'styled-components';\nimport { debounce } from 'lodash-es';\nimport {\n  Controller,\n  useZoomContainer,\n  useZoom,\n  TextPoint,\n  Selection,\n  Block,\n  domUtils,\n  constants,\n  environment,\n} from '@ali/4ever-cangjie';\n\nimport { ViewMark } from '../models/marks';\nimport { findCommentPostion } from '../utils/findCommentPostion';\nimport { CommentPluginConfigs } from '../types';\nimport { CommentAddButton, CommentBubble } from './floatButton';\nimport { useDocSize } from '../hooks/useDocSize';\nimport hoverCapture, { CaptureMsg } from '../utils/hoverCapture';\nimport blockHoverEvent from '../utils/blockHoverEvent';\nimport { BUTTON_SIZE } from '../utils/constants';\n\nconst BubblesWrapper = styled.div`\n  position: absolute;\n  top: 0;\n`;\n\nconst SPACE_TO_DOC = environment.IS_MOBILE ? -2 : 2;\nconst EFFECT_DEBOUNCE_TIME = 300;\n\ninterface IProps {\n  configs?: CommentPluginConfigs;\n  controller: Controller;\n}\n\ninterface Bubble {\n  top: number;\n  count: number;\n  contentId: string;\n  isMultiple: boolean;\n  newRange?: {\n    // 是否是 hover 产生的\n    isHard: boolean;\n    range: Selection;\n  };\n}\n\nfunction getSelectionFromBlock(block: Block, controller: Controller) {\n  const fakePoint = TextPoint.create({ key: '0', offset: 0 });\n  const emptySelection = Selection.create({\n    anchor: fakePoint,\n    focus: fakePoint,\n  });\n  const newRange = emptySelection.moveToRangeOfNode(block, controller).flip();\n  return Selection.create(\n    newRange.convertToTextPoints(controller.value.document),\n  ).set('data', { isFromTable: block.type === 'table' });\n}\n\n/**\n * cangjie-content 和 document 的 rect 不同步。\n *\n * 由于计算是基于 document、渲染是在 content 里面，这里设置一下差值。\n */\nfunction useRightSpace(controller: Controller, rightSpaceId: number) {\n  const [space, setSapce] = React.useState(0);\n  React.useEffect(() => {\n    const { document } = controller.value;\n    // eslint-disable-next-line react/no-find-dom-node\n    const docNode = domUtils.findDOMNodeSafely(document.key);\n    const contentNode = docNode?.closest(`[${constants.Selector.content}]`);\n    if (!docNode || !contentNode) {\n      return;\n    }\n    const { right: docRight } = docNode.getBoundingClientRect();\n    const { right: contentRight } = contentNode.getBoundingClientRect();\n    const rightSpace = Math.max(0, contentRight - docRight);\n    setSapce(rightSpace);\n  }, [controller, rightSpaceId]);\n  return space;\n}\n\nfunction BubblesNew({ configs, controller }: IProps) {\n  const { disableRangeAdd, onBubbleClick } = configs || {};\n  const container = useZoomContainer();\n  const [bubbles, setBubbles] = React.useState<Bubble[]>([]);\n  const ref = React.useRef<HTMLDivElement>(null);\n  const [hoverBlock, setHoverBlock] =\n    React.useState<Block | undefined>(undefined);\n\n  const handleHover = React.useCallback(\n    ({ block }: CaptureMsg) => {\n      if (hoverBlock !== block) {\n        setHoverBlock(block);\n      }\n    },\n    [hoverBlock],\n  );\n\n  React.useEffect(() => {\n    hoverCapture.on(handleHover);\n    return () => hoverCapture.off(handleHover);\n  }, [handleHover]);\n\n  const { decorations, document, selection } = controller.value;\n  const updatePosition = React.useCallback(() => {\n    const commentDecorations = decorations.filter((d) => {\n      return ViewMark.isViewMark(d.mark);\n    });\n    const hasHardSelection =\n      selection?.isExpanded ||\n      (selection &&\n        document.getClosestVoid(selection.anchor.key, controller) &&\n        controller.value.isFocused);\n    let range: Selection | undefined;\n    if (hasHardSelection && !disableRangeAdd) {\n      range = selection;\n    } else if (hoverBlock && selection.isCollapsed) {\n      range = getSelectionFromBlock(hoverBlock, controller);\n    }\n    const rowItems = findCommentPostion({\n      controller,\n      decorations: commentDecorations,\n      selection: range,\n      container: container || undefined,\n      isFromPopup: false,\n    });\n    const { top: refTop = 0 } = ref.current?.getBoundingClientRect() || {};\n    // eslint-disable-next-line react/no-find-dom-node\n    const documentNode = domUtils.findDOMNodeSafely(document.key);\n    if (!documentNode) {\n      return;\n    }\n    const { top: docTop } = documentNode.getBoundingClientRect();\n\n    rowItems.forEach((item) => {\n      // 如果存在 hover 选区、并且还有其他的气泡，就把选区去除掉\n      if (\n        item &&\n        !hasHardSelection &&\n        item.selection &&\n        item.decorations.length > 0\n      ) {\n        item.selection = undefined;\n      }\n    });\n    const newBubbles = rowItems.reduce<Bubble[]>((array, item) => {\n      const isMultiple = item.decorations.length > 1;\n      const decoration = item.decorations[0];\n      const top = item.top + docTop - refTop + BUTTON_SIZE / 2;\n      const isAdd = Boolean(item.selection);\n      const newRange =\n        isAdd && range\n          ? { range, isHard: Boolean(hasHardSelection) }\n          : undefined;\n      let count = 1;\n      let contentId = '';\n      if (decoration) {\n        const mark = decoration.mark as ViewMark;\n        ({ contentId, count } = mark.data);\n      }\n      array.push({ top, isMultiple, count, newRange, contentId });\n      return array;\n    }, []);\n    setBubbles(newBubbles);\n  }, [\n    decorations,\n    selection,\n    document,\n    controller,\n    disableRangeAdd,\n    hoverBlock,\n    container,\n  ]);\n\n  const [rightSpaceId, updateRightSpace] = React.useReducer(\n    (s: number) => s + 1,\n    0,\n  );\n  const tryUpdateRightSpace = React.useCallback((isWidthChanged: boolean) => {\n    if (isWidthChanged) {\n      updateRightSpace();\n    }\n  }, []);\n\n  useDocSize(ref, updatePosition);\n  useDocSize(ref, tryUpdateRightSpace);\n  React.useEffect(() => {\n    const debouncedFunc = debounce(updatePosition, EFFECT_DEBOUNCE_TIME);\n    debouncedFunc();\n    return () => {\n      debouncedFunc.cancel();\n    };\n  }, [updatePosition]);\n\n  const handleHovered = React.useCallback(\n    (isHover) => {\n      if (hoverBlock) {\n        blockHoverEvent.trigger({\n          block: hoverBlock,\n          isHover,\n        });\n      }\n    },\n    [hoverBlock],\n  );\n\n  const rightSpace = useRightSpace(controller, rightSpaceId);\n  const zoom = useZoom();\n  const wrapperStyle: React.CSSProperties = React.useMemo(\n    () => ({\n      right: `${(rightSpace - BUTTON_SIZE - SPACE_TO_DOC) / zoom}px`,\n    }),\n    [rightSpace, zoom],\n  );\n\n  return (\n    <BubblesWrapper data-comment-bubblesnew ref={ref} style={wrapperStyle}>\n      {bubbles.map((bubble) => {\n        const { newRange, contentId, isMultiple, count, top } = bubble;\n        if (newRange && !environment.IS_MOBILE) {\n          return (\n            <CommentAddButton\n              key={contentId}\n              controller={controller}\n              range={newRange.range}\n              onHover={newRange.isHard ? undefined : handleHovered}\n              top={top / zoom}\n              tips={configs?.locale?.addComment}\n            />\n          );\n        }\n\n        if (!newRange) {\n          return (\n            <CommentBubble\n              key={contentId}\n              controller={controller}\n              isMultiple={isMultiple}\n              count={count}\n              contentId={contentId}\n              showInline={configs?.showInline}\n              tips={configs?.locale?.showComent}\n              top={Math.round(top / zoom)}\n              onBubbleClick={onBubbleClick}\n            />\n          );\n        }\n        return null;\n      })}\n    </BubblesWrapper>\n  );\n}\n\nexport default BubblesNew;\n"],"file":"BubblesNew.js"}