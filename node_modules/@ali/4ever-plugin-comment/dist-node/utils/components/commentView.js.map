{"version":3,"sources":["../../../../src/utils/components/commentView.tsx"],"names":["CommentView","block","children","isAddHover","setIsAddHover","React","useState","handleBlockHover","useCallback","blk","isHover","key","useEffect","blockHoverEvent","on","off"],"mappings":";;;;;;;;;AAAA;;AAEA;;AACA;;uBAF4B,a;;AASb,SAASA,WAAT,CAAqB;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,CAArB,EAA4D;AACzE,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BC,eAAMC,QAAN,CAAe,KAAf,CAApC;;AAEA,QAAMC,gBAAgB,GAAGF,eAAMG,WAAN,CACvB,CAAC;AAAEP,IAAAA,KAAK,EAAEQ,GAAT;AAAcC,IAAAA;AAAd,GAAD,KAA4C;AAC1C,QAAID,GAAG,CAACE,GAAJ,KAAYV,KAAK,CAACU,GAAtB,EAA2B;AACzB;AACD;;AACD,QAAID,OAAO,KAAKP,UAAhB,EAA4B;AAC1BC,MAAAA,aAAa,CAACM,OAAD,CAAb;AACD;AACF,GARsB,EASvB,CAACT,KAAD,EAAQE,UAAR,CATuB,CAAzB;;AAYAE,iBAAMO,SAAN,CAAgB,MAAM;AACpBC,6BAAgBC,EAAhB,CAAmBP,gBAAnB;;AACA,WAAO,MAAMM,yBAAgBE,GAAhB,CAAoBR,gBAApB,CAAb;AACD,GAHD,EAGG,CAACA,gBAAD,CAHH;;AAKA,sBACE,eAAC,cAAD,CAAO,QAAP,QACGJ,UAAU,iBAAI,eAAC,oBAAD;AAAa,IAAA,QAAQ,EAAEF,KAAK,CAACU;AAA7B,IADjB,EAEGT,QAFH,CADF;AAMD","sourcesContent":["import React from 'react';\nimport { Block } from '@ali/4ever-cangjie';\nimport HoverEffect from './HoverEffect';\nimport blockHoverEvent, { BlockHoverMsg } from '../utils/blockHoverEvent';\n\ninterface CommentDecsProps {\n  block: Block;\n  children: any;\n}\n\nexport default function CommentView({ block, children }: CommentDecsProps) {\n  const [isAddHover, setIsAddHover] = React.useState(false);\n\n  const handleBlockHover = React.useCallback(\n    ({ block: blk, isHover }: BlockHoverMsg) => {\n      if (blk.key !== block.key) {\n        return;\n      }\n      if (isHover !== isAddHover) {\n        setIsAddHover(isHover);\n      }\n    },\n    [block, isAddHover],\n  );\n\n  React.useEffect(() => {\n    blockHoverEvent.on(handleBlockHover);\n    return () => blockHoverEvent.off(handleBlockHover);\n  }, [handleBlockHover]);\n\n  return (\n    <React.Fragment>\n      {isAddHover && <HoverEffect blockKey={block.key} />}\n      {children}\n    </React.Fragment>\n  );\n}\n"],"file":"commentView.js"}