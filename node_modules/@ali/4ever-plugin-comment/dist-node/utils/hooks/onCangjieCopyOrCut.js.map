{"version":3,"sources":["../../../../src/utils/hooks/onCangjieCopyOrCut.ts"],"names":["MIME_TYPES","constants","createOnCangjieCopyOrCut","onCangjieCopyOrCut","event","_","next","clipboardData","encodedFragment","getData","FRAGMENT","fragment","transferUtils","decodeFragment","newFragment","setData","encodeFragment","error","logger"],"mappings":";;;;;;;;;AAAA;;AAKA;;AACA;;AAEA,MAAM;AAAEA,EAAAA;AAAF,IAAiBC,sBAAvB;;AAEe,SAASC,wBAAT,GAAoC;AACjD,SAAO,SAASC,kBAAT,CAA4BC,KAA5B,EAA0DC,CAA1D,EAA6DC,IAA7D,EAAmE;AACxE,QAAI,CAACF,KAAK,CAACG,aAAX,EAA0B;AACxB,aAAOD,IAAI,EAAX;AACD;;AAED,QAAI;AACF,YAAME,eAAe,GAAGJ,KAAK,CAACG,aAAN,CAAoBE,OAApB,CAA4BT,UAAU,CAACU,QAAvC,CAAxB;;AACA,YAAMC,QAAQ,GAAGC,2BAAcC,cAAd,CAA6BL,eAA7B,CAAjB;;AAEA,YAAMM,WAAW,GAAG,6BAAeH,QAAf,CAApB;AACAP,MAAAA,KAAK,CAACG,aAAN,CAAoBQ,OAApB,CACEf,UAAU,CAACU,QADb,EAEEE,2BAAcI,cAAd,CAA6BF,WAA7B,CAFF;AAID,KATD,CASE,OAAOG,KAAP,EAAmB;AACnBC,0BAAOD,KAAP,CAAaA,KAAb;AACD;;AACD,WAAOX,IAAI,EAAX;AACD,GAlBD;AAmBD","sourcesContent":["import {\n  transferUtils,\n  CangjieClipboardEvent,\n  constants,\n} from '@ali/4ever-cangjie';\nimport logger from '@ali/4ever-logger';\nimport filterFragment from '../utils/filterFragment';\n\nconst { MIME_TYPES } = constants;\n\nexport default function createOnCangjieCopyOrCut() {\n  return function onCangjieCopyOrCut(event: CangjieClipboardEvent, _, next) {\n    if (!event.clipboardData) {\n      return next();\n    }\n\n    try {\n      const encodedFragment = event.clipboardData.getData(MIME_TYPES.FRAGMENT);\n      const fragment = transferUtils.decodeFragment(encodedFragment);\n\n      const newFragment = filterFragment(fragment);\n      event.clipboardData.setData(\n        MIME_TYPES.FRAGMENT,\n        transferUtils.encodeFragment(newFragment),\n      );\n    } catch (error: any) {\n      logger.error(error);\n    }\n    return next();\n  };\n}\n"],"file":"onCangjieCopyOrCut.js"}