{"version":3,"sources":["../../../../src/utils/hooks/onChange.ts"],"names":["configs","onChange","controller","next","isDisabled","decorations","value","setDecorations"],"mappings":";;;;;;;;;AAAA;;AAGA;;eAEgBA,OAAD,IAA+C;AAC5D,SAAO,SAASC,QAAT,CAAkBC,UAAlB,EAA0CC,IAA1C,EAAgD;AACrD,QAAIH,OAAO,EAAEI,UAAT,IAAuBJ,OAAO,CAACI,UAAR,EAA3B,EAAiD;AAC/C,aAAOD,IAAI,EAAX;AACD;;AACD,UAAME,WAAW,GAAG,4CAAmBH,UAAnB,CAApB;;AACA,QAAI,CAAC,4BAAMG,WAAN,EAAmBH,UAAU,CAACI,KAAX,CAAiBD,WAApC,CAAL,EAAuD;AACrDH,MAAAA,UAAU,CAACK,cAAX,CAA0BF,WAA1B;AACD;;AACD,WAAOF,IAAI,EAAX;AACD,GATD;AAUD,C","sourcesContent":["import equal from 'fast-deep-equal';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { CommentPluginConfigs } from '../types';\nimport { marksToDecorations } from '../utils/marksToDecorations';\n\nexport default (configs: CommentPluginConfigs | undefined) => {\n  return function onChange(controller: Controller, next) {\n    if (configs?.isDisabled && configs.isDisabled()) {\n      return next();\n    }\n    const decorations = marksToDecorations(controller);\n    if (!equal(decorations, controller.value.decorations)) {\n      controller.setDecorations(decorations);\n    }\n    return next();\n  };\n};\n"],"file":"onChange.js"}