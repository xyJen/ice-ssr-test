{"version":3,"sources":["../../../../src/utils/hooks/contextMenu.ts"],"names":["configs","contextMenu","controller","next","isDisabled","title","locale","comment","item","name","action","type","ACTION_COMMENT_CLICK","key","icon","options","group","mobile","hotKey","readOnly","disable","role","CommentRole"],"mappings":";;;;;;;;;AACA;;AACA;;AAEA;;eAEgBA,OAAD,IAA+C;AAC5D,SAAO,SAASC,WAAT,CAAqBC,UAArB,EAA6CC,IAA7C,EAAmD;AACxD,QAAI,CAAC,yBAAWD,UAAX,CAAL,EAA6B;AAC3B,aAAOC,IAAI,EAAX;AACD;;AACD,UAAMC,UAAU,GAAGJ,OAAO,EAAEI,UAAT,IAAuBJ,OAAO,CAACI,UAAR,EAA1C;AACA,UAAMC,KAAK,GAAGL,OAAO,EAAEM,MAAT,EAAiBC,OAAjB,IAA4B,SAA1C;AACA,UAAMC,IAAqB,GAAG;AAC5BC,MAAAA,IAAI,EAAEJ,KADsB;AAE5BK,MAAAA,MAAM,EAAE;AACNC,QAAAA,IAAI,EAAEC;AADA,OAFoB;AAK5BC,MAAAA,GAAG,EAAE,SALuB;AAM5BC,MAAAA,IAAI,EAAE,4FANsB;AAO5BC,MAAAA,OAAO,EAAE;AACPC,QAAAA,KAAK,EAAE,GADA;AAEPC,QAAAA,MAAM,EAAE,IAFD;AAGPC,QAAAA,MAAM,EAAEhB,UAAU,CAACiB,QAAX,GAAsB,EAAtB,GAA2B,aAH5B;AAIPC,QAAAA,OAAO,EAAEhB;AAJF,OAPmB;AAa5BiB,MAAAA,IAAI,EAAEC,kBAAYf;AAbU,KAA9B;AAeA,WAAO,CAACC,IAAD,EAAO,GAAGL,IAAI,EAAd,CAAP;AACD,GAtBD;AAuBD,C","sourcesContent":["import { Controller, ContextMenuItem } from '@ali/4ever-cangjie';\nimport { CommentRole } from '../role';\nimport { ACTION_COMMENT_CLICK } from '../actions';\nimport { CommentPluginConfigs } from '../types';\nimport canComment from '../queries/canComment';\n\nexport default (configs: CommentPluginConfigs | undefined) => {\n  return function contextMenu(controller: Controller, next) {\n    if (!canComment(controller)) {\n      return next();\n    }\n    const isDisabled = configs?.isDisabled && configs.isDisabled();\n    const title = configs?.locale?.comment || 'Comment';\n    const item: ContextMenuItem = {\n      name: title,\n      action: {\n        type: ACTION_COMMENT_CLICK,\n      },\n      key: 'comment',\n      icon: 'https://gw.alicdn.com/imgextra/i2/O1CN01GtHgGq1jGfO1gqxmG_!!6000000004521-55-tps-24-24.svg',\n      options: {\n        group: 100,\n        mobile: true,\n        hotKey: controller.readOnly ? '' : 'mod+shift+m',\n        disable: isDisabled,\n      },\n      role: CommentRole.comment,\n    };\n    return [item, ...next()];\n  };\n};\n"],"file":"contextMenu.js"}