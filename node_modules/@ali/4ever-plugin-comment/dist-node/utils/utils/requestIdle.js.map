{"version":3,"sources":["../../../../src/utils/utils/requestIdle.ts"],"names":["requestIdle","fn","cancel","window","requestIdleCallback","frame","cancelIdleCallback","requestAnimationFrame","cancelAnimationFrame","timer","setTimeout","clearTimeout"],"mappings":";;;;;;;AAAe,SAASA,WAAT,CAAqBC,EAArB,EAAoC;AACjD,MAAIC,MAAJ;;AACA,MAAIC,MAAM,CAACC,mBAAX,EAAgC;AAC9B,UAAMC,KAAK,GAAGF,MAAM,CAACC,mBAAP,CAA2BH,EAA3B,CAAd;;AACAC,IAAAA,MAAM,GAAG,MAAMC,MAAM,CAACG,kBAAP,CAA0BD,KAA1B,CAAf,CAF8B,CAG9B;;AACD,GAJD,MAIO,IAAIF,MAAM,CAACI,qBAAX,EAAkC;AACvC,UAAMF,KAAK,GAAGE,qBAAqB,CAACN,EAAD,CAAnC;;AACAC,IAAAA,MAAM,GAAG,MAAMC,MAAM,CAACK,oBAAP,CAA4BH,KAA5B,CAAf;AACD,GAHM,MAGA;AACL;AACA,UAAMI,KAAK,GAAGC,UAAU,CAACT,EAAD,EAAK,CAAL,CAAxB;;AACAC,IAAAA,MAAM,GAAG,MAAMS,YAAY,CAACF,KAAD,CAA3B;AACD;;AACD,SAAO;AAAEP,IAAAA;AAAF,GAAP;AACD","sourcesContent":["export default function requestIdle(fn: () => any) {\n  let cancel: () => any;\n  if (window.requestIdleCallback) {\n    const frame = window.requestIdleCallback(fn);\n    cancel = () => window.cancelIdleCallback(frame);\n    // @ts-ignore\n  } else if (window.requestAnimationFrame) {\n    const frame = requestAnimationFrame(fn);\n    cancel = () => window.cancelAnimationFrame(frame);\n  } else {\n    // timeout by design，参考上面定义\n    const timer = setTimeout(fn, 0);\n    cancel = () => clearTimeout(timer);\n  }\n  return { cancel };\n}\n"],"file":"requestIdle.js"}