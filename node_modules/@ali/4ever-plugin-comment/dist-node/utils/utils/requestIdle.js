"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = requestIdle;

function requestIdle(fn) {
  let cancel;

  if (window.requestIdleCallback) {
    const frame = window.requestIdleCallback(fn);

    cancel = () => window.cancelIdleCallback(frame); // @ts-ignore

  } else if (window.requestAnimationFrame) {
    const frame = requestAnimationFrame(fn);

    cancel = () => window.cancelAnimationFrame(frame);
  } else {
    // timeout by design，参考上面定义
    const timer = setTimeout(fn, 0);

    cancel = () => clearTimeout(timer);
  }

  return {
    cancel
  };
}
//# sourceMappingURL=requestIdle.js.map