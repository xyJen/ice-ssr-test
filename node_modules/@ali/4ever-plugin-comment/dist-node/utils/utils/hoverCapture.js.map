{"version":3,"sources":["../../../../src/utils/utils/hoverCapture.ts"],"names":["callbacks","prev","on","c","push","off","filter","cb","trigger","msg","block","forEach"],"mappings":";;;;;;AAQA,IAAIA,SAAqB,GAAG,EAA5B;AACA,IAAIC,IAAJ;;AAEA,SAASC,EAAT,CAAYC,CAAZ,EAAyB;AACvBH,EAAAA,SAAS,CAACI,IAAV,CAAeD,CAAf;AACD;;AAED,SAASE,GAAT,CAAaF,CAAb,EAA0B;AACxBH,EAAAA,SAAS,GAAGA,SAAS,CAACM,MAAV,CAAkBC,EAAD,IAAQA,EAAE,KAAKJ,CAAhC,CAAZ;AACD;;AAED,SAASK,OAAT,CAAiBC,GAAe,GAAG,EAAnC,EAAuC;AACrC,MAAIR,IAAI,IAAIA,IAAI,CAACS,KAAL,KAAeD,GAAG,CAACC,KAA/B,EAAsC;AACpC;AACD;;AACDT,EAAAA,IAAI,GAAGQ,GAAP;AACAT,EAAAA,SAAS,CAACW,OAAV,CAAmBR,CAAD,IAAOA,CAAC,CAACM,GAAD,CAA1B;AACD;;eAEc;AACbP,EAAAA,EADa;AAEbG,EAAAA,GAFa;AAGbG,EAAAA;AAHa,C","sourcesContent":["import { Block } from '@ali/4ever-cangjie';\n\nexport type CaptureMsg = {\n  block?: Block;\n};\n\ntype Callback = (msg: CaptureMsg) => void;\n\nlet callbacks: Callback[] = [];\nlet prev: CaptureMsg | undefined;\n\nfunction on(c: Callback) {\n  callbacks.push(c);\n}\n\nfunction off(c: Callback) {\n  callbacks = callbacks.filter((cb) => cb !== c);\n}\n\nfunction trigger(msg: CaptureMsg = {}) {\n  if (prev && prev.block === msg.block) {\n    return;\n  }\n  prev = msg;\n  callbacks.forEach((c) => c(msg));\n}\n\nexport default {\n  on,\n  off,\n  trigger,\n};\n"],"file":"hoverCapture.js"}