{"version":3,"sources":["../../../../src/utils/queries/getSiblings.ts"],"names":["getSiblings","controller","activeId","prev","next","decs","value","decorations","filter","d","ViewMark","isViewMark","mark","index","findIndex","data","contentId"],"mappings":";;;;;;;;;AACA;;AACA;;AAEe,SAASA,WAAT,CAAqBC,UAArB,EAA6C;AAC1D,QAAMC,QAAQ,GAAG,0BAAYD,UAAZ,CAAjB;AACA,MAAIE,IAAJ;AACA,MAAIC,IAAJ;;AACA,MAAI,CAACF,QAAL,EAAe;AACb,WAAO;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAAP;AACD;;AACD,QAAMC,IAAI,GAAGJ,UAAU,CAACK,KAAX,CAAiBC,WAAjB,CAA6BC,MAA7B,CAAqCC,CAAD,IAC/CC,gBAASC,UAAT,CAAoBF,CAAC,CAACG,IAAtB,CADW,CAAb;AAGA,QAAMC,KAAK,GAAGR,IAAI,CAACS,SAAL,CACXL,CAAD,IAAOC,gBAASC,UAAT,CAAoBF,CAAC,CAACG,IAAtB,KAA+BH,CAAC,CAACG,IAAF,CAAOG,IAAP,CAAYC,SAAZ,KAA0Bd,QADpD,CAAd;;AAGA,MAAIW,KAAK,GAAG,CAAZ,EAAe;AACb,WAAO;AAAEV,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAAP;AACD;;AACDD,EAAAA,IAAI,GAAGE,IAAI,CAACQ,KAAK,GAAG,CAAT,CAAJ,EAAiBD,IAAjB,CAAsBG,IAAtB,CAA2BC,SAAlC;AACAZ,EAAAA,IAAI,GAAGC,IAAI,CAACQ,KAAK,GAAG,CAAT,CAAJ,EAAiBD,IAAjB,CAAsBG,IAAtB,CAA2BC,SAAlC;AAEA,SAAO;AAAEb,IAAAA,IAAF;AAAQC,IAAAA;AAAR,GAAP;AACD","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport getActiveId from './getActiveId';\nimport { ViewMark } from '../models/marks';\n\nexport default function getSiblings(controller: Controller) {\n  const activeId = getActiveId(controller);\n  let prev: string | undefined;\n  let next: string | undefined;\n  if (!activeId) {\n    return { prev, next };\n  }\n  const decs = controller.value.decorations.filter((d) =>\n    ViewMark.isViewMark(d.mark),\n  );\n  const index = decs.findIndex(\n    (d) => ViewMark.isViewMark(d.mark) && d.mark.data.contentId === activeId,\n  );\n  if (index < 0) {\n    return { prev, next };\n  }\n  prev = decs[index - 1]?.mark.data.contentId;\n  next = decs[index + 1]?.mark.data.contentId;\n\n  return { prev, next };\n}\n"],"file":"getSiblings.js"}