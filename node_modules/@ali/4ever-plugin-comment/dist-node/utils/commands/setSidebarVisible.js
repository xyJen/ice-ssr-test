"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = setSidebarVisible;

var _everCangjie = require("@ali/4ever-cangjie");

var _actions = require("../actions");

var _queries = require("../queries");

function setSidebarVisible(controller, visible) {
  if (_everCangjie.environment.IS_MOBILE && !_everCangjie.environment.IS_IPAD) {
    return controller;
  }

  const activeId = (0, _queries.getActiveId)(controller);

  if (activeId && !visible) {
    controller.run('onAction', (0, _actions.setActiveId)(undefined));
  }

  !visible && controller.run('onAction', (0, _actions.cancelComment)());
  return controller.setData({ ...controller.value.data,
    _commentSideBarVisible: visible
  });
}
//# sourceMappingURL=setSidebarVisible.js.map