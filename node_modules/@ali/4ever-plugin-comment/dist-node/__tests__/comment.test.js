"use strict";

var _everCangjie = require("@ali/4ever-cangjie");

var _everDevTest = require("@ali/4ever-dev-test");

var _positionCache = require("../utils/commentPosition/positionCache");

var _getRowTopFromPoint = require("../utils/commentPosition/getRowTopFromPoint");

/** @jsx jsx */
var _ref = (0, _everDevTest.jsx)("value", null, (0, _everDevTest.jsx)("document", null, (0, _everDevTest.jsx)("block", {
  type: "paragraph"
}, "Hello Cangjie", (0, _everDevTest.jsx)("cursor", null))));

const getValue = () => _ref;

const DOC_WIDTH = 100;
const DOC_TOP = 100;
const container = {};
/**
 * TODO：多鱼后续补充这里的单测，需要把 cangjie、浏览器的 dom 操作抽离成参数，监测调用次数。
 */

describe('bamboo/comment', () => {
  test('comment position cache', () => {
    const controller = _everCangjie.Controller.create({
      value: getValue()
    });

    const allRows = (0, _positionCache.validateCaches)({
      controller,
      docWidth: DOC_WIDTH,
      docTop: DOC_TOP,
      container
    });
    expect(Object.keys(allRows).length).toBe(0);
    const item = (0, _getRowTopFromPoint.getRowTopFromPoint)({
      paramPoint: controller.value.selection.focus,
      allRows,
      controller,
      container,
      isFromPopup: false,
      docTop: DOC_TOP
    });
    expect(Boolean(item)).toBe(false);
  });
});
//# sourceMappingURL=comment.test.js.map