{"version":3,"sources":["../../../src/__tests__/comment.test.tsx"],"names":["getValue","DOC_WIDTH","DOC_TOP","container","describe","test","controller","Controller","create","value","allRows","docWidth","docTop","expect","Object","keys","length","toBe","item","paramPoint","selection","focus","isFromPopup","Boolean"],"mappings":";;AACA;;AACA;;AACA;;AACA;;AAJA;WAQI,qCACE,wCACE;AAAO,EAAA,IAAI,EAAC;AAAZ,oBAEE,qCAFF,CADF,CADF,C;;AAFJ,MAAMA,QAAQ,GAAG,UAAjB;;AAYA,MAAMC,SAAS,GAAG,GAAlB;AACA,MAAMC,OAAO,GAAG,GAAhB;AAEA,MAAMC,SAAS,GAAG,EAAlB;AAEA;AACA;AACA;;AACAC,QAAQ,CAAC,gBAAD,EAAmB,MAAM;AAC/BC,EAAAA,IAAI,CAAC,wBAAD,EAA2B,MAAM;AACnC,UAAMC,UAAU,GAAGC,wBAAWC,MAAX,CAAkB;AAAEC,MAAAA,KAAK,EAAET,QAAQ;AAAjB,KAAlB,CAAnB;;AACA,UAAMU,OAAO,GAAG,mCAAe;AAC7BJ,MAAAA,UAD6B;AAE7BK,MAAAA,QAAQ,EAAEV,SAFmB;AAG7BW,MAAAA,MAAM,EAAEV,OAHqB;AAI7BC,MAAAA;AAJ6B,KAAf,CAAhB;AAMAU,IAAAA,MAAM,CAACC,MAAM,CAACC,IAAP,CAAYL,OAAZ,EAAqBM,MAAtB,CAAN,CAAoCC,IAApC,CAAyC,CAAzC;AAEA,UAAMC,IAAI,GAAG,4CAAmB;AAC9BC,MAAAA,UAAU,EAAEb,UAAU,CAACG,KAAX,CAAiBW,SAAjB,CAA2BC,KADT;AAE9BX,MAAAA,OAF8B;AAG9BJ,MAAAA,UAH8B;AAI9BH,MAAAA,SAJ8B;AAK9BmB,MAAAA,WAAW,EAAE,KALiB;AAM9BV,MAAAA,MAAM,EAAEV;AANsB,KAAnB,CAAb;AAQAW,IAAAA,MAAM,CAACU,OAAO,CAACL,IAAD,CAAR,CAAN,CAAsBD,IAAtB,CAA2B,KAA3B;AACD,GAnBG,CAAJ;AAoBD,CArBO,CAAR","sourcesContent":["/** @jsx jsx */\nimport { Controller, Value } from '@ali/4ever-cangjie';\nimport { jsx } from '@ali/4ever-dev-test';\nimport { validateCaches } from '../utils/commentPosition/positionCache';\nimport { getRowTopFromPoint } from '../utils/commentPosition/getRowTopFromPoint';\n\nconst getValue = () =>\n  (\n    <value>\n      <document>\n        <block type=\"paragraph\">\n          Hello Cangjie\n          <cursor />\n        </block>\n      </document>\n    </value>\n  ) as Value;\n\nconst DOC_WIDTH = 100;\nconst DOC_TOP = 100;\n\nconst container = {} as Window;\n\n/**\n * TODO：多鱼后续补充这里的单测，需要把 cangjie、浏览器的 dom 操作抽离成参数，监测调用次数。\n */\ndescribe('bamboo/comment', () => {\n  test('comment position cache', () => {\n    const controller = Controller.create({ value: getValue() });\n    const allRows = validateCaches({\n      controller,\n      docWidth: DOC_WIDTH,\n      docTop: DOC_TOP,\n      container,\n    });\n    expect(Object.keys(allRows).length).toBe(0);\n\n    const item = getRowTopFromPoint({\n      paramPoint: controller.value.selection.focus,\n      allRows,\n      controller,\n      container,\n      isFromPopup: false,\n      docTop: DOC_TOP,\n    });\n    expect(Boolean(item)).toBe(false);\n  });\n});\n"],"file":"comment.test.js"}