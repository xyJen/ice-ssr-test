import { useRef, useEffect } from 'react';
import { elementContain } from "../utils/dom";
export default (function (handler, on, eventName) {
  if (on === void 0) {
    on = true;
  }

  var ref = useRef(null);
  var callback = useRef(function () {});

  callback.current = handler || function () {};

  useEffect(function () {
    /**
     * 点击处理
     */
    var handleClickBody = function handleClickBody(event) {
      var isOuter = !ref.current || !elementContain(ref.current, event.target);

      if (isOuter) {
        callback.current(event);
      }
    };

    if (on) {
      document.body.addEventListener(eventName || 'mousedown', handleClickBody, {
        capture: true
      });
    }

    return function () {
      if (on) {
        document.body.removeEventListener(eventName || 'mousedown', handleClickBody, {
          capture: true
        });
      }
    };
  }, [on, eventName]);
  return ref;
});