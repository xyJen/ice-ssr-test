{"version":3,"sources":["../../../src/components/RefBlockToolbarCopy.tsx"],"names":["React","RefBlockStatus","DeletelinkNormal","IconButton","ListItemIcon","ToolbarColumn","Divider","CopyFrom","CopyFromPlaceholder","CopyButton","RefBlockToolbarCopy","props","locale","from","docKey","uuid","readOnly","status","canCopy","detach","copy","getURL","canDetach","normal","handleDetachClick","useCallback","paddingLeft","whiteSpace","referFromTitle","padding","url","name"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAASC,cAAT;AACA,SAASC,gBAAT,QAAiC,cAAjC;AACA,SAASC,UAAT,QAA2B,iBAA3B;AAEA,OAAOC,YAAP;AACA,SACEC,aADF,EAEEC,OAFF,EAGEC,QAHF,EAIEC,mBAJF;AAMA,OAAOC,UAAP;;wBAsDQ,eAAC,YAAD,O;;yBAcE,eAAC,mBAAD;AAAqB,iBAAY;AAAjC,E;;yBAGJ,eAAC,OAAD,O;;yBAWY,eAAC,gBAAD,O;;AAzDlB,IAAMC,mBAAuD,GAAG,SAA1DA,mBAA0D,CAACC,KAAD,EAAW;AAAA,MAEvEC,MAFuE,GAYrED,KAZqE,CAEvEC,MAFuE;AAAA,MAGvEC,IAHuE,GAYrEF,KAZqE,CAGvEE,IAHuE;AAAA,MAIvEC,MAJuE,GAYrEH,KAZqE,CAIvEG,MAJuE;AAAA,MAKvEC,IALuE,GAYrEJ,KAZqE,CAKvEI,IALuE;AAAA,MAMvEC,QANuE,GAYrEL,KAZqE,CAMvEK,QANuE;AAAA,MAOvEC,MAPuE,GAYrEN,KAZqE,CAOvEM,MAPuE;AAAA,MAQvEC,OARuE,GAYrEP,KAZqE,CAQvEO,OARuE;AAAA,MASvEC,MATuE,GAYrER,KAZqE,CASvEQ,MATuE;AAAA,MAUvEC,IAVuE,GAYrET,KAZqE,CAUvES,IAVuE;AAAA,MAWvEC,MAXuE,GAYrEV,KAZqE,CAWvEU,MAXuE;AAazE,MAAMC,SAAS,GAAG,CAACN,QAAD,IAAaD,IAAb,IAAqBE,MAAM,KAAKhB,cAAc,CAACsB,MAAjE;AAEA,MAAMC,iBAAiB,GAAGxB,KAAK,CAACyB,WAAN,CAAkB,YAAM;AAChDN,IAAAA,MAAM,CAACL,MAAD,EAASC,IAAT,CAAN;AACD,GAFyB,EAEvB,CAACI,MAAD,EAASL,MAAT,EAAiBC,IAAjB,CAFuB,CAA1B;AAIA,sBACE,kDAEE,eAAC,aAAD;AACE,IAAA,KAAK,EAAE;AAAEW,MAAAA,WAAW,EAAE,EAAf;AAAmBC,MAAAA,UAAU,EAAE;AAA/B,KADT;AAEE,mBAAY;AAFd,KAIGf,MAAM,CAACgB,cAJV,CAFF,eAQE,eAAC,aAAD;AAAe,IAAA,gBAAgB,EAAE,CAAC,CAACf,IAAnC;AAAyC,IAAA,KAAK,EAAE;AAAEgB,MAAAA,OAAO,EAAE;AAAX;AAAhD,WAEGhB,IAAI,gBACH,eAAC,QAAD,qBACE;AACE,IAAA,SAAS,EAAC,eADZ;AAEE,mBAAY,kBAFd;AAGE,IAAA,IAAI,EAAEQ,MAAM,CAACR,IAAI,CAACiB,GAAN,EAAWhB,MAAX,CAHd;AAIE,IAAA,MAAM,EAAC,QAJT;AAKE,IAAA,GAAG,EAAC;AALN,KAOGD,IAAI,CAACkB,IAPR,CADF,CADG,QAFP,CARF,SA2BGb,OAAO,iBACN,eAAC,aAAD,qBACE,eAAC,UAAD;AAAY,IAAA,MAAM,EAAEE,IAApB;AAA0B,IAAA,KAAK,EAAER,MAAM,CAACQ;AAAxC,IADF,CA5BJ,EAgCGE,SAAS,iBACR,eAAC,aAAD,qBACE,eAAC,UAAD;AACE,IAAA,MAAM,EAAC,iBADT;AAEE,IAAA,OAAO,EAAGV,MAAD,CAA+BO,MAF1C;AAGE,IAAA,IAAI,OAHN;AAIE,IAAA,OAAO,EAAEK;AAJX,IADF,CAjCJ,CADF;AA6CD,CAhED;;AAkEA,eAAed,mBAAf","sourcesContent":["import * as React from 'react';\nimport { RefBlockStatus } from '../mo/models';\nimport { DeletelinkNormal } from '@ali/we-icon';\nimport { IconButton } from '@ali/we-toolbar';\nimport type { ReferenceItem, RefBlockLocale, BiConfig } from '../utils/types';\nimport ListItemIcon from './ListItemIcon';\nimport {\n  ToolbarColumn,\n  Divider,\n  CopyFrom,\n  CopyFromPlaceholder,\n} from './styled';\nimport CopyButton from './CopyButton';\n\ninterface RefBlockToolbarCopyProps {\n  /** 引用块原文档 */\n  from?: ReferenceItem;\n  /** 引用块国际化文案 */\n  locale: RefBlockLocale;\n  /** 引用块的 docKey */\n  docKey: string;\n  /** 引用块的 uuid */\n  uuid?: string;\n  /** 只读模式 */\n  readOnly: boolean;\n  /** 同步状态 */\n  status: RefBlockStatus;\n  /** 是否允许复制 */\n  canCopy: boolean;\n  /** 解绑引用 */\n  detach: (docKey: string, uuid: string) => Promise<void>;\n  /** 复制块引用链接 */\n  copy: () => void;\n  /** 获得文档跳转地址 */\n  getURL: (url: string, id: string) => string;\n}\n\nconst RefBlockToolbarCopy: React.FC<RefBlockToolbarCopyProps> = (props) => {\n  const {\n    locale,\n    from,\n    docKey,\n    uuid,\n    readOnly,\n    status,\n    canCopy,\n    detach,\n    copy,\n    getURL,\n  } = props;\n  const canDetach = !readOnly && uuid && status === RefBlockStatus.normal;\n\n  const handleDetachClick = React.useCallback(() => {\n    detach(docKey, uuid!);\n  }, [detach, docKey, uuid]);\n\n  return (\n    <>\n      {/* 引用源 */}\n      <ToolbarColumn\n        style={{ paddingLeft: 10, whiteSpace: 'nowrap' }}\n        data-testid=\"refblock-toolbar-copy\"\n      >\n        {locale.referFromTitle}\n      </ToolbarColumn>\n      <ToolbarColumn highlightOnHover={!!from} style={{ padding: '0px 4px' }}>\n        <ListItemIcon />\n        {from ? (\n          <CopyFrom>\n            <a\n              className=\"synclist-link\"\n              data-testid=\"refblock-link-to\"\n              href={getURL(from.url, docKey)}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              {from.name}\n            </a>\n          </CopyFrom>\n        ) : (\n          <CopyFromPlaceholder data-testid=\"refblock-copy-from-placeholder\" />\n        )}\n      </ToolbarColumn>\n      <Divider />\n      {canCopy && (\n        <ToolbarColumn>\n          <CopyButton onCopy={copy} title={locale.copy} />\n        </ToolbarColumn>\n      )}\n      {canDetach && (\n        <ToolbarColumn>\n          <IconButton\n            testid=\"refblock-detach\"\n            tooltip={(locale as BiConfig['locale']).detach}\n            icon={<DeletelinkNormal />}\n            onClick={handleDetachClick}\n          />\n        </ToolbarColumn>\n      )}\n    </>\n  );\n};\n\nexport default RefBlockToolbarCopy;\n"],"file":"RefBlockToolbarCopy.js"}