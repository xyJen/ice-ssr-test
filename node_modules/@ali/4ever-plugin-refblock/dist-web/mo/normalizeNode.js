import { Text, Commands } from "@ali/4ever-cangjie";
import { Paragraph } from '@ali/4ever-plugin-paragraph';
import RefBlock from "./models";

var normalizeNode = function normalizeNode(node, controller, next) {
  if (!RefBlock.isRefBlock(node)) {
    return next();
  }

  if (node.nodes.length === 1 && Text.isText(node.nodes[0])) {
    return function () {
      var text = Text.create('');
      controller.command(Commands.replaceNodeByKey, node.nodes[0].key, Paragraph.create({
        nodes: [text]
      })).command(Commands.moveToStartOfNode, text);
    };
  }

  return next();
};

export default normalizeNode;
//# sourceMappingURL=normalizeNode.js.map