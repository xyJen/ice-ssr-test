{"version":3,"sources":["../../../src/bi/index.ts"],"names":["moFactory","stubFalse","queries","commands","actions","isActions","createOnPaste","createOnAction","onCangjieCopyOrCut","onKeyDown","createRenderNode","commonQueries","biFactory","configs","refblockConfig","refblock","locale","disableNestedInRefBlock","disableDropTo","disableNodeInRefBlock","createDisableNodeInRefBlock","disableDrag","disableDrop","createDisableDrop","cannotMoveTo","cannotDropTo","isContainer","shouldSelectAll","onCangjiePaste","onCangjieCopy","onCangjieCut","onAction","clipboard","serializer","renderNode"],"mappings":";AACA,OAAOA,SAAP;AACA,SAASC,SAAT,QAA0B,WAA1B;AACA,OAAO,KAAKC,OAAZ;AACA,OAAO,KAAKC,QAAZ;AACA,SAASC,OAAT,EAAkBC,SAAlB;AACA,OAAOC,aAAP;AACA,OAAOC,cAAP;AACA,OAAOC,kBAAP;AACA,OAAOC,SAAP;AACA,OAAOC,gBAAP;AACA,OAAO,KAAKC,aAAZ;;AAEA,IAAMC,SAAoB,GAAG,SAAvBA,SAAuB,CAACC,OAAD,EAAa;AAAA;;AACxC,MAAMC,cAAc,GAAGD,OAAO,CAACE,QAA/B;AACA;;AACA,MAAI,CAACD,cAAL,EAAqB;AACnB,WAAOd,SAAS,CAAC,EAAD,CAAhB;AACD;;AALuC,MAOtCgB,MAPsC,GAUpCF,cAVoC,CAOtCE,MAPsC;AAAA,8BAUpCF,cAVoC,CAQtCG,uBARsC;AAAA,MAQtCA,uBARsC,sCAQZhB,SARY;AAAA,+BAUpCa,cAVoC,CAStCI,aATsC;AAAA,MAStCA,aATsC,uCAStBjB,SATsB;AAYxC,MAAMkB,qBAAqB,GAAGjB,OAAO,CAACkB,2BAAR,CAC5BH,uBAD4B,CAA9B;AAGA,sBACKjB,SAAS,CAAC,EAAD,CADd;AAEEG,IAAAA,QAAQ,EAARA,QAFF;AAGED,IAAAA,OAAO,eACFS,aADE;AAELU,MAAAA,WAAW,EAAEnB,OAAO,CAACmB,WAFhB;AAGLC,MAAAA,WAAW,EAAEpB,OAAO,CAACqB,iBAAR,CACXP,MAAM,CAACQ,YADI,EAEXR,MAAM,CAACS,YAFI,EAGXN,qBAHW,EAIXD,aAJW,CAHR;AASLC,MAAAA,qBAAqB,EAArBA,qBATK;AAULO,MAAAA,WAAW,EAAExB,OAAO,CAACwB,WAVhB;AAWLC,MAAAA,eAAe,EAAEzB,OAAO,CAACyB;AAXpB,MAHT;AAgBEvB,IAAAA,OAAO,EAAPA,OAhBF;AAiBEC,IAAAA,SAAS,EAATA,SAjBF;AAkBEuB,IAAAA,cAAc,EAAEtB,aAAa,CAACO,OAAD,CAlB/B;AAmBEgB,IAAAA,aAAa,EAAErB,kBAnBjB;AAoBEsB,IAAAA,YAAY,EAAEtB,kBApBhB;AAqBEC,IAAAA,SAAS,EAATA,SArBF;AAsBEsB,IAAAA,QAAQ,EAAExB,cAAc,CAACO,cAAD,wBAAiBD,OAAO,CAACmB,SAAzB,qBAAiB,mBAAmBC,UAApC,CAtB1B;AAuBEC,IAAAA,UAAU,EAAExB,gBAAgB,CAACI,cAAD;AAvB9B;AAyBD,CAxCD;;AA0CA,eAAeF,SAAf","sourcesContent":["import { BiFactory } from '@ali/4ever-cangjie';\nimport moFactory from '../mo/index';\nimport { stubFalse } from 'lodash-es';\nimport * as queries from './queries';\nimport * as commands from './commands';\nimport { actions, isActions } from './actions';\nimport createOnPaste from './handlers/createOnPaste';\nimport createOnAction from './handlers/createOnAction';\nimport onCangjieCopyOrCut from './handlers/onCangjieCopyOrCut';\nimport onKeyDown from './handlers/onKeyDown';\nimport createRenderNode from './handlers/createRenderNode';\nimport * as commonQueries from '../common/queries';\n\nconst biFactory: BiFactory = (configs) => {\n  const refblockConfig = configs.refblock;\n  /* istanbul ignore next */\n  if (!refblockConfig) {\n    return moFactory({});\n  }\n  const {\n    locale,\n    disableNestedInRefBlock = stubFalse,\n    disableDropTo = stubFalse,\n  } = refblockConfig;\n\n  const disableNodeInRefBlock = queries.createDisableNodeInRefBlock(\n    disableNestedInRefBlock,\n  );\n  return {\n    ...moFactory({}),\n    commands,\n    queries: {\n      ...commonQueries,\n      disableDrag: queries.disableDrag,\n      disableDrop: queries.createDisableDrop(\n        locale.cannotMoveTo,\n        locale.cannotDropTo,\n        disableNodeInRefBlock,\n        disableDropTo,\n      ),\n      disableNodeInRefBlock,\n      isContainer: queries.isContainer,\n      shouldSelectAll: queries.shouldSelectAll,\n    },\n    actions,\n    isActions,\n    onCangjiePaste: createOnPaste(configs),\n    onCangjieCopy: onCangjieCopyOrCut,\n    onCangjieCut: onCangjieCopyOrCut,\n    onKeyDown,\n    onAction: createOnAction(refblockConfig, configs.clipboard?.serializer),\n    renderNode: createRenderNode(refblockConfig),\n  };\n};\n\nexport default biFactory;\n"],"file":"index.js"}