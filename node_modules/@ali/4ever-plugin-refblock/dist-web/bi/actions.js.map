{"version":3,"sources":["../../../src/bi/actions.ts"],"names":["actions","commonActions","isActions","commonIsActions","UPGRADE_TO_REFBLOCK","Symbol","DOWNGRADE_TO_BLOCKS_BY_DOCKEY","DOWNGRADE_TO_BLOCKS_BY_KEY","INSERT_REFBLOCK","UPDATE_REFBLOCK_DATA","COPY_AS_REFBLOCK","COPY_REFBLOCK","upgradeToRefBlock","docKey","uuid","blocks","type","payload","downgradeToBlocksByDocKey","downgradeToBlocksByKey","key","insertRefBlock","data","updateRefBlockData","node","isUpgradeToRefBlockAction","action","isDowngradeToBlocksByDocKeyAction","isDowngradeToBlocksByKeyAction","isInsertRefBlockAction","isUpdateRefBlockDataAction","copyAsRefBlock","nodes","copyRefBlock","refblock","isCopyRefBlock","isCopyAsRefBlock"],"mappings":"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","sourcesContent":["import {\n  Action,\n  Block,\n  ConvertToPluginActionCreators,\n  ConvertToPluginActionPredicates,\n} from '@ali/4ever-cangjie';\nimport RefBlock, { RefBlockData } from '../mo/models';\nimport {\n  actions as commonActions,\n  isActions as commonIsActions,\n} from '../common/actions';\n\nexport const UPGRADE_TO_REFBLOCK = Symbol('upgrade_to_refblock');\nexport const DOWNGRADE_TO_BLOCKS_BY_DOCKEY = Symbol(\n  'downgrade_to_blocks_by_dockey',\n);\nexport const DOWNGRADE_TO_BLOCKS_BY_KEY = Symbol('downgrade_to_blocks_by_key');\nexport const INSERT_REFBLOCK = Symbol('insert_refblock');\nexport const UPDATE_REFBLOCK_DATA = Symbol('update_refblock_data');\nexport const COPY_AS_REFBLOCK = Symbol('copy_as_refblock');\nexport const COPY_REFBLOCK = Symbol('copy_refblock');\n\nexport interface UpgradeToRefBlockPayload {\n  docKey: string;\n  uuid: string;\n  blocks: Block[];\n}\nexport interface DowngradeToBlocksByKeyPayload {\n  key: string;\n}\n\nexport interface DowngradeToBlocksByDocKeyPayload {\n  docKey: string;\n}\n\nexport interface InsertRefBlockPayload {\n  data: RefBlockData;\n}\n\nexport interface UpdateRefBlockDataPayload {\n  data: Partial<RefBlockData>;\n  node: RefBlock;\n}\n\nexport interface CopyAsRefBlockPayload {\n  nodes: Block[];\n}\n\nexport interface CopyRefBlockPayload {\n  refblock: RefBlock;\n}\n\nexport interface UpgradeToRefBlockAction {\n  type: typeof UPGRADE_TO_REFBLOCK;\n  payload: UpgradeToRefBlockPayload;\n}\n\nexport interface DowngradeToBlocksByDocKeyAction {\n  type: typeof DOWNGRADE_TO_BLOCKS_BY_DOCKEY;\n  payload: DowngradeToBlocksByDocKeyPayload;\n}\n\nexport interface DowngradeToBlocksByKeyAction {\n  type: typeof DOWNGRADE_TO_BLOCKS_BY_DOCKEY;\n  payload: DowngradeToBlocksByKeyPayload;\n}\n\nexport interface InsertRefBlockAction {\n  type: typeof INSERT_REFBLOCK;\n  payload: InsertRefBlockPayload;\n}\n\nexport interface UpdateRefBlockDataAction {\n  type: typeof UPDATE_REFBLOCK_DATA;\n  payload: UpdateRefBlockDataPayload;\n}\n\nexport interface CopyAsRefBlockAction {\n  type: typeof COPY_AS_REFBLOCK;\n  payload: CopyAsRefBlockPayload;\n}\n\nexport interface CopyRefBlockAction {\n  type: typeof COPY_REFBLOCK;\n  payload: CopyRefBlockPayload;\n}\n\n/**\n * 升级选中的 blocks 为引用块\n * @param docKey\n * @param uuid\n * @param blocks\n * @returns\n */\nexport function upgradeToRefBlock(\n  docKey: string,\n  uuid: string,\n  blocks: Block[],\n) {\n  return {\n    type: UPGRADE_TO_REFBLOCK,\n    payload: {\n      docKey,\n      uuid,\n      blocks,\n    } as UpgradeToRefBlockPayload,\n  };\n}\n\n/**\n * 根据 docKey 将引用块降级为普通块\n * @param docKey\n * @returns\n */\nexport function downgradeToBlocksByDocKey(docKey: string) {\n  return {\n    type: DOWNGRADE_TO_BLOCKS_BY_DOCKEY,\n    payload: { docKey } as DowngradeToBlocksByDocKeyPayload,\n  };\n}\n\n/**\n * 根据 key 将引用块降级为普通块\n * @param key\n * @returns\n */\nexport function downgradeToBlocksByKey(key: string) {\n  return {\n    type: DOWNGRADE_TO_BLOCKS_BY_KEY,\n    payload: { key } as DowngradeToBlocksByKeyPayload,\n  };\n}\n\n/**\n * 插入 RefBlock\n * @param data\n * @returns\n */\nexport function insertRefBlock(data: RefBlockData) {\n  return {\n    type: INSERT_REFBLOCK,\n    payload: {\n      data,\n    } as InsertRefBlockPayload,\n  };\n}\n\n/**\n * 更新 RefBlock 数据\n * @param node\n * @param data\n * @returns\n */\nfunction updateRefBlockData(node: RefBlock, data: Partial<RefBlockData>) {\n  return {\n    type: UPDATE_REFBLOCK_DATA,\n    payload: {\n      data,\n      node,\n    } as UpdateRefBlockDataPayload,\n  };\n}\n\nfunction isUpgradeToRefBlockAction(\n  action: Action,\n): action is UpgradeToRefBlockAction {\n  return action.type === UPGRADE_TO_REFBLOCK;\n}\n\nfunction isDowngradeToBlocksByDocKeyAction(\n  action: Action,\n): action is DowngradeToBlocksByDocKeyAction {\n  return action.type === DOWNGRADE_TO_BLOCKS_BY_DOCKEY;\n}\n\nfunction isDowngradeToBlocksByKeyAction(\n  action: Action,\n): action is DowngradeToBlocksByKeyAction {\n  return action.type === DOWNGRADE_TO_BLOCKS_BY_KEY;\n}\n\nfunction isInsertRefBlockAction(\n  action: Action,\n): action is InsertRefBlockAction {\n  return action.type === INSERT_REFBLOCK;\n}\n\nfunction isUpdateRefBlockDataAction(\n  action: Action,\n): action is UpdateRefBlockDataAction {\n  return action.type === UPDATE_REFBLOCK_DATA;\n}\n\n/**\n * 复制为引用块\n * @param node\n * @returns\n */\nfunction copyAsRefBlock(nodes: Block[]): CopyAsRefBlockAction {\n  return {\n    type: COPY_AS_REFBLOCK,\n    payload: {\n      nodes,\n    } as CopyAsRefBlockPayload,\n  };\n}\n\n/**\n * 复制引用块\n * @param block\n * @returns\n */\nfunction copyRefBlock(refblock: RefBlock): CopyRefBlockAction {\n  return {\n    type: COPY_REFBLOCK,\n    payload: {\n      refblock,\n    } as CopyRefBlockPayload,\n  };\n}\n\nfunction isCopyRefBlock(action: Action): action is CopyRefBlockAction {\n  return action.type === COPY_REFBLOCK;\n}\n\nfunction isCopyAsRefBlock(action: Action): action is CopyAsRefBlockAction {\n  return action.type === COPY_AS_REFBLOCK;\n}\n\nexport const actions = {\n  ...commonActions,\n  copyRefBlock,\n  copyAsRefBlock,\n  upgradeToRefBlock,\n  downgradeToBlocksByDocKey,\n  downgradeToBlocksByKey,\n  insertRefBlock,\n  updateRefBlockData,\n};\n\nexport const isActions = {\n  ...commonIsActions,\n  isUpgradeToRefBlockAction,\n  isDowngradeToBlocksByDocKeyAction,\n  isDowngradeToBlocksByKeyAction,\n  isInsertRefBlockAction,\n  isUpdateRefBlockDataAction,\n  isCopyAsRefBlock,\n  isCopyRefBlock,\n};\n\ndeclare module '@ali/4ever-cangjie' {\n  /** type combination for commands、queries、actions */\n  interface PluginActionCreators\n    extends ConvertToPluginActionCreators<typeof actions> {}\n  interface PluginActionPredicates\n    extends ConvertToPluginActionPredicates<typeof isActions> {}\n}\n"],"file":"actions.js"}