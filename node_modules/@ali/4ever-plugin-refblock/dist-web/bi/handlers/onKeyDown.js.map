{"version":3,"sources":["../../../../src/bi/handlers/onKeyDown.ts"],"names":["Commands","hotkeys","getClosestRefBlockInSelection","onKeyDown","event","controller","next","isSelectAll","refblock","value","nodes","length","query","preventDefault","firstChild","lastChild","command","moveAnchorToStartOfNode","moveFocusToEndOfNode"],"mappings":"AAAA,SAAqBA,QAArB,EAA+BC,OAA/B,QAA8C,oBAA9C;AACA,SAASC,6BAAT;AAEA,eAAe,SAASC,SAAT,CACbC,KADa,EAEbC,UAFa,EAGbC,IAHa,EAIb;AACA;AACA,MAAIL,OAAO,CAACM,WAAR,CAAoBH,KAApB,CAAJ,EAAgC;AAC9B,QAAMI,QAAQ,GAAGN,6BAA6B,CAACG,UAAU,CAACI,KAAZ,CAA9C;;AACA,QACE,CAACD,QAAD,IACA,CAACA,QAAQ,CAACE,KAAT,CAAeC,MADhB,IAEAN,UAAU,CAACO,KAAX,CAAiB,iBAAjB,EAAoCJ,QAApC,CAHF,EAIE;AACA,aAAOF,IAAI,EAAX;AACD;;AACDF,IAAAA,KAAK,CAACS,cAAN;AACA,QAAMC,UAAU,GAAGN,QAAQ,CAACE,KAAT,CAAe,CAAf,CAAnB;AACA,QAAMK,SAAS,GAAGP,QAAQ,CAACE,KAAT,CAAeF,QAAQ,CAACE,KAAT,CAAeC,MAAf,GAAwB,CAAvC,CAAlB;AACA,WAAON,UAAU,CACdW,OADI,CACIhB,QAAQ,CAACiB,uBADb,EACsCH,UADtC,EAEJE,OAFI,CAEIhB,QAAQ,CAACkB,oBAFb,EAEmCH,SAFnC,CAAP;AAGD;;AACD,SAAOT,IAAI,EAAX;AACD","sourcesContent":["import { Controller, Commands, hotkeys } from '@ali/4ever-cangjie';\nimport { getClosestRefBlockInSelection } from '../../utils/logic';\n\nexport default function onKeyDown(\n  event: React.KeyboardEvent,\n  controller: Controller,\n  next: () => void,\n) {\n  // 全选选中引用块\n  if (hotkeys.isSelectAll(event)) {\n    const refblock = getClosestRefBlockInSelection(controller.value);\n    if (\n      !refblock ||\n      !refblock.nodes.length ||\n      controller.query('shouldSelectAll', refblock)\n    ) {\n      return next();\n    }\n    event.preventDefault();\n    const firstChild = refblock.nodes[0];\n    const lastChild = refblock.nodes[refblock.nodes.length - 1];\n    return controller\n      .command(Commands.moveAnchorToStartOfNode, firstChild)\n      .command(Commands.moveFocusToEndOfNode, lastChild);\n  }\n  return next();\n}\n"],"file":"onKeyDown.js"}