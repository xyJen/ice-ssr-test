"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _everCangjie = require("@ali/4ever-cangjie");

var _everPluginParagraph = require("@ali/4ever-plugin-paragraph");

var _models = _interopRequireDefault(require("./models"));

const normalizeNode = (node, controller, next) => {
  if (!_models.default.isRefBlock(node)) {
    return next();
  }

  if (node.nodes.length === 1 && _everCangjie.Text.isText(node.nodes[0])) {
    return () => {
      const text = _everCangjie.Text.create('');

      controller.command(_everCangjie.Commands.replaceNodeByKey, node.nodes[0].key, _everPluginParagraph.Paragraph.create({
        nodes: [text]
      })).command(_everCangjie.Commands.moveToStartOfNode, text);
    };
  }

  return next();
};

var _default = normalizeNode;
exports.default = _default;
//# sourceMappingURL=normalizeNode.js.map