{"version":3,"sources":["../../../src/bi/index.ts"],"names":["biFactory","configs","refblockConfig","refblock","locale","disableNestedInRefBlock","stubFalse","disableDropTo","disableNodeInRefBlock","queries","createDisableNodeInRefBlock","commands","commonQueries","disableDrag","disableDrop","createDisableDrop","cannotMoveTo","cannotDropTo","isContainer","shouldSelectAll","actions","isActions","onCangjiePaste","onCangjieCopy","onCangjieCopyOrCut","onCangjieCut","onKeyDown","onAction","clipboard","serializer","renderNode"],"mappings":";;;;;;;;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,MAAMA,SAAoB,GAAIC,OAAD,IAAa;AACxC,QAAMC,cAAc,GAAGD,OAAO,CAACE,QAA/B;AACA;;AACA,MAAI,CAACD,cAAL,EAAqB;AACnB,WAAO,oBAAU,EAAV,CAAP;AACD;;AACD,QAAM;AACJE,IAAAA,MADI;AAEJC,IAAAA,uBAAuB,GAAGC,iBAFtB;AAGJC,IAAAA,aAAa,GAAGD;AAHZ,MAIFJ,cAJJ;AAMA,QAAMM,qBAAqB,GAAGC,OAAO,CAACC,2BAAR,CAC5BL,uBAD4B,CAA9B;AAGA,SAAO,EACL,GAAG,oBAAU,EAAV,CADE;AAELM,IAAAA,QAFK;AAGLF,IAAAA,OAAO,EAAE,EACP,GAAGG,aADI;AAEPC,MAAAA,WAAW,EAAEJ,OAAO,CAACI,WAFd;AAGPC,MAAAA,WAAW,EAAEL,OAAO,CAACM,iBAAR,CACXX,MAAM,CAACY,YADI,EAEXZ,MAAM,CAACa,YAFI,EAGXT,qBAHW,EAIXD,aAJW,CAHN;AASPC,MAAAA,qBATO;AAUPU,MAAAA,WAAW,EAAET,OAAO,CAACS,WAVd;AAWPC,MAAAA,eAAe,EAAEV,OAAO,CAACU;AAXlB,KAHJ;AAgBLC,IAAAA,OAAO,EAAPA,gBAhBK;AAiBLC,IAAAA,SAAS,EAATA,kBAjBK;AAkBLC,IAAAA,cAAc,EAAE,4BAAcrB,OAAd,CAlBX;AAmBLsB,IAAAA,aAAa,EAAEC,2BAnBV;AAoBLC,IAAAA,YAAY,EAAED,2BApBT;AAqBLE,IAAAA,SAAS,EAATA,kBArBK;AAsBLC,IAAAA,QAAQ,EAAE,6BAAezB,cAAf,EAA+BD,OAAO,CAAC2B,SAAR,EAAmBC,UAAlD,CAtBL;AAuBLC,IAAAA,UAAU,EAAE,+BAAiB5B,cAAjB;AAvBP,GAAP;AAyBD,CAxCD;;eA0CeF,S","sourcesContent":["import { BiFactory } from '@ali/4ever-cangjie';\nimport moFactory from '../mo/index';\nimport { stubFalse } from 'lodash-es';\nimport * as queries from './queries';\nimport * as commands from './commands';\nimport { actions, isActions } from './actions';\nimport createOnPaste from './handlers/createOnPaste';\nimport createOnAction from './handlers/createOnAction';\nimport onCangjieCopyOrCut from './handlers/onCangjieCopyOrCut';\nimport onKeyDown from './handlers/onKeyDown';\nimport createRenderNode from './handlers/createRenderNode';\nimport * as commonQueries from '../common/queries';\n\nconst biFactory: BiFactory = (configs) => {\n  const refblockConfig = configs.refblock;\n  /* istanbul ignore next */\n  if (!refblockConfig) {\n    return moFactory({});\n  }\n  const {\n    locale,\n    disableNestedInRefBlock = stubFalse,\n    disableDropTo = stubFalse,\n  } = refblockConfig;\n\n  const disableNodeInRefBlock = queries.createDisableNodeInRefBlock(\n    disableNestedInRefBlock,\n  );\n  return {\n    ...moFactory({}),\n    commands,\n    queries: {\n      ...commonQueries,\n      disableDrag: queries.disableDrag,\n      disableDrop: queries.createDisableDrop(\n        locale.cannotMoveTo,\n        locale.cannotDropTo,\n        disableNodeInRefBlock,\n        disableDropTo,\n      ),\n      disableNodeInRefBlock,\n      isContainer: queries.isContainer,\n      shouldSelectAll: queries.shouldSelectAll,\n    },\n    actions,\n    isActions,\n    onCangjiePaste: createOnPaste(configs),\n    onCangjieCopy: onCangjieCopyOrCut,\n    onCangjieCut: onCangjieCopyOrCut,\n    onKeyDown,\n    onAction: createOnAction(refblockConfig, configs.clipboard?.serializer),\n    renderNode: createRenderNode(refblockConfig),\n  };\n};\n\nexport default biFactory;\n"],"file":"index.js"}