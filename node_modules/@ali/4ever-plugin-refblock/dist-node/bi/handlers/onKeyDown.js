"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = onKeyDown;

var _everCangjie = require("@ali/4ever-cangjie");

var _logic = require("../../utils/logic");

function onKeyDown(event, controller, next) {
  // 全选选中引用块
  if (_everCangjie.hotkeys.isSelectAll(event)) {
    const refblock = (0, _logic.getClosestRefBlockInSelection)(controller.value);

    if (!refblock || !refblock.nodes.length || controller.query('shouldSelectAll', refblock)) {
      return next();
    }

    event.preventDefault();
    const firstChild = refblock.nodes[0];
    const lastChild = refblock.nodes[refblock.nodes.length - 1];
    return controller.command(_everCangjie.Commands.moveAnchorToStartOfNode, firstChild).command(_everCangjie.Commands.moveFocusToEndOfNode, lastChild);
  }

  return next();
}
//# sourceMappingURL=onKeyDown.js.map