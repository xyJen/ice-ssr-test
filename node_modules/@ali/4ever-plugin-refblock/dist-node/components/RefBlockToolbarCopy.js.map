{"version":3,"sources":["../../../src/components/RefBlockToolbarCopy.tsx"],"names":["RefBlockToolbarCopy","props","locale","from","docKey","uuid","readOnly","status","canCopy","detach","copy","getURL","canDetach","RefBlockStatus","normal","handleDetachClick","React","useCallback","paddingLeft","whiteSpace","referFromTitle","padding","url","name"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAMA;;uBAX4B,a;;wBAiEpB,eAAC,qBAAD,O;;yBAcE,eAAC,2BAAD;AAAqB,iBAAY;AAAjC,E;;yBAGJ,eAAC,eAAD,O;;yBAWY,eAAC,wBAAD,O;;AAzDlB,MAAMA,mBAAuD,GAAIC,KAAD,IAAW;AACzE,QAAM;AACJC,IAAAA,MADI;AAEJC,IAAAA,IAFI;AAGJC,IAAAA,MAHI;AAIJC,IAAAA,IAJI;AAKJC,IAAAA,QALI;AAMJC,IAAAA,MANI;AAOJC,IAAAA,OAPI;AAQJC,IAAAA,MARI;AASJC,IAAAA,IATI;AAUJC,IAAAA;AAVI,MAWFV,KAXJ;AAYA,QAAMW,SAAS,GAAG,CAACN,QAAD,IAAaD,IAAb,IAAqBE,MAAM,KAAKM,uBAAeC,MAAjE;AAEA,QAAMC,iBAAiB,GAAGC,KAAK,CAACC,WAAN,CAAkB,MAAM;AAChDR,IAAAA,MAAM,CAACL,MAAD,EAASC,IAAT,CAAN;AACD,GAFyB,EAEvB,CAACI,MAAD,EAASL,MAAT,EAAiBC,IAAjB,CAFuB,CAA1B;AAIA,sBACE,kDAEE,eAAC,qBAAD;AACE,IAAA,KAAK,EAAE;AAAEa,MAAAA,WAAW,EAAE,EAAf;AAAmBC,MAAAA,UAAU,EAAE;AAA/B,KADT;AAEE,mBAAY;AAFd,KAIGjB,MAAM,CAACkB,cAJV,CAFF,eAQE,eAAC,qBAAD;AAAe,IAAA,gBAAgB,EAAE,CAAC,CAACjB,IAAnC;AAAyC,IAAA,KAAK,EAAE;AAAEkB,MAAAA,OAAO,EAAE;AAAX;AAAhD,WAEGlB,IAAI,gBACH,eAAC,gBAAD,qBACE;AACE,IAAA,SAAS,EAAC,eADZ;AAEE,mBAAY,kBAFd;AAGE,IAAA,IAAI,EAAEQ,MAAM,CAACR,IAAI,CAACmB,GAAN,EAAWlB,MAAX,CAHd;AAIE,IAAA,MAAM,EAAC,QAJT;AAKE,IAAA,GAAG,EAAC;AALN,KAOGD,IAAI,CAACoB,IAPR,CADF,CADG,QAFP,CARF,SA2BGf,OAAO,iBACN,eAAC,qBAAD,qBACE,eAAC,mBAAD;AAAY,IAAA,MAAM,EAAEE,IAApB;AAA0B,IAAA,KAAK,EAAER,MAAM,CAACQ;AAAxC,IADF,CA5BJ,EAgCGE,SAAS,iBACR,eAAC,qBAAD,qBACE,eAAC,qBAAD;AACE,IAAA,MAAM,EAAC,iBADT;AAEE,IAAA,OAAO,EAAGV,MAAD,CAA+BO,MAF1C;AAGE,IAAA,IAAI,OAHN;AAIE,IAAA,OAAO,EAAEM;AAJX,IADF,CAjCJ,CADF;AA6CD,CAhED;;eAkEef,mB","sourcesContent":["import * as React from 'react';\nimport { RefBlockStatus } from '../mo/models';\nimport { DeletelinkNormal } from '@ali/we-icon';\nimport { IconButton } from '@ali/we-toolbar';\nimport type { ReferenceItem, RefBlockLocale, BiConfig } from '../utils/types';\nimport ListItemIcon from './ListItemIcon';\nimport {\n  ToolbarColumn,\n  Divider,\n  CopyFrom,\n  CopyFromPlaceholder,\n} from './styled';\nimport CopyButton from './CopyButton';\n\ninterface RefBlockToolbarCopyProps {\n  /** 引用块原文档 */\n  from?: ReferenceItem;\n  /** 引用块国际化文案 */\n  locale: RefBlockLocale;\n  /** 引用块的 docKey */\n  docKey: string;\n  /** 引用块的 uuid */\n  uuid?: string;\n  /** 只读模式 */\n  readOnly: boolean;\n  /** 同步状态 */\n  status: RefBlockStatus;\n  /** 是否允许复制 */\n  canCopy: boolean;\n  /** 解绑引用 */\n  detach: (docKey: string, uuid: string) => Promise<void>;\n  /** 复制块引用链接 */\n  copy: () => void;\n  /** 获得文档跳转地址 */\n  getURL: (url: string, id: string) => string;\n}\n\nconst RefBlockToolbarCopy: React.FC<RefBlockToolbarCopyProps> = (props) => {\n  const {\n    locale,\n    from,\n    docKey,\n    uuid,\n    readOnly,\n    status,\n    canCopy,\n    detach,\n    copy,\n    getURL,\n  } = props;\n  const canDetach = !readOnly && uuid && status === RefBlockStatus.normal;\n\n  const handleDetachClick = React.useCallback(() => {\n    detach(docKey, uuid!);\n  }, [detach, docKey, uuid]);\n\n  return (\n    <>\n      {/* 引用源 */}\n      <ToolbarColumn\n        style={{ paddingLeft: 10, whiteSpace: 'nowrap' }}\n        data-testid=\"refblock-toolbar-copy\"\n      >\n        {locale.referFromTitle}\n      </ToolbarColumn>\n      <ToolbarColumn highlightOnHover={!!from} style={{ padding: '0px 4px' }}>\n        <ListItemIcon />\n        {from ? (\n          <CopyFrom>\n            <a\n              className=\"synclist-link\"\n              data-testid=\"refblock-link-to\"\n              href={getURL(from.url, docKey)}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              {from.name}\n            </a>\n          </CopyFrom>\n        ) : (\n          <CopyFromPlaceholder data-testid=\"refblock-copy-from-placeholder\" />\n        )}\n      </ToolbarColumn>\n      <Divider />\n      {canCopy && (\n        <ToolbarColumn>\n          <CopyButton onCopy={copy} title={locale.copy} />\n        </ToolbarColumn>\n      )}\n      {canDetach && (\n        <ToolbarColumn>\n          <IconButton\n            testid=\"refblock-detach\"\n            tooltip={(locale as BiConfig['locale']).detach}\n            icon={<DeletelinkNormal />}\n            onClick={handleDetachClick}\n          />\n        </ToolbarColumn>\n      )}\n    </>\n  );\n};\n\nexport default RefBlockToolbarCopy;\n"],"file":"RefBlockToolbarCopy.js"}