{"version":3,"sources":["../../../../src/bi/queries/isCollapsedAtEmptyParagraph.ts"],"names":["isCollapsedAtEmptyParagraph","controller","range","isCollapsed","isCollapsedAtEdge","document","value","block","getClosestBlock","focus","key","Paragraph","isParagraph","text","Text","isTextList","nodes"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEe,SAASA,2BAAT,CAAqCC,UAArC,EAA6DC,KAA7D,EAAwF;AACrG,QAAM;AAAEC,IAAAA,WAAF;AAAeC,IAAAA;AAAf,MAAqCF,KAA3C,CADqG,CAErG;;AACA,MAAI,CAACC,WAAD,IAAgBC,iBAApB,EAAuC,OAAO,KAAP;AAEvC,QAAM;AAAEC,IAAAA;AAAF,MAAeJ,UAAU,CAACK,KAAhC;AACA,QAAMC,KAAK,GAAGF,QAAQ,CAACG,eAAT,CAAyBN,KAAK,CAACO,KAAN,CAAYC,GAArC,CAAd,CANqG,CAQrG;;AACA,MAAI,CAACC,gBAAUC,WAAV,CAAsBL,KAAtB,CAAL,EAAmC,OAAO,KAAP;AAEnC,SAAOA,KAAK,EAAEM,IAAP,KAAgB,EAAhB,IAAsBC,kBAAKC,UAAL,CAAgBR,KAAK,CAACS,KAAtB,CAA7B;AACD","sourcesContent":["import { Text, Controller, Selection } from '@ali/4ever-cangjie';\nimport Paragraph from '../../mo/models';\n\nexport default function isCollapsedAtEmptyParagraph(controller: Controller, range: Selection): boolean {\n  const { isCollapsed, isCollapsedAtEdge } = range;\n  // 边缘不算\n  if (!isCollapsed || isCollapsedAtEdge) return false;\n\n  const { document } = controller.value;\n  const block = document.getClosestBlock(range.focus.key);\n\n  // 段落和标题以外的块级元素不算\n  if (!Paragraph.isParagraph(block)) return false;\n\n  return block?.text === '' && Text.isTextList(block.nodes);\n}\n"],"file":"isCollapsedAtEmptyParagraph.js"}