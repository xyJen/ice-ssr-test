{"version":3,"sources":["../../../../src/bi/queries/isCollapsedAtEmptyParagraph.ts"],"names":["Text","Paragraph","isCollapsedAtEmptyParagraph","controller","range","isCollapsed","isCollapsedAtEdge","document","value","block","getClosestBlock","focus","key","isParagraph","text","isTextList","nodes"],"mappings":"AAAA,SAASA,IAAT,QAA4C,oBAA5C;AACA,OAAOC,SAAP;AAEA,eAAe,SAASC,2BAAT,CAAqCC,UAArC,EAA6DC,KAA7D,EAAwF;AAAA,MAC7FC,WAD6F,GAC1DD,KAD0D,CAC7FC,WAD6F;AAAA,MAChFC,iBADgF,GAC1DF,KAD0D,CAChFE,iBADgF,EAErG;;AACA,MAAI,CAACD,WAAD,IAAgBC,iBAApB,EAAuC,OAAO,KAAP;AAH8D,MAK7FC,QAL6F,GAKhFJ,UAAU,CAACK,KALqE,CAK7FD,QAL6F;AAMrG,MAAME,KAAK,GAAGF,QAAQ,CAACG,eAAT,CAAyBN,KAAK,CAACO,KAAN,CAAYC,GAArC,CAAd,CANqG,CAQrG;;AACA,MAAI,CAACX,SAAS,CAACY,WAAV,CAAsBJ,KAAtB,CAAL,EAAmC,OAAO,KAAP;AAEnC,SAAO,CAAAA,KAAK,QAAL,YAAAA,KAAK,CAAEK,IAAP,MAAgB,EAAhB,IAAsBd,IAAI,CAACe,UAAL,CAAgBN,KAAK,CAACO,KAAtB,CAA7B;AACD","sourcesContent":["import { Text, Controller, Selection } from '@ali/4ever-cangjie';\nimport Paragraph from '../../mo/models';\n\nexport default function isCollapsedAtEmptyParagraph(controller: Controller, range: Selection): boolean {\n  const { isCollapsed, isCollapsedAtEdge } = range;\n  // 边缘不算\n  if (!isCollapsed || isCollapsedAtEdge) return false;\n\n  const { document } = controller.value;\n  const block = document.getClosestBlock(range.focus.key);\n\n  // 段落和标题以外的块级元素不算\n  if (!Paragraph.isParagraph(block)) return false;\n\n  return block?.text === '' && Text.isTextList(block.nodes);\n}\n"],"file":"isCollapsedAtEmptyParagraph.js"}