{"version":3,"sources":["../../../../src/bi/commands/validateLastParagraph.ts"],"names":["validateLastParagraph","controller","document","value","lastNode","nodes","length","Paragraph","isParagraph","newParagraph","create","Text","command","Commands","insertNodeByKey","key","moveToStartOfNode","focus"],"mappings":";;;;;;;AAAA;;AACA;;AAEe,SAASA,qBAAT,CAA+BC,UAA/B,EAAuD;AACpE,QAAM;AAAEC,IAAAA;AAAF,MAAeD,UAAU,CAACE,KAAhC;AAEA,QAAMC,QAAQ,GAAGF,QAAQ,CAACG,KAAT,CAAeH,QAAQ,CAACG,KAAT,CAAeC,MAAf,GAAwB,CAAvC,CAAjB;;AACA,MAAIC,+BAAUC,WAAV,CAAsBJ,QAAtB,CAAJ,EAAqC;AACnC,WAAOH,UAAP;AACD;;AACD,QAAMQ,YAAY,GAAGF,+BAAUG,MAAV,CAAiB;AACpCL,IAAAA,KAAK,EAAE,CAACM,kBAAKD,MAAL,CAAY,EAAZ,CAAD;AAD6B,GAAjB,CAArB;;AAGA,SAAOT,UAAU,CACdW,OADI,CAEHC,sBAASC,eAFN,EAGHZ,QAAQ,CAACa,GAHN,EAIHb,QAAQ,CAACG,KAAT,CAAeC,MAJZ,EAKHG,YALG,EAOJG,OAPI,CAOIC,sBAASG,iBAPb,EAOgCP,YAPhC,EAQJG,OARI,CAQIC,sBAASI,KARb,CAAP;AASD","sourcesContent":["import { Controller, Commands, Text } from '@ali/4ever-cangjie';\nimport { Paragraph } from '@ali/4ever-plugin-paragraph';\n\nexport default function validateLastParagraph(controller: Controller) {\n  const { document } = controller.value;\n\n  const lastNode = document.nodes[document.nodes.length - 1];\n  if (Paragraph.isParagraph(lastNode)) {\n    return controller;\n  }\n  const newParagraph = Paragraph.create({\n    nodes: [Text.create('')],\n  });\n  return controller\n    .command(\n      Commands.insertNodeByKey,\n      document.key,\n      document.nodes.length,\n      newParagraph,\n    )\n    .command(Commands.moveToStartOfNode, newParagraph)\n    .command(Commands.focus);\n}\n"],"file":"validateLastParagraph.js"}