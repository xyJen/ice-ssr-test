{"version":3,"sources":["../../../../src/bi/handlers/onAction.ts"],"names":["onAction","action","controller","next","node","payload","command","Commands","moveToStartOfNode","focus","validateLastParagraph","insertBlockWithoutExtraBlank","mergeData"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEe,SAASA,QAAT,CAAkBC,MAAlB,EAA0BC,UAA1B,EAAkDC,IAAlD,EAAwD;AACrE,MAAI,gCAAoBF,MAApB,CAAJ,EAAiC;AAC/B,UAAM;AAAEG,MAAAA;AAAF,QAAWH,MAAM,CAACI,OAAxB;AACA,WAAOH,UAAU,CACdI,OADI,CACIC,sBAASC,iBADb,EACgCJ,IADhC,EAEJE,OAFI,CAEIC,sBAASE,KAFb,CAAP;AAGD,GALD,MAKO,IAAI,qCAAyBR,MAAzB,CAAJ,EAAsC;AAC3C,WAAOC,UAAU,CAACI,OAAX,CAAmBI,8BAAnB,CAAP;AACD,GAFM,MAEA,IAAI,iDAAqCT,MAArC,CAAJ,EAAkD;AACvD,WAAOC,UAAU,CAACI,OAAX,CAAmBK,qCAAnB,EAAiDV,MAAM,CAACI,OAAP,CAAgBD,IAAjE,CAAP;AACD,GAFM,MAEA,IAAI,8BAAkBH,MAAlB,CAAJ,EAA+B;AACpC,WAAOC,UAAU,CAACI,OAAX,CAAmBM,kBAAnB,EAA8BX,MAAM,CAACI,OAArC,CAAP;AACD;;AAED,SAAOF,IAAI,EAAX;AACD","sourcesContent":["import { Controller, Commands, BiPluginConfig } from '@ali/4ever-cangjie';\nimport { isFocusToNodeAction, isInsertBlockWithoutExtraBlankAction, isValidateLastNodeAction, isMergeDataAction, isTriggerMarkdownAction } from '../actions/index';\nimport validateLastParagraph from '../commands/validateLastParagraph';\nimport insertBlockWithoutExtraBlank from '../commands/insertBlockWithoutExtraBlank';\nimport mergeData from '../commands/mergeData';\n\nexport default function onAction(action, controller: Controller, next) {\n  if (isFocusToNodeAction(action)) {\n    const { node } = action.payload!;\n    return controller\n      .command(Commands.moveToStartOfNode, node)\n      .command(Commands.focus);\n  } else if (isValidateLastNodeAction(action)) {\n    return controller.command(validateLastParagraph);\n  } else if (isInsertBlockWithoutExtraBlankAction(action)) {\n    return controller.command(insertBlockWithoutExtraBlank, action.payload!.node)\n  } else if (isMergeDataAction(action)) {\n    return controller.command(mergeData, action.payload!);\n  }\n\n  return next();\n}"],"file":"onAction.js"}