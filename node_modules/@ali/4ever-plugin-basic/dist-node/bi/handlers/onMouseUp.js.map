{"version":3,"sources":["../../../../src/bi/handlers/onMouseUp.ts"],"names":["Selector","constants","onMouseUp","event","controller","next","target","editableNode","HTMLElement","querySelector","editable","clientY","bottom","getBoundingClientRect","run"],"mappings":";;;;;;;AAAA;;AACA;;AAEA,MAAM;AAAEA,EAAAA;AAAF,IAAeC,sBAArB;;AAEe,SAASC,SAAT,CACbC,KADa,EAEbC,UAFa,EAGbC,IAHa,EAIb;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAaH,KAAnB;AACA,QAAMI,YAAY,GAChBD,MAAM,YAAYE,WAAlB,IACAF,MAAM,CAACG,aAAP,CAAsB,IAAGT,QAAQ,CAACU,QAAS,GAA3C,CAFF;;AAGA,MAAIH,YAAJ,EAAkB;AAChB,UAAM;AAAEI,MAAAA;AAAF,QAAcR,KAApB;AACA,UAAM;AAAES,MAAAA;AAAF,QAAaL,YAAY,CAACM,qBAAb,EAAnB;;AACA,QAAIF,OAAO,IAAIC,MAAf,EAAuB;AACrBR,MAAAA,UAAU,CAACU,GAAX,CAAe,UAAf,EAA2B,4CAA3B;AACD;AACF;;AAED,SAAOT,IAAI,EAAX;AACD","sourcesContent":["import { Controller, constants } from '@ali/4ever-cangjie';\nimport { createValidateLastNodeAction } from '../actions';\n\nconst { Selector } = constants;\n\nexport default function onMouseUp(\n  event: React.MouseEvent,\n  controller: Controller,\n  next,\n) {\n  const { target } = event;\n  const editableNode =\n    target instanceof HTMLElement &&\n    target.querySelector(`[${Selector.editable}]`);\n  if (editableNode) {\n    const { clientY } = event;\n    const { bottom } = editableNode.getBoundingClientRect();\n    if (clientY >= bottom) {\n      controller.run('onAction', createValidateLastNodeAction());\n    }\n  }\n\n  return next();\n}\n"],"file":"onMouseUp.js"}