{"version":3,"sources":["../../../../src/bi/commands/validateLastParagraph.ts"],"names":["Commands","Text","Paragraph","validateLastParagraph","controller","document","value","lastNode","nodes","length","isParagraph","newParagraph","create","command","insertNodeByKey","key","moveToStartOfNode","focus"],"mappings":"AAAA,SAAqBA,QAArB,EAA+BC,IAA/B,QAA2C,oBAA3C;AACA,SAASC,SAAT,QAA0B,6BAA1B;AAEA,eAAe,SAASC,qBAAT,CAA+BC,UAA/B,EAAuD;AAAA,MAC5DC,QAD4D,GAC/CD,UAAU,CAACE,KADoC,CAC5DD,QAD4D;AAGpE,MAAME,QAAQ,GAAGF,QAAQ,CAACG,KAAT,CAAeH,QAAQ,CAACG,KAAT,CAAeC,MAAf,GAAwB,CAAvC,CAAjB;;AACA,MAAIP,SAAS,CAACQ,WAAV,CAAsBH,QAAtB,CAAJ,EAAqC;AACnC,WAAOH,UAAP;AACD;;AACD,MAAMO,YAAY,GAAGT,SAAS,CAACU,MAAV,CAAiB;AACpCJ,IAAAA,KAAK,EAAE,CAACP,IAAI,CAACW,MAAL,CAAY,EAAZ,CAAD;AAD6B,GAAjB,CAArB;AAGA,SAAOR,UAAU,CACdS,OADI,CAEHb,QAAQ,CAACc,eAFN,EAGHT,QAAQ,CAACU,GAHN,EAIHV,QAAQ,CAACG,KAAT,CAAeC,MAJZ,EAKHE,YALG,EAOJE,OAPI,CAOIb,QAAQ,CAACgB,iBAPb,EAOgCL,YAPhC,EAQJE,OARI,CAQIb,QAAQ,CAACiB,KARb,CAAP;AASD","sourcesContent":["import { Controller, Commands, Text } from '@ali/4ever-cangjie';\nimport { Paragraph } from '@ali/4ever-plugin-paragraph';\n\nexport default function validateLastParagraph(controller: Controller) {\n  const { document } = controller.value;\n\n  const lastNode = document.nodes[document.nodes.length - 1];\n  if (Paragraph.isParagraph(lastNode)) {\n    return controller;\n  }\n  const newParagraph = Paragraph.create({\n    nodes: [Text.create('')],\n  });\n  return controller\n    .command(\n      Commands.insertNodeByKey,\n      document.key,\n      document.nodes.length,\n      newParagraph,\n    )\n    .command(Commands.moveToStartOfNode, newParagraph)\n    .command(Commands.focus);\n}\n"],"file":"validateLastParagraph.js"}