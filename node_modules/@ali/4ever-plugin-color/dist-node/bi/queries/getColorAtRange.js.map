{"version":3,"sources":["../../../../src/bi/queries/getColorAtRange.ts"],"names":["getColorAtRange","controller","range","symbolColor","query","colorMark","Color","TYPE","color","data","value","DEFAULT_COLOR"],"mappings":";;;;;;;AACA;;AAEA;;AAEe,SAASA,eAAT,CAAyBC,UAAzB,EAAiDC,KAAjD,EAAmE;AAChF,QAAMC,WAAW,GAAGF,UAAU,CAACG,KAAX,CAAiB,qBAAjB,EAAwC,OAAxC,CAApB;AACA,MAAID,WAAJ,EAAiB,OAAOA,WAAP;AAEjB,QAAME,SAAS,GAAGJ,UAAU,CAACG,KAAX,CAAiB,sBAAjB,EAAyCF,KAAzC,EAAgDI,uBAAMC,IAAtD,CAAlB;AACA,QAAMC,KAAK,GAAGH,SAAS,IAAIA,SAAS,CAACI,IAAV,CAAeC,KAA1C;AACA,MAAIF,KAAK,KAAK,EAAd,EAAkB,OAAOA,KAAP;AAClB,SAAOA,KAAK,IAAIG,wBAAhB;AACD","sourcesContent":["import { Controller, Selection } from '@ali/4ever-cangjie';\nimport { Color } from '@ali/4ever-plugin-marks';\n\nimport { DEFAULT_COLOR } from '../constants';\n\nexport default function getColorAtRange(controller: Controller, range: Selection) {\n  const symbolColor = controller.query('getSymbolStyleByKey', 'color')\n  if (symbolColor) return symbolColor;\n\n  const colorMark = controller.query('getActiveMarkAtRange', range, Color.TYPE);\n  const color = colorMark && colorMark.data.value;\n  if (color === '') return color;\n  return color || DEFAULT_COLOR;\n}\n"],"file":"getColorAtRange.js"}