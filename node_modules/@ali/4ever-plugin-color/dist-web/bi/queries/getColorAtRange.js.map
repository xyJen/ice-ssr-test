{"version":3,"sources":["../../../../src/bi/queries/getColorAtRange.ts"],"names":["Color","DEFAULT_COLOR","getColorAtRange","controller","range","symbolColor","query","colorMark","TYPE","color","data","value"],"mappings":"AACA,SAASA,KAAT,QAAsB,yBAAtB;AAEA,SAASC,aAAT;AAEA,eAAe,SAASC,eAAT,CAAyBC,UAAzB,EAAiDC,KAAjD,EAAmE;AAChF,MAAMC,WAAW,GAAGF,UAAU,CAACG,KAAX,CAAiB,qBAAjB,EAAwC,OAAxC,CAApB;AACA,MAAID,WAAJ,EAAiB,OAAOA,WAAP;AAEjB,MAAME,SAAS,GAAGJ,UAAU,CAACG,KAAX,CAAiB,sBAAjB,EAAyCF,KAAzC,EAAgDJ,KAAK,CAACQ,IAAtD,CAAlB;AACA,MAAMC,KAAK,GAAGF,SAAS,IAAIA,SAAS,CAACG,IAAV,CAAeC,KAA1C;AACA,MAAIF,KAAK,KAAK,EAAd,EAAkB,OAAOA,KAAP;AAClB,SAAOA,KAAK,IAAIR,aAAhB;AACD","sourcesContent":["import { Controller, Selection } from '@ali/4ever-cangjie';\nimport { Color } from '@ali/4ever-plugin-marks';\n\nimport { DEFAULT_COLOR } from '../constants';\n\nexport default function getColorAtRange(controller: Controller, range: Selection) {\n  const symbolColor = controller.query('getSymbolStyleByKey', 'color')\n  if (symbolColor) return symbolColor;\n\n  const colorMark = controller.query('getActiveMarkAtRange', range, Color.TYPE);\n  const color = colorMark && colorMark.data.value;\n  if (color === '') return color;\n  return color || DEFAULT_COLOR;\n}\n"],"file":"getColorAtRange.js"}