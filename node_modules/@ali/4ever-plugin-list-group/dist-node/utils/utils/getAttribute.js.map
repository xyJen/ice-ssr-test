{"version":3,"sources":["../../../../src/utils/utils/getAttribute.ts"],"names":["isInContainer","node","CONTAINERS","includes","type","isInUnlistGroupContainer","controller","value","document","parent","getParent","key","getAttributes","attributes","nodes","attrs","style","paddingLeft","EXTRA_PADDING"],"mappings":";;;;;;;;;AACA;;AACA;;AAEO,SAASA,aAAT,CAAuBC,IAAvB,EAA6C;AAClD,SAAOC,sBAAWC,QAAX,CAAoBF,IAAI,EAAEG,IAAN,IAAc,EAAlC,CAAP;AACD;AAED;AACA;AACA;AACA;;;AACO,SAASC,wBAAT,CAAkCJ,IAAlC,EAA+CK,UAA/C,EAAuE;AAC5E,MAAI,CAACA,UAAU,EAAEC,KAAZ,EAAmBC,QAAxB,EAAkC;AAChC,WAAO,KAAP;AACD;;AACD,QAAM;AAAEA,IAAAA;AAAF,MAAeF,UAAU,EAAEC,KAAjC;AACA,QAAME,MAAM,GAAGD,QAAQ,CAACE,SAAT,CAAmBT,IAAI,CAACU,GAAxB,CAAf;AACA,SACE,yCAAqBL,UAArB,KACAN,aAAa,CAACS,MAAD,CADb,IAEA,CAAC,kCAAcR,IAAd,EAAoBK,UAApB,CAFD,IAGA,CAAC,oCAAgBL,IAAhB,EAAsBK,UAAtB,CAJH;AAMD;;AAEM,SAASM,aAAT,CACLC,UADK,EAILZ,IAJK,EAKLK,UALK,EAML;AACA,QAAM;AAAEE,IAAAA;AAAF,MAAeF,UAAU,CAACC,KAAhC;AACA,QAAME,MAAM,GAAGD,QAAQ,CAACE,SAAT,CAAmBT,IAAI,CAACa,KAAL,CAAW,CAAX,EAAcH,GAAjC,CAAf;AACA,QAAMI,KAAK,GAAG,EACZ,GAAGF,UADS;AAEZ,OAAG;AACDG,MAAAA,KAAK,EAAE,EACL,GAAGH,UAAU,EAAEG;AADV;AADN;AAFS,GAAd;;AAQA,MACEhB,aAAa,CAACS,MAAD,CAAb,IACA,oCAAgBR,IAAI,CAACa,KAAL,CAAW,CAAX,CAAhB,EAAwCR,UAAxC,CADA,IAEA,CAACO,UAAU,EAAEG,KAHf,EAIE;AACAD,IAAAA,KAAK,CAACC,KAAN,CAAYC,WAAZ,GAA2B,GAAEC,wBAAc,IAA3C;AACD;;AACD,SAAOH,KAAP;AACD","sourcesContent":["import { Block, Controller, Element } from '@ali/4ever-cangjie';\nimport { CONTAINERS, EXTRA_PADDING } from '../constants';\nimport { isInListGroup, isFoldGroupNode, isListGroupAvailable, isFirstFoldNode } from './isInListGroup';\n\nexport function isInContainer(node: Element | null) {\n  return CONTAINERS.includes(node?.type || '');\n}\n\n/**\n * 查询节点是否在非 listGroup 的容器节点中\n * 容器节点，如 表格、高亮块等\n */\nexport function isInUnlistGroupContainer(node: Block, controller: Controller) {\n  if (!controller?.value?.document) {\n    return false;\n  }\n  const { document } = controller?.value;\n  const parent = document.getParent(node.key);\n  return (\n    isListGroupAvailable(controller) &&\n    isInContainer(parent) &&\n    !isInListGroup(node, controller) &&\n    !isFoldGroupNode(node, controller)\n  );\n}\n\nexport function getAttributes(\n  attributes: {\n    [key: string]: any;\n  },\n  node: Block,\n  controller: Controller,\n) {\n  const { document } = controller.value;\n  const parent = document.getParent(node.nodes[0].key);\n  const attrs = {\n    ...attributes,\n    ...{\n      style: {\n        ...attributes?.style,\n      },\n    },\n  }\n  if (\n    isInContainer(parent) &&\n    isFirstFoldNode(node.nodes[0] as Block, controller) &&\n    !attributes?.style\n  ) {\n    attrs.style.paddingLeft = `${EXTRA_PADDING}px`;\n  }\n  return attrs;\n}\n"],"file":"getAttribute.js"}