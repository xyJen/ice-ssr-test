{"version":3,"sources":["../../../../src/utils/handlers/createRenderNode.tsx"],"names":["React","ShdUtil","Group","GroupBackground","Multibar","calcMultibarPosition","calcFoldBoxPosition","calcBackgroundWidth","getAttributes","LIST_GROUP_TYPE","ListGroupRole","renderBackground","width","backgroundColor","createRenderNode","config","props","controller","attributes","isSelected","children","visible","node","shd","data","symbolWidth","left","foldBoxLeft","transformShd","backgroundWidth","attrs","listGroup"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;qBAC4B,a;AAC5B,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,KAAT,QAAsB,iCAAtB;AACA,OAAOC,eAAP;AACA,OAAOC,QAAP;AACA,SACEC,oBADF,EAEEC,mBAFF,EAGEC,mBAHF,EAIEC,aAJF;AAMA,SAASC,eAAT;AACA,SAASC,aAAT;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CACvBC,KADuB,EAEvBC,eAFuB,EAGO;AAC9B,SAAOA,eAAe,gBACpB,eAAC,eAAD;AAAiB,IAAA,KAAK,EAAED,KAAxB;AAA+B,IAAA,eAAe,EAAEC;AAAhD,IADoB,GAElB,IAFJ;AAGD,CAPD;;AASA,SAASC,gBAAT,CAA0BC,MAA1B,EAAwD;AAAA;;AACtD,yBACGN,eADH,IACqB,UAACO,KAAD,EAAQC,UAAR,EAAuB;AAAA,QAChCC,UADgC,GACcF,KADd,CAChCE,UADgC;AAAA,QACpBC,UADoB,GACcH,KADd,CACpBG,UADoB;AAAA,QACRC,QADQ,GACcJ,KADd,CACRI,QADQ;AAAA,QACEC,OADF,GACcL,KADd,CACEK,OADF;AAExC,QAAMC,IAAI,GAAGN,KAAK,CAACM,IAAnB;AAFwC,QAIhCC,GAJgC,GAIxBD,IAAI,CAACE,IAJmB,CAIhCD,GAJgC;;AAAA,gCAKVlB,oBAAoB,CAACiB,IAAD,CALV;AAAA,QAKhCG,WALgC,yBAKhCA,WALgC;AAAA,QAKnBC,IALmB,yBAKnBA,IALmB;;AAMxC,QAAMC,WAAW,GAAGrB,mBAAmB,CAACgB,IAAD,CAAvC;AACA,QAAMT,eAAe,GAAGZ,OAAO,CAAC2B,YAAR,CAAqBL,GAArB,CAAxB;AACA,QAAMM,eAAe,GAAGtB,mBAAmB,CAACe,IAAD,EAAOI,IAAP,EAAaD,WAAb,CAA3C;AACA,QAAMK,KAAK,GAAGtB,aAAa,CAACU,UAAD,EAAaI,IAAb,EAAmBL,UAAnB,CAA3B;AACA,wBACE,eAAC,KAAD;AACE,MAAA,IAAI,EAAEK,IADR;AAEE,MAAA,UAAU,EAAEQ,KAFd;AAGE,MAAA,UAAU,EAAEb,UAHd;AAIE,MAAA,UAAU,EAAEE,UAJd;AAKE,MAAA,WAAW,eAAE,eAAC,QAAD;AAAU,QAAA,IAAI,EAAEG;AAAhB,QALf;AAME,MAAA,gBAAgB,EAAEX,gBAAgB,CAChCkB,eADgC,EAEhChB,eAFgC,CANpC;AAUE,MAAA,WAAW,EAAEc,WAVf;AAWE,MAAA,IAAI,EAAEjB,aAAa,CAACqB,SAXtB;AAYE,MAAA,OAAO,EAAEV;AAZX,OAcGD,QAAQ,EAdX,CADF;AAkBD,GA7BH;AA+BD;;AAED,eAAeN,gBAAf","sourcesContent":["import React from 'react';\nimport { Block, Plugin } from '@ali/4ever-cangjie';\nimport { ShdUtil } from '@ali/4ever-utils';\nimport { Group } from '@ali/4ever-plugin-group-factory';\nimport GroupBackground from '../components/groupBackground';\nimport Multibar from '../components/multibar';\nimport {\n  calcMultibarPosition,\n  calcFoldBoxPosition,\n  calcBackgroundWidth,\n  getAttributes,\n} from '../utils';\nimport { LIST_GROUP_TYPE } from '../constants';\nimport { ListGroupRole } from '../role';\n\nconst renderBackground = (\n  width: string,\n  backgroundColor: string,\n): React.ReactElement | null => {\n  return backgroundColor ? (\n    <GroupBackground width={width} backgroundColor={backgroundColor} />\n  ) : null;\n};\n\nfunction createRenderNode(config): Plugin['renderNode'] {\n  return {\n    [LIST_GROUP_TYPE]: (props, controller) => {\n      const { attributes, isSelected, children, visible } = props;\n      const node = props.node as unknown as Block;\n\n      const { shd } = node.data;\n      const { symbolWidth, left } = calcMultibarPosition(node);\n      const foldBoxLeft = calcFoldBoxPosition(node);\n      const backgroundColor = ShdUtil.transformShd(shd);\n      const backgroundWidth = calcBackgroundWidth(node, left, symbolWidth);\n      const attrs = getAttributes(attributes, node, controller);\n      return (\n        <Group\n          node={node}\n          attributes={attrs}\n          controller={controller}\n          isSelected={isSelected}\n          renderExtra={<Multibar node={node} />}\n          renderBackground={renderBackground(\n            backgroundWidth,\n            backgroundColor,\n          )}\n          foldBoxLeft={foldBoxLeft}\n          role={ListGroupRole.listGroup}\n          visible={visible}\n        >\n          {children()}\n        </Group>\n      );\n    },\n  };\n}\n\nexport default createRenderNode;\n"],"file":"createRenderNode.js"}