{"version":3,"sources":["../../../../src/utils/utils/getAttribute.ts"],"names":["CONTAINERS","EXTRA_PADDING","isInListGroup","isFoldGroupNode","isListGroupAvailable","isFirstFoldNode","isInContainer","node","includes","type","isInUnlistGroupContainer","controller","value","document","parent","getParent","key","getAttributes","attributes","nodes","attrs","style","paddingLeft"],"mappings":";AACA,SAASA,UAAT,EAAqBC,aAArB;AACA,SAASC,aAAT,EAAwBC,eAAxB,EAAyCC,oBAAzC,EAA+DC,eAA/D;AAEA,OAAO,SAASC,aAAT,CAAuBC,IAAvB,EAA6C;AAClD,SAAOP,UAAU,CAACQ,QAAX,CAAoB,CAAAD,IAAI,QAAJ,YAAAA,IAAI,CAAEE,IAAN,KAAc,EAAlC,CAAP;AACD;AAED;AACA;AACA;AACA;;AACA,OAAO,SAASC,wBAAT,CAAkCH,IAAlC,EAA+CI,UAA/C,EAAuE;AAAA;;AAC5E,MAAI,EAACA,UAAD,iCAACA,UAAU,CAAEC,KAAb,aAAC,kBAAmBC,QAApB,CAAJ,EAAkC;AAChC,WAAO,KAAP;AACD;;AAH2E,2BAIvDF,UAJuD,oBAIvDA,UAAU,CAAEC,KAJ2C;AAAA,MAIpEC,QAJoE,sBAIpEA,QAJoE;;AAK5E,MAAMC,MAAM,GAAGD,QAAQ,CAACE,SAAT,CAAmBR,IAAI,CAACS,GAAxB,CAAf;AACA,SACEZ,oBAAoB,CAACO,UAAD,CAApB,IACAL,aAAa,CAACQ,MAAD,CADb,IAEA,CAACZ,aAAa,CAACK,IAAD,EAAOI,UAAP,CAFd,IAGA,CAACR,eAAe,CAACI,IAAD,EAAOI,UAAP,CAJlB;AAMD;AAED,OAAO,SAASM,aAAT,CACLC,UADK,EAILX,IAJK,EAKLI,UALK,EAML;AAAA,MACQE,QADR,GACqBF,UAAU,CAACC,KADhC,CACQC,QADR;AAEA,MAAMC,MAAM,GAAGD,QAAQ,CAACE,SAAT,CAAmBR,IAAI,CAACY,KAAL,CAAW,CAAX,EAAcH,GAAjC,CAAf;;AACA,MAAMI,KAAK,gBACNF,UADM,EAEN;AACDG,IAAAA,KAAK,eACAH,UADA,oBACAA,UAAU,CAAEG,KADZ;AADJ,GAFM,CAAX;;AAQA,MACEf,aAAa,CAACQ,MAAD,CAAb,IACAT,eAAe,CAACE,IAAI,CAACY,KAAL,CAAW,CAAX,CAAD,EAAyBR,UAAzB,CADf,IAEA,EAACO,UAAD,YAACA,UAAU,CAAEG,KAAb,CAHF,EAIE;AACAD,IAAAA,KAAK,CAACC,KAAN,CAAYC,WAAZ,GAA6BrB,aAA7B;AACD;;AACD,SAAOmB,KAAP;AACD","sourcesContent":["import { Block, Controller, Element } from '@ali/4ever-cangjie';\nimport { CONTAINERS, EXTRA_PADDING } from '../constants';\nimport { isInListGroup, isFoldGroupNode, isListGroupAvailable, isFirstFoldNode } from './isInListGroup';\n\nexport function isInContainer(node: Element | null) {\n  return CONTAINERS.includes(node?.type || '');\n}\n\n/**\n * 查询节点是否在非 listGroup 的容器节点中\n * 容器节点，如 表格、高亮块等\n */\nexport function isInUnlistGroupContainer(node: Block, controller: Controller) {\n  if (!controller?.value?.document) {\n    return false;\n  }\n  const { document } = controller?.value;\n  const parent = document.getParent(node.key);\n  return (\n    isListGroupAvailable(controller) &&\n    isInContainer(parent) &&\n    !isInListGroup(node, controller) &&\n    !isFoldGroupNode(node, controller)\n  );\n}\n\nexport function getAttributes(\n  attributes: {\n    [key: string]: any;\n  },\n  node: Block,\n  controller: Controller,\n) {\n  const { document } = controller.value;\n  const parent = document.getParent(node.nodes[0].key);\n  const attrs = {\n    ...attributes,\n    ...{\n      style: {\n        ...attributes?.style,\n      },\n    },\n  }\n  if (\n    isInContainer(parent) &&\n    isFirstFoldNode(node.nodes[0] as Block, controller) &&\n    !attributes?.style\n  ) {\n    attrs.style.paddingLeft = `${EXTRA_PADDING}px`;\n  }\n  return attrs;\n}\n"],"file":"getAttribute.js"}