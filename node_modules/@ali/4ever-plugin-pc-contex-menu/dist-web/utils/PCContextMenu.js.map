{"version":3,"sources":["../../../src/utils/PCContextMenu.tsx"],"names":["React","ReactDOM","Controller","useScrollableContent","ActiveInteractionHooks","EMenuMode","Menu","MenuDivider","MenuItem","Tooltip","memoize","hotKeyToReadableString","toPx","MenuGroup","MenuWrapper","MenuInnerItem","Icon","HotKey","Inflat","Name","closeContextMenu","PADDING","useActiveInteraction","ContextMenu","props","controller","scrollableContent","contextData","x","y","zoom","containerRef","useRef","handleMouseDown","useCallback","ev","target","tagName","toLocaleLowerCase","preventDefault","stopPropagation","close","run","useEffect","node","current","child","firstElementChild","animId","window","requestAnimationFrame","style","innerWidth","innerHeight","containerClientRect","getBoundingClientRect","width","height","left","top","Object","keys","forEach","key","opacity","cancelAnimationFrame","menus","menuGroups","menu","groupId","options","group","push","menuGroupKeys","sort","a","b","Number","createActionHandler","action","onClick","keepMenu","onKeyDown","event","document","addEventListener","removeEventListener","activeType","setActiveType","activeRef","length","vertical","map","index","renderMenus","showDivider","name","menuKey","role","disable","checked","icon","hotKey","inline","itemStyle","display","minWidth","backgroundColor","undefined","padding","borderRadius","PCContextMenu","mountRoot","useController","defaultContent","body","value","data","isFocused","selection","shouldRenderContextMenu","createPortal"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Controller, ContextMenuItem, useZoom, useScrollableContent } from '@ali/4ever-cangjie';\nimport { ActiveInteractionHooks } from '@ali/4ever-component';\nimport { EMenuMode, Menu, MenuDivider, MenuItem, Tooltip } from '@ali/we-design';\nimport { memoize } from 'lodash-es';\nimport { hotKeyToReadableString, toPx } from './util';\nimport {\n  MenuGroup,\n  MenuWrapper,\n  MenuItem as MenuInnerItem,\n  Icon,\n  HotKey,\n  Inflat,\n  Name,\n} from './styled';\nimport { closeContextMenu } from './actions';\n\ninterface ContextMenuProps {\n  controller: Controller;\n  scrollableContent: HTMLElement;\n  contextData: { x: number; y: number };\n  zoom: number;\n}\n\nconst PADDING = 28;\n\ninterface IProps {\n  // 是否挂在到 root 节点（document.body）\n  mountRoot?: boolean;\n}\n\nconst { useActiveInteraction } = ActiveInteractionHooks;\n\nconst ContextMenu = (props: ContextMenuProps) => {\n  const { controller, scrollableContent, contextData = { x: 100, y: 100 }, zoom } = props;\n\n  const containerRef = React.useRef<HTMLDivElement>(null);\n\n  /**\n   * 阻止默认事件，防止文档区域失焦\n   */\n  const handleMouseDown = React.useCallback((ev) => {\n    if (ev.target?.tagName.toLocaleLowerCase() !== 'input') {\n      // 放过input，以便输入地方可以正常输入\n      ev.preventDefault && ev.preventDefault();\n      ev.stopPropagation && ev.stopPropagation();\n    }\n  }, []);\n\n  const close = React.useCallback(() => {\n    controller.run('onAction', closeContextMenu());\n  }, [controller]);\n\n  React.useEffect(() => {\n    const node = containerRef.current;\n    const child = node?.firstElementChild;\n    if (!node || !child) {\n      return () => {};\n    }\n    const animId = window.requestAnimationFrame(() => {\n      const style: React.CSSProperties = {};\n\n      const { innerWidth, innerHeight } = window;\n      const containerClientRect = scrollableContent.getBoundingClientRect();\n      const { width, height } = child.getBoundingClientRect();\n      if (contextData.x + width <= innerWidth - PADDING) {\n        style.left = toPx((contextData.x - containerClientRect.left) / zoom);\n      } else {\n        style.left = toPx((innerWidth - PADDING - width - containerClientRect.left) / zoom);\n      }\n      if (contextData.y + height <= innerHeight - PADDING) {\n        style.top = toPx((contextData.y - containerClientRect.top) / zoom);\n      } else {\n        style.top = toPx((innerHeight - PADDING - height - containerClientRect.top) / zoom);\n      }\n\n      Object.keys(style).forEach((key) => {\n        node.style[key] = style[key];\n      });\n      node.style.opacity = '1';\n    });\n\n    return () => {\n      if (animId) {\n        window.cancelAnimationFrame(animId);\n      }\n    };\n  }, [scrollableContent, contextData.x, contextData.y, zoom]);\n\n  const menus = controller.run('contextMenu');\n  const menuGroups: ContextMenuItem[][] = [];\n  menus.forEach((menu) => {\n    const groupId = menu.options?.group || 0;\n    const group = menuGroups[groupId] || [];\n    group.push(menu);\n    menuGroups[groupId] = group;\n  });\n  const menuGroupKeys = Object.keys(menuGroups).sort(\n    (a, b) => Number(a) - Number(b),\n  );\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const createActionHandler = React.useCallback(\n    memoize((menu: ContextMenuItem) => () => {\n      const { action, options, onClick } = menu;\n      action && controller.run('onAction', action);\n      onClick && onClick();\n      if (!options?.keepMenu) {\n        close();\n      }\n    }),\n    [close],\n  );\n\n  React.useEffect(() => {\n    function onKeyDown(event: KeyboardEvent) {\n      if (event.key === 'Escape' || event.key === 'Esc') {\n        close();\n      }\n    }\n    document.addEventListener('keydown', onKeyDown);\n    return () => {\n      document.removeEventListener('keydown', onKeyDown);\n    };\n  }, [controller, close]);\n\n  const [activeType, setActiveType] = useActiveInteraction();\n  const activeRef = React.useRef('');\n  activeRef.current = activeType;\n\n  React.useEffect(() => {\n    if (menus.length > 0) {\n      setActiveType('contextMenu');\n    } else if (activeRef.current === 'contextMenu'){\n      setActiveType('');\n    }\n  }, [menus, setActiveType]);\n\n  React.useEffect(() => {\n    return () => {\n      setActiveType('');\n    }\n  }, []);\n\n  if (!menus.length) {\n    close();\n    return null;\n  }\n\n  return (\n    <MenuWrapper\n      data-testid=\"bi-contextmenu\"\n      data-role=\"pcContextMenu\"\n      onMouseDown={handleMouseDown}\n      ref={containerRef}\n    >\n      <Menu mode={EMenuMode.vertical}>\n        {menuGroupKeys.map((group, index) => {\n          const renderMenus = menuGroups[group];\n          const showDivider = index !== menuGroupKeys.length - 1;\n\n          return (\n            <MenuGroup key={group} data-testid=\"contextmenu-group\">\n              {renderMenus.map((menu) => {\n                const { name, options = {}, key: menuKey, role } = menu;\n                const { disable, checked, icon, hotKey, inline } = options;\n                const itemStyle: React.CSSProperties = inline\n                  ? {\n                    display: 'inline-flex',\n                    minWidth: 0,\n                    backgroundColor: checked\n                      ? 'rgba(25,31,37,0.12)'\n                      : undefined,\n                    height: 26,\n                    padding: '0 4px',\n                    borderRadius: 5,\n                  }\n                  : {};\n                return (\n                  <MenuItem\n                    key={menuKey}\n                    menuKey={menuKey}\n                    testid={menuKey}\n                    onClick={createActionHandler(menu)}\n                    selected={inline ? false : checked}\n                    disabled={disable}\n                    autoClose={false}\n                    style={itemStyle}\n                    role={role}\n                  >\n                    <Tooltip title={name} placement=\"top\" zIndex={10001} disabled={!(inline && icon)}>\n                      <MenuInnerItem\n                        data-checked={checked}\n                        data-testid={`${group}-${menuKey}`}\n                        inline={inline}\n                      >\n                        {icon ? <Icon>{icon}</Icon> : null}\n                        {inline && icon ? null : <Name>{name}</Name>}\n                        <Inflat />\n                        <HotKey disabled={disable}>\n                          {hotKeyToReadableString(hotKey || '')}\n                        </HotKey>\n                      </MenuInnerItem>\n                    </Tooltip>\n                  </MenuItem>\n                );\n              })}\n              {showDivider ? (\n                <div data-testid=\"contextmenu-divider\">\n                  <MenuDivider />\n                </div>\n              ) : null}\n            </MenuGroup>\n          );\n        })}\n      </Menu>\n    </MenuWrapper>\n  );\n};\n\nexport default function PCContextMenu(props: IProps): JSX.Element | null {\n  const { mountRoot } = props;\n  const controller = Controller.useController();\n  const defaultContent = useScrollableContent() || document.body;\n  const scrollableContent = mountRoot ? document.body : defaultContent;\n  // 由于挂载点变更，zoom 暂时不需要了。后续如果再有变更，可以重新在这里加回来\n  const { data, isFocused, selection } = controller.value;\n  const { contextData } = data;\n  const shouldRenderContextMenu = isFocused && contextData;\n  if (!shouldRenderContextMenu || !selection) {\n    return null;\n  }\n  return ReactDOM.createPortal(\n    <ContextMenu\n      controller={controller}\n      scrollableContent={scrollableContent}\n      contextData={contextData}\n      zoom={1}\n    />,\n    scrollableContent,\n  );\n}\n"],"file":"PCContextMenu.js"}