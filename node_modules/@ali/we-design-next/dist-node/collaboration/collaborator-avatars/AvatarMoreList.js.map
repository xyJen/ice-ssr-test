{"version":3,"file":"AvatarMoreList.js","names":["AvatarMoreList","props","items","onClick","onClickProp","visibleIndex","setVisibleAvatarIndex","React","useState","map","item","name","color","index","key","avatarColor","COLOR_SCHEME","COLOR_SCHEME_LEN","visible","visibleAvatarIndex","background"],"sources":["../../../../src/collaboration/collaborator-avatars/AvatarMoreList.tsx"],"sourcesContent":["import React from 'react';\nimport { ListWrap, OverlayAvatarItem, OverlayAvatarWrap, OverlayAvatarName, Dot } from './styled';\nimport { IAvatarCollaborator, AvatarWithPopover } from './AvatarWithPopover';\nimport { COLOR_SCHEME, COLOR_SCHEME_LEN } from './constants';\n\ntype IAvatarMoreItem = IAvatarCollaborator & { index: number };\n\ntype IAvatarMoreList = {\n  items: IAvatarMoreItem[];\n  onClick?: (key: string) => void;\n}\n\nexport const AvatarMoreList: React.FC<IAvatarMoreList> = (props) => {\n  const { items, onClick: onClickProp } = props;\n  // avatar popover 面板互斥\n  const [visibleIndex, setVisibleAvatarIndex] = React.useState<number>(-1);\n\n  return (\n    <ListWrap>\n      {items.map(\n        (item) => {\n          const { name, color, index, onClick, key } = item;\n          const avatarColor = color || COLOR_SCHEME[index % COLOR_SCHEME_LEN];\n          return (\n            <OverlayAvatarItem key={key}>\n              <OverlayAvatarWrap>\n                <AvatarWithPopover\n                  {...item}\n                  color={avatarColor}\n                  highlight={false}\n                  isPopoverVisible={index === visibleIndex}\n                  onPopoverVisibleChange={(visible) => {\n                    if (visible) {\n                      setVisibleAvatarIndex(index)\n                    } else {\n                      setVisibleAvatarIndex((visibleAvatarIndex) => {\n                        return visibleAvatarIndex === index ? -1 : visibleAvatarIndex\n                      });\n                    }\n                  }}\n                  onClick={onClick || (() => {onClickProp && onClickProp(item.key)})}\n                />\n              </OverlayAvatarWrap>\n              <OverlayAvatarName>{name || ''}</OverlayAvatarName>\n              <Dot style={{ background: avatarColor }} />\n            </OverlayAvatarItem>\n          );\n        }\n      )}\n    </ListWrap>\n  )\n}"],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AAA6D,uBAFjC;AAWrB,MAAMA,cAAyC,GAAIC,KAAK,IAAK;EAClE,MAAM;IAAEC,KAAK;IAAEC,OAAO,EAAEC;EAAY,CAAC,GAAGH,KAAK;EAC7C;EACA,MAAM,CAACI,YAAY,EAAEC,qBAAqB,CAAC,GAAGC,cAAK,CAACC,QAAQ,CAAS,CAAC,CAAC,CAAC;EAExE,oBACE,eAAC,gBAAQ,QACNN,KAAK,CAACO,GAAG,CACPC,IAAI,IAAK;IACR,MAAM;MAAEC,IAAI;MAAEC,KAAK;MAAEC,KAAK;MAAEV,OAAO;MAAEW;IAAI,CAAC,GAAGJ,IAAI;IACjD,MAAMK,WAAW,GAAGH,KAAK,IAAII,uBAAY,CAACH,KAAK,GAAGI,2BAAgB,CAAC;IACnE,oBACE,eAAC,yBAAiB;MAAC,GAAG,EAAEH;IAAI,gBAC1B,eAAC,yBAAiB,qBAChB,eAAC,oCAAiB,6BACZJ,IAAI;MACR,KAAK,EAAEK,WAAY;MACnB,SAAS,EAAE,KAAM;MACjB,gBAAgB,EAAEF,KAAK,KAAKR,YAAa;MACzC,sBAAsB,EAAGa,OAAO,IAAK;QACnC,IAAIA,OAAO,EAAE;UACXZ,qBAAqB,CAACO,KAAK,CAAC;QAC9B,CAAC,MAAM;UACLP,qBAAqB,CAAEa,kBAAkB,IAAK;YAC5C,OAAOA,kBAAkB,KAAKN,KAAK,GAAG,CAAC,CAAC,GAAGM,kBAAkB;UAC/D,CAAC,CAAC;QACJ;MACF,CAAE;MACF,OAAO,EAAEhB,OAAO,KAAK,MAAM;QAACC,WAAW,IAAIA,WAAW,CAACM,IAAI,CAACI,GAAG,CAAC;MAAA,CAAC;IAAE,GACnE,CACgB,eACpB,eAAC,yBAAiB,QAAEH,IAAI,IAAI,EAAE,CAAqB,eACnD,eAAC,WAAG;MAAC,KAAK,EAAE;QAAES,UAAU,EAAEL;MAAY;IAAE,EAAG,CACzB;EAExB,CAAC,CACF,CACQ;AAEf,CAAC;AAAA"}