{"version":3,"file":"MentionList.js","names":["VirtualList","styled","FixedSizeList","CSS_SCROLLBAR","MentionList","React","memo","props","items","onMention","onLoadMore","active","setActive","useState","itemData","useMemo","onClick","i","onMouseEnter","t","useTranslate","length","undefined","start","stop","onItemsRendered","ref","overflowX","overflowY","MentionItem"],"sources":["../../../../src/collaboration/mention/MentionList.tsx"],"sourcesContent":["import React, { useCallback, useState, useMemo, useRef } from 'react';\nimport { FixedSizeList } from 'react-window';\nimport InfiniteLoader from 'react-window-infinite-loader';\nimport styled from 'styled-components';\nimport { useTranslate } from '../../locale';\nimport { IMember, IMentionItemPropsData } from './items/MemberItem';\nimport { MentionItem } from './items/MemberItem';\nimport { MentionEmptyWrapper } from './styled';\nimport { CSS_SCROLLBAR } from '../../common';\n\nconst VirtualList: typeof FixedSizeList = styled(FixedSizeList)`\n${CSS_SCROLLBAR}\noverflow: overlay;\n` as any;\n\n\ntype IMentionListProps = {\n  // 列表显示的人\n  items: IMember[];\n  // 选择回调\n  onMention: (key: number) => void;\n  // 加载更多 \n  onLoadMore: (i: number, count: number) => Promise<void>;\n}\n\nexport const MentionList: React.FC<IMentionListProps> = React.memo((props: IMentionListProps) => {\n\n  const {\n    items,\n    onMention,\n    onLoadMore,\n  } = props;\n\n  const [active, setActive] = useState(0);\n\n  const itemData: IMentionItemPropsData = useMemo(\n    () => ({\n      items,\n      active: active,\n      onClick: (i: number) => onMention(i),\n      onMouseEnter: (i: number) => setActive(i),\n    }),\n    [items, active, setActive],\n  );\n\n  const t = useTranslate();\n\n  return (\n    items.length > 0 ?\n      <InfiniteLoader\n        isItemLoaded={(i) => items[i] !== undefined}\n        itemCount={999999}\n        loadMoreItems={(start, stop) => { onLoadMore(start, stop - start + 1); return; }}\n      >{\n          ({ onItemsRendered, ref }) => (\n            <VirtualList\n              ref={ref}\n              width={300}\n              height={300}\n              itemCount={items.length}\n              itemSize={54}\n              itemData={itemData}\n              onItemsRendered={onItemsRendered}\n              style={{\n                // animation: 'fadeIn',\n                // animationDuration: '.35s',\n                overflowX: 'hidden',\n                overflowY: 'overlay' as any,\n              }}\n              children={MentionItem}\n            />\n          )\n        }</InfiniteLoader>\n      :\n      <MentionEmptyWrapper>\n        <img src='https://img.alicdn.com/imgextra/i2/O1CN019Tgrpl25H3CCoowv1_!!6000000007500-55-tps-90-90.svg' alt=\"\" />\n        {t('wdn_mention_search_no_result')}\n      </MentionEmptyWrapper>\n  )\n});\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAA6C;AAAA;AAAA;AAAA,uBAPjB;AAS5B,MAAMA,WAAiC,gBAAG,IAAAC,yBAAM,EAACC,0BAAa,CAAC,6BAC7DC,qBAAa,CAEP;AAYD,MAAMC,WAAwC,gBAAGC,cAAK,CAACC,IAAI,CAAEC,KAAwB,IAAK;EAE/F,MAAM;IACJC,KAAK;IACLC,SAAS;IACTC;EACF,CAAC,GAAGH,KAAK;EAET,MAAM,CAACI,MAAM,EAAEC,SAAS,CAAC,GAAG,IAAAC,eAAQ,EAAC,CAAC,CAAC;EAEvC,MAAMC,QAA+B,GAAG,IAAAC,cAAO,EAC7C,OAAO;IACLP,KAAK;IACLG,MAAM,EAAEA,MAAM;IACdK,OAAO,EAAGC,CAAS,IAAKR,SAAS,CAACQ,CAAC,CAAC;IACpCC,YAAY,EAAGD,CAAS,IAAKL,SAAS,CAACK,CAAC;EAC1C,CAAC,CAAC,EACF,CAACT,KAAK,EAAEG,MAAM,EAAEC,SAAS,CAAC,CAC3B;EAED,MAAMO,CAAC,GAAG,IAAAC,oBAAY,GAAE;EAExB,OACEZ,KAAK,CAACa,MAAM,GAAG,CAAC,gBACd,eAAC,kCAAc;IACb,YAAY,EAAGJ,CAAC,IAAKT,KAAK,CAACS,CAAC,CAAC,KAAKK,SAAU;IAC5C,SAAS,EAAE,MAAO;IAClB,aAAa,EAAE,CAACC,KAAK,EAAEC,IAAI,KAAK;MAAEd,UAAU,CAACa,KAAK,EAAEC,IAAI,GAAGD,KAAK,GAAG,CAAC,CAAC;MAAE;IAAQ;EAAE,GAE/E,CAAC;IAAEE,eAAe;IAAEC;EAAI,CAAC,kBACvB,eAAC,WAAW;IACV,GAAG,EAAEA,GAAI;IACT,KAAK,EAAE,GAAI;IACX,MAAM,EAAE,GAAI;IACZ,SAAS,EAAElB,KAAK,CAACa,MAAO;IACxB,QAAQ,EAAE,EAAG;IACb,QAAQ,EAAEP,QAAS;IACnB,eAAe,EAAEW,eAAgB;IACjC,KAAK,EAAE;MACL;MACA;MACAE,SAAS,EAAE,QAAQ;MACnBC,SAAS,EAAE;IACb,CAAE;IACF,QAAQ,EAAEC;EAAY,EAEzB,CACe,gBAEpB,eAAC,2BAAmB,qCAClB;IAAK,GAAG,EAAC,6FAA6F;IAAC,GAAG,EAAC;EAAE,EAAG,GAC/GV,CAAC,CAAC,8BAA8B,CAAC,CACd;AAE5B,CAAC,CAAC;AAAC"}