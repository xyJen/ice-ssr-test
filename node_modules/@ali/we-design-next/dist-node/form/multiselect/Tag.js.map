{"version":3,"file":"Tag.js","names":["Tag","React","memo","props","label","closable","onClose","size","TagMore","omittedTags","len","length","Item","children","registerSize","itemKey","display","order","style","ref","useRef","mergedHidden","internalRegisterSize","width","useEffect","current","offsetWidth","overflowStyle","opacity","height","undefined","overflowY","pointerEvents","position","overflowProps"],"sources":["../../../../src/form/multiselect/Tag.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { SingleTagWrap, ItemWrap, TagContentWrap } from './styled';\nimport { IconClose } from '../../basic/icon';\nimport type { IMultiSelectProps } from './MultiSelect';\n\ntype IDisplayOption = { value: string, label: string };\n\nexport type ITagProps = Pick<IMultiSelectProps, 'size'> & {\n  label: string;\n  value: string;\n  closable?: boolean;\n  onClose?: (e: React.MouseEvent) => void;\n};\n\nexport const Tag = React.memo((props: ITagProps) => {\n  const { label, closable = true, onClose, size } = props;\n\n  return <SingleTagWrap size={size}>\n    <TagContentWrap>{label}</TagContentWrap>\n    {closable && (<IconClose size={12} onClick={onClose} />)}\n  </SingleTagWrap>;\n});\n\nexport type ITaMoreProps = Pick<IMultiSelectProps, 'size'> & {\n  omittedTags: IDisplayOption[];\n};\n\nexport const TagMore = React.memo((props: ITaMoreProps) => {\n  const { omittedTags, size } = props;\n  const len = omittedTags.length;\n  return <SingleTagWrap size={size}>\n    <TagContentWrap>+{len}...</TagContentWrap>\n  </SingleTagWrap>;\n});\n\ninterface ItemProps {\n  itemKey?: React.Key;\n  registerSize: (key: React.Key, width: number | null) => void;\n  display: boolean;\n  order: number;\n  children?: React.ReactNode;\n  style?: React.CSSProperties;\n}\n\nexport const Item = React.memo((props: ItemProps) => {\n  const { children, registerSize, itemKey, display, order, style } = props;\n  const ref = useRef<HTMLDivElement>(null);\n  const mergedHidden = !display;\n\n  const internalRegisterSize = (width: number | null) => {\n    registerSize(itemKey!, width);\n  }\n\n  useEffect(() => {\n    if (ref.current) {\n      internalRegisterSize(ref.current.offsetWidth);\n      return () => {\n        internalRegisterSize(null);\n      };\n    }\n  }, []);\n\n  let overflowStyle: React.CSSProperties = {\n    opacity: mergedHidden ? 0 : 1,\n    height: mergedHidden ? 0 : undefined,\n    overflowY: mergedHidden ? 'hidden' : undefined,\n    order: order,\n    pointerEvents: mergedHidden ? 'none' : undefined,\n    position: mergedHidden ? 'absolute' : undefined,\n  };\n\n\n  const overflowProps: React.HTMLAttributes<any> = {};\n  if (mergedHidden) {\n    overflowProps['aria-hidden'] = true;\n  }\n\n  return <ItemWrap ref={ref} {...overflowProps} style={{ ...overflowStyle, ...style }}>{children}</ItemWrap>;\n});\n"],"mappings":";;;;;;;;AAAA;AACA;AACA;AAA6C;AAAA;AAAA,uBADjB;AAarB,MAAMA,GAAG,gBAAGC,cAAK,CAACC,IAAI,CAAEC,KAAgB,IAAK;EAClD,MAAM;IAAEC,KAAK;IAAEC,QAAQ,GAAG,IAAI;IAAEC,OAAO;IAAEC;EAAK,CAAC,GAAGJ,KAAK;EAEvD,oBAAO,eAAC,qBAAa;IAAC,IAAI,EAAEI;EAAK,gBAC/B,eAAC,sBAAc,QAAEH,KAAK,CAAkB,EACvCC,QAAQ,iBAAK,eAAC,eAAS;IAAC,IAAI,EAAE,EAAG;IAAC,OAAO,EAAEC;EAAQ,EAAI,CAC1C;AAClB,CAAC,CAAC;AAAC;AAMI,MAAME,OAAO,gBAAGP,cAAK,CAACC,IAAI,CAAEC,KAAmB,IAAK;EACzD,MAAM;IAAEM,WAAW;IAAEF;EAAK,CAAC,GAAGJ,KAAK;EACnC,MAAMO,GAAG,GAAGD,WAAW,CAACE,MAAM;EAC9B,oBAAO,eAAC,qBAAa;IAAC,IAAI,EAAEJ;EAAK,gBAC/B,eAAC,sBAAc,aAAGG,GAAG,QAAqB,CAC5B;AAClB,CAAC,CAAC;AAAC;AAWI,MAAME,IAAI,gBAAGX,cAAK,CAACC,IAAI,CAAEC,KAAgB,IAAK;EACnD,MAAM;IAAEU,QAAQ;IAAEC,YAAY;IAAEC,OAAO;IAAEC,OAAO;IAAEC,KAAK;IAAEC;EAAM,CAAC,GAAGf,KAAK;EACxE,MAAMgB,GAAG,GAAG,IAAAC,aAAM,EAAiB,IAAI,CAAC;EACxC,MAAMC,YAAY,GAAG,CAACL,OAAO;EAE7B,MAAMM,oBAAoB,GAAIC,KAAoB,IAAK;IACrDT,YAAY,CAACC,OAAO,EAAGQ,KAAK,CAAC;EAC/B,CAAC;EAED,IAAAC,gBAAS,EAAC,MAAM;IACd,IAAIL,GAAG,CAACM,OAAO,EAAE;MACfH,oBAAoB,CAACH,GAAG,CAACM,OAAO,CAACC,WAAW,CAAC;MAC7C,OAAO,MAAM;QACXJ,oBAAoB,CAAC,IAAI,CAAC;MAC5B,CAAC;IACH;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,IAAIK,aAAkC,GAAG;IACvCC,OAAO,EAAEP,YAAY,GAAG,CAAC,GAAG,CAAC;IAC7BQ,MAAM,EAAER,YAAY,GAAG,CAAC,GAAGS,SAAS;IACpCC,SAAS,EAAEV,YAAY,GAAG,QAAQ,GAAGS,SAAS;IAC9Cb,KAAK,EAAEA,KAAK;IACZe,aAAa,EAAEX,YAAY,GAAG,MAAM,GAAGS,SAAS;IAChDG,QAAQ,EAAEZ,YAAY,GAAG,UAAU,GAAGS;EACxC,CAAC;EAGD,MAAMI,aAAwC,GAAG,CAAC,CAAC;EACnD,IAAIb,YAAY,EAAE;IAChBa,aAAa,CAAC,aAAa,CAAC,GAAG,IAAI;EACrC;EAEA,oBAAO,eAAC,gBAAQ;IAAC,GAAG,EAAEf;EAAI,GAAKe,aAAa;IAAE,KAAK,EAAE;MAAE,GAAGP,aAAa;MAAE,GAAGT;IAAM;EAAE,IAAEL,QAAQ,CAAY;AAC5G,CAAC,CAAC;AAAC"}