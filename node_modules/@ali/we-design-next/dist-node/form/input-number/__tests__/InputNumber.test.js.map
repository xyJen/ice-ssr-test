{"version":3,"file":"InputNumber.test.js","names":["test","r","render","expect","container","querySelector","toBeInTheDocument","fn","jest","not","toHaveBeenCalled","fireEvent","change","target","value","toHaveBeenCalledTimes","toHaveBeenLastCalledWith","nodes","querySelectorAll","incr","decr","map","i","item","click","n","mouseDown","Promise","res","setTimeout","mouseUp","toBeGreaterThan","toBeLessThan","keyDown","keyCode","KEY_CODES","ENTER","input","blur","toBeNull"],"sources":["../../../../../src/form/input-number/__tests__/InputNumber.test.tsx"],"sourcesContent":["import * as React from 'react';\nimport { render, fireEvent, screen } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport { InputNumber } from '../InputNumber';\nimport { KEY_CODES } from '../../../common';\n\ntest('InputNumber: should render content.', () => {\n  const r = render(<InputNumber value={2022} />);\n  expect(r.container.querySelector('[value=\"2022\"]')).toBeInTheDocument();\n});\n\ntest('InputNumber: should render content with digits.', () => {\n  const r = render(<InputNumber value={3} digits={2} />);\n  expect(r.container.querySelector('[value=\"3.00\"]')).toBeInTheDocument();\n});\n\ntest('InputNumber: should trigger onChange with keyboard input.', () => {\n  const fn = jest.fn();\n  const r = render(<InputNumber onChange={fn} />);\n  expect(fn).not.toHaveBeenCalled();\n  fireEvent.change(r.container.querySelector('input')!, { target: { value: '1' } });\n  expect(fn).toHaveBeenCalled();\n  expect(fn).toHaveBeenCalledTimes(1);\n  expect(fn).toHaveBeenLastCalledWith<[number]>(1);\n\n  fireEvent.change(r.container.querySelector('input')!, { target: { value: '' } });\n  expect(fn).toHaveBeenCalledTimes(2);\n  expect(fn).toHaveBeenLastCalledWith<[null]>(null);\n\n  fireEvent.change(r.container.querySelector('input')!, { target: { value: '-' } });\n  expect(r.container.querySelector('[value=\"-\"]')).toBeInTheDocument();\n  expect(fn).toHaveBeenCalledTimes(2);\n\n  fireEvent.change(r.container.querySelector('input')!, { target: { value: '-1' } });\n  expect(fn).toHaveBeenCalledTimes(3);\n  expect(fn).toHaveBeenLastCalledWith(-1);\n\n  fireEvent.change(r.container.querySelector('input')!, { target: { value: '-1.' } });\n  expect(fn).toHaveBeenCalledTimes(3);\n\n});\n\ntest('InputNumber: should trigger onChange with increase / decrease button.', () => {\n  const fn = jest.fn();\n  const r = render(<InputNumber onChange={fn} defaultValue={0} />);\n  const nodes = r.container.querySelectorAll('svg');\n  const [incr, decr] = [0, 1].map(i => nodes.item(i));\n\n  fireEvent.click(incr);\n  expect(fn).toHaveBeenCalledTimes(1);\n  expect(fn).toHaveBeenLastCalledWith<[number]>(1);\n\n  fireEvent.click(incr);\n  expect(fn).toHaveBeenCalledTimes(2);\n  expect(fn).toHaveBeenLastCalledWith<[number]>(2);\n\n  fireEvent.click(decr);\n  expect(fn).toHaveBeenCalledTimes(3);\n  expect(fn).toHaveBeenLastCalledWith<[number]>(1);\n});\n\ntest('InputNumber: should trigger onChange with increase / decrease button pressing.', async () => {\n  let i = 0;\n  const fn = jest.fn((n) => i = n);\n  const r = render(<InputNumber onChange={fn} defaultValue={0} />);\n  const nodes = r.container.querySelectorAll('svg');\n  const [incr, decr] = [0, 1].map(i => nodes.item(i));\n\n  fireEvent.mouseDown(incr);\n  await (new Promise(res => setTimeout(res, 2000)));\n  fireEvent.mouseUp(incr);\n  expect(fn).toHaveBeenCalled();\n  expect(i).toBeGreaterThan(3);\n\n  await (new Promise(res => setTimeout(res, 500)));\n\n  fireEvent.mouseDown(decr);\n  await (new Promise(res => setTimeout(res, 4000)));\n  fireEvent.mouseUp(decr);\n  expect(fn).toHaveBeenCalled();\n  expect(i).toBeLessThan(-3);\n\n}, 10000);\n\ntest('InputNumber: should not trigger onChange with increase / decrease button pressing shortly.', async () => {\n  let i = 0;\n  const fn = jest.fn((n) => i = n);\n  const r = render(<InputNumber onChange={fn} defaultValue={0} />);\n  const nodes = r.container.querySelectorAll('svg');\n  const [incr, decr] = [0, 1].map(i => nodes.item(i));\n  fireEvent.mouseDown(incr);\n  await (new Promise(res => setTimeout(res, 200)));\n  expect(fn).not.toHaveBeenCalled();\n  fireEvent.mouseUp(incr);\n});\n\ntest('InputNumber: should trigger onEnter.', () => {\n  const fn = jest.fn();\n  const r = render(<InputNumber onEnter={fn} defaultValue={0} />);\n  fireEvent.keyDown(r.container.querySelector('input')!, { keyCode: KEY_CODES.ENTER });\n  expect(fn).toHaveBeenCalledTimes(1);\n});\n\ntest('InputNumber: should trigger onBlur.', () => {\n  const fn = jest.fn();\n  const r = render(<InputNumber onBlur={fn} defaultValue={0} />);\n  const input = r.container.querySelector('input')!;\n  fireEvent.change(input, { target: { value: '-1.' } });\n  expect(r.container.querySelector('[value=\"-1.\"]')).toBeInTheDocument();\n\n  fireEvent.blur(input);\n  expect(fn).toHaveBeenCalled();\n  expect(r.container.querySelector('[value=\"-1.\"]')).toBeNull();\n  expect(r.container.querySelector('[value=\"-1\"]')).toBeInTheDocument();\n});"],"mappings":"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"}