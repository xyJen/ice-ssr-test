{"version":3,"file":"ColorWrap.js","names":["ColorWrap","Picker","ColorPicker","PureComponent","Component","constructor","props","handleChange","data","event","isValidColor","color","simpleCheckForValidColor","colors","toState","h","state","oldHue","setState","onChange","_input","_blur","onChangeComplete","debounce","handleSwatchHover","onSwatchHover","fn","getDerivedStateFromProps","nextProps","render","optionalEvents","propTypes","defaultProps","s","l","a"],"sources":["../../../../../../src/form/color-picker/sketch/common/ColorWrap.js"],"sourcesContent":["import React, { Component, PureComponent } from 'react';\nimport { debounce } from 'lodash-es';\nimport * as color from '../helpers/color';\n\nexport const ColorWrap = (Picker) => {\n  class ColorPicker extends (PureComponent || Component) {\n    constructor(props) {\n      super();\n\n      this.state = {\n        ...color.toState(props.color, 0),\n      };\n\n      this.debounce = debounce((fn, data, event) => {\n        fn(data, event);\n      }, 100);\n    }\n\n    static getDerivedStateFromProps(nextProps, state) {\n      return {\n        ...color.toState(nextProps.color, state.oldHue),\n      };\n    }\n\n    handleChange = (data, event) => {\n      const isValidColor = color.simpleCheckForValidColor(data);\n      if (isValidColor) {\n        const colors = color.toState(data, data.h || this.state.oldHue);\n        this.setState(colors);\n        this.props.onChange && this.props.onChange(colors, event);\n\n        // 不是来自输入框\n        // 如果来自输入框，需要是 blur 触发\n        if ((event._input && event._blur) || !event._input) {\n          this.props.onChangeComplete &&\n            this.debounce(this.props.onChangeComplete, colors, event);\n        }\n      }\n    };\n\n    handleSwatchHover = (data, event) => {\n      const isValidColor = color.simpleCheckForValidColor(data);\n      if (isValidColor) {\n        const colors = color.toState(data, data.h || this.state.oldHue);\n        this.props.onSwatchHover && this.props.onSwatchHover(colors, event);\n      }\n    };\n\n    render() {\n      const optionalEvents = {};\n      if (this.props.onSwatchHover) {\n        optionalEvents.onSwatchHover = this.handleSwatchHover;\n      }\n\n      return (\n        <Picker\n          {...this.props}\n          {...this.state}\n          onChange={this.handleChange}\n          {...optionalEvents}\n        />\n      );\n    }\n  }\n\n  ColorPicker.propTypes = {\n    ...Picker.propTypes,\n  };\n\n  ColorPicker.defaultProps = {\n    ...Picker.defaultProps,\n    color: {\n      h: 250,\n      s: 0.5,\n      l: 0.2,\n      a: 1,\n    },\n  };\n\n  return ColorPicker;\n};\n\nexport default ColorWrap;\n"],"mappings":"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"}