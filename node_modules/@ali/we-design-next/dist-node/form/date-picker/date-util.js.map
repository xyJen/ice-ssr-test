{"version":3,"file":"date-util.js","names":["dayjs","extend","weekday","localeData","DateController","getNow","getFixedDate","string","getEndDate","date","endOf","getWeekDay","clone","locale","firstDayOfWeek","getYear","year","getMonth","month","getDate","getHour","hour","getMinute","minute","getSecond","second","addYear","diff","add","addMonth","addDate","setYear","setMonth","setDate","num","setHour","setMinute","setSecond","isAfter","date1","date2","isValidate","isValid","getWeekFirstDay","getWeekFirstDate","getShortWeekDays","weekdaysMin","getShortMonths","monthsShort","format","getCellDateDisabled","cellDate","mode","disabledDate","getDisabledFromRange","currentMode","start","end","current","startDate","endDate","getWeekStartDate","value","weekFirstDay","monthStartDate","startDateWeekDay","alignStartDate","leftPad","str","length","fill","String","isNullEqual","value1","value2","undefined","isSameYear","year1","year2","equal","isSameMonth","month1","month2","isSameDate","isSameTime","time1","time2","isEqual","dayjsLocaleMonthBeforeYearConfig"],"sources":["../../../../src/form/date-picker/date-util.tsx"],"sourcesContent":["import dayjs, { Dayjs } from \"dayjs\";\nimport localeData from 'dayjs/plugin/localeData';\nimport weekday from \"dayjs/plugin/weekday\";\n\nimport \"dayjs/locale/zh-cn\";\nimport \"dayjs/locale/ja\";\nimport \"dayjs/locale/zh-hk\";\nimport \"dayjs/locale/zh-tw\";\n\ndayjs.extend(weekday);\ndayjs.extend(localeData);\n\ntype DateControllerType<DateType> = {\n  // Get\n  getWeekDay: (value: DateType) => number;\n  getSecond: (value: DateType) => number;\n  getMinute: (value: DateType) => number;\n  getHour: (value: DateType) => number;\n  getDate: (value: DateType) => number;\n  getMonth: (value: DateType) => number;\n  getYear: (value: DateType) => number;\n  getNow: () => DateType;\n  getFixedDate: (fixed: string) => DateType;\n  getEndDate: (value: DateType) => DateType;\n\n  // Set\n  addYear: (value: DateType, diff: number) => DateType;\n  addMonth: (value: DateType, diff: number) => DateType;\n  addDate: (value: DateType, diff: number) => DateType;\n  setYear: (value: DateType, year: number) => DateType;\n  setMonth: (value: DateType, month: number) => DateType;\n  setDate: (value: DateType, date: number) => DateType;\n  setHour: (value: DateType, hour: number) => DateType;\n  setMinute: (value: DateType, minute: number) => DateType;\n  setSecond: (value: DateType, second: number) => DateType;\n\n  // Compare\n  isAfter: (date1: DateType, date2: DateType) => boolean;\n  isValidate: (date: DateType) => boolean;\n\n  locale: {\n    getWeekFirstDay: (locale: string) => number;\n    getWeekFirstDate: (locale: string, value: DateType) => DateType;\n\n    format: (locale: string, date: DateType, format: string) => string;\n\n    getShortWeekDays: (locale: string) => string[];\n    getShortMonths: (locale: string) => string[];\n  };\n};\n\nexport const DateController: DateControllerType<Dayjs> = {\n  // get\n  getNow: () => dayjs(),\n  getFixedDate: (string) => dayjs(string, [\"YYYY-M-DD\", \"YYYY-MM-DD\"]),\n  getEndDate: (date) => date.endOf(\"month\"),\n  getWeekDay: (date) => {\n    const clone = date.locale(\"en\");\n    return clone.weekday() + clone.localeData().firstDayOfWeek();\n  },\n  getYear: (date) => date.year(),\n  getMonth: (date) => date.month(),\n  getDate: (date) => date.date(),\n  getHour: (date) => date.hour(),\n  getMinute: (date) => date.minute(),\n  getSecond: (date) => date.second(),\n\n  // set\n  addYear: (date, diff) => date.add(diff, \"year\"),\n  addMonth: (date, diff) => date.add(diff, \"month\"),\n  addDate: (date, diff) => date.add(diff, \"day\"),\n  setYear: (date, year) => date.year(year),\n  setMonth: (date, month) => date.month(month),\n  setDate: (date, num) => date.date(num),\n  setHour: (date, hour) => date.hour(hour),\n  setMinute: (date, minute) => date.minute(minute),\n  setSecond: (date, second) => date.second(second),\n\n  // Compare\n  isAfter: (date1, date2) => date1.isAfter(date2),\n  isValidate: (date) => date.isValid(),\n\n  locale: {\n    getWeekFirstDay: (locale) =>\n      dayjs().locale(locale).localeData().firstDayOfWeek(),\n    getWeekFirstDate: (locale, date) => date.locale(locale).weekday(0),\n    getShortWeekDays: (locale) =>\n      dayjs().locale(locale).localeData().weekdaysMin(),\n    getShortMonths: (locale) =>\n      dayjs().locale(locale).localeData().monthsShort(),\n    format: (locale, date, format) => date.locale(locale).format(format),\n  },\n};\n\nexport type PanelMode = \"year\" | \"month\" | \"date\";\n\nexport const getCellDateDisabled = ({\n  cellDate,\n  mode,\n  disabledDate,\n}: {\n  cellDate: Dayjs;\n  mode: PanelMode;\n  disabledDate?: (date: Dayjs) => boolean;\n}): boolean => {\n  if (!disabledDate) return false;\n\n  // 判断cell在此range是否是disabled\n  const getDisabledFromRange = (\n    currentMode: PanelMode,\n    start: number,\n    end: number\n  ) => {\n    let current = start;\n    while (current <= end) {\n      let date: Dayjs;\n      switch (currentMode) {\n        case \"date\":\n          date = DateController.setDate(cellDate, current);\n          if (!disabledDate(date)) {\n            return false;\n          }\n          break;\n\n        case \"month\":\n          date = DateController.setMonth(cellDate, current);\n          if (\n            !getCellDateDisabled({\n              cellDate: date,\n              mode: \"month\",\n              disabledDate,\n            })\n          ) {\n            return false;\n          }\n          break;\n\n        case \"year\":\n          date = DateController.setYear(cellDate, current);\n          if (\n            !getCellDateDisabled({\n              cellDate: date,\n              mode: \"year\",\n              disabledDate,\n            })\n          ) {\n            return false;\n          }\n          break;\n      }\n      current += 1;\n    }\n    return true;\n  };\n  switch (mode) {\n    case \"date\":\n      return disabledDate(cellDate);\n    case \"month\":\n      const startDate = 1;\n      const endDate = DateController.getDate(\n        DateController.getEndDate(cellDate)\n      );\n      return getDisabledFromRange(\"date\", startDate, endDate);\n    case \"year\":\n      return getDisabledFromRange(\"month\", 0, 11);\n  }\n};\n\nexport const getWeekStartDate = (locale: string, value: Dayjs) => {\n  const weekFirstDay = DateController.locale.getWeekFirstDay(locale);\n  const monthStartDate = DateController.setDate(value, 1);\n  const startDateWeekDay = DateController.getWeekDay(monthStartDate);\n\n  let alignStartDate = DateController.addDate(\n    monthStartDate,\n    weekFirstDay - startDateWeekDay\n  );\n\n  if (\n    DateController.getMonth(alignStartDate) ===\n      DateController.getMonth(value) &&\n    DateController.getDate(alignStartDate) > 1\n  ) {\n    alignStartDate = DateController.addDate(alignStartDate, -7);\n  }\n\n  return alignStartDate;\n};\n\nexport const leftPad = (\n  str: string | number,\n  length: number,\n  fill: string = \"0\"\n) => {\n  let current = String(str);\n  while (current.length < length) {\n    current = `${fill}${str}`;\n  }\n  return current;\n};\n\nexport function isNullEqual<T>(value1: T, value2: T): boolean | undefined {\n  if (!value1 && !value2) {\n    return true;\n  }\n  if (!value1 || !value2) {\n    return false;\n  }\n  return undefined;\n}\n\nexport const isSameYear = (year1: Dayjs | null, year2: Dayjs | null) => {\n  const equal = isNullEqual(year1, year2);\n  if (typeof equal === 'boolean') {\n    return equal;\n  }\n  return DateController.getYear(year1!) === DateController.getYear(year2!);\n};\n\nexport const isSameMonth = (month1: Dayjs | null, month2: Dayjs | null) => {\n  const equal = isNullEqual(month1, month2);\n  if (typeof equal === 'boolean') {\n    return equal;\n  }\n  return (\n    isSameYear(month1, month2) &&\n    DateController.getMonth(month1!) === DateController.getMonth(month2!)\n  );\n};\n\nexport const isSameDate = (date1: Dayjs | null, date2: Dayjs | null): boolean => {\n  const equal = isNullEqual(date1, date2);\n  if (typeof equal === 'boolean') {\n    return equal;\n  }\n  return (\n    isSameYear(date1, date2) &&\n    isSameMonth(date1, date2) &&\n    DateController.getDate(date1!) === DateController.getDate(date2!)\n  );\n};\n\nexport const isSameTime = (\n  time1: Dayjs | null,\n  time2: Dayjs | null,\n) => {\n  const equal = isNullEqual(time1, time2);\n  if (typeof equal === 'boolean') {\n    return equal;\n  }\n  return (\n    DateController.getHour(time1!) === DateController.getHour(time2!) &&\n    DateController.getMinute(time1!) === DateController.getMinute(time2!) &&\n    DateController.getSecond(time1!) === DateController.getSecond(time2!)\n  );\n}\n\nexport const isEqual = (value1: Dayjs | null, value2: Dayjs | null) => {\n  const equal = isNullEqual(value1, value2);\n  if (typeof equal === 'boolean') {\n    return equal;\n  }\n  return isSameDate(value1, value2) && isSameTime(value1, value2);\n};\n\nexport const dayjsLocaleMonthBeforeYearConfig: Record<string, boolean> = {\n  'zh-cn': false,\n  'zh-tw': false,\n  'zh-hk': false,\n  'ja': false,\n  'en': true,\n};"],"mappings":"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"}