{"version":3,"file":"Modal.js","names":["Modal","React","memo","forwardRef","props","fRef","title","footer","header","content","visible","onConfirm","onCancel","onClose","mask","dragMove","dragable","defaultPlacement","getContainer","document","body","rest","ref","useRef","headerRef","useEffect","current","aligner","createAligner","setAdditionalConstraint","constraint","dragger","createDragger","getOffset","setOffset","destroy","fn","e","keyCode","KEY_CODES","ESC","addEventListener","removeEventListener","t","useTranslate","ReactDOM","createPortal","mergeRestProps","mergeRef","renderReactNode","marginBottom","undefined","ele","placement","offsets","isAutoAlign","isStickingRight","isStickingBottom","placementAligner","start","end","per","s","r","match","n","parseInt","x","rx","px","prx","clientSize","winSize","Math","floor","ceil","alignX","left","right","alignY","top","bottom","size","min","max","additionConstraint","v","align","width","height","clientWidth","clientHeight","winWidth","winHeight","documentElement","ax","ay","cx","cy","tx","ty","style","transform","eleResizeObserver","ResizeObserver","observe","winResizeObserver","source","disconnect","isDragging","dragStartX","dragStartY","dragStartOffset","dx","pageX","dy","pageY","dragStart","dragEnd","attach","detach"],"sources":["../../../../src/display/modal/Modal.tsx"],"sourcesContent":["import React, { ReactNode, useRef, useEffect, DOMAttributes, ReactElement } from 'react';\nimport ReactDOM from 'react-dom';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { Button } from '../../basic/button';\nimport { IconButton } from '../../basic/icon-button';\nimport { ModalFooter } from './ModalFooter';\nimport { ModalHeader } from './ModalHeader';\nimport { MoadlRoot, ModalContainer, ModalMask, ModalHeaderTitle, ModalContent } from './styled';\nimport { IconClose } from '../../basic/icon';\nimport { useTranslate } from '../../locale';\nimport { KEY_CODES } from '../../common/consts';\nimport { IRestProps, mergeRef, mergeRestProps, IRenderReactNode, renderReactNode } from '../../common';\n\ntype IPlacement = 'center' | Partial<{\n  left: number | string;\n  right: number | string;\n  top: number | string;\n  bottom: number | string;\n}>;\n\ntype IRect = {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n};\n\ntype IModalProps = {\n  /**\n   * 标题\n   */\n  title?: React.ReactNode;\n  /**\n   * 自定义底部\n   */\n  footer?: IRenderReactNode<void>;\n  /**\n   * 自定义顶部\n   */\n  header?: IRenderReactNode<void>;\n  /**\n   * 内容\n   */\n  content?: ReactNode;\n  /**\n   * 是否可见\n   */\n  visible: boolean;\n  /**\n   * 位置\n   */\n  defaultPlacement?: IPlacement,\n  /**\n   * 确认事件\n   */\n  onConfirm?: () => void;\n  /**\n   * 取消事件\n   */\n  onCancel?: () => void;\n  /**\n   * 关闭事件（通过关闭按钮或键盘 ESC）\n   */\n  onClose?: () => void;\n  /**\n   * 是否带有背景遮罩\n   */\n  mask?: boolean | 'transparent';\n  /**\n   * 是否可拖拽\n   */\n  dragMove?: boolean | { constraint: () => IRect };\n  /**\n   * 对话框挂载的根节点\n   */\n  getContainer?: () => HTMLElement;\n} & IRestProps & DOMAttributes<HTMLDivElement>;\n\nexport const Modal = React.memo(\n  React.forwardRef(\n    (props: IModalProps, fRef: React.ForwardedRef<HTMLDivElement>) => {\n\n      const {\n        title,\n        footer,\n        header,\n        content,\n        visible,\n        onConfirm,\n        onCancel,\n        onClose,\n        mask,\n        dragMove: dragable,\n        defaultPlacement = 'center',\n        getContainer = () => document.body,\n        ...rest\n      } = props;\n\n      const ref = useRef<HTMLDivElement>(null);\n      const headerRef = useRef<HTMLDivElement>(null);\n\n      useEffect(() => {\n        if (visible && ref.current) {\n\n          const aligner = createAligner(ref.current, defaultPlacement);\n\n          if (typeof dragable === 'object') {\n            aligner.setAdditionalConstraint(dragable.constraint);\n          }\n          const dragger = (dragable && headerRef.current) ? createDragger(headerRef.current, aligner.getOffset, aligner.setOffset) : null;\n\n          return () => {\n            aligner.destroy();\n            dragger && dragger.destroy();\n          }\n        }\n      }, [visible, !!dragable]);\n\n      useEffect(() => {\n        if (onClose) {\n          const fn = (e: KeyboardEvent) => {\n            if (e.keyCode === KEY_CODES.ESC) {\n              onClose();\n            }\n          };\n          document.addEventListener('keydown', fn);\n          return () => {\n            document.removeEventListener('keydown', fn);\n          };\n        }\n      }, [onClose]);\n\n      const t = useTranslate();\n\n      return visible ? ReactDOM.createPortal(\n        <MoadlRoot>\n          {mask ? <ModalMask isTransparent={mask === 'transparent'} /> : null}\n          <ModalContainer {...mergeRestProps(rest, 'wdn-modal')} ref={mergeRef(fRef, ref)}>\n            {\n              renderReactNode(\n                header,\n                <ModalHeader ref={headerRef}>\n                  <ModalHeaderTitle move={!!dragable}>{title}</ModalHeaderTitle>\n                  <IconButton icon={<IconClose />} onClick={onClose} style={{ marginBottom: 16 }} />\n                </ModalHeader>,\n                undefined,\n              )\n            }\n            <ModalContent>{content}</ModalContent>\n            {\n              renderReactNode(\n                footer,\n                <ModalFooter\n                  cancel={<Button onClick={onCancel}>{t('wdn_cancel')}</Button>}\n                  confirm={<Button type=\"primary\" onClick={onConfirm}>{t('wdn_ok')}</Button>}\n                />,\n                undefined,\n              )\n            }\n          </ModalContainer>\n        </MoadlRoot >,\n        getContainer()\n      ) : null;\n    })\n);\n\n\nconst createAligner = (\n  ele: HTMLDivElement,\n  placement: IPlacement\n) => {\n\n  const offsets: [number, number] = [0, 0];\n\n  let isAutoAlign = true;\n  let isStickingRight = false;\n  let isStickingBottom = false;\n\n  const placementAligner = (start?: string | number, end?: string | number) => {\n\n    const per = (s: string) => {\n      const r = s.match(/^(\\d+)%$/);\n      if (r && r[1]) {\n        const n = parseInt(r[1]);\n        if (n >= 0 && n <= 100) {\n          return n / 100;\n        }\n      }\n      return 0;\n    }\n\n    let [x, rx, px, prx]: Array<number | null> = [null, null, null, null];\n\n    if (typeof start === 'number') {\n      x = start;\n    } else if (typeof start === 'string') {\n      px = per(start);\n    } else if (typeof end === 'number') {\n      rx = end;\n    } else if (typeof end === 'string') {\n      prx = per(end);\n    } else {\n      // start is undefined, and end is undefined\n      px = 0.5;\n    }\n\n    return (clientSize: number, winSize: number): number => {\n      if (x !== null) {\n        return x;\n      } else if (rx !== null) {\n        return winSize - rx - clientSize;\n      } else if (px !== null) {\n        return Math.floor(winSize * px - clientSize / 2);\n      } else if (prx !== null) {\n        return Math.ceil(winSize - winSize * prx - clientSize / 2);\n      } else {\n        return Math.floor(winSize * 0.5 - clientSize / 2);\n      }\n    };\n  };\n\n  const alignX = placement === 'center' ? placementAligner('50%') : placementAligner(placement.left, placement.right);\n  const alignY = placement === 'center' ? placementAligner('50%') : placementAligner(placement.top, placement.bottom);\n\n  \n  /**\n   * 将线段 [start, size] 限制在区间 [min, max] 中, 返回新线段的 start。\n   */\n  const constraint = (start: number, size: number, min: number, max: number) => {\n    if (max <= min) {\n      return min;\n    }\n    if (start < min) {\n      return min;\n    }\n    if (start + size > max) {\n      return max - size;\n    }\n    return start;\n  };\n\n  let additionConstraint: (v: IRect) => [number, number] = v => [v.left, v.top];\n\n  const align = () => {\n\n    const [width, height] = [ele.clientWidth, ele.clientHeight];\n    const [winWidth, winHeight] = [document.documentElement.clientWidth, document.documentElement.clientHeight];\n\n    const ax = isAutoAlign ? alignX(width, winWidth) : isStickingRight ? winWidth - width : offsets[0];\n    const ay = isAutoAlign ? alignY(height, winHeight) : isStickingBottom ? winHeight - height : offsets[1];\n\n    const cx = constraint(ax, width, 0, winWidth);\n    const cy = constraint(ay, height, 0, winHeight);\n\n    const [tx, ty] = additionConstraint({ left: cx, width, top: cy, height });\n\n    if (tx + width >= winWidth - 1) {\n      isStickingRight = true;\n    }\n    if (ty + height >= winHeight - 1) {\n      isStickingBottom = true;\n    }\n\n    offsets[0] = tx;\n    offsets[1] = ty;\n    ele.style.transform = `translate(${tx}px, ${ty}px)`;\n  };\n\n  const eleResizeObserver = new ResizeObserver(align);\n  eleResizeObserver.observe(ele);\n\n  const winResizeObserver = new ResizeObserver(align);\n  winResizeObserver.observe(document.documentElement);\n\n  return {\n\n    getOffset: (): [number, number] => {\n      return [...offsets];\n    },\n\n    setOffset: (source: [number, number]) => {\n      isAutoAlign = false;\n      offsets[0] = source[0];\n      offsets[1] = source[1];\n      isStickingRight = false;\n      isStickingBottom = false;\n      align();\n    },\n\n    setAdditionalConstraint: (fn: () => IRect) => {\n      additionConstraint = (v: IRect) => {\n        const r = fn();\n        return [\n          constraint(v.left, v.width, r.left, r.left + r.width),\n          constraint(v.top, v.height, r.top, r.top + r.height),\n        ];\n      }\n    },\n\n    destroy: () => {\n      eleResizeObserver.disconnect();\n      winResizeObserver.disconnect();\n    }\n  };\n};\n\nconst createDragger = (\n  ele: HTMLDivElement,\n  getOffset: () => [number, number],\n  setOffset: (offsets: [number, number]) => void,\n) => {\n\n  let isDragging = false;\n\n  let dragStartX = 0;\n  let dragStartY = 0;\n  let dragStartOffset: [number, number] | null = getOffset();\n\n  const dragMove = (e: MouseEvent) => {\n    if (isDragging && dragStartOffset !== null) {\n      const dx = e.pageX - dragStartX;\n      const dy = e.pageY - dragStartY;\n      setOffset([dragStartOffset[0] + dx, dragStartOffset[1] + dy]);\n    }\n  };\n\n  const dragStart = (e: MouseEvent) => {\n    if (isDragging) {\n      return;\n    }\n    dragStartX = e.pageX;\n    dragStartY = e.pageY;\n    dragStartOffset = getOffset();\n    isDragging = true;\n\n    document.addEventListener('mousemove', dragMove);\n    document.addEventListener('mouseup', dragEnd);\n  };\n\n\n\n  const dragEnd = (e: MouseEvent) => {\n    isDragging = false;\n    dragStartOffset = null;\n    document.removeEventListener('mousemove', dragMove);\n    document.removeEventListener('mouseup', dragEnd);\n  };\n\n  const attach = () => {\n    ele.addEventListener('mousedown', dragStart);\n  };\n\n  const detach = () => {\n    ele.removeEventListener('mousedown', dragStart);\n    document.removeEventListener('mousemove', dragMove);\n    document.removeEventListener('mouseup', dragEnd);\n  };\n\n  attach();\n\n  return {\n    destroy: detach\n  }\n};\n"],"mappings":"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"}