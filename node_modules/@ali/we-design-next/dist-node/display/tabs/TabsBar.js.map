{"version":3,"file":"TabsBar.js","names":["TabsNav","styled","div","TabsNavWrap","TabsNavList","TabsNavOperationWrapper","COLORS","WHITE","btnStyle","border","padding","height","width","display","alignItems","justifyContent","operaIconStyle","fontSize","TabsBar","props","activeKey","activeKeyProp","defaultActiveKey","onActiveTabChange","tabs","animated","isOperaBoxVisible","setOperaBoxVisible","React","useState","setActiveKey","useDefaultProp","key","navRef","useRef","navWrapRef","navListRef","scrollOffsetRef","lastWheelDirectionRef","inkBarRef","operaWrapRef","isMorePopoverVisible","setMorePopoverVisible","tabRefs","navWidthRef","navWrapWidthRef","navListWidthRef","activeKeyRef","current","onTabRef","useCallback","elem","updateWidth","offsetWidth","updateScrollOffset","newScroll","style","left","canScrollToLeft","classList","add","remove","useEffect","updateInk","activeTab","activeTabWrapper","parentElement","newOffset","offsetLeft","newWidth","initScrollOffset","navWrapWidth","navListWidth","currentOffset","parseFloat","startOffset","activeTabWidth","minOffset","Math","min","max","maxOffset","TAB_MARGIN","abs","handleResize","debounce","resizeObserver","ResizeObserver","forEach","tab","observe","disconnect","handleWheel","e","deltaX","deltaY","mixed","absX","absY","preventDefault","addEventListener","removeEventListener","moreMenuItems","useMemo","visibleStartOffset","visibleEndOffset","items","index","endOffset","prefix","title","disabled","push","selected","handleSelectMoreMenu","path","selectedKey","at","map","onClose"],"sources":["../../../../src/display/tabs/TabsBar.tsx"],"sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { debounce } from 'lodash';\nimport { IconMore } from '../../basic/icon';\nimport { TabsBarTab } from './TabsBarTab';\nimport { useDefaultProp, COLORS } from '../../common';\nimport { Button } from '../../basic/button';\nimport { Popover } from '../popover'\nimport { Menu } from '../menu';\nimport type { IMenuItem } from '../menu/Menu';\nimport { TabsInkBar } from './styled';\nimport { TAB_MARGIN } from './constants';\nimport type { ITabPanelProps } from './TabPanel';\nimport type { ITabsProps } from './Tabs';\n\ntype ITabsBarProps = {\n  tabs: ITabPanelProps[];\n} & ITabsProps;\n\nconst TabsNav = styled.div`\n  display: flex;\n  position: relative;\n  overflow: hidden;\n  flex: none;\n  &::after {\n    content: '';\n    position: absolute;\n    height: 1px;\n    left: 0px;\n    right: 0px;\n    bottom: 0px;\n    background: rgba(126, 134, 142, 0.16);\n  }\n`;\n\nconst TabsNavWrap = styled.div`\n  position: relative;\n  display: inline-block;\n  display: flex;\n  flex: auto;\n  align-self: stretch;\n  overflow: hidden;\n  white-space: nowrap;\n  transform: translate(0);\n`;\n\nconst TabsNavList = styled.div`\n  position: relative;\n  display: flex;\n`;\n\nconst TabsNavOperationWrapper = styled.div`\n  display: flex;\n  position: relative;\n  align-items: center;\n  align-self: stretch;\n  padding-left: 10px;\n  padding-bottom: 3px;\n  background: ${COLORS.WHITE};\n  &.tabs-can-scroll-to-left::after {\n    left: -30px;\n    top: 0px;\n    bottom: 0px;\n    width: 30px;\n    content: \"\";\n    position: absolute;\n    pointer-events: none;\n    transition: opacity 0.3s ease 0s;\n    box-shadow: rgb(0 0 0 / 8%) -10px 0px 8px -8px inset;\n  }\n`;\n\nconst btnStyle: React.CSSProperties = {\n  border: 'none',\n  padding: 0,\n  height: 28,\n  width: 28,\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n};\n\nconst operaIconStyle: React.CSSProperties = {\n  fontSize: 20,\n};\n\nexport const TabsBar: React.FC<ITabsBarProps> = (props) => {\n  const { activeKey: activeKeyProp, defaultActiveKey, onActiveTabChange, tabs, animated } = props;\n  const [isOperaBoxVisible, setOperaBoxVisible] = React.useState(false);\n  const [activeKey, setActiveKey] = useDefaultProp(defaultActiveKey || tabs[0]?.key, activeKeyProp, onActiveTabChange);\n  const navRef = React.useRef<HTMLDivElement>(null);\n  const navWrapRef = React.useRef<HTMLDivElement>(null);\n  const navListRef = React.useRef<HTMLDivElement>(null);\n  const scrollOffsetRef = React.useRef<number>(0);\n  const lastWheelDirectionRef = React.useRef<string>('');\n  const inkBarRef = React.useRef<HTMLDivElement>(null);\n  const operaWrapRef = React.useRef<HTMLDivElement>(null);\n  const [isMorePopoverVisible, setMorePopoverVisible] = React.useState(false);\n  const tabRefs = React.useRef<Record<string, HTMLDivElement>>({});\n  const navWidthRef = React.useRef<number>(0);\n  const navWrapWidthRef = React.useRef<number>(0);\n  const navListWidthRef = React.useRef<number>(0);\n  const activeKeyRef = React.useRef(activeKey);\n  activeKeyRef.current = activeKey;\n\n  const onTabRef = React.useCallback((key: string, elem: HTMLDivElement) => {\n    tabRefs.current[key] = elem;\n  }, []);\n\n  const updateWidth = React.useCallback(() => {\n    navWidthRef.current = navRef.current?.offsetWidth || 0;\n    navListWidthRef.current = navListRef.current?.offsetWidth || 0;\n    navWrapWidthRef.current = navWrapRef.current?.offsetWidth || 0;\n  }, []);\n\n  const updateScrollOffset = React.useCallback((newScroll: number) => {\n    if (!navListRef.current) return;\n    scrollOffsetRef.current = newScroll;\n    navListRef.current.style.left = newScroll + 'px';\n    if (operaWrapRef.current) {\n      const canScrollToLeft = scrollOffsetRef.current > (navWrapWidthRef.current - navListWidthRef.current);\n      if (canScrollToLeft) {\n        operaWrapRef.current.classList.add('tabs-can-scroll-to-left');\n      } else {\n        operaWrapRef.current.classList.remove('tabs-can-scroll-to-left');\n      }\n    }\n  }, []);\n\n  React.useEffect(() => {\n    updateWidth();\n  }, []);\n\n  const updateInk = React.useCallback(() => {\n    if (!inkBarRef.current) return;\n    const activeTab = tabRefs.current[activeKeyRef.current];\n    if (!activeTab) {\n      inkBarRef.current.style.left = '0px';\n      inkBarRef.current.style.width = '0px';\n    } else {\n      const activeTabWrapper = activeTab.parentElement as HTMLDivElement;\n      const newOffset = activeTabWrapper.offsetLeft;\n      inkBarRef.current.style.left = newOffset + 'px';\n      const newWidth = tabRefs.current[activeKeyRef.current]?.offsetWidth || 0;\n      inkBarRef.current.style.width = newWidth + 'px';\n    }\n  }, []);\n\n  const initScrollOffset = React.useCallback(() => {\n    const activeTab = tabRefs.current[activeKeyRef.current];\n    if (!navListRef.current || !navWrapRef.current || !activeKeyRef.current || !activeTab) {\n      return;\n    }\n    const navWrapWidth = navWrapWidthRef.current || navWrapRef.current.offsetWidth;\n    const navListWidth = navListWidthRef.current || navListRef.current.offsetWidth;\n    const currentOffset = parseFloat(navListRef.current.style.left);\n    const activeTabWrapper = activeTab.parentElement as HTMLDivElement;\n    const startOffset = activeTabWrapper.offsetLeft;\n    const activeTabWidth = activeTab.offsetWidth || 0;\n    const minOffset = Math.min(0, Math.max(navWrapWidth - navListWidth, -startOffset));\n    let maxOffset = navWrapWidth - (startOffset + activeTabWidth + TAB_MARGIN);\n    maxOffset = Math.min(0, Math.max(navWrapWidth - navListWidth, maxOffset));\n    if (currentOffset >= minOffset && currentOffset <= maxOffset) {\n      return;\n    }\n    if (Math.abs(minOffset - currentOffset) > Math.abs(maxOffset - currentOffset)) {\n      updateScrollOffset(maxOffset);\n    } else {\n      updateScrollOffset(minOffset);\n    }\n  }, []);\n\n  React.useEffect(() => {\n    updateInk();\n    initScrollOffset();\n  }, [activeKey]);\n\n\n  React.useEffect(() => {\n    const handleResize = debounce(() => {\n      updateWidth();\n      updateInk();\n      initScrollOffset();\n      setOperaBoxVisible(navListWidthRef.current > navWidthRef.current);\n    }, 200);\n    const resizeObserver = new ResizeObserver(handleResize);\n    // tab 内容变化也需要更新 ink 和 滚动偏移量\n    tabs.forEach((tab) => {\n      const { key } = tab;\n      const elem = tabRefs.current[key];\n      elem && resizeObserver.observe(elem);\n    });\n    navRef.current && resizeObserver.observe(navRef.current);\n    navWrapRef.current && resizeObserver.observe(navWrapRef.current);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [tabs]);\n\n  const handleWheel = React.useCallback((e: WheelEvent) => {\n    // 滚动时收起更多菜单\n    setMorePopoverVisible(false);\n    if (!navWrapRef.current || !navListRef.current) {\n      return;\n    }\n    const navWrapWidth = navWrapWidthRef.current || navWrapRef.current.offsetWidth;\n    const navListWidth = navListWidthRef.current || navListRef.current.offsetWidth;\n    if (navWrapWidth >= navListWidth) {\n      return false;\n    }\n    const { deltaX, deltaY } = e;\n    // Convert both to x & y since wheel only happened on PC\n    let mixed: number = 0;\n    const absX = Math.abs(deltaX);\n    const absY = Math.abs(deltaY);\n    if (absX === absY) {\n      mixed = lastWheelDirectionRef.current === 'x' ? deltaX : deltaY;\n    } else if (absX > absY) {\n      mixed = deltaX;\n      lastWheelDirectionRef.current = 'x';\n    } else {\n      mixed = deltaY;\n      lastWheelDirectionRef.current = 'y';\n    }\n    const minOffset = navWrapWidth - navListWidth;\n    const maxOffset = 0;\n    const newOffset = Math.min(\n      Math.max(-mixed + scrollOffsetRef.current, minOffset),\n      maxOffset,\n    );\n    updateScrollOffset(newOffset);\n\n    e.preventDefault();\n  }, []);\n\n  React.useEffect(() => {\n    if (navWrapRef.current) {\n      navWrapRef.current.addEventListener('wheel', handleWheel);\n    }\n    return () => {\n      if (navWrapRef.current) {\n        navWrapRef.current.removeEventListener('wheel', handleWheel);\n      }\n    }\n  }, [handleWheel]);\n\n  const moreMenuItems = React.useMemo<IMenuItem[]>(() => {\n    if (!isOperaBoxVisible || !isMorePopoverVisible || !navWrapRef.current) {\n      return [];\n    }\n    const navWrapWidth = navWrapWidthRef.current || navWrapRef.current.offsetWidth;\n    const visibleStartOffset = -scrollOffsetRef.current;\n    const visibleEndOffset = visibleStartOffset + navWrapWidth;\n    const items: IMenuItem[] = [];\n    let startOffset = 0;\n    tabs.forEach((tab, index) => {\n      const width = tabRefs.current[tab.key].offsetWidth;\n      const endOffset = startOffset + width;\n      if (!(startOffset >= visibleStartOffset && endOffset <= visibleEndOffset)) {\n        const { prefix, title, disabled, key } = tabs[index];\n        items.push({\n          key,\n          title,\n          prefix,\n          disabled,\n          selected: activeKey === key,\n        });  \n      }\n      startOffset = endOffset + TAB_MARGIN;\n    });\n    return items;\n  }, [isOperaBoxVisible, isMorePopoverVisible, tabs, activeKey]);\n\n  const handleSelectMoreMenu = React.useCallback((path: Array<string>) => {\n    const selectedKey = path.at(-1);\n    selectedKey && setActiveKey(selectedKey);\n    setMorePopoverVisible(false);\n  }, []);\n\n  return (\n    <TabsNav ref={navRef} className='wdn-tabs-nav'>\n      <TabsNavWrap\n        ref={navWrapRef}\n      >\n        <TabsNavList\n          ref={navListRef}\n        >\n          {\n            tabs.map((tab) => {\n              const { key, onClose, title, disabled, prefix } = tab;\n              return (\n                <TabsBarTab\n                  key={key}\n                  tabKey={key}\n                  onClose={onClose}\n                  title={title}\n                  prefix={prefix}\n                  disabled={disabled}\n                  onClick={setActiveKey}\n                  activeKey={activeKey}\n                  onRef={onTabRef}\n                />\n              );\n            })\n          }\n          <TabsInkBar\n            ref={inkBarRef}\n            animated={animated}\n            className=\"wdn-tabs-ink-bar\"\n          />\n        </TabsNavList>\n      </TabsNavWrap>\n      {\n        isOperaBoxVisible ? (\n          <TabsNavOperationWrapper ref={operaWrapRef}>\n            <Popover\n              content={<Menu items={moreMenuItems} onSelect={handleSelectMoreMenu} />}\n              placement=\"bottomLeft\"\n              trigger=\"click\"\n              visible={isMorePopoverVisible}\n              onVisibleChange={setMorePopoverVisible}\n            >\n              <Button\n                icon={\n                  <IconMore style={operaIconStyle}/>\n                }\n                style={btnStyle}\n              />\n            </Popover>\n          </TabsNavOperationWrapper>\n        ) : null\n      }\n    </TabsNav>\n  )\n}\n"],"mappings":"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"}