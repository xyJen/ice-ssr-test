{"version":3,"file":"useElementSize.js","names":["onResize","ele","fn","observer","ResizeObserver","width","clientWidth","height","clientHeight","observe","disconnect","useElementResize","ref","useEffect","current","useElementSizeRef","sizeRef","useRef","size","useElementSizeState","sizeState","setSizeState","useState"],"sources":["../../../../src/common/react/useElementSize.ts"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\n\ntype ElementSize = { width: number, height: number };\n\nconst onResize = (ele: HTMLElement, fn: (size: ElementSize) => void) => {\n  const observer = new ResizeObserver(() => fn({ width: ele.clientWidth, height: ele.clientHeight }));\n  observer.observe(ele);\n  return () => observer.disconnect();\n};\n\nexport const useElementResize = (ref: React.RefObject<HTMLElement>, fn: (c: ElementSize) => void) => {\n  useEffect(() => {\n    if (ref.current) {\n      return onResize(ref.current, fn);\n    }\n  }, [ref, fn]);\n};\n\n\nexport const useElementSizeRef = (ref: React.RefObject<HTMLElement>) => {\n  const sizeRef = useRef<ElementSize>({ width: -1, height: -1 });\n  useElementResize(ref, size => sizeRef.current = size);\n  return sizeRef;\n};\n\nexport const useElementSizeState = (ref: React.RefObject<HTMLElement>) => {\n  const [sizeState, setSizeState] = useState<ElementSize>({ width: -1, height: -1 });\n  useElementResize(ref, setSizeState);\n  return sizeState;\n};\n"],"mappings":";;;;;;;AAAA;AACA;AAIA,MAAMA,QAAQ,GAAG,CAACC,GAAgB,EAAEC,EAA+B,KAAK;EACtE,MAAMC,QAAQ,GAAG,IAAIC,+BAAc,CAAC,MAAMF,EAAE,CAAC;IAAEG,KAAK,EAAEJ,GAAG,CAACK,WAAW;IAAEC,MAAM,EAAEN,GAAG,CAACO;EAAa,CAAC,CAAC,CAAC;EACnGL,QAAQ,CAACM,OAAO,CAACR,GAAG,CAAC;EACrB,OAAO,MAAME,QAAQ,CAACO,UAAU,EAAE;AACpC,CAAC;AAEM,MAAMC,gBAAgB,GAAG,CAACC,GAAiC,EAAEV,EAA4B,KAAK;EACnG,IAAAW,gBAAS,EAAC,MAAM;IACd,IAAID,GAAG,CAACE,OAAO,EAAE;MACf,OAAOd,QAAQ,CAACY,GAAG,CAACE,OAAO,EAAEZ,EAAE,CAAC;IAClC;EACF,CAAC,EAAE,CAACU,GAAG,EAAEV,EAAE,CAAC,CAAC;AACf,CAAC;AAAC;AAGK,MAAMa,iBAAiB,GAAIH,GAAiC,IAAK;EACtE,MAAMI,OAAO,GAAG,IAAAC,aAAM,EAAc;IAAEZ,KAAK,EAAE,CAAC,CAAC;IAAEE,MAAM,EAAE,CAAC;EAAE,CAAC,CAAC;EAC9DI,gBAAgB,CAACC,GAAG,EAAEM,IAAI,IAAIF,OAAO,CAACF,OAAO,GAAGI,IAAI,CAAC;EACrD,OAAOF,OAAO;AAChB,CAAC;AAAC;AAEK,MAAMG,mBAAmB,GAAIP,GAAiC,IAAK;EACxE,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAG,IAAAC,eAAQ,EAAc;IAAEjB,KAAK,EAAE,CAAC,CAAC;IAAEE,MAAM,EAAE,CAAC;EAAE,CAAC,CAAC;EAClFI,gBAAgB,CAACC,GAAG,EAAES,YAAY,CAAC;EACnC,OAAOD,SAAS;AAClB,CAAC;AAAC"}