"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useEventCallback = void 0;
var _react = require("react");
/**
 * 生成固定的 event callback 函数，替代 useCallback，避免因 state/props 变化而频繁更新事件，提高性能
 * 源自 UseEvent 提案中提到的「足够接近(close enough)的实现」
 * 
 * 提案：https://github.com/reactjs/rfcs/pull/220
 * 实现：https://github.com/Volune/use-event-callback/blob/master/src/index.ts
 */

const useEventCallback = fn => {
  const fnRef = (0, _react.useRef)(fn);
  (0, _react.useLayoutEffect)(() => {
    fnRef.current = fn;
  });
  return (0, _react.useMemo)(() => (...args) => {
    const {
      current
    } = fnRef;
    return current(...args);
  }, []);
};
exports.useEventCallback = useEventCallback;
//# sourceMappingURL=useEventCallback.js.map