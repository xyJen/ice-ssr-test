"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useElementSizeState = exports.useElementSizeRef = exports.useElementResize = void 0;
var _react = require("react");
var _resizeObserverPolyfill = _interopRequireDefault(require("resize-observer-polyfill"));
const onResize = (ele, fn) => {
  const observer = new _resizeObserverPolyfill.default(() => fn({
    width: ele.clientWidth,
    height: ele.clientHeight
  }));
  observer.observe(ele);
  return () => observer.disconnect();
};
const useElementResize = (ref, fn) => {
  (0, _react.useEffect)(() => {
    if (ref.current) {
      return onResize(ref.current, fn);
    }
  }, [ref, fn]);
};
exports.useElementResize = useElementResize;
const useElementSizeRef = ref => {
  const sizeRef = (0, _react.useRef)({
    width: -1,
    height: -1
  });
  useElementResize(ref, size => sizeRef.current = size);
  return sizeRef;
};
exports.useElementSizeRef = useElementSizeRef;
const useElementSizeState = ref => {
  const [sizeState, setSizeState] = (0, _react.useState)({
    width: -1,
    height: -1
  });
  useElementResize(ref, setSizeState);
  return sizeState;
};
exports.useElementSizeState = useElementSizeState;
//# sourceMappingURL=useElementSize.js.map