{"version":3,"file":"BorderPicker.js","names":["BORDER_LAYOUTES","DEFAULT_BORDER","layout","color","style","BorderPicker","React","memo","props","defaultBorder","border","_border","onBorderChange","preset","DEFAULT_PRESET","setBorder","useDefaultProp","t","useTranslate","marginLeft","marginTop","flexGrow","BorderPickerLayout","onChange","map","key","icon","cloneElement","size","BorderPickerColor","visible","setVisible","useState","ref","useRef","marginRight","current","document","body","e","backgroundColor","BorderPickerStyle","it","op","find","p","BorderStyleDisplay","lineStyle","params","linearGradientSteps","units","colors","makeUpForRepeat","start","currenPosition","res","maxIndex","length","i","nextPosition","endPosition","width","inclination","angle","indent","repeatFrom","COLORS","WHITE","direction","height","renderColors","concat","startColors","slice","repeatColors","startUnits","repeatUnits","startLinear","repeatLinear","repeatStartPosition","steps","both","linear","backgroundImage","segs","seg","minWidth"],"sources":["../../../../src/office/border-picker/BorderPicker.tsx"],"sourcesContent":["import React, { ReactElement, useState, useRef } from 'react';\nimport { useDefaultProp, RowItem, Divider, COLORS } from '../../common';\nimport { Text, TextInline } from '../../basic/text';\nimport { Select } from '../../form/select';\nimport { Popover } from '../../display/popover';\nimport { ColorPicker } from '../../form/color-picker';\nimport {\n  IconBorderAll,\n  IconBorderNone,\n  IconBorderOuter,\n  IconBorderInner,\n  IconBorderInnerHorizon,\n  IconBorderInnerVertical,\n  IconBorderTop,\n  IconBorderBottom,\n  IconBorderLeft,\n  IconBorderRight,\n} from '../../basic/icon';\nimport {\n  BorderPickerWrapper,\n  BorderPickerMain,\n  BorderPickerFooter,\n  BorderPickerLayoutWrapper,\n  BorderPickerLayoutIconWrapper,\n  BorderPickerColorWrap,\n  BorderPickerColorButton,\n  BorderPickerColorRect,\n  BorderPickerStyleWrap,\n} from './styled';\nimport { DEFAULT_PRESET } from './presets';\nimport { useTranslate } from '../../locale';\n\ntype IBorderLayout = 'top' | 'bottom' | 'left' | 'right' | 'none' | 'outer' | 'inner' | 'horizon' | 'vertical' | 'all' | 'unselected';\n\nconst BORDER_LAYOUTES: Array<[IBorderLayout, ReactElement]> = [\n  ['outer', <IconBorderOuter />],\n  ['inner', <IconBorderInner />],\n  ['all', <IconBorderAll />],\n  ['left', <IconBorderLeft />],\n  ['vertical', <IconBorderInnerVertical />],\n  ['right', <IconBorderRight />],\n  ['top', <IconBorderTop />],\n  ['horizon', <IconBorderInnerHorizon />],\n  ['bottom', <IconBorderBottom />],\n];\n\ntype IBorderSegment = {\n  width: number;\n  units: number[];\n  inclination?: number;\n};\n\ntype IBorderStyle = IBorderSegment | Array<IBorderSegment | null>;\n\ntype IBorder = {\n  layout: IBorderLayout;\n  color: string;\n  style: string;\n};\n\nexport type IBorderStylePreset = Array<{ key: string, style: IBorderStyle }>;\n\ntype IBorderPickerProps = {\n\n  defaultBorder?: IBorder;\n\n  border?: IBorder;\n\n  onBorderChange?: (value: IBorder) => void;\n\n  preset?: IBorderStylePreset;\n\n};\n\nconst DEFAULT_BORDER: IBorder = {\n  layout: 'all',\n  color: '#000000',\n  style: 'Thin'\n};\n\nexport const BorderPicker = React.memo(\n  (props: IBorderPickerProps) => {\n\n    const {\n      defaultBorder = DEFAULT_BORDER,\n      border: _border,\n      onBorderChange,\n      preset = DEFAULT_PRESET,\n    } = props;\n\n    const [border, setBorder] = useDefaultProp(defaultBorder, _border, onBorderChange);\n\n    const t = useTranslate();\n\n    return <BorderPickerWrapper>\n      <BorderPickerMain>\n        <BorderPickerLayout color={border.color} layout={border.layout} onChange={layout => setBorder({ ...border, layout })} />\n        <div style={{ marginLeft: 16, marginTop: 0 }}>\n          <BorderPickerColor color={border.color} onChange={(color) => setBorder({ ...border, color })} />\n          <BorderPickerStyle color={border.color} preset={preset} style={border.style} onChange={style => { setBorder({ ...border, style }); }} />\n        </div>\n      </BorderPickerMain>\n      <Divider />\n      <BorderPickerFooter onClick={() => setBorder({ ...border, layout: 'none' })}>\n        <IconBorderNone />\n        <Text style={{ flexGrow: 1, marginLeft: 8 }}>{t('wdn_border_picker_no_border')}</Text>\n      </BorderPickerFooter>\n    </BorderPickerWrapper>\n  }\n);\n\nconst BorderPickerLayout = React.memo(\n  (props: { layout: string, color: string, onChange: (layout: IBorderLayout) => void }) => {\n\n    const { color, layout, onChange } = props;\n\n    return <BorderPickerLayoutWrapper style={{ color: color }}>{\n      BORDER_LAYOUTES.map(([key, icon]) => <BorderPickerLayoutIconWrapper onClick={() => onChange(key)} active={key === layout}>\n        {React.cloneElement(icon, { size: 20 })}\n      </BorderPickerLayoutIconWrapper>)\n    }</BorderPickerLayoutWrapper>;\n  }\n)\n\nconst BorderPickerColor = React.memo(\n  (props: { color: string, onChange: (color: string) => void }) => {\n\n    const {\n      color, onChange\n    } = props;\n\n    const [visible, setVisible] = useState<boolean>(false);\n\n    const t = useTranslate();\n\n    const ref = useRef<HTMLDivElement>(null);\n\n    return <BorderPickerColorWrap ref={ref}>\n      <TextInline style={{ marginRight: 8 }}>{t('wdn_color')}</TextInline>\n      <Popover\n        trigger='click'\n        placement='bottomLeft'\n        onVisibleChange={setVisible}\n        visible={visible}\n        getContainer={() => ref.current || document.body}\n        content={\n          <ColorPicker autoColor='#000000' color={color} onColorChange={(e) => {\n            e && onChange(e);\n            setVisible(false);\n          }} />\n        }\n      >\n        <BorderPickerColorButton>\n          <BorderPickerColorRect style={{ backgroundColor: color }} />\n        </BorderPickerColorButton>\n      </Popover>\n    </BorderPickerColorWrap>;\n  }\n);\n\nconst BorderPickerStyle = React.memo(\n  (props: { color: string, style: string, preset: IBorderStylePreset, onChange: (style: string) => void }) => {\n\n    const { color, style, preset, onChange } = props;\n\n    const t = useTranslate();\n\n    return <BorderPickerStyleWrap>\n      <TextInline style={{ marginRight: 8 }}>{t('wdn_border_picker_line_type')}</TextInline>\n      <Select\n        size='small'\n        value={style}\n        options={preset.map(it => it.key)}\n        renderOption={op => {\n          const border = preset.find(p => p.key === op.key);\n          if (border) {\n            return <Select.Option children={<BorderStyleDisplay color={color} style={border.style} />} />;\n          } else {\n            return <Select.Option />;\n          }\n        }}\n        renderValue={({ key }) => {\n          const border = preset.find(p => p.key === key);\n          if (border) {\n            return <BorderStyleDisplay color={color} style={border.style} />;\n          } else {\n            return null;\n          }\n        }}\n        onChange={(e) => onChange(e)}\n      />\n    </BorderPickerStyleWrap>;\n  }\n);\n\nconst BorderStyleDisplay = React.memo(\n  (props: { color: string, style: IBorderStyle }) => {\n    const { color, style } = props;\n\n    const lineStyle = (params: IBorderSegment, color: string): React.CSSProperties => {\n\n      const linearGradientSteps = (\n        units: number[],\n        colors: string[],\n        makeUpForRepeat: boolean,\n        start = 0\n      ) => {\n        let currenPosition = start;\n        let res = '';\n        const maxIndex = units.length - 1;\n        if (makeUpForRepeat && start > 0) {\n          res += `transparent 0px, transparent ${start}px,`;\n        }\n        for (let i = 0; i < maxIndex; i++) {\n          const nextPosition = currenPosition + units[i];\n          res += `${colors[i]} ${currenPosition}px, ${colors[i]} ${nextPosition}px,`;\n          currenPosition = nextPosition;\n        }\n        const endPosition = currenPosition + units[maxIndex];\n        res += `${colors[maxIndex]} ${currenPosition}px, ${colors[maxIndex]} ${endPosition}px`;\n        return [res, endPosition] as const;\n      };\n\n      const {\n        units,\n        width: size = 1,\n        inclination: angle,\n      } = params;\n\n      const [indent, repeatFrom] = [0, 0];\n\n      const colors = [color, COLORS.WHITE];\n\n      const direction = angle ? `${angle}deg` : 'to right';\n      const style: React.CSSProperties = {};\n      style.height = size;\n\n      if ((units.length === 0) || (colors.length === 0)) {\n        return style;\n      }\n\n      if (units.length === 1) {\n        style.backgroundColor = colors[0];\n        return style;\n      }\n\n      let renderColors = colors.concat();\n\n      while (renderColors.length < units.length) {\n        renderColors = renderColors.concat(renderColors);\n      }\n\n      const startColors = renderColors.slice(0, repeatFrom);\n      const repeatColors = renderColors.slice(repeatFrom);\n      const startUnits = units.slice(0, repeatFrom);\n      const repeatUnits = units.slice(repeatFrom);\n\n      let startLinear = '';\n      let repeatLinear = '';\n      let repeatStartPosition = indent;\n      if (startUnits.length !== 0) {\n        const [steps, endPosition] = linearGradientSteps(startUnits, startColors, true, indent);\n        startLinear = `linear-gradient(${direction},${steps})`;\n        repeatStartPosition = endPosition;\n      }\n      if (repeatUnits.length !== 0) {\n        const [steps] = linearGradientSteps(repeatUnits, repeatColors, false, repeatStartPosition);\n        repeatLinear = `repeating-linear-gradient(${direction},${steps})`;\n      }\n\n      const both = startLinear && repeatLinear\n      const linear = both ? `${startLinear}, ${repeatLinear}` : `${startLinear} ${repeatLinear}`;\n      style.backgroundImage = linear;\n      return style;\n    }\n\n    const segs = ('length' in style) ? style : [style];\n    return <>\n      {\n        segs.map(seg => seg ? <div style={{ width: 50, minWidth: '60px', height: 16, ...lineStyle(seg, color) }}></div> : <div style={{ width: 50, height: 2 }} />)\n      }\n    </>\n  }\n);\n"],"mappings":"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"}