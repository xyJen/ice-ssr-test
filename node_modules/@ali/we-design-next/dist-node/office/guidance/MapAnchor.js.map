{"version":3,"file":"MapAnchor.js","names":["Anchor","props","left","top","duration","dur","toFixed","transition","current","MapAnchor","place","remove","requestAnimationFrame","ReactDOM","render","ensureContainer","move","pLeft","pTop","dLeft","dTop","dist","Math","sqrt","unmountComponentAtNode","id","divEle","document","querySelector","ele","createElement","style","position","width","body","appendChild"],"sources":["../../../../src/office/guidance/MapAnchor.tsx"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { PosIcon } from './posIcon';\nimport { Pos } from './style';\n\nexport const Anchor = (props: { left: number, top: number, duration: number }) => {\n\n  const {\n    left = 0,\n    top = 0,\n    duration = 500,\n  } = props;\n\n  const dur = (duration / 1000).toFixed(3);\n\n  return <Pos style={{ top: top - 20, left: left - 10, transition: `top ${dur}s ease-in-out, left ${dur}s ease-in-out` }}>\n    <PosIcon />\n    <div className=\"circle\" />\n  </Pos>;\n};\n\n\n\n\nlet current: [number, number] | null = null;\n\n\nexport const MapAnchor = {\n\n  place: (left: number, top: number) => {\n    MapAnchor.remove();\n    requestAnimationFrame(\n      () => {\n        ReactDOM.render(<Anchor left={left} top={top} duration={0} />, ensureContainer());\n        current = [left, top];\n      }\n    );\n  },\n\n  move: (left: number, top: number) => {\n\n    if (current === null) {\n      return;\n    }\n\n    const [pLeft, pTop] = current;\n    const dLeft = left - pLeft;\n    const dTop = top - pTop;\n    const dist = Math.sqrt(dLeft * dLeft + dTop * dTop);\n    const duration = dist < 200 ? 200 : dist > 1000 ? 1000 : dist;\n\n    requestAnimationFrame(() => {\n      ReactDOM.render(<Anchor left={left} top={top} duration={duration} />, ensureContainer());\n      current = [left, top];\n    });\n  },\n\n  remove: () => {\n    ReactDOM.unmountComponentAtNode(ensureContainer());\n    current = null;\n  }\n};\n\n\n\nconst ensureContainer = (): HTMLDivElement => {\n\n  const id = 'wdn-map-anchor-root';\n\n  const divEle = document.querySelector(`div#${id}`);\n\n  if (!divEle) {\n    const ele = document.createElement('div');\n    ele.id = id;\n    ele.style.position = 'absolute';\n    ele.style.width = '100%';\n    ele.style.top = '0px';\n    ele.style.left = '0px';\n    document.body.appendChild(ele);\n  };\n\n  return document.querySelector(`div#${id}`)!;\n};"],"mappings":"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"}