{"version":3,"file":"toolbarLayout.js","names":["noopArr","styleWith0Arrow","width","styleWith1Arrow","styleWith2Arrow","ToolbarLayout","React","memo","props","onModeChange","defaultMode","mode","doubleLineToolbar","singleLineToolbar","onLayoutRender","noop","align","layout","style","restProps","layoutMode","setLayoutMode","useDefaultProp","layoutModeRef","useRef","current","needSwitchMode","onArrowClick","useCallback","throttle","background","backgroundColor","mergeRestProps","flexGrow"],"sources":["../../../../../../src/navigator/toolbar/layout/toolbarLayout/toolbarLayout.tsx"],"sourcesContent":["import { throttle, noop } from 'lodash-es';\nimport React, { useCallback, useMemo, useRef } from 'react';\nimport { mergeRestProps, useDefaultProp, } from '../../../../common';\nimport { IconArrowUp } from '../../../../basic/icon'\nimport { ToolbarLayoutWrapper } from './style';\nimport { SingLineItemLayout, DoubleLineItemLayout } from './itemLayout';\nimport type { IToolbarLayoutProps } from './interface';\nimport CSSTransitionGroup from 'react-transition-group/CSSTransitionGroup';\n\n\nconst noopArr: any[] = [];\nconst styleWith0Arrow = { width: '100%', };\nconst styleWith1Arrow = { width: 'calc(100% - 24px)', };\nconst styleWith2Arrow = { width: 'calc(100% - 48px)', };\nexport const ToolbarLayout = React.memo<IToolbarLayoutProps>((props) => {\n  const {\n    onModeChange,\n    defaultMode,\n    mode,\n    doubleLineToolbar,\n    singleLineToolbar,\n    onLayoutRender = noop,\n    align = 'left',\n    layout = 'fix-wrapper',\n    style,\n    ...restProps\n  } = props;\n\n  const [layoutMode, setLayoutMode] = useDefaultProp<'singleLine' | 'doubleLine'>(\n    defaultMode || ( doubleLineToolbar ? 'doubleLine' : 'singleLine'),\n    mode,\n    onModeChange,\n  );\n\n  const layoutModeRef = useRef<'singleLine' | 'doubleLine'>(layoutMode);\n  layoutModeRef.current = layoutMode;\n  \n  const needSwitchMode = doubleLineToolbar && singleLineToolbar;\n\n  const onArrowClick = useCallback(\n    throttle(() => {\n      setLayoutMode((layoutModeRef.current === 'singleLine') ? 'doubleLine' : 'singleLine');\n    }, 800),\n    []\n  );\n\n  const background = style?.background || style?.backgroundColor;\n\n  return (\n    <ToolbarLayoutWrapper {...mergeRestProps(restProps, `wdn-toolbar-layout ${layout}`)} style={style}>\n      <div className='wdn-toolbar-content'>\n        {\n          (align === 'center') && needSwitchMode && <div style={{ flexGrow: 0, width: 20 }} />\n        }\n        <CSSTransitionGroup\n          transitionName={'toolbar-left'}\n          className={`wdn-toolbar-items ${layoutMode} ${needSwitchMode ? 'with_switch' : ''}`}\n          transitionEnterTimeout={500}\n          transitionLeaveTimeout={300}\n          style={needSwitchMode ? (align === 'center' ? styleWith2Arrow : styleWith1Arrow ) : styleWith0Arrow}\n        >\n          {\n\n            layoutMode === 'singleLine'\n              ? <SingLineItemLayout background={background} key=\"singleLine\" autoFold={layout === 'fix-wrapper'} align={align} items={singleLineToolbar || noopArr} onLayoutRender={onLayoutRender} />\n              : <DoubleLineItemLayout background={background} key=\"doubleLine\" autoFold={layout === 'fix-wrapper'} align={align} items={doubleLineToolbar || noopArr} onLayoutRender={onLayoutRender} />\n          }\n        </CSSTransitionGroup>\n        {\n          needSwitchMode && (\n            <div className=\"wdn-icon-switch-wrapper\">\n              <IconArrowUp\n                className={`wdn-icon-switch ${(layoutMode === 'singleLine') ? 'rotate' : ''}`}\n                onClick={onArrowClick}\n              />\n            </div>\n          )\n        }\n      </div>\n    </ToolbarLayoutWrapper>\n  );\n});\n\n"],"mappings":"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"}