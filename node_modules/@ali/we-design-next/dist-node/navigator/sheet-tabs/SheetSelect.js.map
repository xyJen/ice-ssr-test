{"version":3,"file":"SheetSelect.js","names":["SHOW_SEARCH_INPUT_NUM","SheetSelect","React","memo","props","tabs","tab","setActiveTab","disabled","renderInlineTab","visible","setVisible","useState","searchValue","setSearchValue","t","useTranslate","searchedList","useMemo","filter","item","title","toLowerCase","includes","onVisibleChange","useCallback","e","listButton","mergeClassName","undefined","length","target","value","map","_tab","renderReactNode","key","hidden","height"],"sources":["../../../../src/navigator/sheet-tabs/SheetSelect.tsx"],"sourcesContent":["import React, { useState, useMemo, useCallback } from \"react\";\nimport { Popover } from \"../../display/popover\";\nimport { Tooltip } from \"../../display/tooltip\";\nimport { Input } from \"../../form/input\";\nimport { mergeClassName, renderReactNode } from \"../../common\";\nimport { useTranslate } from '../../locale';\nimport { InlineTab } from \"./InlineTab\";\nimport {\n  ListIcon,\n  IconWrapper,\n  SelectOverlay,\n  ListWrapper,\n  EmptyWrapper,\n  InputWrapper,\n} from \"./styled\";\nimport type { ISheetTabsProps } from \"./SheetTabs\";\n\ntype ISheetSelectProps = Pick<ISheetTabsProps, \"tabs\" | \"renderInlineTab\"> & {\n  tab: string;\n  setActiveTab: (key: string) => void;\n  disabled: boolean;\n};\n\nconst SHOW_SEARCH_INPUT_NUM = 10; // 超过10个工作表显示搜索框\n\nexport const SheetSelect = React.memo((props: ISheetSelectProps) => {\n  const { tabs, tab, setActiveTab, disabled, renderInlineTab } = props;\n  const [visible, setVisible] = useState<boolean>(false);\n  const [searchValue, setSearchValue] = useState<string>(\"\");\n  const t = useTranslate();\n\n  const searchedList = useMemo(\n    () =>\n      tabs.filter((item) =>\n        item.title.toLowerCase().includes(searchValue.toLowerCase())\n      ),\n    [tabs, searchValue]\n  );\n\n  const onVisibleChange = useCallback((e: boolean) => {\n    if (disabled || (e && visible)) {\n      setVisible(false);\n      setSearchValue(\"\");\n    } else {\n      setVisible(e);\n      !e && setSearchValue(\"\");\n    }\n  }, [visible, disabled]);\n\n  const listButton = (\n    <IconWrapper className={mergeClassName(visible ? \"active\" : undefined, disabled ? \"disabled\" : undefined)}>\n      <ListIcon />\n    </IconWrapper>\n  );\n\n  return (\n    <Popover\n      trigger=\"click\"\n      placement=\"topLeft\"\n      animation\n      content={\n        <SelectOverlay>\n          {tabs.length > SHOW_SEARCH_INPUT_NUM ? (\n            <InputWrapper>\n              <Input\n                placeholder={t('wdn_sheet_tabs_search')}\n                value={searchValue}\n                onChange={(e) => setSearchValue(e.target.value)}\n              />\n            </InputWrapper>\n          ) : null}\n          <ListWrapper\n            className={mergeClassName(!!searchValue ? \"searching\" : undefined)}\n          >\n            {searchedList.length > 0 ? (\n              searchedList.map((_tab) =>\n                renderReactNode(\n                  renderInlineTab,\n                  <InlineTab\n                    key={_tab.key}\n                    tab={_tab.key}\n                    title={_tab.title}\n                    hidden={_tab.hidden}\n                    searchValue={searchValue}\n                    selected={_tab.key === tab}\n                    onClick={() => {\n                      if (_tab.key === tab) return;\n                      setActiveTab(_tab.key);\n                      setVisible(false);\n                    }}\n                  />,\n                  { key: _tab.key }\n                )\n              )\n            ) : (\n              <EmptyWrapper>{t('wdn_sheet_tabs_search_empty')}</EmptyWrapper>\n            )}\n          </ListWrapper>\n        </SelectOverlay>\n      }\n      visible={visible}\n      onVisibleChange={onVisibleChange}\n    >\n      <div style={{ height: '100%' }}>\n        {disabled ? listButton : <Tooltip title={t('wdn_sheet_tabs_all')} placement=\"top\">\n          {listButton}\n        </Tooltip>}\n      </div>\n    </Popover>\n  );\n});\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOkB;AAAA;AAAA;AAAA,uBAbU;AAsB5B,MAAMA,qBAAqB,GAAG,EAAE,CAAC,CAAC;;AAE3B,MAAMC,WAAW,gBAAGC,cAAK,CAACC,IAAI,CAAEC,KAAwB,IAAK;EAClE,MAAM;IAAEC,IAAI;IAAEC,GAAG;IAAEC,YAAY;IAAEC,QAAQ;IAAEC;EAAgB,CAAC,GAAGL,KAAK;EACpE,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,GAAG,IAAAC,eAAQ,EAAU,KAAK,CAAC;EACtD,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAG,IAAAF,eAAQ,EAAS,EAAE,CAAC;EAC1D,MAAMG,CAAC,GAAG,IAAAC,oBAAY,GAAE;EAExB,MAAMC,YAAY,GAAG,IAAAC,cAAO,EAC1B,MACEb,IAAI,CAACc,MAAM,CAAEC,IAAI,IACfA,IAAI,CAACC,KAAK,CAACC,WAAW,EAAE,CAACC,QAAQ,CAACV,WAAW,CAACS,WAAW,EAAE,CAAC,CAC7D,EACH,CAACjB,IAAI,EAAEQ,WAAW,CAAC,CACpB;EAED,MAAMW,eAAe,GAAG,IAAAC,kBAAW,EAAEC,CAAU,IAAK;IAClD,IAAIlB,QAAQ,IAAKkB,CAAC,IAAIhB,OAAQ,EAAE;MAC9BC,UAAU,CAAC,KAAK,CAAC;MACjBG,cAAc,CAAC,EAAE,CAAC;IACpB,CAAC,MAAM;MACLH,UAAU,CAACe,CAAC,CAAC;MACb,CAACA,CAAC,IAAIZ,cAAc,CAAC,EAAE,CAAC;IAC1B;EACF,CAAC,EAAE,CAACJ,OAAO,EAAEF,QAAQ,CAAC,CAAC;EAEvB,MAAMmB,UAAU,gBACd,eAAC,mBAAW;IAAC,SAAS,EAAE,IAAAC,sBAAc,EAAClB,OAAO,GAAG,QAAQ,GAAGmB,SAAS,EAAErB,QAAQ,GAAG,UAAU,GAAGqB,SAAS;EAAE,0CACxG,eAAC,gBAAQ,OAAG,EAEf;EAED,oBACE,eAAC,gBAAO;IACN,OAAO,EAAC,OAAO;IACf,SAAS,EAAC,SAAS;IACnB,SAAS;IACT,OAAO,eACL,eAAC,qBAAa,QACXxB,IAAI,CAACyB,MAAM,GAAG9B,qBAAqB,gBAClC,eAAC,oBAAY,qBACX,eAAC,YAAK;MACJ,WAAW,EAAEe,CAAC,CAAC,uBAAuB,CAAE;MACxC,KAAK,EAAEF,WAAY;MACnB,QAAQ,EAAGa,CAAC,IAAKZ,cAAc,CAACY,CAAC,CAACK,MAAM,CAACC,KAAK;IAAE,EAChD,CACW,GACb,IAAI,eACR,eAAC,mBAAW;MACV,SAAS,EAAE,IAAAJ,sBAAc,EAAC,CAAC,CAACf,WAAW,GAAG,WAAW,GAAGgB,SAAS;IAAE,GAElEZ,YAAY,CAACa,MAAM,GAAG,CAAC,GACtBb,YAAY,CAACgB,GAAG,CAAEC,IAAI,IACpB,IAAAC,uBAAe,EACb1B,eAAe,eACf,eAAC,oBAAS;MACR,GAAG,EAAEyB,IAAI,CAACE,GAAI;MACd,GAAG,EAAEF,IAAI,CAACE,GAAI;MACd,KAAK,EAAEF,IAAI,CAACb,KAAM;MAClB,MAAM,EAAEa,IAAI,CAACG,MAAO;MACpB,WAAW,EAAExB,WAAY;MACzB,QAAQ,EAAEqB,IAAI,CAACE,GAAG,KAAK9B,GAAI;MAC3B,OAAO,EAAE,MAAM;QACb,IAAI4B,IAAI,CAACE,GAAG,KAAK9B,GAAG,EAAE;QACtBC,YAAY,CAAC2B,IAAI,CAACE,GAAG,CAAC;QACtBzB,UAAU,CAAC,KAAK,CAAC;MACnB;IAAE,EACF,EACF;MAAEyB,GAAG,EAAEF,IAAI,CAACE;IAAI,CAAC,CAClB,CACF,gBAED,eAAC,oBAAY,QAAErB,CAAC,CAAC,6BAA6B,CAAC,CAChD,CACW,CAEjB;IACD,OAAO,EAAEL,OAAQ;IACjB,eAAe,EAAEc;EAAgB,gBAEjC;IAAK,KAAK,EAAE;MAAEc,MAAM,EAAE;IAAO;EAAE,GAC5B9B,QAAQ,GAAGmB,UAAU,gBAAG,eAAC,gBAAO;IAAC,KAAK,EAAEZ,CAAC,CAAC,oBAAoB,CAAE;IAAC,SAAS,EAAC;EAAK,GAC9EY,UAAU,CACH,CACN,CACE;AAEd,CAAC,CAAC;AAAC"}