"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useClickOuterRef = exports.contains = void 0;
var _react = require("react");
const contains = (box, target) => {
  if (!box || !target) {
    return false;
  }
  if (typeof box.contains === 'function') {
    return box.contains(target);
  }
  while (target) {
    if (target === box) return true;
    // eslint-disable-next-line no-param-reassign
    target = target.parentElement;
  }
  return false;
};
exports.contains = contains;
const noopCallback = () => {};
const useClickOuterRef = (handler, on = true, eventName = 'click') => {
  const ref = (0, _react.useRef)(null);
  const callback = (0, _react.useRef)(() => {});
  callback.current = handler || noopCallback;
  (0, _react.useEffect)(() => {
    /**
     * 点击处理
     */
    const handleClickBody = event => {
      const isOuter = !ref.current || !event.target || !contains(ref.current, event.target);
      if (isOuter) {
        callback.current(event);
      }
    };
    if (on) {
      document.body.addEventListener(eventName, handleClickBody);
    }
    return () => {
      if (on) {
        document.body.removeEventListener(eventName, handleClickBody);
      }
    };
  }, [on, eventName]);
  return ref;
};
exports.useClickOuterRef = useClickOuterRef;
//# sourceMappingURL=useClickOuterRef.js.map