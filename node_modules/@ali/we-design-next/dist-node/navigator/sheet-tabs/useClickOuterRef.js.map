{"version":3,"file":"useClickOuterRef.js","names":["contains","box","target","parentElement","noopCallback","useClickOuterRef","handler","on","eventName","ref","useRef","callback","current","useEffect","handleClickBody","event","isOuter","document","body","addEventListener","removeEventListener"],"sources":["../../../../src/navigator/sheet-tabs/useClickOuterRef.tsx"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nexport const contains = (box: HTMLElement | null, target: HTMLElement | null): boolean => {\n  if (!box || !target) {\n    return false;\n  }\n  if (typeof box.contains === 'function') {\n    return box.contains(target);\n  }\n  while (target) {\n    if (target === box) return true;\n    // eslint-disable-next-line no-param-reassign\n    target = target.parentElement;\n  }\n  return false;\n};\ninterface ICallback {\n  (e: React.MouseEvent): void;\n}\nconst noopCallback = () => {};\nexport const useClickOuterRef = <\nT extends HTMLElement = HTMLElement\n>(handler: ICallback | undefined, on = true, eventName = 'click') => {\n  const ref = useRef<T>(null);\n  const callback = useRef<(...args: any) => any>(() => {});\n  callback.current = handler || noopCallback;\n  useEffect(() => {\n    /**\n     * 点击处理\n     */\n    const handleClickBody = (event: any): void => {\n      const isOuter = !ref.current\n        || !event.target\n        || !contains(ref.current, event.target as HTMLElement);\n      if (isOuter) {\n        callback.current(event);\n      }\n    };\n    if (on) {\n      document.body.addEventListener(eventName, handleClickBody);\n    }\n    return () => {\n      if (on) {\n        document.body.removeEventListener(eventName, handleClickBody);\n      }\n    };\n  }, [on, eventName]);\n  return ref;\n};"],"mappings":";;;;;;AAAA;AACO,MAAMA,QAAQ,GAAG,CAACC,GAAuB,EAAEC,MAA0B,KAAc;EACxF,IAAI,CAACD,GAAG,IAAI,CAACC,MAAM,EAAE;IACnB,OAAO,KAAK;EACd;EACA,IAAI,OAAOD,GAAG,CAACD,QAAQ,KAAK,UAAU,EAAE;IACtC,OAAOC,GAAG,CAACD,QAAQ,CAACE,MAAM,CAAC;EAC7B;EACA,OAAOA,MAAM,EAAE;IACb,IAAIA,MAAM,KAAKD,GAAG,EAAE,OAAO,IAAI;IAC/B;IACAC,MAAM,GAAGA,MAAM,CAACC,aAAa;EAC/B;EACA,OAAO,KAAK;AACd,CAAC;AAAC;AAIF,MAAMC,YAAY,GAAG,MAAM,CAAC,CAAC;AACtB,MAAMC,gBAAgB,GAAG,CAE9BC,OAA8B,EAAEC,EAAE,GAAG,IAAI,EAAEC,SAAS,GAAG,OAAO,KAAK;EACnE,MAAMC,GAAG,GAAG,IAAAC,aAAM,EAAI,IAAI,CAAC;EAC3B,MAAMC,QAAQ,GAAG,IAAAD,aAAM,EAAwB,MAAM,CAAC,CAAC,CAAC;EACxDC,QAAQ,CAACC,OAAO,GAAGN,OAAO,IAAIF,YAAY;EAC1C,IAAAS,gBAAS,EAAC,MAAM;IACd;AACJ;AACA;IACI,MAAMC,eAAe,GAAIC,KAAU,IAAW;MAC5C,MAAMC,OAAO,GAAG,CAACP,GAAG,CAACG,OAAO,IACvB,CAACG,KAAK,CAACb,MAAM,IACb,CAACF,QAAQ,CAACS,GAAG,CAACG,OAAO,EAAEG,KAAK,CAACb,MAAM,CAAgB;MACxD,IAAIc,OAAO,EAAE;QACXL,QAAQ,CAACC,OAAO,CAACG,KAAK,CAAC;MACzB;IACF,CAAC;IACD,IAAIR,EAAE,EAAE;MACNU,QAAQ,CAACC,IAAI,CAACC,gBAAgB,CAACX,SAAS,EAAEM,eAAe,CAAC;IAC5D;IACA,OAAO,MAAM;MACX,IAAIP,EAAE,EAAE;QACNU,QAAQ,CAACC,IAAI,CAACE,mBAAmB,CAACZ,SAAS,EAAEM,eAAe,CAAC;MAC/D;IACF,CAAC;EACH,CAAC,EAAE,CAACP,EAAE,EAAEC,SAAS,CAAC,CAAC;EACnB,OAAOC,GAAG;AACZ,CAAC;AAAC"}