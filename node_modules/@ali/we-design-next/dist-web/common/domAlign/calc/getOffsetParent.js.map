{"version":3,"file":"getOffsetParent.js","names":["utils","domUtils","getParent","getOffsetParent","element","isWindow","isDocument","doc","getDocument","body","positionStyle","css","skipStatic","nodeName","toLowerCase","parent"],"sources":["../../../../../src/common/domAlign/calc/getOffsetParent.tsx"],"sourcesContent":["import { utils } from '../utils/utils';\nimport { domUtils } from '../utils/dom-utils';\n\n/**\n * 得到会导致元素显示不全的祖先元素\n */\nconst { getParent } = domUtils;\n\n/**\n * 获取能影响该元素显示的祖先元素\n * 对于定位元素来说，即使最近的父级定位元素\n * 对于非定位元素来说，则返回直接父元素\n */\nfunction getOffsetParent(element: Window | Document | HTMLElement): HTMLElement | null {\n  if (utils.isWindow(element) || utils.isDocument(element)) { // Window或Document\n    return null;\n  }\n  // ie 这个也不是完全可行\n  /*\n   <div style=\"width: 50px;height: 100px;overflow: hidden\">\n   <div style=\"width: 50px;height: 100px;position: relative;\" id=\"d6\">\n   元素 6 高 100px 宽 50px<br/>\n   </div>\n   </div>\n   */\n  // element.offsetParent does the right thing in ie7 and below. Return parent with layout!\n  //  In other browsers it only includes elements with position absolute, relative or\n  // fixed, not elements with overflow set to auto or scroll.\n  //        if (UA.ie && ieMode < 8) {\n  //            return element.offsetParent;\n  //        }\n  // 统一的 offsetParent 方法\n  const doc = utils.getDocument(element as HTMLElement);\n  const body = doc.body;\n  let positionStyle = utils.css(element as HTMLElement, 'position');\n  const skipStatic = positionStyle === 'fixed' || positionStyle === 'absolute';\n\n  if (!skipStatic) {\n    // 当元素本身经过绝对定位或相对定位，且父级元素无经过定位的元素时，IE7-浏览器下，offsetParent是<html>\n    return element.nodeName.toLowerCase() === 'html'\n      ? null\n      : getParent(element) as HTMLElement | null;\n  }\n\n  for (\n    let parent = getParent(element);\n    parent && parent !== body && !utils.isDocument(parent);\n    parent = getParent(parent)\n  ) {\n    positionStyle = utils.css(parent as HTMLElement, 'position');\n    if (positionStyle !== 'static') {\n      return parent as HTMLElement;\n    }\n  }\n  return null;\n}\n\nexport default getOffsetParent;\n"],"mappings":"AAAA,SAASA,KAAK;AACd,SAASC,QAAQ;;AAEjB;AACA;AACA;AACA,IAAQC,SAAS,GAAKD,QAAQ,CAAtBC,SAAS;;AAEjB;AACA;AACA;AACA;AACA;AACA,SAASC,eAAe,CAACC,OAAwC,EAAsB;EACrF,IAAIJ,KAAK,CAACK,QAAQ,CAACD,OAAO,CAAC,IAAIJ,KAAK,CAACM,UAAU,CAACF,OAAO,CAAC,EAAE;IAAE;IAC1D,OAAO,IAAI;EACb;EACA;EACA;AACF;AACA;AACA;AACA;AACA;AACA;EACE;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAMG,GAAG,GAAGP,KAAK,CAACQ,WAAW,CAACJ,OAAO,CAAgB;EACrD,IAAMK,IAAI,GAAGF,GAAG,CAACE,IAAI;EACrB,IAAIC,aAAa,GAAGV,KAAK,CAACW,GAAG,CAACP,OAAO,EAAiB,UAAU,CAAC;EACjE,IAAMQ,UAAU,GAAGF,aAAa,KAAK,OAAO,IAAIA,aAAa,KAAK,UAAU;EAE5E,IAAI,CAACE,UAAU,EAAE;IACf;IACA,OAAOR,OAAO,CAACS,QAAQ,CAACC,WAAW,EAAE,KAAK,MAAM,GAC5C,IAAI,GACJZ,SAAS,CAACE,OAAO,CAAuB;EAC9C;EAEA,KACE,IAAIW,MAAM,GAAGb,SAAS,CAACE,OAAO,CAAC,EAC/BW,MAAM,IAAIA,MAAM,KAAKN,IAAI,IAAI,CAACT,KAAK,CAACM,UAAU,CAACS,MAAM,CAAC,EACtDA,MAAM,GAAGb,SAAS,CAACa,MAAM,CAAC,EAC1B;IACAL,aAAa,GAAGV,KAAK,CAACW,GAAG,CAACI,MAAM,EAAiB,UAAU,CAAC;IAC5D,IAAIL,aAAa,KAAK,QAAQ,EAAE;MAC9B,OAAOK,MAAM;IACf;EACF;EACA,OAAO,IAAI;AACb;AAEA,eAAeZ,eAAe"}