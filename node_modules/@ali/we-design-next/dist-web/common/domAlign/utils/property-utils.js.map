{"version":3,"file":"property-utils.js","names":["vendorPrefix","jsCssMap","Webkit","Moz","ms","O","getVendorPrefix","undefined","style","document","createElement","testProp","key","getTransitionName","getTransformName","setTransitionProperty","node","value","name","transitionProperty","setTransform","transform","getTransitionProperty","getTransformXY","window","getComputedStyle","getPropertyValue","matrix","replace","split","x","parseFloat","y","matrix2d","matrix3d","setTransformXY","xy","arr","match2d","match","match2dStr","map","item","join","match3d","match3dStr"],"sources":["../../../../../src/common/domAlign/utils/property-utils.tsx"],"sourcesContent":["let vendorPrefix: string | undefined;\n\nconst jsCssMap = {\n  Webkit: '-webkit-',\n  Moz: '-moz-',\n  // IE did it wrong again ...\n  ms: '-ms-',\n  O: '-o-',\n};\n\nfunction getVendorPrefix(): string {\n  if (vendorPrefix !== undefined) {\n    return vendorPrefix;\n  }\n  vendorPrefix = '';\n  const style = document.createElement('p').style;\n  const testProp = 'Transform';\n  for (const key in jsCssMap) {\n    if (key + testProp in style) {\n      vendorPrefix = key;\n    }\n  }\n  return vendorPrefix;\n}\n\nfunction getTransitionName(): string {\n  return getVendorPrefix()\n    ? `${getVendorPrefix()}TransitionProperty`\n    : 'transitionProperty';\n}\n\nfunction getTransformName(): string {\n  return getVendorPrefix() ? `${getVendorPrefix()}Transform` : 'transform';\n}\n\nfunction setTransitionProperty(node: HTMLElement, value: string) {\n  const name = getTransitionName();\n  if (name) {\n    node.style[name as any] = value;\n    if (name !== 'transitionProperty') {\n      node.style.transitionProperty = value;\n    }\n  }\n}\n\nfunction setTransform(node: HTMLElement, value: string) {\n  const name = getTransformName();\n  if (name) {\n    node.style[name as any] = value;\n    if (name !== 'transform') {\n      node.style.transform = value;\n    }\n  }\n}\n\nfunction getTransitionProperty(node: HTMLElement) {\n  return node.style.transitionProperty || node.style[getTransitionName() as any];\n}\n\nfunction getTransformXY(node: HTMLElement): { x: number, y: number } {\n  const style = window.getComputedStyle(node, null);\n  const transform =\n    style.getPropertyValue('transform') ||\n    style.getPropertyValue(getTransformName());\n  if (transform && transform !== 'none') {\n    const matrix = transform.replace(/[^0-9\\-.,]/g, '').split(',');\n    return {\n      x: parseFloat(matrix[12] || matrix[4]),\n      y: parseFloat(matrix[13] || matrix[5]),\n    };\n  }\n  return {\n    x: 0,\n    y: 0,\n  };\n}\n\nconst matrix2d: RegExp = /matrix\\((.*)\\)/;\nconst matrix3d: RegExp = /matrix3d\\((.*)\\)/;\n\nfunction setTransformXY(node: HTMLElement, xy: { x: number; y: number }): void {\n  const style = window.getComputedStyle(node, null);\n  const transform =\n    style.getPropertyValue('transform') ||\n    style.getPropertyValue(getTransformName());\n  if (transform && transform !== 'none') {\n    let arr;\n    const match2d: RegExpMatchArray | null = transform.match(matrix2d);\n    if (match2d) {\n      const match2dStr = match2d[1];\n      arr = match2dStr.split(',').map((item: string) => {\n        return parseFloat(item);\n      });\n      arr[4] = xy.x;\n      arr[5] = xy.y;\n      setTransform(node, `matrix(${arr.join(',')})`);\n    } else {\n      const match3d = transform.match(matrix3d);\n      if (!match3d) return;\n      const match3dStr = match3d[1];\n      arr = match3dStr.split(',').map(item => {\n        return parseFloat(item);\n      });\n      arr[12] = xy.x;\n      arr[13] = xy.y;\n      setTransform(node, `matrix3d(${arr.join(',')})`);\n    }\n  } else {\n    setTransform(\n      node,\n      `translateX(${xy.x}px) translateY(${xy.y}px) translateZ(0)`,\n    );\n  }\n}\n\nexport {\n  getTransformName,\n  setTransitionProperty,\n  getTransitionProperty,\n  getTransformXY,\n  setTransformXY,\n};"],"mappings":"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"}