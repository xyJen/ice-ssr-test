{"version":3,"file":"useElementSize.js","names":["useEffect","useRef","useState","ResizeObserver","onResize","ele","fn","observer","width","clientWidth","height","clientHeight","observe","disconnect","useElementResize","ref","current","useElementSizeRef","sizeRef","size","useElementSizeState","sizeState","setSizeState"],"sources":["../../../../src/common/react/useElementSize.ts"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\n\ntype ElementSize = { width: number, height: number };\n\nconst onResize = (ele: HTMLElement, fn: (size: ElementSize) => void) => {\n  const observer = new ResizeObserver(() => fn({ width: ele.clientWidth, height: ele.clientHeight }));\n  observer.observe(ele);\n  return () => observer.disconnect();\n};\n\nexport const useElementResize = (ref: React.RefObject<HTMLElement>, fn: (c: ElementSize) => void) => {\n  useEffect(() => {\n    if (ref.current) {\n      return onResize(ref.current, fn);\n    }\n  }, [ref, fn]);\n};\n\n\nexport const useElementSizeRef = (ref: React.RefObject<HTMLElement>) => {\n  const sizeRef = useRef<ElementSize>({ width: -1, height: -1 });\n  useElementResize(ref, size => sizeRef.current = size);\n  return sizeRef;\n};\n\nexport const useElementSizeState = (ref: React.RefObject<HTMLElement>) => {\n  const [sizeState, setSizeState] = useState<ElementSize>({ width: -1, height: -1 });\n  useElementResize(ref, setSizeState);\n  return sizeState;\n};\n"],"mappings":"AAAA,SAAgBA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAOC,cAAc,MAAM,0BAA0B;AAIrD,IAAMC,QAAQ,GAAG,SAAXA,QAAQ,CAAIC,GAAgB,EAAEC,EAA+B,EAAK;EACtE,IAAMC,QAAQ,GAAG,IAAIJ,cAAc,CAAC;IAAA,OAAMG,EAAE,CAAC;MAAEE,KAAK,EAAEH,GAAG,CAACI,WAAW;MAAEC,MAAM,EAAEL,GAAG,CAACM;IAAa,CAAC,CAAC;EAAA,EAAC;EACnGJ,QAAQ,CAACK,OAAO,CAACP,GAAG,CAAC;EACrB,OAAO;IAAA,OAAME,QAAQ,CAACM,UAAU,EAAE;EAAA;AACpC,CAAC;AAED,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgB,CAAIC,GAAiC,EAAET,EAA4B,EAAK;EACnGN,SAAS,CAAC,YAAM;IACd,IAAIe,GAAG,CAACC,OAAO,EAAE;MACf,OAAOZ,QAAQ,CAACW,GAAG,CAACC,OAAO,EAAEV,EAAE,CAAC;IAClC;EACF,CAAC,EAAE,CAACS,GAAG,EAAET,EAAE,CAAC,CAAC;AACf,CAAC;AAGD,OAAO,IAAMW,iBAAiB,GAAG,SAApBA,iBAAiB,CAAIF,GAAiC,EAAK;EACtE,IAAMG,OAAO,GAAGjB,MAAM,CAAc;IAAEO,KAAK,EAAE,CAAC,CAAC;IAAEE,MAAM,EAAE,CAAC;EAAE,CAAC,CAAC;EAC9DI,gBAAgB,CAACC,GAAG,EAAE,UAAAI,IAAI;IAAA,OAAID,OAAO,CAACF,OAAO,GAAGG,IAAI;EAAA,EAAC;EACrD,OAAOD,OAAO;AAChB,CAAC;AAED,OAAO,IAAME,mBAAmB,GAAG,SAAtBA,mBAAmB,CAAIL,GAAiC,EAAK;EACxE,gBAAkCb,QAAQ,CAAc;MAAEM,KAAK,EAAE,CAAC,CAAC;MAAEE,MAAM,EAAE,CAAC;IAAE,CAAC,CAAC;IAA3EW,SAAS;IAAEC,YAAY;EAC9BR,gBAAgB,CAACC,GAAG,EAAEO,YAAY,CAAC;EACnC,OAAOD,SAAS;AAClB,CAAC"}