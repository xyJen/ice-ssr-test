{"version":3,"file":"Tabs.js","names":["React","styled","TabsBar","TabsContent","useDefaultProp","TabsWrapper","div","getTabBarTabList","panes","tabList","Children","forEach","child","isValidElement","type","displayName","props","title","onClose","disabled","prefix","push","key","Tabs","memo","forwardRef","ref","children","onActiveTabChange","activeKeyProp","activeKey","defaultActiveKey","animated","keepMounted","rest","tabs","useMemo","setActive"],"sources":["../../../../src/display/tabs/Tabs.tsx"],"sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { TabsBar } from './TabsBar';\nimport { TabsContent } from './TabsContent';\nimport { useDefaultProp } from '../../common';\nimport type { ITabPanelProps } from './TabPanel';\nimport type { IRestProps } from '../../common/';\n\nexport type Size = 'normal' | 'small' | 'large';\n\nexport type ITabsProps = {\n  /**\n   * 保持被隐藏的节点不被卸载，默认为 true\n   */\n  keepMounted?: boolean;\n  /**\n   * activeKey发生变化时的回调函数\n   */\n  onActiveTabChange?: (activeKey: string) => void;\n  /**\n   * TODO:\n   * 'large' | 'normal' | 'small'，默认：normal\n   */\n  size?: Size;\n  /**\n   * 激活的 tabKey，默认：undefined\n   */\n  activeKey?: string;\n  /**\n   * 默认激活的 tabKey，默认：undefined，如果有activeKey，则忽略\n   */\n  defaultActiveKey?: string;\n  /**\n   * TODO: 支持键盘左右键进行切换tab，默认：true\n   */\n  keyboard?: boolean;\n  /**\n   * 变化Tab的时候是否有动画效果，默认：false\n   */\n  animated?: boolean;\n} & IRestProps & React.DOMAttributes<HTMLDivElement>;\n\nconst TabsWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst getTabBarTabList = (panes: React.ReactNode) => {\n  const tabList: ITabPanelProps[] = [];\n  React.Children.forEach(\n    panes as React.ReactElement[],\n    (child: React.ReactElement<ITabPanelProps>) => {\n      if (child && React.isValidElement(child) && (child.type as any).displayName === 'TabPanel') {\n        const { title, onClose, disabled, prefix } = child.props;\n        tabList.push({\n          key: child.key as string,\n          title,\n          onClose,\n          disabled,\n          prefix,\n        });\n      }\n    },\n  );\n  return tabList;\n};\n\nexport const Tabs = React.memo(React.forwardRef<HTMLDivElement, ITabsProps>((props, ref) => {\n  const { children, onActiveTabChange, activeKey: activeKeyProp, defaultActiveKey, animated, keepMounted = true, ...rest } = props;\n  const tabs = React.useMemo(() => getTabBarTabList(children), [children]);\n  const [activeKey, setActive] = useDefaultProp(defaultActiveKey || tabs[0]?.key, activeKeyProp, onActiveTabChange);\n\n  return (\n    <TabsWrapper ref={ref} {...rest}>\n      <TabsBar\n        tabs={tabs}\n        onActiveTabChange={setActive}\n        activeKey={activeKey}\n        defaultActiveKey={defaultActiveKey}\n        animated={animated}\n      />\n      <TabsContent\n        activeKey={activeKey}\n        animated={animated}\n        destroyInactiveTabPanel={!keepMounted}\n      >\n        {\n          children\n        }\n      </TabsContent>\n    </TabsWrapper>\n  )\n}));\n"],"mappings":";;;AAAA,OAAOA,KAAK,MAAM,OAAO;AAAC,qBACE;AAA5B,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,OAAO;AAChB,SAASC,WAAW;AACpB,SAASC,cAAc;AAsCvB,IAAMC,WAAW,gBAAGJ,MAAM,CAACK,GAAG,yCAG7B;AAED,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgB,CAAIC,KAAsB,EAAK;EACnD,IAAMC,OAAyB,GAAG,EAAE;EACpCT,KAAK,CAACU,QAAQ,CAACC,OAAO,CACpBH,KAAK,EACL,UAACI,KAAyC,EAAK;IAC7C,IAAIA,KAAK,iBAAIZ,KAAK,CAACa,cAAc,CAACD,KAAK,CAAC,IAAKA,KAAK,CAACE,IAAI,CAASC,WAAW,KAAK,UAAU,EAAE;MAC1F,mBAA6CH,KAAK,CAACI,KAAK;QAAhDC,KAAK,gBAALA,KAAK;QAAEC,OAAO,gBAAPA,OAAO;QAAEC,QAAQ,gBAARA,QAAQ;QAAEC,MAAM,gBAANA,MAAM;MACxCX,OAAO,CAACY,IAAI,CAAC;QACXC,GAAG,EAAEV,KAAK,CAACU,GAAa;QACxBL,KAAK,EAALA,KAAK;QACLC,OAAO,EAAPA,OAAO;QACPC,QAAQ,EAARA,QAAQ;QACRC,MAAM,EAANA;MACF,CAAC,CAAC;IACJ;EACF,CAAC,CACF;EACD,OAAOX,OAAO;AAChB,CAAC;AAED,OAAO,IAAMc,IAAI,gBAAGvB,KAAK,CAACwB,IAAI,eAACxB,KAAK,CAACyB,UAAU,CAA6B,UAACT,KAAK,EAAEU,GAAG,EAAK;EAAA;EAC1F,IAAQC,QAAQ,GAA2GX,KAAK,CAAxHW,QAAQ;IAAEC,iBAAiB,GAAwFZ,KAAK,CAA9GY,iBAAiB;IAAaC,aAAa,GAA8Db,KAAK,CAA3Fc,SAAS;IAAiBC,gBAAgB,GAA4Cf,KAAK,CAAjEe,gBAAgB;IAAEC,QAAQ,GAAkChB,KAAK,CAA/CgB,QAAQ;IAAA,qBAAkChB,KAAK,CAArCiB,WAAW;IAAXA,WAAW,mCAAG,IAAI;IAAKC,IAAI,iCAAKlB,KAAK;EAChI,IAAMmB,IAAI,GAAGnC,KAAK,CAACoC,OAAO,CAAC;IAAA,OAAM7B,gBAAgB,CAACoB,QAAQ,CAAC;EAAA,GAAE,CAACA,QAAQ,CAAC,CAAC;EACxE,sBAA+BvB,cAAc,CAAC2B,gBAAgB,eAAII,IAAI,CAAC,CAAC,CAAC,qBAAP,OAASb,GAAG,GAAEO,aAAa,EAAED,iBAAiB,CAAC;IAA1GE,SAAS;IAAEO,SAAS;EAE3B,oBACE,eAAC,WAAW;IAAC,GAAG,EAAEX;EAAI,GAAKQ,IAAI,gBAC7B,eAAC,OAAO;IACN,IAAI,EAAEC,IAAK;IACX,iBAAiB,EAAEE,SAAU;IAC7B,SAAS,EAAEP,SAAU;IACrB,gBAAgB,EAAEC,gBAAiB;IACnC,QAAQ,EAAEC;EAAS,EACnB,eACF,eAAC,WAAW;IACV,SAAS,EAAEF,SAAU;IACrB,QAAQ,EAAEE,QAAS;IACnB,uBAAuB,EAAE,CAACC;EAAY,GAGpCN,QAAQ,CAEE,CACF;AAElB,CAAC,CAAC,CAAC"}