{"version":3,"file":"MentionList.js","names":["React","useState","useMemo","FixedSizeList","InfiniteLoader","styled","useTranslate","MentionItem","MentionEmptyWrapper","CSS_SCROLLBAR","VirtualList","MentionList","memo","props","items","onMention","onLoadMore","active","setActive","itemData","onClick","i","onMouseEnter","t","length","undefined","start","stop","onItemsRendered","ref","overflowX","overflowY"],"sources":["../../../../src/collaboration/mention/MentionList.tsx"],"sourcesContent":["import React, { useCallback, useState, useMemo, useRef } from 'react';\nimport { FixedSizeList } from 'react-window';\nimport InfiniteLoader from 'react-window-infinite-loader';\nimport styled from 'styled-components';\nimport { useTranslate } from '../../locale';\nimport { IMember, IMentionItemPropsData } from './items/MemberItem';\nimport { MentionItem } from './items/MemberItem';\nimport { MentionEmptyWrapper } from './styled';\nimport { CSS_SCROLLBAR } from '../../common';\n\nconst VirtualList: typeof FixedSizeList = styled(FixedSizeList)`\n${CSS_SCROLLBAR}\noverflow: overlay;\n` as any;\n\n\ntype IMentionListProps = {\n  // 列表显示的人\n  items: IMember[];\n  // 选择回调\n  onMention: (key: number) => void;\n  // 加载更多 \n  onLoadMore: (i: number, count: number) => Promise<void>;\n}\n\nexport const MentionList: React.FC<IMentionListProps> = React.memo((props: IMentionListProps) => {\n\n  const {\n    items,\n    onMention,\n    onLoadMore,\n  } = props;\n\n  const [active, setActive] = useState(0);\n\n  const itemData: IMentionItemPropsData = useMemo(\n    () => ({\n      items,\n      active: active,\n      onClick: (i: number) => onMention(i),\n      onMouseEnter: (i: number) => setActive(i),\n    }),\n    [items, active, setActive],\n  );\n\n  const t = useTranslate();\n\n  return (\n    items.length > 0 ?\n      <InfiniteLoader\n        isItemLoaded={(i) => items[i] !== undefined}\n        itemCount={999999}\n        loadMoreItems={(start, stop) => { onLoadMore(start, stop - start + 1); return; }}\n      >{\n          ({ onItemsRendered, ref }) => (\n            <VirtualList\n              ref={ref}\n              width={300}\n              height={300}\n              itemCount={items.length}\n              itemSize={54}\n              itemData={itemData}\n              onItemsRendered={onItemsRendered}\n              style={{\n                // animation: 'fadeIn',\n                // animationDuration: '.35s',\n                overflowX: 'hidden',\n                overflowY: 'overlay' as any,\n              }}\n              children={MentionItem}\n            />\n          )\n        }</InfiniteLoader>\n      :\n      <MentionEmptyWrapper>\n        <img src='https://img.alicdn.com/imgextra/i2/O1CN019Tgrpl25H3CCoowv1_!!6000000007500-55-tps-90-90.svg' alt=\"\" />\n        {t('wdn_mention_search_no_result')}\n      </MentionEmptyWrapper>\n  )\n});\n"],"mappings":";AAAA,OAAOA,KAAK,IAAiBC,QAAQ,EAAEC,OAAO,QAAgB,OAAO;AAAC,qBAC1C;AAA5B,SAASC,aAAa,QAAQ,cAAc;AAC5C,OAAOC,cAAc,MAAM,8BAA8B;AACzD,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,YAAY;AAErB,SAASC,WAAW;AACpB,SAASC,mBAAmB;AAC5B,SAASC,aAAa;AAEtB,IAAMC,WAAiC,gBAAGL,MAAM,CAACF,aAAa,CAAC,6BAC7DM,aAAa,CAEP;AAYR,OAAO,IAAME,WAAwC,gBAAGX,KAAK,CAACY,IAAI,CAAC,UAACC,KAAwB,EAAK;EAE/F,IACEC,KAAK,GAGHD,KAAK,CAHPC,KAAK;IACLC,SAAS,GAEPF,KAAK,CAFPE,SAAS;IACTC,UAAU,GACRH,KAAK,CADPG,UAAU;EAGZ,gBAA4Bf,QAAQ,CAAC,CAAC,CAAC;IAAhCgB,MAAM;IAAEC,SAAS;EAExB,IAAMC,QAA+B,GAAGjB,OAAO,CAC7C;IAAA,OAAO;MACLY,KAAK,EAALA,KAAK;MACLG,MAAM,EAAEA,MAAM;MACdG,OAAO,EAAE,iBAACC,CAAS;QAAA,OAAKN,SAAS,CAACM,CAAC,CAAC;MAAA;MACpCC,YAAY,EAAE,sBAACD,CAAS;QAAA,OAAKH,SAAS,CAACG,CAAC,CAAC;MAAA;IAC3C,CAAC;EAAA,CAAC,EACF,CAACP,KAAK,EAAEG,MAAM,EAAEC,SAAS,CAAC,CAC3B;EAED,IAAMK,CAAC,GAAGjB,YAAY,EAAE;EAExB,OACEQ,KAAK,CAACU,MAAM,GAAG,CAAC,gBACd,eAAC,cAAc;IACb,YAAY,EAAE,sBAACH,CAAC;MAAA,OAAKP,KAAK,CAACO,CAAC,CAAC,KAAKI,SAAS;IAAA,CAAC;IAC5C,SAAS,EAAE,MAAO;IAClB,aAAa,EAAE,uBAACC,KAAK,EAAEC,IAAI,EAAK;MAAEX,UAAU,CAACU,KAAK,EAAEC,IAAI,GAAGD,KAAK,GAAG,CAAC,CAAC;MAAE;IAAQ;EAAE,GAE/E;IAAA,IAAGE,eAAe,QAAfA,eAAe;MAAEC,GAAG,QAAHA,GAAG;IAAA,oBACrB,eAAC,WAAW;MACV,GAAG,EAAEA,GAAI;MACT,KAAK,EAAE,GAAI;MACX,MAAM,EAAE,GAAI;MACZ,SAAS,EAAEf,KAAK,CAACU,MAAO;MACxB,QAAQ,EAAE,EAAG;MACb,QAAQ,EAAEL,QAAS;MACnB,eAAe,EAAES,eAAgB;MACjC,KAAK,EAAE;QACL;QACA;QACAE,SAAS,EAAE,QAAQ;QACnBC,SAAS,EAAE;MACb,CAAE;MACF,QAAQ,EAAExB;IAAY,EACtB;EAAA,CACH,CACe,gBAEpB,eAAC,mBAAmB,qCAClB;IAAK,GAAG,EAAC,6FAA6F;IAAC,GAAG,EAAC;EAAE,EAAG,GAC/GgB,CAAC,CAAC,8BAA8B,CAAC,CACd;AAE5B,CAAC,CAAC"}