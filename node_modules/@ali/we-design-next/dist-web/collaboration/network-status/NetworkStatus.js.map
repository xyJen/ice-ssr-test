{"version":3,"file":"NetworkStatus.js","names":["React","Box","TextWrapper","dayjs","useTranslate","COLORS","localeData","extend","infoMap","success","color","LIGHT","LEVEL2_BASE_COLOR","icon","info","LEVEL3_BASE_COLOR","error","offline","NetworkStatus","memo","props","status","title","collapse","onClick","t","render","type","txt"],"sources":["../../../../src/collaboration/network-status/NetworkStatus.tsx"],"sourcesContent":["import React from 'react'\nimport { Box, TextWrapper } from './styled'\nimport dayjs from 'dayjs';\nimport { useTranslate } from '../../locale';\nimport { COLORS } from '../../common';\nimport localeData from 'dayjs/plugin/localeData';\ndayjs.extend(localeData);\n\ntype ConnectState = \"inited\" | \"connecting\" | \"silent_connecting\" | \"opened\" | \"closing\" | \"closed\" | \"offline\" | \"reconnecting\" | \"token_expired\" | \"access_denied\" | \"file_not_exist\" | \"document_been_migrated\";\n\ntype SaveState = 'save-processing' | 'saved' | 'saved-success' | 'save-failed';\n\ntype TipType = 'success' | 'info' | 'error' | 'offline';\n\nconst infoMap: Record<TipType, { icon: React.ReactElement; color: string; }> = {\n  success: {\n    color: COLORS.LIGHT.LEVEL2_BASE_COLOR,\n    icon: (\n      <svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\" stroke=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M10 3C12.7614 3 15 5.23858 15 8C15 10.7614 12.7614 13 10 13H3.5C2.11929 13 1 11.8807 1 10.5C1 9.11929 2.11929 8 3.5 8C3.67163 8 3.83886 8.01722 4.0002 8.04995C4.00578 8.7324 4.12548 9.38866 4.34154 9.99996L5.28438 9.66671C5.10035 9.14605 5 8.58529 5 8C5 5.23858 7.23858 3 10 3ZM4.07525 7.04713C3.8879 7.01611 3.69571 7 3.5 7C1.567 7 0 8.567 0 10.5C0 12.433 1.567 14 3.5 14H10C13.3137 14 16 11.3137 16 8C16 4.68629 13.3137 2 10 2C7.01057 2 4.53176 4.18626 4.07525 7.04713ZM13.4536 6.85355L9.5 10.8071L7.14645 8.45355L7.85355 7.74645L9.5 9.39289L12.7464 6.14645L13.4536 6.85355Z\" />\n    </svg>\n    ),\n  },\n  info: {\n    color: COLORS.LIGHT.LEVEL3_BASE_COLOR,\n    icon: (\n      <img\n        width=\"16\"\n        height=\"16\"\n        src=\"https://img.alicdn.com/imgextra/i3/O1CN01UGvMHI24U2rwXUkQt_!!6000000007393-1-tps-48-48.gif\"\n      />\n    ),\n  },\n  error: {\n    color: COLORS.LIGHT.LEVEL3_BASE_COLOR,\n    icon: <svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\" stroke=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M3.63135 2.33783L14.6313 14.3378L15.3685 13.6621L4.3685 1.66211L3.63135 2.33783ZM16 7.99997C16 9.34387 15.5582 10.5846 14.8118 11.5847L14.1194 10.8346C14.6748 10.029 15 9.05247 15 7.99997C15 5.23855 12.7614 2.99997 10 2.99997C9.0906 2.99997 8.2379 3.24275 7.50319 3.66704L6.81072 2.91686C7.73462 2.33596 8.82807 1.99997 10 1.99997C13.3137 1.99997 16 4.68626 16 7.99997ZM5 7.99997C5 7.24413 5.16771 6.52746 5.46795 5.88515L4.74501 5.10197C4.41672 5.696 4.18623 6.35161 4.07525 7.0471C3.8879 7.01608 3.69571 6.99997 3.5 6.99997C1.567 6.99997 0 8.56697 0 10.5C0 12.433 1.567 14 3.5 14H10C10.8802 14 11.7162 13.8104 12.4693 13.4699L11.7462 12.6866C11.2026 12.8892 10.6142 13 10 13H3.5C2.11929 13 1 11.8807 1 10.5C1 9.11926 2.11929 7.99997 3.5 7.99997C3.67163 7.99997 3.83886 8.01719 4.0002 8.04992C4.00578 8.73237 4.12548 9.38863 4.34154 9.99993L5.28438 9.66668C5.10035 9.14602 5 8.58526 5 7.99997Z\" />\n  </svg>,\n  },\n  offline: {\n    color: COLORS.LIGHT.LEVEL3_BASE_COLOR,\n    icon: <svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\" stroke=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M2.64648 3.35356L12.6465 13.3536L13.3536 12.6465L3.35359 2.64645L2.64648 3.35356ZM12.4001 9.19952L11.7839 9.66243L9.26847 7.14703C10.5399 7.44723 11.6407 8.18861 12.4001 9.19952ZM8.00009 4C7.41536 4 6.84442 4.05902 6.29289 4.17145L5.46384 3.34239C6.27121 3.11925 7.12173 3 8.00009 3C11.1083 3 13.8679 4.49325 15.6003 6.79938L14.8007 7.39999C13.2491 5.33447 10.7805 4 8.00009 4ZM3.29717 5.41837L2.57752 4.69872C1.74441 5.27885 1.00872 5.98892 0.399902 6.79938L1.19944 7.39999C1.78063 6.62631 2.49047 5.9552 3.29717 5.41837ZM6.23714 8.35834L5.48591 7.60711C4.74264 7.9898 4.09797 8.53673 3.60009 9.19952L4.39963 9.80013C4.87211 9.17116 5.50488 8.67041 6.23714 8.35834ZM6.80028 11.5997C7.07309 11.2365 7.50905 11 8.00009 11C8.49114 11 8.92709 11.2365 9.19991 11.5997L9.50045 11.9997L8.00009 13.125L6.49974 11.9997L6.80028 11.5997Z\" />\n  </svg>,\n  },\n}\n\ninterface INetworkStatusProps {\n  status?: SaveState | ConnectState;\n  title?: string;\n  onClick?: () => void;\n  collapse?: boolean;\n}\n\nexport const NetworkStatus = React.memo(\n\n  (props: INetworkStatusProps) => {\n    const {\n      status = 'saved',\n      title = '',\n      collapse = false,\n      onClick,\n    } = props;\n\n    const t = useTranslate();\n\n    const render = (type: TipType, txt: string) => {\n      const { color, icon } = infoMap[type]\n      return (\n        <Box style={{ color }} onClick={onClick}>\n          {icon}\n          {!collapse ? <TextWrapper color={color}>{txt}</TextWrapper> : null}\n        </Box>\n      )\n    }\n\n    if (title) {\n      return render('success', title);\n    }\n\n    // 网络只关注3种关键状态\n    switch (status) {\n      case 'offline': // 6\n        // 已离线\n        return render('offline', t('wdn_network_status_offline'));\n      case 'reconnecting': // 7\n        // 正在重连...\n        return render('info', t('wdn_network_status_reconnecting'));\n      case 'token_expired': // 8\n        // 页面已过期\n        return render('error', t('wdn_network_status_expired'));\n      case 'save-processing':\n        return render('info', t('wdn_network_status_save_processing'));\n      case 'saved':\n      case 'saved-success':\n        return render('success', t('wdn_network_status_saved'));\n      case 'save-failed':\n        return render('error', t('wdn_network_status_save_failed'));\n      default:\n        break\n    }\n    return null\n  }\n);\n"],"mappings":"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"}