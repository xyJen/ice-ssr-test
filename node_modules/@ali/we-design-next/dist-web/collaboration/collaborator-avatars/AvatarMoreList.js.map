{"version":3,"file":"AvatarMoreList.js","names":["React","ListWrap","OverlayAvatarItem","OverlayAvatarWrap","OverlayAvatarName","Dot","AvatarWithPopover","COLOR_SCHEME","COLOR_SCHEME_LEN","AvatarMoreList","props","items","onClickProp","onClick","useState","visibleIndex","setVisibleAvatarIndex","map","item","name","color","index","key","avatarColor","visible","visibleAvatarIndex","background"],"sources":["../../../../src/collaboration/collaborator-avatars/AvatarMoreList.tsx"],"sourcesContent":["import React from 'react';\nimport { ListWrap, OverlayAvatarItem, OverlayAvatarWrap, OverlayAvatarName, Dot } from './styled';\nimport { IAvatarCollaborator, AvatarWithPopover } from './AvatarWithPopover';\nimport { COLOR_SCHEME, COLOR_SCHEME_LEN } from './constants';\n\ntype IAvatarMoreItem = IAvatarCollaborator & { index: number };\n\ntype IAvatarMoreList = {\n  items: IAvatarMoreItem[];\n  onClick?: (key: string) => void;\n}\n\nexport const AvatarMoreList: React.FC<IAvatarMoreList> = (props) => {\n  const { items, onClick: onClickProp } = props;\n  // avatar popover 面板互斥\n  const [visibleIndex, setVisibleAvatarIndex] = React.useState<number>(-1);\n\n  return (\n    <ListWrap>\n      {items.map(\n        (item) => {\n          const { name, color, index, onClick, key } = item;\n          const avatarColor = color || COLOR_SCHEME[index % COLOR_SCHEME_LEN];\n          return (\n            <OverlayAvatarItem key={key}>\n              <OverlayAvatarWrap>\n                <AvatarWithPopover\n                  {...item}\n                  color={avatarColor}\n                  highlight={false}\n                  isPopoverVisible={index === visibleIndex}\n                  onPopoverVisibleChange={(visible) => {\n                    if (visible) {\n                      setVisibleAvatarIndex(index)\n                    } else {\n                      setVisibleAvatarIndex((visibleAvatarIndex) => {\n                        return visibleAvatarIndex === index ? -1 : visibleAvatarIndex\n                      });\n                    }\n                  }}\n                  onClick={onClick || (() => {onClickProp && onClickProp(item.key)})}\n                />\n              </OverlayAvatarWrap>\n              <OverlayAvatarName>{name || ''}</OverlayAvatarName>\n              <Dot style={{ background: avatarColor }} />\n            </OverlayAvatarItem>\n          );\n        }\n      )}\n    </ListWrap>\n  )\n}"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AAAC,qBACE;AAA5B,SAASC,QAAQ,EAAEC,iBAAiB,EAAEC,iBAAiB,EAAEC,iBAAiB,EAAEC,GAAG;AAC/E,SAA8BC,iBAAiB;AAC/C,SAASC,YAAY,EAAEC,gBAAgB;AASvC,OAAO,IAAMC,cAAyC,GAAG,SAA5CA,cAAyC,CAAIC,KAAK,EAAK;EAClE,IAAQC,KAAK,GAA2BD,KAAK,CAArCC,KAAK;IAAWC,WAAW,GAAKF,KAAK,CAA9BG,OAAO;EACtB;EACA,sBAA8Cb,KAAK,CAACc,QAAQ,CAAS,CAAC,CAAC,CAAC;IAAjEC,YAAY;IAAEC,qBAAqB;EAE1C,oBACE,eAAC,QAAQ,QACNL,KAAK,CAACM,GAAG,CACR,UAACC,IAAI,EAAK;IACR,IAAQC,IAAI,GAAiCD,IAAI,CAAzCC,IAAI;MAAEC,KAAK,GAA0BF,IAAI,CAAnCE,KAAK;MAAEC,KAAK,GAAmBH,IAAI,CAA5BG,KAAK;MAAER,OAAO,GAAUK,IAAI,CAArBL,OAAO;MAAES,GAAG,GAAKJ,IAAI,CAAZI,GAAG;IACxC,IAAMC,WAAW,GAAGH,KAAK,IAAIb,YAAY,CAACc,KAAK,GAAGb,gBAAgB,CAAC;IACnE,oBACE,eAAC,iBAAiB;MAAC,GAAG,EAAEc;IAAI,gBAC1B,eAAC,iBAAiB,qBAChB,eAAC,iBAAiB,eACZJ,IAAI;MACR,KAAK,EAAEK,WAAY;MACnB,SAAS,EAAE,KAAM;MACjB,gBAAgB,EAAEF,KAAK,KAAKN,YAAa;MACzC,sBAAsB,EAAE,gCAACS,OAAO,EAAK;QACnC,IAAIA,OAAO,EAAE;UACXR,qBAAqB,CAACK,KAAK,CAAC;QAC9B,CAAC,MAAM;UACLL,qBAAqB,CAAC,UAACS,kBAAkB,EAAK;YAC5C,OAAOA,kBAAkB,KAAKJ,KAAK,GAAG,CAAC,CAAC,GAAGI,kBAAkB;UAC/D,CAAC,CAAC;QACJ;MACF,CAAE;MACF,OAAO,EAAEZ,OAAO,IAAK,YAAM;QAACD,WAAW,IAAIA,WAAW,CAACM,IAAI,CAACI,GAAG,CAAC;MAAA;IAAG,GACnE,CACgB,eACpB,eAAC,iBAAiB,QAAEH,IAAI,IAAI,EAAE,CAAqB,eACnD,eAAC,GAAG;MAAC,KAAK,EAAE;QAAEO,UAAU,EAAEH;MAAY;IAAE,EAAG,CACzB;EAExB,CAAC,CACF,CACQ;AAEf,CAAC"}