{"version":3,"file":"toolbarLayout.js","names":["throttle","noop","React","useCallback","useRef","mergeRestProps","useDefaultProp","IconArrowUp","ToolbarLayoutWrapper","SingLineItemLayout","DoubleLineItemLayout","CSSTransitionGroup","noopArr","styleWith0Arrow","width","styleWith1Arrow","styleWith2Arrow","ToolbarLayout","memo","props","onModeChange","defaultMode","mode","doubleLineToolbar","singleLineToolbar","onLayoutRender","align","layout","style","restProps","layoutMode","setLayoutMode","layoutModeRef","current","needSwitchMode","onArrowClick","background","backgroundColor","flexGrow"],"sources":["../../../../../../src/navigator/toolbar/layout/toolbarLayout/toolbarLayout.tsx"],"sourcesContent":["import { throttle, noop } from 'lodash-es';\nimport React, { useCallback, useMemo, useRef } from 'react';\nimport { mergeRestProps, useDefaultProp, } from '../../../../common';\nimport { IconArrowUp } from '../../../../basic/icon'\nimport { ToolbarLayoutWrapper } from './style';\nimport { SingLineItemLayout, DoubleLineItemLayout } from './itemLayout';\nimport type { IToolbarLayoutProps } from './interface';\nimport CSSTransitionGroup from 'react-transition-group/CSSTransitionGroup';\n\n\nconst noopArr: any[] = [];\nconst styleWith0Arrow = { width: '100%', };\nconst styleWith1Arrow = { width: 'calc(100% - 24px)', };\nconst styleWith2Arrow = { width: 'calc(100% - 48px)', };\nexport const ToolbarLayout = React.memo<IToolbarLayoutProps>((props) => {\n  const {\n    onModeChange,\n    defaultMode,\n    mode,\n    doubleLineToolbar,\n    singleLineToolbar,\n    onLayoutRender = noop,\n    align = 'left',\n    layout = 'fix-wrapper',\n    style,\n    ...restProps\n  } = props;\n\n  const [layoutMode, setLayoutMode] = useDefaultProp<'singleLine' | 'doubleLine'>(\n    defaultMode || ( doubleLineToolbar ? 'doubleLine' : 'singleLine'),\n    mode,\n    onModeChange,\n  );\n\n  const layoutModeRef = useRef<'singleLine' | 'doubleLine'>(layoutMode);\n  layoutModeRef.current = layoutMode;\n  \n  const needSwitchMode = doubleLineToolbar && singleLineToolbar;\n\n  const onArrowClick = useCallback(\n    throttle(() => {\n      setLayoutMode((layoutModeRef.current === 'singleLine') ? 'doubleLine' : 'singleLine');\n    }, 800),\n    []\n  );\n\n  const background = style?.background || style?.backgroundColor;\n\n  return (\n    <ToolbarLayoutWrapper {...mergeRestProps(restProps, `wdn-toolbar-layout ${layout}`)} style={style}>\n      <div className='wdn-toolbar-content'>\n        {\n          (align === 'center') && needSwitchMode && <div style={{ flexGrow: 0, width: 20 }} />\n        }\n        <CSSTransitionGroup\n          transitionName={'toolbar-left'}\n          className={`wdn-toolbar-items ${layoutMode} ${needSwitchMode ? 'with_switch' : ''}`}\n          transitionEnterTimeout={500}\n          transitionLeaveTimeout={300}\n          style={needSwitchMode ? (align === 'center' ? styleWith2Arrow : styleWith1Arrow ) : styleWith0Arrow}\n        >\n          {\n\n            layoutMode === 'singleLine'\n              ? <SingLineItemLayout background={background} key=\"singleLine\" autoFold={layout === 'fix-wrapper'} align={align} items={singleLineToolbar || noopArr} onLayoutRender={onLayoutRender} />\n              : <DoubleLineItemLayout background={background} key=\"doubleLine\" autoFold={layout === 'fix-wrapper'} align={align} items={doubleLineToolbar || noopArr} onLayoutRender={onLayoutRender} />\n          }\n        </CSSTransitionGroup>\n        {\n          needSwitchMode && (\n            <div className=\"wdn-icon-switch-wrapper\">\n              <IconArrowUp\n                className={`wdn-icon-switch ${(layoutMode === 'singleLine') ? 'rotate' : ''}`}\n                onClick={onArrowClick}\n              />\n            </div>\n          )\n        }\n      </div>\n    </ToolbarLayoutWrapper>\n  );\n});\n\n"],"mappings":"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"}