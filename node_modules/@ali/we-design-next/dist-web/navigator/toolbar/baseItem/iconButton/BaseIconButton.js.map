{"version":3,"file":"BaseIconButton.js","names":["React","useMemo","ToolbarHoverTip","Wrapper","BadgeDot","mergeClassName","noop","BaseIconButton","memo","forwardRef","props","ref","icon","title","tooltip","disabled","size","active","onClick","onDoubleClick","badgeDot","testid","role","restProps","undefined","sepreateDoubleClicks","click","doubleClick","showTitle","cloneElement","position","top","right","lastSingleClick","e","last","Date","now","setTimeout"],"sources":["../../../../../../src/navigator/toolbar/baseItem/iconButton/BaseIconButton.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { IBaseIconButtonProps } from './interface';\nimport { ToolbarHoverTip } from '../../toolbarHoverTip';\nimport { Wrapper } from './styled';\nimport { BadgeDot } from '../../../../basic/badge';\nimport { mergeClassName } from '../../../../common';\nimport { noop } from 'lodash-es';\n\nexport const BaseIconButton = React.memo(React.forwardRef<HTMLDivElement, IBaseIconButtonProps>(\n  (props, ref) => {\n    const {\n      icon,\n      title,\n      tooltip,\n      disabled,\n      size,\n      active,\n      onClick = noop,\n      onDoubleClick,\n      badgeDot,\n      testid,\n      role,\n      ...restProps\n    } = props;\n\n    const [click, doubleClick] = useMemo(() => {\n      if (!onDoubleClick) {\n        return [onClick, undefined];\n      } else {\n        return sepreateDoubleClicks(onClick, onDoubleClick);\n      }\n    }, [onClick, onDoubleClick]);\n\n    const showTitle = size === 'large';\n\n    return (\n      <Wrapper\n        ref={ref}\n        className={mergeClassName('wdn-toolbar-item', size, active && 'active', disabled && 'disabled')}\n        data-testid={testid}\n        data-role={role}\n        onClick={disabled ? undefined : click}\n        onDoubleClick={disabled ? undefined : doubleClick}\n        {...restProps}\n      >\n        <ToolbarHoverTip overlayVisible={false} disabled={disabled} tooltip={tooltip || (!showTitle && !disabled && title)}>\n          <div className=\"wdn-toolbar-icon\">\n            {React.cloneElement(icon, { size: size === 'large' ? 'large' : 'normal' })}\n            {\n              badgeDot && (\n                typeof badgeDot === 'boolean'\n                  ? <BadgeDot style={{ position: 'absolute', top: 0, right: 0 }} />\n                  : <BadgeDot style={{ position: 'absolute', top: badgeDot.top, right: badgeDot.right }} />\n              )\n            }\n          </div>\n        </ToolbarHoverTip>\n        {showTitle && <div className=\"wdn-toolbar-title\"><div className=\"wdn-tb-title-content\">{title}</div></div>}\n      </Wrapper>\n    );\n  },\n));\n\n\n\nconst sepreateDoubleClicks = (\n  onClick: (e: React.MouseEvent<HTMLElement>) => void,\n  onDoubleClick: (e: React.MouseEvent<HTMLElement>) => void\n) => {\n\n  let lastSingleClick: number | null = null;\n\n  return [\n    (e: React.MouseEvent<HTMLElement>) => {\n      if (lastSingleClick === null) {\n        const last = lastSingleClick = Date.now();\n        setTimeout(() => {\n          if (lastSingleClick === last) {\n            onClick(e);\n            lastSingleClick = null;\n          }\n        }, 300);\n      }\n    },\n    (e: React.MouseEvent<HTMLElement>) => {\n      lastSingleClick = null;\n      onDoubleClick(e);\n    }\n  ];\n};\n\n"],"mappings":"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"}