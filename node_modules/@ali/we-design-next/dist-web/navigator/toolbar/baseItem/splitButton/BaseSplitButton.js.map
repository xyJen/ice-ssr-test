{"version":3,"file":"BaseSplitButton.js","names":["React","cloneElement","useCallback","useRef","Popover","IconArrowDown","ToolbarHoverTip","mergeRef","useDefaultProp","mergeClassName","Wrapper","BadgeDot","placementOffset","BaseSplitButton","memo","forwardRef","props","ref","icon","title","tooltip","disabled","size","overlay","autoClose","active","overlayVisible","onVisibleChange","badgeDot","onClick","overlayStyle","testid","role","getContainer","placement","width","restProps","menuVisible","setMenuVisible","cRef","lastTime","v","current","wrapRef","onArrowClick","e","now","Date","valueOf","showTitle","undefined","document","body","lineHeight","overflow","height","position","top","right"],"sources":["../../../../../../src/navigator/toolbar/baseItem/splitButton/BaseSplitButton.tsx"],"sourcesContent":["import React, { cloneElement, useCallback, useRef } from 'react';\nimport { IBaseSplitButtonProps } from './interface';\nimport { Popover } from '../../../../display/popover';\nimport { IconArrowDown } from '../../../../basic/icon';\nimport { ToolbarHoverTip } from '../../toolbarHoverTip';\nimport { mergeRef, useDefaultProp, mergeClassName } from '../../../../common';\nimport { Wrapper } from './styled';\nimport { BadgeDot } from '../../../../basic/badge';\n\nconst placementOffset = [4, 0] as [number, number];\n\nexport const BaseSplitButton = React.memo(React.forwardRef<HTMLDivElement, IBaseSplitButtonProps>(\n  (props, ref) => {\n    const {\n      icon,\n      title,\n      tooltip,\n      disabled,\n      size,\n      overlay,\n      autoClose,\n      active,\n      overlayVisible,\n      onVisibleChange,\n      badgeDot,\n      onClick,\n      overlayStyle,\n      testid,\n      role,\n      getContainer,\n      placement = 'bottomLeft',\n      width,\n      ...restProps\n    } = props;\n\n    const [menuVisible, setMenuVisible] = useDefaultProp(false, overlayVisible, onVisibleChange);\n\n    const cRef = useRef({\n      lastTime: 0,\n      v: menuVisible,\n    });\n    cRef.current.v = menuVisible;\n\n    const wrapRef = useRef<HTMLDivElement>(null);\n\n    const onArrowClick = useCallback((e: React.MouseEvent) => {\n      const now = Date.now().valueOf();\n      if ((now - cRef.current.lastTime) > 300) {\n        cRef.current.lastTime = now;\n        setMenuVisible(!cRef.current.v);\n      }\n    }, []);\n\n    const showTitle = size === 'large';\n\n    return (\n      <Wrapper\n        ref={mergeRef(ref, wrapRef)}\n        className={mergeClassName('wdn-toolbar-item', size, active && 'active' , disabled && 'disabled')}\n        data-testid={testid}\n        data-role={role}\n        style={width ? { width: width } : undefined}\n      >\n        <Popover\n          content={overlay}\n          onVisibleChange={setMenuVisible}\n          visible={menuVisible}\n          getContainer={getContainer || (() => wrapRef.current || document.body)}\n          placementOffset={placementOffset}\n          placement={placement}\n          animation\n          data-testid={`overlay-${testid}`}\n        >\n          <div style={{ lineHeight: 0, overflow: 'hidden' }}>\n            <ToolbarHoverTip overlayVisible={menuVisible} disabled={disabled} tooltip={tooltip || (!showTitle && !disabled && title)}>\n              <div className=\"wdn-toolbar-split-btn\" style={width ? { width: width } : undefined}>\n                <div className={mergeClassName('wdn-toolbar-split-left', active && 'active')} onClick={disabled ? undefined : onClick}>\n                  {cloneElement(icon, { size: size === 'large' ? 'large' : 'normal' })}\n                </div>\n                <div className=\"wdn-toolbar-split-btn-arrow\" onClick={onArrowClick}><IconArrowDown className={`wdn-tb-menu-array ${menuVisible ? 'rotate' : ''}`} style={{ width: 10, height: 10 }} /></div>\n                {\n                  badgeDot && (\n                    typeof badgeDot === 'boolean'\n                      ? <BadgeDot style={{ position: 'absolute', top: 0, right: 10 }} />\n                      : <BadgeDot style={{ position: 'absolute', top: badgeDot.top, right: badgeDot.right + 10 }} />\n                  )\n                }\n              </div>\n            </ToolbarHoverTip>\n          </div>\n        </Popover>\n        {showTitle && <div className=\"wdn-toolbar-title\" onClick={disabled ? undefined : onClick}>{title}</div>}\n      </Wrapper>\n    );\n  },\n));\n\n"],"mappings":"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"}