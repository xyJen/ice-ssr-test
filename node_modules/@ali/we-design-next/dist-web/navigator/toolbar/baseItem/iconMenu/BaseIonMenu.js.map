{"version":3,"file":"BaseIonMenu.js","names":["React","cloneElement","useCallback","useRef","throttle","Popover","IconArrowDown","ToolbarHoverTip","useDefaultProp","mergeRef","mergeClassName","Wrapper","BadgeDot","placementOffset","BaseIconMenu","memo","forwardRef","props","ref","icon","title","active","tooltip","disabled","size","overlay","autoClose","overlayVisible","onVisibleChange","overlayStyle","badgeDot","testid","role","getContainer","placement","restProps","menuVisible","setMenuVisible","cRef","current","wrapRef","onClick","trailing","showTitle","document","body","lineHeight","undefined","width","height","position","top","right"],"sources":["../../../../../../src/navigator/toolbar/baseItem/iconMenu/BaseIonMenu.tsx"],"sourcesContent":["import React, { cloneElement, useCallback, useRef } from 'react';\nimport { throttle } from 'lodash';\nimport { IBaseIconMenuProps } from './interface';\nimport { Popover } from '../../../../display/popover';\nimport { IconArrowDown } from '../../../../basic/icon';\nimport { ToolbarHoverTip } from '../../toolbarHoverTip';\nimport { useDefaultProp, mergeRef, mergeClassName } from '../../../../common';\nimport { Wrapper } from './styled';\nimport { BadgeDot } from '../../../../basic/badge';\n\nconst placementOffset = [4, 0] as [number, number];\n\nexport const BaseIconMenu = React.memo(React.forwardRef<HTMLDivElement, IBaseIconMenuProps>(\n  (props, ref) => {\n    const {\n      icon,\n      title,\n      active,\n      tooltip,\n      disabled,\n      size,\n      overlay,\n      autoClose,\n      overlayVisible,\n      onVisibleChange,\n      overlayStyle,\n      badgeDot,\n      testid,\n      role,\n      getContainer,\n      placement = 'bottomLeft',\n      ...restProps\n    } = props;\n\n    const [menuVisible, setMenuVisible] = useDefaultProp(false, overlayVisible, onVisibleChange);\n\n    const cRef = useRef(menuVisible);\n    cRef.current = menuVisible;\n\n    const wrapRef = useRef<HTMLDivElement>(null);\n\n\n    const onClick = useCallback(throttle(() => {\n      setMenuVisible(!cRef.current);\n    }, 300, { trailing: false }), []);\n\n    const showTitle = size === 'large';\n\n    return (\n      <Wrapper\n        ref={mergeRef(ref, wrapRef)}\n        className={mergeClassName('wdn-toolbar-item', size,  (menuVisible || active) && 'active', disabled && 'disabled')}\n        data-testid={testid}\n        data-role={role}\n        {...restProps}\n      >\n        <Popover\n          content={overlay}\n          onVisibleChange={setMenuVisible}\n          visible={menuVisible}\n          getContainer={getContainer || (() => wrapRef.current || document.body)}\n          placementOffset={placementOffset}\n          placement={placement}\n          animation\n          data-testid={`overlay-${testid}`}\n        >\n          <div style={{ lineHeight: 0 }} onClick={disabled ? undefined : onClick}>\n            <ToolbarHoverTip overlayVisible={menuVisible} disabled={disabled} tooltip={tooltip || (!showTitle && !disabled && title)}>\n              <div className=\"wdn-toolbar-icon\">\n                {cloneElement(icon, { size: size === 'large' ? 'large' : 'normal' })}\n                <IconArrowDown className={`wdn-tb-menu-array ${menuVisible ? 'rotate' : ''}`} style={{ width: 10, height: 10 }} />\n                {\n                  badgeDot && (\n                    typeof badgeDot === 'boolean'\n                      ? <BadgeDot style={{ position: 'absolute', top: 0, right: 10 }} />\n                      : <BadgeDot style={{ position: 'absolute', top: badgeDot.top, right: badgeDot.right + 10 }} />\n                  )\n                }\n              </div>\n            </ToolbarHoverTip>\n          </div>\n        </Popover>\n        {showTitle && <div className=\"wdn-toolbar-title\" onClick={disabled ? undefined : onClick}><div className='wdn-tb-title-content'>{title}</div></div>}\n      </Wrapper>\n    );\n  },\n));\n"],"mappings":"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"}