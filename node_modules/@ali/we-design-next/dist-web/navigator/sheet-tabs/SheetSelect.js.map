{"version":3,"file":"SheetSelect.js","names":["React","useState","useMemo","useCallback","Popover","Tooltip","Input","mergeClassName","renderReactNode","useTranslate","InlineTab","ListIcon","IconWrapper","SelectOverlay","ListWrapper","EmptyWrapper","InputWrapper","SHOW_SEARCH_INPUT_NUM","SheetSelect","memo","props","tabs","tab","setActiveTab","disabled","renderInlineTab","visible","setVisible","searchValue","setSearchValue","t","searchedList","filter","item","title","toLowerCase","includes","onVisibleChange","e","listButton","undefined","length","target","value","map","_tab","key","hidden","height"],"sources":["../../../../src/navigator/sheet-tabs/SheetSelect.tsx"],"sourcesContent":["import React, { useState, useMemo, useCallback } from \"react\";\nimport { Popover } from \"../../display/popover\";\nimport { Tooltip } from \"../../display/tooltip\";\nimport { Input } from \"../../form/input\";\nimport { mergeClassName, renderReactNode } from \"../../common\";\nimport { useTranslate } from '../../locale';\nimport { InlineTab } from \"./InlineTab\";\nimport {\n  ListIcon,\n  IconWrapper,\n  SelectOverlay,\n  ListWrapper,\n  EmptyWrapper,\n  InputWrapper,\n} from \"./styled\";\nimport type { ISheetTabsProps } from \"./SheetTabs\";\n\ntype ISheetSelectProps = Pick<ISheetTabsProps, \"tabs\" | \"renderInlineTab\"> & {\n  tab: string;\n  setActiveTab: (key: string) => void;\n  disabled: boolean;\n};\n\nconst SHOW_SEARCH_INPUT_NUM = 10; // 超过10个工作表显示搜索框\n\nexport const SheetSelect = React.memo((props: ISheetSelectProps) => {\n  const { tabs, tab, setActiveTab, disabled, renderInlineTab } = props;\n  const [visible, setVisible] = useState<boolean>(false);\n  const [searchValue, setSearchValue] = useState<string>(\"\");\n  const t = useTranslate();\n\n  const searchedList = useMemo(\n    () =>\n      tabs.filter((item) =>\n        item.title.toLowerCase().includes(searchValue.toLowerCase())\n      ),\n    [tabs, searchValue]\n  );\n\n  const onVisibleChange = useCallback((e: boolean) => {\n    if (disabled || (e && visible)) {\n      setVisible(false);\n      setSearchValue(\"\");\n    } else {\n      setVisible(e);\n      !e && setSearchValue(\"\");\n    }\n  }, [visible, disabled]);\n\n  const listButton = (\n    <IconWrapper className={mergeClassName(visible ? \"active\" : undefined, disabled ? \"disabled\" : undefined)}>\n      <ListIcon />\n    </IconWrapper>\n  );\n\n  return (\n    <Popover\n      trigger=\"click\"\n      placement=\"topLeft\"\n      animation\n      content={\n        <SelectOverlay>\n          {tabs.length > SHOW_SEARCH_INPUT_NUM ? (\n            <InputWrapper>\n              <Input\n                placeholder={t('wdn_sheet_tabs_search')}\n                value={searchValue}\n                onChange={(e) => setSearchValue(e.target.value)}\n              />\n            </InputWrapper>\n          ) : null}\n          <ListWrapper\n            className={mergeClassName(!!searchValue ? \"searching\" : undefined)}\n          >\n            {searchedList.length > 0 ? (\n              searchedList.map((_tab) =>\n                renderReactNode(\n                  renderInlineTab,\n                  <InlineTab\n                    key={_tab.key}\n                    tab={_tab.key}\n                    title={_tab.title}\n                    hidden={_tab.hidden}\n                    searchValue={searchValue}\n                    selected={_tab.key === tab}\n                    onClick={() => {\n                      if (_tab.key === tab) return;\n                      setActiveTab(_tab.key);\n                      setVisible(false);\n                    }}\n                  />,\n                  { key: _tab.key }\n                )\n              )\n            ) : (\n              <EmptyWrapper>{t('wdn_sheet_tabs_search_empty')}</EmptyWrapper>\n            )}\n          </ListWrapper>\n        </SelectOverlay>\n      }\n      visible={visible}\n      onVisibleChange={onVisibleChange}\n    >\n      <div style={{ height: '100%' }}>\n        {disabled ? listButton : <Tooltip title={t('wdn_sheet_tabs_all')} placement=\"top\">\n          {listButton}\n        </Tooltip>}\n      </div>\n    </Popover>\n  );\n});\n"],"mappings":"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"}