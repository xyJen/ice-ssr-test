{"version":3,"file":"useClickOuterRef.js","names":["useRef","useEffect","contains","box","target","parentElement","noopCallback","useClickOuterRef","handler","on","eventName","ref","callback","current","handleClickBody","event","isOuter","document","body","addEventListener","removeEventListener"],"sources":["../../../../src/navigator/sheet-tabs/useClickOuterRef.tsx"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nexport const contains = (box: HTMLElement | null, target: HTMLElement | null): boolean => {\n  if (!box || !target) {\n    return false;\n  }\n  if (typeof box.contains === 'function') {\n    return box.contains(target);\n  }\n  while (target) {\n    if (target === box) return true;\n    // eslint-disable-next-line no-param-reassign\n    target = target.parentElement;\n  }\n  return false;\n};\ninterface ICallback {\n  (e: React.MouseEvent): void;\n}\nconst noopCallback = () => {};\nexport const useClickOuterRef = <\nT extends HTMLElement = HTMLElement\n>(handler: ICallback | undefined, on = true, eventName = 'click') => {\n  const ref = useRef<T>(null);\n  const callback = useRef<(...args: any) => any>(() => {});\n  callback.current = handler || noopCallback;\n  useEffect(() => {\n    /**\n     * 点击处理\n     */\n    const handleClickBody = (event: any): void => {\n      const isOuter = !ref.current\n        || !event.target\n        || !contains(ref.current, event.target as HTMLElement);\n      if (isOuter) {\n        callback.current(event);\n      }\n    };\n    if (on) {\n      document.body.addEventListener(eventName, handleClickBody);\n    }\n    return () => {\n      if (on) {\n        document.body.removeEventListener(eventName, handleClickBody);\n      }\n    };\n  }, [on, eventName]);\n  return ref;\n};"],"mappings":"AAAA,SAAgBA,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAChD,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAQ,CAAIC,GAAuB,EAAEC,MAA0B,EAAc;EACxF,IAAI,CAACD,GAAG,IAAI,CAACC,MAAM,EAAE;IACnB,OAAO,KAAK;EACd;EACA,IAAI,OAAOD,GAAG,CAACD,QAAQ,KAAK,UAAU,EAAE;IACtC,OAAOC,GAAG,CAACD,QAAQ,CAACE,MAAM,CAAC;EAC7B;EACA,OAAOA,MAAM,EAAE;IACb,IAAIA,MAAM,KAAKD,GAAG,EAAE,OAAO,IAAI;IAC/B;IACAC,MAAM,GAAGA,MAAM,CAACC,aAAa;EAC/B;EACA,OAAO,KAAK;AACd,CAAC;AAID,IAAMC,YAAY,GAAG,SAAfA,YAAY,GAAS,CAAC,CAAC;AAC7B,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAgB,CAE3BC,OAA8B,EAAEC,EAAE,EAASC,SAAS,EAAe;EAAA,IAAnCD,EAAE;IAAFA,EAAE,GAAG,IAAI;EAAA;EAAA,IAAEC,SAAS;IAATA,SAAS,GAAG,OAAO;EAAA;EAC9D,IAAMC,GAAG,GAAGX,MAAM,CAAI,IAAI,CAAC;EAC3B,IAAMY,QAAQ,GAAGZ,MAAM,CAAwB,YAAM,CAAC,CAAC,CAAC;EACxDY,QAAQ,CAACC,OAAO,GAAGL,OAAO,IAAIF,YAAY;EAC1CL,SAAS,CAAC,YAAM;IACd;AACJ;AACA;IACI,IAAMa,eAAe,GAAG,SAAlBA,eAAe,CAAIC,KAAU,EAAW;MAC5C,IAAMC,OAAO,GAAG,CAACL,GAAG,CAACE,OAAO,IACvB,CAACE,KAAK,CAACX,MAAM,IACb,CAACF,QAAQ,CAACS,GAAG,CAACE,OAAO,EAAEE,KAAK,CAACX,MAAM,CAAgB;MACxD,IAAIY,OAAO,EAAE;QACXJ,QAAQ,CAACC,OAAO,CAACE,KAAK,CAAC;MACzB;IACF,CAAC;IACD,IAAIN,EAAE,EAAE;MACNQ,QAAQ,CAACC,IAAI,CAACC,gBAAgB,CAACT,SAAS,EAAEI,eAAe,CAAC;IAC5D;IACA,OAAO,YAAM;MACX,IAAIL,EAAE,EAAE;QACNQ,QAAQ,CAACC,IAAI,CAACE,mBAAmB,CAACV,SAAS,EAAEI,eAAe,CAAC;MAC/D;IACF,CAAC;EACH,CAAC,EAAE,CAACL,EAAE,EAAEC,SAAS,CAAC,CAAC;EACnB,OAAOC,GAAG;AACZ,CAAC"}