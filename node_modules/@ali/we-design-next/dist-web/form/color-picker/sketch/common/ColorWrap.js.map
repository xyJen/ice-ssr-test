{"version":3,"file":"ColorWrap.js","names":["React","Component","PureComponent","debounce","color","ColorWrap","Picker","ColorPicker","props","handleChange","data","event","isValidColor","simpleCheckForValidColor","colors","toState","h","state","oldHue","setState","onChange","_input","_blur","onChangeComplete","handleSwatchHover","onSwatchHover","fn","getDerivedStateFromProps","nextProps","render","optionalEvents","propTypes","defaultProps","s","l","a"],"sources":["../../../../../../src/form/color-picker/sketch/common/ColorWrap.js"],"sourcesContent":["import React, { Component, PureComponent } from 'react';\nimport { debounce } from 'lodash-es';\nimport * as color from '../helpers/color';\n\nexport const ColorWrap = (Picker) => {\n  class ColorPicker extends (PureComponent || Component) {\n    constructor(props) {\n      super();\n\n      this.state = {\n        ...color.toState(props.color, 0),\n      };\n\n      this.debounce = debounce((fn, data, event) => {\n        fn(data, event);\n      }, 100);\n    }\n\n    static getDerivedStateFromProps(nextProps, state) {\n      return {\n        ...color.toState(nextProps.color, state.oldHue),\n      };\n    }\n\n    handleChange = (data, event) => {\n      const isValidColor = color.simpleCheckForValidColor(data);\n      if (isValidColor) {\n        const colors = color.toState(data, data.h || this.state.oldHue);\n        this.setState(colors);\n        this.props.onChange && this.props.onChange(colors, event);\n\n        // 不是来自输入框\n        // 如果来自输入框，需要是 blur 触发\n        if ((event._input && event._blur) || !event._input) {\n          this.props.onChangeComplete &&\n            this.debounce(this.props.onChangeComplete, colors, event);\n        }\n      }\n    };\n\n    handleSwatchHover = (data, event) => {\n      const isValidColor = color.simpleCheckForValidColor(data);\n      if (isValidColor) {\n        const colors = color.toState(data, data.h || this.state.oldHue);\n        this.props.onSwatchHover && this.props.onSwatchHover(colors, event);\n      }\n    };\n\n    render() {\n      const optionalEvents = {};\n      if (this.props.onSwatchHover) {\n        optionalEvents.onSwatchHover = this.handleSwatchHover;\n      }\n\n      return (\n        <Picker\n          {...this.props}\n          {...this.state}\n          onChange={this.handleChange}\n          {...optionalEvents}\n        />\n      );\n    }\n  }\n\n  ColorPicker.propTypes = {\n    ...Picker.propTypes,\n  };\n\n  ColorPicker.defaultProps = {\n    ...Picker.defaultProps,\n    color: {\n      h: 250,\n      s: 0.5,\n      l: 0.2,\n      a: 1,\n    },\n  };\n\n  return ColorPicker;\n};\n\nexport default ColorWrap;\n"],"mappings":"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"}