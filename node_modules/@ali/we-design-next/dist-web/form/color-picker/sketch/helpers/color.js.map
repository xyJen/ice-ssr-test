{"version":3,"file":"color.js","names":["tinycolor","simpleCheckForValidColor","data","keysToCheck","checked","passed","forEach","letter","isNaN","percentPatt","test","toState","oldHue","color","hex","hsl","toHsl","hsv","toHsv","rgb","toRgb","toHex","s","h","transparent","a","source","isValidHex","lh","String","charAt","length","isValid","getContrastingColor","col","yiq","r","g","b","red","l","v"],"sources":["../../../../../../src/form/color-picker/sketch/helpers/color.js"],"sourcesContent":["import tinycolor from 'tinycolor2';\n\nexport const simpleCheckForValidColor = (data) => {\n  const keysToCheck = ['r', 'g', 'b', 'a', 'h', 's', 'l', 'v'];\n  let checked = 0;\n  let passed = 0;\n  keysToCheck.forEach(letter => {\n    if (data[letter]) {\n      checked += 1;\n      if (!isNaN(data[letter])) {\n        passed += 1;\n      }\n      if (letter === 's' || letter === 'l') {\n        const percentPatt = /^\\d+%$/;\n        if (percentPatt.test(data[letter])) {\n          passed += 1;\n        }\n      }\n    }\n  });\n  return (checked === passed) ? data : false;\n};\n\nexport const toState = (data, oldHue) => {\n  const color = data.hex ? tinycolor(data.hex) : tinycolor(data);\n  const hsl = color.toHsl();\n  const hsv = color.toHsv();\n  const rgb = color.toRgb();\n  const hex = color.toHex();\n  if (hsl.s === 0) {\n    hsl.h = oldHue || 0;\n    hsv.h = oldHue || 0;\n  }\n  const transparent = hex === '000000' && rgb.a === 0;\n\n  return {\n    hsl,\n    hex: transparent ? 'transparent' : `#${hex}`,\n    rgb,\n    hsv,\n    oldHue: data.h || oldHue || hsl.h,\n    source: data.source,\n  };\n};\n\nexport const isValidHex = (hex) => {\n  // disable hex4 and hex8\n  const lh = (String(hex).charAt(0) === '#') ? 1 : 0;\n  return hex.length !== (4 + lh) && hex.length < (7 + lh) && tinycolor(hex).isValid();\n};\n\nexport const getContrastingColor = (data) => {\n  if (!data) {\n    return '#fff';\n  }\n  const col = toState(data);\n  if (col.hex === 'transparent') {\n    return 'rgba(0,0,0,0.4)';\n  }\n  const yiq = ((col.rgb.r * 299) + (col.rgb.g * 587) + (col.rgb.b * 114)) / 1000;\n  return (yiq >= 128) ? '#000' : '#fff';\n};\n\nexport const red = {\n  hsl: { a: 1, h: 0, l: 0.5, s: 1 },\n  hex: '#ff0000',\n  rgb: { r: 255, g: 0, b: 0, a: 1 },\n  hsv: { h: 0, s: 1, v: 1, a: 1 },\n};\n\n// export default exports;\n"],"mappings":"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"}