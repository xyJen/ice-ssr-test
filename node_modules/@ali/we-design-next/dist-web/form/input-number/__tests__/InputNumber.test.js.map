{"version":3,"file":"InputNumber.test.js","names":["React","render","fireEvent","InputNumber","KEY_CODES","test","r","expect","container","querySelector","toBeInTheDocument","fn","jest","not","toHaveBeenCalled","change","target","value","toHaveBeenCalledTimes","toHaveBeenLastCalledWith","nodes","querySelectorAll","map","i","item","incr","decr","click","n","mouseDown","Promise","res","setTimeout","mouseUp","toBeGreaterThan","toBeLessThan","keyDown","keyCode","ENTER","input","blur","toBeNull"],"sources":["../../../../../src/form/input-number/__tests__/InputNumber.test.tsx"],"sourcesContent":["import * as React from 'react';\nimport { render, fireEvent, screen } from '@testing-library/react';\nimport '@testing-library/jest-dom';\nimport { InputNumber } from '../InputNumber';\nimport { KEY_CODES } from '../../../common';\n\ntest('InputNumber: should render content.', () => {\n  const r = render(<InputNumber value={2022} />);\n  expect(r.container.querySelector('[value=\"2022\"]')).toBeInTheDocument();\n});\n\ntest('InputNumber: should render content with digits.', () => {\n  const r = render(<InputNumber value={3} digits={2} />);\n  expect(r.container.querySelector('[value=\"3.00\"]')).toBeInTheDocument();\n});\n\ntest('InputNumber: should trigger onChange with keyboard input.', () => {\n  const fn = jest.fn();\n  const r = render(<InputNumber onChange={fn} />);\n  expect(fn).not.toHaveBeenCalled();\n  fireEvent.change(r.container.querySelector('input')!, { target: { value: '1' } });\n  expect(fn).toHaveBeenCalled();\n  expect(fn).toHaveBeenCalledTimes(1);\n  expect(fn).toHaveBeenLastCalledWith<[number]>(1);\n\n  fireEvent.change(r.container.querySelector('input')!, { target: { value: '' } });\n  expect(fn).toHaveBeenCalledTimes(2);\n  expect(fn).toHaveBeenLastCalledWith<[null]>(null);\n\n  fireEvent.change(r.container.querySelector('input')!, { target: { value: '-' } });\n  expect(r.container.querySelector('[value=\"-\"]')).toBeInTheDocument();\n  expect(fn).toHaveBeenCalledTimes(2);\n\n  fireEvent.change(r.container.querySelector('input')!, { target: { value: '-1' } });\n  expect(fn).toHaveBeenCalledTimes(3);\n  expect(fn).toHaveBeenLastCalledWith(-1);\n\n  fireEvent.change(r.container.querySelector('input')!, { target: { value: '-1.' } });\n  expect(fn).toHaveBeenCalledTimes(3);\n\n});\n\ntest('InputNumber: should trigger onChange with increase / decrease button.', () => {\n  const fn = jest.fn();\n  const r = render(<InputNumber onChange={fn} defaultValue={0} />);\n  const nodes = r.container.querySelectorAll('svg');\n  const [incr, decr] = [0, 1].map(i => nodes.item(i));\n\n  fireEvent.click(incr);\n  expect(fn).toHaveBeenCalledTimes(1);\n  expect(fn).toHaveBeenLastCalledWith<[number]>(1);\n\n  fireEvent.click(incr);\n  expect(fn).toHaveBeenCalledTimes(2);\n  expect(fn).toHaveBeenLastCalledWith<[number]>(2);\n\n  fireEvent.click(decr);\n  expect(fn).toHaveBeenCalledTimes(3);\n  expect(fn).toHaveBeenLastCalledWith<[number]>(1);\n});\n\ntest('InputNumber: should trigger onChange with increase / decrease button pressing.', async () => {\n  let i = 0;\n  const fn = jest.fn((n) => i = n);\n  const r = render(<InputNumber onChange={fn} defaultValue={0} />);\n  const nodes = r.container.querySelectorAll('svg');\n  const [incr, decr] = [0, 1].map(i => nodes.item(i));\n\n  fireEvent.mouseDown(incr);\n  await (new Promise(res => setTimeout(res, 2000)));\n  fireEvent.mouseUp(incr);\n  expect(fn).toHaveBeenCalled();\n  expect(i).toBeGreaterThan(3);\n\n  await (new Promise(res => setTimeout(res, 500)));\n\n  fireEvent.mouseDown(decr);\n  await (new Promise(res => setTimeout(res, 4000)));\n  fireEvent.mouseUp(decr);\n  expect(fn).toHaveBeenCalled();\n  expect(i).toBeLessThan(-3);\n\n}, 10000);\n\ntest('InputNumber: should not trigger onChange with increase / decrease button pressing shortly.', async () => {\n  let i = 0;\n  const fn = jest.fn((n) => i = n);\n  const r = render(<InputNumber onChange={fn} defaultValue={0} />);\n  const nodes = r.container.querySelectorAll('svg');\n  const [incr, decr] = [0, 1].map(i => nodes.item(i));\n  fireEvent.mouseDown(incr);\n  await (new Promise(res => setTimeout(res, 200)));\n  expect(fn).not.toHaveBeenCalled();\n  fireEvent.mouseUp(incr);\n});\n\ntest('InputNumber: should trigger onEnter.', () => {\n  const fn = jest.fn();\n  const r = render(<InputNumber onEnter={fn} defaultValue={0} />);\n  fireEvent.keyDown(r.container.querySelector('input')!, { keyCode: KEY_CODES.ENTER });\n  expect(fn).toHaveBeenCalledTimes(1);\n});\n\ntest('InputNumber: should trigger onBlur.', () => {\n  const fn = jest.fn();\n  const r = render(<InputNumber onBlur={fn} defaultValue={0} />);\n  const input = r.container.querySelector('input')!;\n  fireEvent.change(input, { target: { value: '-1.' } });\n  expect(r.container.querySelector('[value=\"-1.\"]')).toBeInTheDocument();\n\n  fireEvent.blur(input);\n  expect(fn).toHaveBeenCalled();\n  expect(r.container.querySelector('[value=\"-1.\"]')).toBeNull();\n  expect(r.container.querySelector('[value=\"-1\"]')).toBeInTheDocument();\n});"],"mappings":"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"}