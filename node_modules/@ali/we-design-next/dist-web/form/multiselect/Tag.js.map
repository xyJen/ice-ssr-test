{"version":3,"file":"Tag.js","names":["React","useEffect","useRef","SingleTagWrap","ItemWrap","TagContentWrap","IconClose","Tag","memo","props","label","closable","onClose","size","TagMore","omittedTags","len","length","Item","children","registerSize","itemKey","display","order","style","ref","mergedHidden","internalRegisterSize","width","current","offsetWidth","overflowStyle","opacity","height","undefined","overflowY","pointerEvents","position","overflowProps"],"sources":["../../../../src/form/multiselect/Tag.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { SingleTagWrap, ItemWrap, TagContentWrap } from './styled';\nimport { IconClose } from '../../basic/icon';\nimport type { IMultiSelectProps } from './MultiSelect';\n\ntype IDisplayOption = { value: string, label: string };\n\nexport type ITagProps = Pick<IMultiSelectProps, 'size'> & {\n  label: string;\n  value: string;\n  closable?: boolean;\n  onClose?: (e: React.MouseEvent) => void;\n};\n\nexport const Tag = React.memo((props: ITagProps) => {\n  const { label, closable = true, onClose, size } = props;\n\n  return <SingleTagWrap size={size}>\n    <TagContentWrap>{label}</TagContentWrap>\n    {closable && (<IconClose size={12} onClick={onClose} />)}\n  </SingleTagWrap>;\n});\n\nexport type ITaMoreProps = Pick<IMultiSelectProps, 'size'> & {\n  omittedTags: IDisplayOption[];\n};\n\nexport const TagMore = React.memo((props: ITaMoreProps) => {\n  const { omittedTags, size } = props;\n  const len = omittedTags.length;\n  return <SingleTagWrap size={size}>\n    <TagContentWrap>+{len}...</TagContentWrap>\n  </SingleTagWrap>;\n});\n\ninterface ItemProps {\n  itemKey?: React.Key;\n  registerSize: (key: React.Key, width: number | null) => void;\n  display: boolean;\n  order: number;\n  children?: React.ReactNode;\n  style?: React.CSSProperties;\n}\n\nexport const Item = React.memo((props: ItemProps) => {\n  const { children, registerSize, itemKey, display, order, style } = props;\n  const ref = useRef<HTMLDivElement>(null);\n  const mergedHidden = !display;\n\n  const internalRegisterSize = (width: number | null) => {\n    registerSize(itemKey!, width);\n  }\n\n  useEffect(() => {\n    if (ref.current) {\n      internalRegisterSize(ref.current.offsetWidth);\n      return () => {\n        internalRegisterSize(null);\n      };\n    }\n  }, []);\n\n  let overflowStyle: React.CSSProperties = {\n    opacity: mergedHidden ? 0 : 1,\n    height: mergedHidden ? 0 : undefined,\n    overflowY: mergedHidden ? 'hidden' : undefined,\n    order: order,\n    pointerEvents: mergedHidden ? 'none' : undefined,\n    position: mergedHidden ? 'absolute' : undefined,\n  };\n\n\n  const overflowProps: React.HTMLAttributes<any> = {};\n  if (mergedHidden) {\n    overflowProps['aria-hidden'] = true;\n  }\n\n  return <ItemWrap ref={ref} {...overflowProps} style={{ ...overflowStyle, ...style }}>{children}</ItemWrap>;\n});\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAAC,qBACrB;AAA5B,SAASC,aAAa,EAAEC,QAAQ,EAAEC,cAAc;AAChD,SAASC,SAAS;AAYlB,OAAO,IAAMC,GAAG,gBAAGP,KAAK,CAACQ,IAAI,CAAC,UAACC,KAAgB,EAAK;EAClD,IAAQC,KAAK,GAAqCD,KAAK,CAA/CC,KAAK;IAAA,kBAAqCD,KAAK,CAAxCE,QAAQ;IAARA,QAAQ,gCAAG,IAAI;IAAEC,OAAO,GAAWH,KAAK,CAAvBG,OAAO;IAAEC,IAAI,GAAKJ,KAAK,CAAdI,IAAI;EAE7C,oBAAO,eAAC,aAAa;IAAC,IAAI,EAAEA;EAAK,gBAC/B,eAAC,cAAc,QAAEH,KAAK,CAAkB,EACvCC,QAAQ,iBAAK,eAAC,SAAS;IAAC,IAAI,EAAE,EAAG;IAAC,OAAO,EAAEC;EAAQ,EAAI,CAC1C;AAClB,CAAC,CAAC;AAMF,OAAO,IAAME,OAAO,gBAAGd,KAAK,CAACQ,IAAI,CAAC,UAACC,KAAmB,EAAK;EACzD,IAAQM,WAAW,GAAWN,KAAK,CAA3BM,WAAW;IAAEF,IAAI,GAAKJ,KAAK,CAAdI,IAAI;EACzB,IAAMG,GAAG,GAAGD,WAAW,CAACE,MAAM;EAC9B,oBAAO,eAAC,aAAa;IAAC,IAAI,EAAEJ;EAAK,gBAC/B,eAAC,cAAc,aAAGG,GAAG,QAAqB,CAC5B;AAClB,CAAC,CAAC;AAWF,OAAO,IAAME,IAAI,gBAAGlB,KAAK,CAACQ,IAAI,CAAC,UAACC,KAAgB,EAAK;EACnD,IAAQU,QAAQ,GAAmDV,KAAK,CAAhEU,QAAQ;IAAEC,YAAY,GAAqCX,KAAK,CAAtDW,YAAY;IAAEC,OAAO,GAA4BZ,KAAK,CAAxCY,OAAO;IAAEC,OAAO,GAAmBb,KAAK,CAA/Ba,OAAO;IAAEC,KAAK,GAAYd,KAAK,CAAtBc,KAAK;IAAEC,KAAK,GAAKf,KAAK,CAAfe,KAAK;EAC9D,IAAMC,GAAG,GAAGvB,MAAM,CAAiB,IAAI,CAAC;EACxC,IAAMwB,YAAY,GAAG,CAACJ,OAAO;EAE7B,IAAMK,oBAAoB,GAAG,SAAvBA,oBAAoB,CAAIC,KAAoB,EAAK;IACrDR,YAAY,CAACC,OAAO,EAAGO,KAAK,CAAC;EAC/B,CAAC;EAED3B,SAAS,CAAC,YAAM;IACd,IAAIwB,GAAG,CAACI,OAAO,EAAE;MACfF,oBAAoB,CAACF,GAAG,CAACI,OAAO,CAACC,WAAW,CAAC;MAC7C,OAAO,YAAM;QACXH,oBAAoB,CAAC,IAAI,CAAC;MAC5B,CAAC;IACH;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,IAAII,aAAkC,GAAG;IACvCC,OAAO,EAAEN,YAAY,GAAG,CAAC,GAAG,CAAC;IAC7BO,MAAM,EAAEP,YAAY,GAAG,CAAC,GAAGQ,SAAS;IACpCC,SAAS,EAAET,YAAY,GAAG,QAAQ,GAAGQ,SAAS;IAC9CX,KAAK,EAAEA,KAAK;IACZa,aAAa,EAAEV,YAAY,GAAG,MAAM,GAAGQ,SAAS;IAChDG,QAAQ,EAAEX,YAAY,GAAG,UAAU,GAAGQ;EACxC,CAAC;EAGD,IAAMI,aAAwC,GAAG,CAAC,CAAC;EACnD,IAAIZ,YAAY,EAAE;IAChBY,aAAa,CAAC,aAAa,CAAC,GAAG,IAAI;EACrC;EAEA,oBAAO,eAAC,QAAQ;IAAC,GAAG,EAAEb;EAAI,GAAKa,aAAa;IAAE,KAAK,eAAOP,aAAa,EAAKP,KAAK;EAAG,IAAEL,QAAQ,CAAY;AAC5G,CAAC,CAAC"}