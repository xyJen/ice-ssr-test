{"version":3,"file":"YearPanel.js","names":["React","useCallback","PanelWrapper","Header","PanelBody","DateController","isSameYear","YEAR_DECADE_COUNT","YEAR_COL_COUNT","YEAR_ROW_COUNT","YearPanel","memo","props","viewDate","value","onPanelChange","onSelect","disabledDate","showNow","nowNode","yearNumber","getYear","startYear","Math","floor","endYear","baseYear","setYear","ceil","handleSelect","onDecadeChange","diff","newDate","addYear","curDate","undefined"],"sources":["../../../../../../src/form/date-picker/panels/YearPanel/YearPanel.tsx"],"sourcesContent":["import React, { useCallback } from \"react\";\nimport { Dayjs } from \"dayjs\";\nimport { PanelWrapper } from \"../DatePanel/styled\";\nimport { Header } from \"../Header\";\nimport { PanelBody } from \"../PanelBody\";\nimport { DateController, isSameYear } from \"../../date-util\";\nimport type { IYearPanelProps } from '../interface';\n\nconst YEAR_DECADE_COUNT = 10;\nconst YEAR_COL_COUNT = 3;\nconst YEAR_ROW_COUNT = 4;\n\nexport const YearPanel: React.FC<IYearPanelProps> = React.memo((props) => {\n  const { viewDate, value, onPanelChange, onSelect, disabledDate, showNow, nowNode } = props;\n\n  const yearNumber = DateController.getYear(viewDate);\n  const startYear =\n    Math.floor(yearNumber / YEAR_DECADE_COUNT) * YEAR_DECADE_COUNT;\n  const endYear = startYear + YEAR_DECADE_COUNT - 1;\n  const baseYear = DateController.setYear(\n    viewDate,\n    startYear -\n      Math.ceil((YEAR_COL_COUNT * YEAR_ROW_COUNT - YEAR_DECADE_COUNT) / 2)\n  );\n\n  const handleSelect = useCallback(\n    (value: Dayjs) => {\n      onSelect(value);\n      onPanelChange('year', \"date\");\n    },\n    [onSelect]\n  );\n\n  const onDecadeChange = useCallback((diff: number) => {\n    const newDate = DateController.addYear(viewDate, diff * 10);\n    onSelect(newDate);\n  }, [viewDate, onSelect]);\n\n  return (\n    <PanelWrapper showNow={showNow}>\n      <Header onPrev={() => onDecadeChange(-1)} onNext={() => onDecadeChange(1)}>\n        <span>\n          {startYear}-{endYear}\n        </span>\n      </Header>\n      <PanelBody\n        viewDate={viewDate}\n        rowNum={YEAR_ROW_COUNT}\n        colNum={YEAR_COL_COUNT}\n        baseDate={baseYear}\n        getCellDate={DateController.addYear}\n        getCellText={DateController.getYear}\n        onSelect={handleSelect}\n        disabledDate={disabledDate}\n        mode=\"year\"\n        getCellClassName={(curDate: Dayjs) => [\n          'year',\n          value && isSameYear(curDate, value) ? 'selected' : undefined,\n          DateController.getYear(curDate) < startYear || DateController.getYear(curDate) > endYear ? 'notCurrentPeriod' : undefined,\n        ]}\n      />\n      {nowNode}\n    </PanelWrapper>\n  );\n});\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,WAAW,QAAQ,OAAO;AAAC,qBACf;AAC5B,SAASC,YAAY;AACrB,SAASC,MAAM;AACf,SAASC,SAAS;AAClB,SAASC,cAAc,EAAEC,UAAU;AAGnC,IAAMC,iBAAiB,GAAG,EAAE;AAC5B,IAAMC,cAAc,GAAG,CAAC;AACxB,IAAMC,cAAc,GAAG,CAAC;AAExB,OAAO,IAAMC,SAAoC,gBAAGV,KAAK,CAACW,IAAI,CAAC,UAACC,KAAK,EAAK;EACxE,IAAQC,QAAQ,GAAqED,KAAK,CAAlFC,QAAQ;IAAEC,KAAK,GAA8DF,KAAK,CAAxEE,KAAK;IAAEC,aAAa,GAA+CH,KAAK,CAAjEG,aAAa;IAAEC,QAAQ,GAAqCJ,KAAK,CAAlDI,QAAQ;IAAEC,YAAY,GAAuBL,KAAK,CAAxCK,YAAY;IAAEC,OAAO,GAAcN,KAAK,CAA1BM,OAAO;IAAEC,OAAO,GAAKP,KAAK,CAAjBO,OAAO;EAEhF,IAAMC,UAAU,GAAGf,cAAc,CAACgB,OAAO,CAACR,QAAQ,CAAC;EACnD,IAAMS,SAAS,GACbC,IAAI,CAACC,KAAK,CAACJ,UAAU,GAAGb,iBAAiB,CAAC,GAAGA,iBAAiB;EAChE,IAAMkB,OAAO,GAAGH,SAAS,GAAGf,iBAAiB,GAAG,CAAC;EACjD,IAAMmB,QAAQ,GAAGrB,cAAc,CAACsB,OAAO,CACrCd,QAAQ,EACRS,SAAS,GACPC,IAAI,CAACK,IAAI,CAAC,CAACpB,cAAc,GAAGC,cAAc,GAAGF,iBAAiB,IAAI,CAAC,CAAC,CACvE;EAED,IAAMsB,YAAY,GAAG5B,WAAW,CAC9B,UAACa,KAAY,EAAK;IAChBE,QAAQ,CAACF,KAAK,CAAC;IACfC,aAAa,CAAC,MAAM,EAAE,MAAM,CAAC;EAC/B,CAAC,EACD,CAACC,QAAQ,CAAC,CACX;EAED,IAAMc,cAAc,GAAG7B,WAAW,CAAC,UAAC8B,IAAY,EAAK;IACnD,IAAMC,OAAO,GAAG3B,cAAc,CAAC4B,OAAO,CAACpB,QAAQ,EAAEkB,IAAI,GAAG,EAAE,CAAC;IAC3Df,QAAQ,CAACgB,OAAO,CAAC;EACnB,CAAC,EAAE,CAACnB,QAAQ,EAAEG,QAAQ,CAAC,CAAC;EAExB,oBACE,eAAC,YAAY;IAAC,OAAO,EAAEE;EAAQ,gBAC7B,eAAC,MAAM;IAAC,MAAM,EAAE;MAAA,OAAMY,cAAc,CAAC,CAAC,CAAC,CAAC;IAAA,CAAC;IAAC,MAAM,EAAE;MAAA,OAAMA,cAAc,CAAC,CAAC,CAAC;IAAA;EAAC,gBACxE,6BACGR,SAAS,OAAGG,OAAO,CACf,CACA,eACT,eAAC,SAAS;IACR,QAAQ,EAAEZ,QAAS;IACnB,MAAM,EAAEJ,cAAe;IACvB,MAAM,EAAED,cAAe;IACvB,QAAQ,EAAEkB,QAAS;IACnB,WAAW,EAAErB,cAAc,CAAC4B,OAAQ;IACpC,WAAW,EAAE5B,cAAc,CAACgB,OAAQ;IACpC,QAAQ,EAAEQ,YAAa;IACvB,YAAY,EAAEZ,YAAa;IAC3B,IAAI,EAAC,MAAM;IACX,gBAAgB,EAAE,0BAACiB,OAAc;MAAA,OAAK,CACpC,MAAM,EACNpB,KAAK,IAAIR,UAAU,CAAC4B,OAAO,EAAEpB,KAAK,CAAC,GAAG,UAAU,GAAGqB,SAAS,EAC5D9B,cAAc,CAACgB,OAAO,CAACa,OAAO,CAAC,GAAGZ,SAAS,IAAIjB,cAAc,CAACgB,OAAO,CAACa,OAAO,CAAC,GAAGT,OAAO,GAAG,kBAAkB,GAAGU,SAAS,CAC1H;IAAA;EAAC,EACF,EACDhB,OAAO,CACK;AAEnB,CAAC,CAAC"}