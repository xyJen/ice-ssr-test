{"version":3,"file":"MapAnchor.js","names":["React","ReactDOM","PosIcon","Pos","Anchor","props","left","top","duration","dur","toFixed","transition","current","MapAnchor","place","remove","requestAnimationFrame","render","ensureContainer","move","pLeft","pTop","dLeft","dTop","dist","Math","sqrt","unmountComponentAtNode","id","divEle","document","querySelector","ele","createElement","style","position","width","body","appendChild"],"sources":["../../../../src/office/guidance/MapAnchor.tsx"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { PosIcon } from './posIcon';\nimport { Pos } from './style';\n\nexport const Anchor = (props: { left: number, top: number, duration: number }) => {\n\n  const {\n    left = 0,\n    top = 0,\n    duration = 500,\n  } = props;\n\n  const dur = (duration / 1000).toFixed(3);\n\n  return <Pos style={{ top: top - 20, left: left - 10, transition: `top ${dur}s ease-in-out, left ${dur}s ease-in-out` }}>\n    <PosIcon />\n    <div className=\"circle\" />\n  </Pos>;\n};\n\n\n\n\nlet current: [number, number] | null = null;\n\n\nexport const MapAnchor = {\n\n  place: (left: number, top: number) => {\n    MapAnchor.remove();\n    requestAnimationFrame(\n      () => {\n        ReactDOM.render(<Anchor left={left} top={top} duration={0} />, ensureContainer());\n        current = [left, top];\n      }\n    );\n  },\n\n  move: (left: number, top: number) => {\n\n    if (current === null) {\n      return;\n    }\n\n    const [pLeft, pTop] = current;\n    const dLeft = left - pLeft;\n    const dTop = top - pTop;\n    const dist = Math.sqrt(dLeft * dLeft + dTop * dTop);\n    const duration = dist < 200 ? 200 : dist > 1000 ? 1000 : dist;\n\n    requestAnimationFrame(() => {\n      ReactDOM.render(<Anchor left={left} top={top} duration={duration} />, ensureContainer());\n      current = [left, top];\n    });\n  },\n\n  remove: () => {\n    ReactDOM.unmountComponentAtNode(ensureContainer());\n    current = null;\n  }\n};\n\n\n\nconst ensureContainer = (): HTMLDivElement => {\n\n  const id = 'wdn-map-anchor-root';\n\n  const divEle = document.querySelector(`div#${id}`);\n\n  if (!divEle) {\n    const ele = document.createElement('div');\n    ele.id = id;\n    ele.style.position = 'absolute';\n    ele.style.width = '100%';\n    ele.style.top = '0px';\n    ele.style.left = '0px';\n    document.body.appendChild(ele);\n  };\n\n  return document.querySelector(`div#${id}`)!;\n};"],"mappings":"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"}