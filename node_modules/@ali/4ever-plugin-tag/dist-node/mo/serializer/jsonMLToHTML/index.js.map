{"version":3,"sources":["../../../../../src/mo/serializer/jsonMLToHTML/index.tsx"],"names":["createJsonMLToHTMLFactory","plugins","createJsonMLToHTML","configs","name","match","node","tag","attrs","tagType","convert","metadata","imTitle","targetConvert"],"mappings":";;;;;;;;;AAAA;;AACA;;uBAA4B,a;;AAOb,SAASA,yBAAT,CAAmCC,OAAnC,EAAiE;AAC9E,SAAO,SAASC,kBAAT,CAA4BC,OAA5B,EAA4D;AACjE,WAAO;AACLC,MAAAA,IAAI,EAAE,KADD;AAGLC,MAAAA,KAAK,EAAGC,IAAD,IAA2B;AAChC,cAAMC,GAAG,GAAG,2BAAWD,IAAX,CAAZ;AACA,cAAME,KAAK,GAAG,8BAAcF,IAAd,CAAd;AACA,eAAOC,GAAG,KAAK,KAAR,IAAiB,CAAC,CAACC,KAAnB,IAA4BA,KAAK,CAACC,OAAzC;AACD,OAPI;AASLC,MAAAA,OAAO,EAAGJ,IAAD,IAAsC;AAC7C;AACA,cAAME,KAAK,GAAG,8BAAcF,IAAd,KAAuB,EAArC;AACA,cAAM;AAAEK,UAAAA,QAAF;AAAYF,UAAAA;AAAZ,YAAwBD,KAA9B;AACA,cAAM;AAAEI,UAAAA;AAAF,YAAcD,QAAQ,IAAI;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAAhC;AAEA,cAAMC,aAAa,GAAGZ,OAAO,CAACQ,OAAD,CAA7B;AACA,YAAII,aAAJ,EAAmB,OAAOA,aAAa,CAACL,KAAD,EAAQL,OAAR,CAApB;AAEnB,4BACE,eAAC,KAAD,CAAO,QAAP,qBACE;AAAM,uBAAU;AAAhB,WAAwBS,OAAxB,CADF,CADF;AAKD;AAvBI,KAAP;AAyBD,GA1BD;AA2BD","sourcesContent":["import * as React from 'react';\nimport {\n  JsonML,\n  getTagName,\n  getAttributes,\n} from '@ali/4ever-utils';\nimport type { JsonMLToHTMLRule } from '@ali/4ever-cangjie';\n\nexport default function createJsonMLToHTMLFactory(plugins: Record<string, any>) {\n  return function createJsonMLToHTML(configs: any): JsonMLToHTMLRule {\n    return {\n      name: 'tag',\n\n      match: (node: JsonML): boolean => {\n        const tag = getTagName(node);\n        const attrs = getAttributes(node) as Record<string, any>;\n        return tag === 'tag' && !!attrs && attrs.tagType;\n      },\n\n      convert: (node: JsonML): React.ReactElement => {\n        // @ts-ignore\n        const attrs = getAttributes(node) || {};\n        const { metadata, tagType } = attrs as Record<string, any>;\n        const { imTitle } = metadata || { imTitle: '' };\n\n        const targetConvert = plugins[tagType];\n        if (targetConvert) return targetConvert(attrs, configs);\n\n        return (\n          <React.Fragment>\n            <span data-type=\"tag\" >{imTitle}</span>\n          </React.Fragment>\n        );\n      },\n    };\n  }\n}\n"],"file":"index.js"}