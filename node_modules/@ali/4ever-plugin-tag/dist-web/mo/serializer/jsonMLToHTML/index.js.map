{"version":3,"sources":["../../../../../src/mo/serializer/jsonMLToHTML/index.tsx"],"names":["React","getTagName","getAttributes","createJsonMLToHTMLFactory","plugins","createJsonMLToHTML","configs","name","match","node","tag","attrs","tagType","convert","metadata","imTitle","targetConvert"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAEEC,UAFF,EAGEC,aAHF,QAIO,kBAJP;AAOA,eAAe,SAASC,yBAAT,CAAmCC,OAAnC,EAAiE;AAC9E,SAAO,SAASC,kBAAT,CAA4BC,OAA5B,EAA4D;AACjE,WAAO;AACLC,MAAAA,IAAI,EAAE,KADD;AAGLC,MAAAA,KAAK,EAAE,eAACC,IAAD,EAA2B;AAChC,YAAMC,GAAG,GAAGT,UAAU,CAACQ,IAAD,CAAtB;AACA,YAAME,KAAK,GAAGT,aAAa,CAACO,IAAD,CAA3B;AACA,eAAOC,GAAG,KAAK,KAAR,IAAiB,CAAC,CAACC,KAAnB,IAA4BA,KAAK,CAACC,OAAzC;AACD,OAPI;AASLC,MAAAA,OAAO,EAAE,iBAACJ,IAAD,EAAsC;AAC7C;AACA,YAAME,KAAK,GAAGT,aAAa,CAACO,IAAD,CAAb,IAAuB,EAArC;AAF6C,mBAGfE,KAHe;AAAA,YAGrCG,QAHqC,QAGrCA,QAHqC;AAAA,YAG3BF,OAH2B,QAG3BA,OAH2B;;AAAA,oBAIzBE,QAAQ,IAAI;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAJa;AAAA,YAIrCA,OAJqC,SAIrCA,OAJqC;;AAM7C,YAAMC,aAAa,GAAGZ,OAAO,CAACQ,OAAD,CAA7B;AACA,YAAII,aAAJ,EAAmB,OAAOA,aAAa,CAACL,KAAD,EAAQL,OAAR,CAApB;AAEnB,4BACE,eAAC,KAAD,CAAO,QAAP,qBACE;AAAM,uBAAU;AAAhB,WAAwBS,OAAxB,CADF,CADF;AAKD;AAvBI,KAAP;AAyBD,GA1BD;AA2BD","sourcesContent":["import * as React from 'react';\nimport {\n  JsonML,\n  getTagName,\n  getAttributes,\n} from '@ali/4ever-utils';\nimport type { JsonMLToHTMLRule } from '@ali/4ever-cangjie';\n\nexport default function createJsonMLToHTMLFactory(plugins: Record<string, any>) {\n  return function createJsonMLToHTML(configs: any): JsonMLToHTMLRule {\n    return {\n      name: 'tag',\n\n      match: (node: JsonML): boolean => {\n        const tag = getTagName(node);\n        const attrs = getAttributes(node) as Record<string, any>;\n        return tag === 'tag' && !!attrs && attrs.tagType;\n      },\n\n      convert: (node: JsonML): React.ReactElement => {\n        // @ts-ignore\n        const attrs = getAttributes(node) || {};\n        const { metadata, tagType } = attrs as Record<string, any>;\n        const { imTitle } = metadata || { imTitle: '' };\n\n        const targetConvert = plugins[tagType];\n        if (targetConvert) return targetConvert(attrs, configs);\n\n        return (\n          <React.Fragment>\n            <span data-type=\"tag\" >{imTitle}</span>\n          </React.Fragment>\n        );\n      },\n    };\n  }\n}\n"],"file":"index.js"}