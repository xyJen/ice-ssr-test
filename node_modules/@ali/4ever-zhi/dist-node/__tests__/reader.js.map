{"version":3,"sources":["../../../src/__tests__/reader.tsx"],"names":["mo","plugins","Reader","previewImage","transformImageURL","openLink","onMentionClick","onMentionHover","voteCardConfig","content","enableCard","config","rest","demoCardPlugin","cardType","renderNode","demoURLCardPlugin","demoTagPlugin","tagType","verticalAlign","demoProjectCardPlugin","ErrorComponent","Error","errorCardWithChildren","errorCard","errorTag","errorTagWithChildren","createZhiPlugins","zhiPlugins","GroupTagPlugin","ListGroupPlugin","CalendarCardPlugin","voteCard","VoteCardPlugin","ImTagPlugin","FormulaPlugin","image","link","mention","table","slateValue","Value","isValue","jsonMLToValue","normalize","MobileReader","zhiMobilePlugins"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Value } from '@ali/4ever-cangjie';\nimport { Serializer as Mo, createMoPlugins } from '@ali/4ever-mo';\nimport {\n  Reader as Zhi,\n  plugins as zhiPlugins,\n  mobilePlugins as zhiMobilePlugins,\n  createCustomizedZhiPlugins,\n  createMobileCustomizedZhiPlugins,\n  tagFactory,\n  cardFactory,\n  GroupTagPlugin,\n  ListGroupPlugin,\n  ImTagPlugin,\n  CalendarCardPlugin,\n  VoteCardPlugin,\n  FormulaPlugin,\n} from '..';\n\nconst mo = Mo({ plugins: createMoPlugins({}) });\n\nexport default function Reader({\n  previewImage,\n  transformImageURL,\n  openLink,\n  onMentionClick,\n  onMentionHover,\n  voteCardConfig,\n  content,\n  enableCard,\n  config = {},\n  ...rest\n}) {\n  const demoCardPlugin = cardFactory(() => {\n    return {\n      cardType: 'demo',\n      renderNode: () => {\n        return <div>zhi中的日程卡片-demo</div>;\n      },\n    };\n  });\n  const demoURLCardPlugin = cardFactory(() => {\n    return {\n      cardType: 'url',\n      renderNode: () => {\n        return <div>zhi中的URL卡片-demo</div>;\n      },\n    };\n  });\n  const demoTagPlugin = tagFactory(() => {\n    return {\n      tagType: 'demo',\n      verticalAlign: 'middle',\n      renderNode: () => {\n        return <div>tag-demo标签</div>;\n      },\n    };\n  });\n  const demoProjectCardPlugin = cardFactory(() => {\n    return {\n      cardType: 'projectCard',\n      renderNode: () => {\n        return <div>zhi中的项目看板卡片</div>;\n      },\n    };\n  });\n\n  const ErrorComponent: React.FC<any> = () => {\n    throw new Error('error ErrorComponent');\n  };\n\n  const errorCardWithChildren = cardFactory(() => {\n    return {\n      cardType: 'errorChildren',\n      renderNode: () => {\n        return (<ErrorComponent />);\n      },\n    };\n  });\n\n  const errorCard = cardFactory(() => {\n    return {\n      cardType: 'error',\n      renderNode: () => {\n        throw new Error('error errorCard');\n      },\n    };\n  });\n\n  const errorTag = tagFactory(() => {\n    return {\n      tagType: 'error',\n      renderNode: () => {\n        throw new Error('error errorTag');\n      },\n    };\n  });\n\n  const errorTagWithChildren = tagFactory(() => {\n    return {\n      tagType: 'errorChildren',\n      renderNode: () => {\n        return (<ErrorComponent />);\n      },\n    };\n  });\n\n  const createZhiPlugins = createCustomizedZhiPlugins({\n    ...zhiPlugins,\n    demoCardPlugin,\n    demoProjectCardPlugin,\n    demoTagPlugin,\n    demoURLCardPlugin,\n    GroupTagPlugin,\n    ListGroupPlugin,\n    errorCard,\n    errorCardWithChildren,\n    errorTag,\n    errorTagWithChildren,\n    CalendarCardPlugin,\n    voteCard: VoteCardPlugin,\n    ImTagPlugin,\n    FormulaPlugin,\n  });\n  const plugins = createZhiPlugins({\n    image: { previewImage, transformImageURL },\n    link: { openLink },\n    mention: { onMentionClick, onMentionHover },\n    voteCard: voteCardConfig,\n    table: { ...(config.table || {}) }\n  });\n  // eslint-disable-next-line\n  const slateValue = Value.isValue(content)\n    ? content\n    : mo.jsonMLToValue(content, { normalize: false });\n  return <Zhi content={slateValue} plugins={plugins} {...rest} />;\n}\n\nexport function MobileReader({\n  openLink,\n  enableCard,\n  content,\n  ...rest\n}) {\n\n  const createZhiPlugins = createMobileCustomizedZhiPlugins({\n    ...zhiMobilePlugins,\n  });\n  const plugins = createZhiPlugins({\n    link: { openLink },\n  });\n  // eslint-disable-next-line\n  const slateValue = Value.isValue(content)\n    ? content\n    : mo.jsonMLToValue(content, { normalize: false });\n  return <Zhi content={slateValue} plugins={plugins} {...rest} />;\n}\n"],"file":"reader.js"}