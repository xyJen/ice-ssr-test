{"version":3,"sources":["../../../../src/__tests__/voteCard/ui.test.tsx"],"names":["sleep","ms","Promise","resolve","setTimeout","createData","title","voteId","voteType","optionInfoList","content","pos","optionTicket","userOptionTicket","endTime","Date","getTime","showTicketBeforeVoting","modifyData","votedData","participateUserCount","totalVoteCount","voteCardConfig","locale","remove","add","expired","reVote","deadline","unit","total","submit","noDeadline","creator","titlePlaceholder","optionPlaceholder","checkbox","resultShow","always","afterVote","radio","save","cancel","edit","createVote","getVote","_id","setData","modifyVote","submitVote","isGrayEnable","voteCardConfig2","describe","it","asl","voteCard","container","voteDom","getByTestId","expect","toBe","queryByTestId","queryByText","votingCard","option","fireEvent","click","submitBtn","voteResultCard"],"mappings":";;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;uBAH4B,a;;AAK5B,SAASA,KAAT,CAAeC,EAAf,EAAmB;AACjB,SAAO,IAAIC,OAAJ,CAAYC,OAAO,IAAIC,UAAU,CAACD,OAAD,EAAUF,EAAV,CAAjC,CAAP;AACD;;AAGD,MAAMI,UAAU,GAAG;AACjBC,EAAAA,KAAK,EAAE,gBADU;AAEjBC,EAAAA,MAAM,EAAE,SAFS;AAGjBC,EAAAA,QAAQ,EAAE,CAHO;AAIjBC,EAAAA,cAAc,EAAE,CACd;AAAEC,IAAAA,OAAO,EAAE,QAAX;AAAqBC,IAAAA,GAAG,EAAE,CAA1B;AAA6BC,IAAAA,YAAY,EAAE,CAA3C;AAA8CC,IAAAA,gBAAgB,EAAE;AAAhE,GADc,EAEd;AAAEH,IAAAA,OAAO,EAAE,OAAX;AAAoBC,IAAAA,GAAG,EAAE,CAAzB;AAA4BC,IAAAA,YAAY,EAAE,CAA1C;AAA6CC,IAAAA,gBAAgB,EAAE;AAA/D,GAFc,EAGd;AAAEH,IAAAA,OAAO,EAAE,QAAX;AAAqBC,IAAAA,GAAG,EAAE,CAA1B;AAA6BC,IAAAA,YAAY,EAAE,CAA3C;AAA8CC,IAAAA,gBAAgB,EAAE;AAAhE,GAHc,EAId;AAAEH,IAAAA,OAAO,EAAE,SAAX;AAAsBC,IAAAA,GAAG,EAAE,CAA3B;AAA8BC,IAAAA,YAAY,EAAE,CAA5C;AAA+CC,IAAAA,gBAAgB,EAAE;AAAjE,GAJc,CAJC;AAUjBC,EAAAA,OAAO,EAAE,IAAIC,IAAJ,GAAWC,OAAX,KAAuB,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAjB,GAAsB,CAVrC;AAWjBC,EAAAA,sBAAsB,EAAE;AAXP,CAAnB;AAcA,MAAMC,UAAU,GAAG;AACjBZ,EAAAA,KAAK,EAAE,gBADU;AAEjBC,EAAAA,MAAM,EAAE,SAFS;AAGjBC,EAAAA,QAAQ,EAAE,CAHO;AAIjBC,EAAAA,cAAc,EAAE,CACd;AAAEC,IAAAA,OAAO,EAAE,QAAX;AAAqBC,IAAAA,GAAG,EAAE,CAA1B;AAA6BC,IAAAA,YAAY,EAAE,CAA3C;AAA8CC,IAAAA,gBAAgB,EAAE;AAAhE,GADc,EAEd;AAAEH,IAAAA,OAAO,EAAE,OAAX;AAAoBC,IAAAA,GAAG,EAAE,CAAzB;AAA4BC,IAAAA,YAAY,EAAE,CAA1C;AAA6CC,IAAAA,gBAAgB,EAAE;AAA/D,GAFc,EAGd;AAAEH,IAAAA,OAAO,EAAE,QAAX;AAAqBC,IAAAA,GAAG,EAAE,CAA1B;AAA6BC,IAAAA,YAAY,EAAE,CAA3C;AAA8CC,IAAAA,gBAAgB,EAAE;AAAhE,GAHc,EAId;AAAEH,IAAAA,OAAO,EAAE,SAAX;AAAsBC,IAAAA,GAAG,EAAE,CAA3B;AAA8BC,IAAAA,YAAY,EAAE,CAA5C;AAA+CC,IAAAA,gBAAgB,EAAE;AAAjE,GAJc,CAJC;AAUjBC,EAAAA,OAAO,EAAE,IAAIC,IAAJ,GAAWC,OAAX,KAAuB,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAjB,GAAsB,CAVrC;AAWjBC,EAAAA,sBAAsB,EAAE;AAXP,CAAnB;AAcA,MAAME,SAAS,GAAG;AAChBb,EAAAA,KAAK,EAAE,gBADS;AAEhBC,EAAAA,MAAM,EAAE,SAFQ;AAGhBC,EAAAA,QAAQ,EAAE,CAHM;AAIhBC,EAAAA,cAAc,EAAE,CACd;AAAEC,IAAAA,OAAO,EAAE,QAAX;AAAqBC,IAAAA,GAAG,EAAE,CAA1B;AAA6BC,IAAAA,YAAY,EAAE,CAA3C;AAA8CC,IAAAA,gBAAgB,EAAE;AAAhE,GADc,EAEd;AAAEH,IAAAA,OAAO,EAAE,OAAX;AAAoBC,IAAAA,GAAG,EAAE,CAAzB;AAA4BC,IAAAA,YAAY,EAAE,CAA1C;AAA6CC,IAAAA,gBAAgB,EAAE;AAA/D,GAFc,EAGd;AAAEH,IAAAA,OAAO,EAAE,QAAX;AAAqBC,IAAAA,GAAG,EAAE,CAA1B;AAA6BC,IAAAA,YAAY,EAAE,CAA3C;AAA8CC,IAAAA,gBAAgB,EAAE;AAAhE,GAHc,EAId;AAAEH,IAAAA,OAAO,EAAE,SAAX;AAAsBC,IAAAA,GAAG,EAAE,CAA3B;AAA8BC,IAAAA,YAAY,EAAE,CAA5C;AAA+CC,IAAAA,gBAAgB,EAAE;AAAjE,GAJc,CAJA;AAUhBC,EAAAA,OAAO,EAAE,IAAIC,IAAJ,GAAWC,OAAX,KAAuB,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAjB,GAAsB,CAVtC;AAWhBC,EAAAA,sBAAsB,EAAE,KAXR;AAYhBG,EAAAA,oBAAoB,EAAE,CAZN;AAahBC,EAAAA,cAAc,EAAE;AAbA,CAAlB;AAgBA,MAAMC,cAAc,GAAG;AACrBC,EAAAA,MAAM,EAAE;AACNC,IAAAA,MAAM,EAAE,IADF;AAENC,IAAAA,GAAG,EAAE,IAFC;AAGNC,IAAAA,OAAO,EAAE,IAHH;AAINC,IAAAA,MAAM,EAAE,MAJF;AAKNC,IAAAA,QAAQ,EAAE,MALJ;AAMNC,IAAAA,IAAI,EAAE,GANA;AAONC,IAAAA,KAAK,EAAE,KAPD;AAQNC,IAAAA,MAAM,EAAE,IARF;AASNC,IAAAA,UAAU,EAAE,OATN;AAUNC,IAAAA,OAAO,EAAE,IAVH;AAWNC,IAAAA,gBAAgB,EAAE,OAXZ;AAYNC,IAAAA,iBAAiB,EAAE,SAZb;AAaNC,IAAAA,QAAQ,EAAE,IAbJ;AAcNC,IAAAA,UAAU,EAAE,IAdN;AAeNC,IAAAA,MAAM,EAAE,MAfF;AAgBNC,IAAAA,SAAS,EAAE,OAhBL;AAiBNC,IAAAA,KAAK,EAAE,IAjBD;AAkBNC,IAAAA,IAAI,EAAE,IAlBA;AAmBNC,IAAAA,MAAM,EAAE,IAnBF;AAoBNC,IAAAA,IAAI,EAAE;AApBA,GADa;AAuBrBC,EAAAA,UAAU,EAAE,MAAM;AAChB,WAAO1C,OAAO,CAACC,OAAR,CAAgBE,UAAhB,CAAP;AACD,GAzBoB;AA0BrBwC,EAAAA,OAAO,EAAE,CAACC,GAAD,EAAMC,OAAN,KAAkB;AACzB,WAAOA,OAAO,CAAC1C,UAAD,CAAd;AACD,GA5BoB;AA6BrB2C,EAAAA,UAAU,EAAE,MAAM;AAChB,WAAO9C,OAAO,CAACC,OAAR,CAAgBe,UAAhB,CAAP;AACD,GA/BoB;AAgCrB+B,EAAAA,UAAU,EAAE,MAAM;AAChB,WAAO/C,OAAO,CAACC,OAAR,CAAgBgB,SAAhB,CAAP;AACD,GAlCoB;AAmCrB+B,EAAAA,YAAY,EAAE;AAnCO,CAAvB;AAsCA,MAAMC,eAAe,GAAG;AACtB5B,EAAAA,MAAM,EAAE;AACNC,IAAAA,MAAM,EAAE,IADF;AAENC,IAAAA,GAAG,EAAE,IAFC;AAGNC,IAAAA,OAAO,EAAE,IAHH;AAINC,IAAAA,MAAM,EAAE,MAJF;AAKNC,IAAAA,QAAQ,EAAE,MALJ;AAMNC,IAAAA,IAAI,EAAE,GANA;AAONC,IAAAA,KAAK,EAAE,KAPD;AAQNC,IAAAA,MAAM,EAAE,IARF;AASNC,IAAAA,UAAU,EAAE,OATN;AAUNC,IAAAA,OAAO,EAAE,IAVH;AAWNC,IAAAA,gBAAgB,EAAE,OAXZ;AAYNC,IAAAA,iBAAiB,EAAE,SAZb;AAaNC,IAAAA,QAAQ,EAAE,IAbJ;AAcNC,IAAAA,UAAU,EAAE,IAdN;AAeNC,IAAAA,MAAM,EAAE,MAfF;AAgBNC,IAAAA,SAAS,EAAE,OAhBL;AAiBNC,IAAAA,KAAK,EAAE,IAjBD;AAkBNC,IAAAA,IAAI,EAAE,IAlBA;AAmBNC,IAAAA,MAAM,EAAE,IAnBF;AAoBNC,IAAAA,IAAI,EAAE;AApBA,GADc;AAuBtBC,EAAAA,UAAU,EAAE,MAAM;AAChB,WAAO1C,OAAO,CAACC,OAAR,CAAgBE,UAAhB,CAAP;AACD,GAzBqB;AA0BtBwC,EAAAA,OAAO,EAAE,CAACC,GAAD,EAAMC,OAAN,KAAkB;AACzB,WAAOA,OAAO,CAAC1C,UAAD,CAAd;AACD,GA5BqB;AA6BtB2C,EAAAA,UAAU,EAAE,MAAM;AAChB,WAAO9C,OAAO,CAACC,OAAR,CAAgBe,UAAhB,CAAP;AACD,GA/BqB;AAgCtB+B,EAAAA,UAAU,EAAE,MAAM;AAChB,WAAO/C,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAP;AACD,GAlCqB;AAmCtB+C,EAAAA,YAAY,EAAE;AAnCQ,CAAxB;AAsCAE,QAAQ,CAAC,kBAAD,EAAqB,MAAM;AACjCC,EAAAA,EAAE,CAAC,WAAD,EAAc,MAAM;AACpB,UAAMC,GAAG,GAAG,CAAC,MAAD,EAASC,iBAAT,CAAZ;AACA,UAAMC,SAAS,GAAG,kCAChB,eAAC,eAAD;AACE,MAAA,OAAO,EAAEF,GADX;AAEE,MAAA,cAAc,EAAEhC;AAFlB,MADgB,CAAlB;AAOA,UAAMmC,OAAO,GAAGD,SAAS,CAACE,WAAV,CAAsB,MAAtB,CAAhB;AACAC,IAAAA,MAAM,CAAC,CAAC,CAACF,OAAH,CAAN,CAAkBG,IAAlB,CAAuB,IAAvB;AACD,GAXC,CAAF;AAaAP,EAAAA,EAAE,CAAC,WAAD,EAAc,YAAY;AAC1B,UAAMC,GAAG,GAAG,CAAC,MAAD,EAASC,iBAAT,CAAZ;AACA,UAAM;AAAEM,MAAAA,aAAF;AAAiBC,MAAAA;AAAjB,QAAiC,kCACrC,eAAC,eAAD;AACE,MAAA,OAAO,EAAER,GADX;AAEE,MAAA,cAAc,EAAEhC;AAFlB,MADqC,CAAvC;AAOA,UAAMtB,KAAK,CAAC,IAAD,CAAX;AAEA,UAAM+D,UAAU,GAAGF,aAAa,CAAC,4BAAD,CAAhC;AACAF,IAAAA,MAAM,CAAC,CAAC,CAACI,UAAH,CAAN,CAAqBH,IAArB,CAA0B,IAA1B;AAEA,UAAMI,MAAM,GAAGF,WAAW,CAAC,QAAD,CAA1B;;AACAG,2BAAUC,KAAV,CAAgBF,MAAhB;;AAEA,UAAMG,SAAS,GAAGL,WAAW,CAAC,IAAD,CAA7B;;AACAG,2BAAUC,KAAV,CAAgBC,SAAhB;;AAEA,UAAMnE,KAAK,CAAC,IAAD,CAAX;AACA,UAAM,qBAAQ,MAAM;AAClB,YAAMoE,cAAc,GAAGP,aAAa,CAAC,4BAAD,CAApC;AACAF,MAAAA,MAAM,CAAC,CAAC,CAACS,cAAH,CAAN,CAAyBR,IAAzB,CAA8B,IAA9B;AACD,KAHK,CAAN;AAID,GAzBC,CAAF;AA2BAP,EAAAA,EAAE,CAAC,gBAAD,EAAmB,YAAY;AAC/B,UAAMC,GAAG,GAAG,CAAC,MAAD,EAASC,iBAAT,CAAZ;AACA,UAAM;AAAEM,MAAAA,aAAF;AAAiBC,MAAAA;AAAjB,QAAiC,kCACrC,eAAC,eAAD;AACE,MAAA,OAAO,EAAER,GADX;AAEE,MAAA,cAAc,EAAEH;AAFlB,MADqC,CAAvC;AAOA,UAAMnD,KAAK,CAAC,IAAD,CAAX;AAEA,UAAM+D,UAAU,GAAGF,aAAa,CAAC,4BAAD,CAAhC;AACAF,IAAAA,MAAM,CAAC,CAAC,CAACI,UAAH,CAAN,CAAqBH,IAArB,CAA0B,IAA1B;AAEA,UAAMI,MAAM,GAAGF,WAAW,CAAC,QAAD,CAA1B;;AACAG,2BAAUC,KAAV,CAAgBF,MAAhB;;AAEA,UAAMG,SAAS,GAAGL,WAAW,CAAC,IAAD,CAA7B;;AACAG,2BAAUC,KAAV,CAAgBC,SAAhB;;AAEA,UAAMnE,KAAK,CAAC,IAAD,CAAX;AACA,UAAM,qBAAQ,MAAM;AAClB,YAAMoE,cAAc,GAAGP,aAAa,CAAC,4BAAD,CAApC;AACAF,MAAAA,MAAM,CAAC,CAAC,CAACS,cAAH,CAAN,CAAyBR,IAAzB,CAA8B,IAA9B;AACD,KAHK,CAAN;AAID,GAzBC,CAAF;AA0BD,CAnEO,CAAR","sourcesContent":["import * as React from 'react';\nimport { render, waitFor } from '@testing-library/react';\nimport Zhi from '../reader';\nimport voteCard from '../fixtures/voteCard.json';\nimport { fireEvent } from '@ali/4ever-dev-test';\n\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n\nconst createData = {\n  title: '文字蓝鲸团队2022团建计划',\n  voteId: 'abc-123',\n  voteType: 1,\n  optionInfoList: [\n    { content: '北京环球影城', pos: 1, optionTicket: 0, userOptionTicket: 0 },\n    { content: '上海迪士尼', pos: 2, optionTicket: 0, userOptionTicket: 0 },\n    { content: '广州长隆乐园', pos: 3, optionTicket: 0, userOptionTicket: 0 },\n    { content: '常州中华恐龙园', pos: 4, optionTicket: 0, userOptionTicket: 0 }\n  ],\n  endTime: new Date().getTime() + 1000 * 60 * 60 * 24 * 7,\n  showTicketBeforeVoting: false,\n}\n\nconst modifyData = {\n  title: '文字蓝鲸团队2022团建计划',\n  voteId: 'abc-123',\n  voteType: 2,\n  optionInfoList: [\n    { content: '北京环球影城', pos: 1, optionTicket: 0, userOptionTicket: 0 },\n    { content: '上海迪士尼', pos: 2, optionTicket: 0, userOptionTicket: 0 },\n    { content: '广州长隆乐园', pos: 3, optionTicket: 0, userOptionTicket: 0 },\n    { content: '常州中华恐龙园', pos: 4, optionTicket: 0, userOptionTicket: 0 }\n  ],\n  endTime: new Date().getTime() + 1000 * 60 * 60 * 24 * 7,\n  showTicketBeforeVoting: false,\n}\n\nconst votedData = {\n  title: '文字蓝鲸团队2022团建计划',\n  voteId: 'abc-123',\n  voteType: 2,\n  optionInfoList: [\n    { content: '北京环球影城', pos: 1, optionTicket: 0, userOptionTicket: 1 },\n    { content: '上海迪士尼', pos: 2, optionTicket: 0, userOptionTicket: 0 },\n    { content: '广州长隆乐园', pos: 3, optionTicket: 0, userOptionTicket: 0 },\n    { content: '常州中华恐龙园', pos: 4, optionTicket: 0, userOptionTicket: 0 }\n  ],\n  endTime: new Date().getTime() + 1000 * 60 * 60 * 24 * 7,\n  showTicketBeforeVoting: false,\n  participateUserCount: 1,\n  totalVoteCount: 1,\n}\n\nconst voteCardConfig = {\n  locale: {\n    remove: '删除',\n    add: '添加',\n    expired: '截止',\n    reVote: '重新投票',\n    deadline: '截止日期',\n    unit: '票',\n    total: '人投票',\n    submit: '投票',\n    noDeadline: '无截止日期',\n    creator: '创建',\n    titlePlaceholder: '请输入标题',\n    optionPlaceholder: '请输入选项内容',\n    checkbox: '多选',\n    resultShow: '单选',\n    always: '始终显示',\n    afterVote: '投票后可见',\n    radio: '单选',\n    save: '保存',\n    cancel: '取消',\n    edit: '编辑',\n  },\n  createVote: () => {\n    return Promise.resolve(createData);\n  },\n  getVote: (_id, setData) => {\n    return setData(createData);\n  },\n  modifyVote: () => {\n    return Promise.resolve(modifyData);\n  },\n  submitVote: () => {\n    return Promise.resolve(votedData);\n  },\n  isGrayEnable: true,\n};\n\nconst voteCardConfig2 = {\n  locale: {\n    remove: '删除',\n    add: '添加',\n    expired: '截止',\n    reVote: '重新投票',\n    deadline: '截止日期',\n    unit: '票',\n    total: '人投票',\n    submit: '投票',\n    noDeadline: '无截止日期',\n    creator: '创建',\n    titlePlaceholder: '请输入标题',\n    optionPlaceholder: '请输入选项内容',\n    checkbox: '多选',\n    resultShow: '单选',\n    always: '始终显示',\n    afterVote: '投票后可见',\n    radio: '单选',\n    save: '保存',\n    cancel: '取消',\n    edit: '编辑',\n  },\n  createVote: () => {\n    return Promise.resolve(createData);\n  },\n  getVote: (_id, setData) => {\n    return setData(createData);\n  },\n  modifyVote: () => {\n    return Promise.resolve(modifyData);\n  },\n  submitVote: () => {\n    return Promise.resolve({});\n  },\n  isGrayEnable: true,\n};\n\ndescribe('Zhi:calendarCard', () => {\n  it('pc端正常显示投票', () => {\n    const asl = ['root', voteCard];\n    const container = render(\n      <Zhi\n        content={asl}\n        voteCardConfig={voteCardConfig}\n      />\n    );\n\n    const voteDom = container.getByTestId('vote')\n    expect(!!voteDom).toBe(true);\n  });\n\n  it('pc端可以发起投票', async () => {\n    const asl = ['root', voteCard];\n    const { queryByTestId, queryByText } = render(\n      <Zhi\n        content={asl}\n        voteCardConfig={voteCardConfig}\n      />\n    );\n\n    await sleep(1000);\n\n    const votingCard = queryByTestId('card-vote-container-voting');\n    expect(!!votingCard).toBe(true);\n\n    const option = queryByText('北京环球影城');\n    fireEvent.click(option);\n\n    const submitBtn = queryByText('投票');\n    fireEvent.click(submitBtn);\n\n    await sleep(2000);\n    await waitFor(() => {\n      const voteResultCard = queryByTestId('card-vote-container-result');\n      expect(!!voteResultCard).toBe(true);\n    });\n  });\n\n  it('pc端可以发起投票，投票截止', async () => {\n    const asl = ['root', voteCard];\n    const { queryByTestId, queryByText } = render(\n      <Zhi\n        content={asl}\n        voteCardConfig={voteCardConfig2}\n      />\n    );\n\n    await sleep(1000);\n\n    const votingCard = queryByTestId('card-vote-container-voting');\n    expect(!!votingCard).toBe(true);\n\n    const option = queryByText('北京环球影城');\n    fireEvent.click(option);\n\n    const submitBtn = queryByText('投票');\n    fireEvent.click(submitBtn);\n\n    await sleep(2000);\n    await waitFor(() => {\n      const voteResultCard = queryByTestId('card-vote-container-result');\n      expect(!!voteResultCard).toBe(true);\n    });\n  });\n});\n"],"file":"ui.test.js"}