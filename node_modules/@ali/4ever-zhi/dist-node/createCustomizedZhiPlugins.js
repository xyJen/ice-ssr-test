"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _everCangjie = require("@ali/4ever-cangjie");

var _everUtils = require("@ali/4ever-utils");

var _everPluginClipboard = require("@ali/4ever-plugin-clipboard");

var _everPluginParagraph = require("@ali/4ever-plugin-paragraph");

var _everPluginContainer = require("@ali/4ever-plugin-container");

var _everFactory = require("@ali/4ever-factory");

/**
 * @packageDocumentation
 * @module Reader
 */

/**
 * 创建自定义插件。传入自定义的插件 Map，返回一个插件创建函数（createZhiPlugins）。
 * 传入内容格式：{ PluginName: PluginFactory }
 */
function createCustomizedZhiPlugins(plugins) {
  const paragraphPlugin = plugins.paragraph || _everPluginParagraph.zhiFactory;
  const {
    unknownCard = _everFactory.createUnknownCardZhiPlugin,
    unknownTag = _everFactory.createUnknownTagZhiPlugin,
    ...rest
  } = plugins;
  const allPlugins = { ...rest,
    container: _everPluginContainer.zhiFactory,
    // unknown 卡片/标签必须放在最后做兜底显示
    unknownCard,
    unknownTag,
    clipboard: _everPluginClipboard.zhiFactory,
    paragraph: paragraphPlugin
  };
  return function createZhiPlugins(configs = {}) {
    const result = [];
    (0, _everUtils.sortPlugins)(allPlugins).forEach(({
      factory
    }) => {
      const plugin = factory(configs);
      result.push(plugin);
    });
    const schema = (0, _everCangjie.createSchema)(result);
    result.push({
      schema
    });
    return result;
  };
}

var _default = createCustomizedZhiPlugins;
exports.default = _default;
//# sourceMappingURL=createCustomizedZhiPlugins.js.map