{"version":3,"sources":["../../src/createCustomizedZhiPlugins.ts"],"names":["createCustomizedZhiPlugins","plugins","paragraphPlugin","paragraph","unknownCard","createUnknownCardPlugin","unknownTag","createUnknownTagPlugin","rest","allPlugins","container","clipboard","createZhiPlugins","configs","result","forEach","factory","plugin","push","schema"],"mappings":";;;;;;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AATA;AACA;AACA;AACA;;AAOA;AACA;AACA;AACA;AACA,SAASA,0BAAT,CAAoCC,OAApC,EAAuE;AACrE,QAAMC,eAAe,GAAGD,OAAO,CAACE,SAAR,IAAqBA,+BAA7C;AACA,QAAM;AAAEC,IAAAA,WAAW,GAAGC,uCAAhB;AAAyCC,IAAAA,UAAU,GAAGC,sCAAtD;AAA8E,OAAGC;AAAjF,MAA0FP,OAAhG;AAEA,QAAMQ,UAAU,GAAG,EACjB,GAAGD,IADc;AAEjBE,IAAAA,SAAS,EAATA,+BAFiB;AAGjB;AACAN,IAAAA,WAJiB;AAKjBE,IAAAA,UALiB;AAMjBK,IAAAA,SAAS,EAATA,+BANiB;AAOjBR,IAAAA,SAAS,EAAED;AAPM,GAAnB;AAUA,SAAO,SAASU,gBAAT,CAA0BC,OAAO,GAAG,EAApC,EAAwC;AAC7C,UAAMC,MAAgB,GAAG,EAAzB;AACA,gCAAYL,UAAZ,EAAwBM,OAAxB,CAAgC,CAAC;AAAEC,MAAAA;AAAF,KAAD,KAAiB;AAC/C,YAAMC,MAAM,GAAGD,OAAO,CAACH,OAAD,CAAtB;AACAC,MAAAA,MAAM,CAACI,IAAP,CAAYD,MAAZ;AACD,KAHD;AAIA,UAAME,MAAM,GAAG,+BAAaL,MAAb,CAAf;AACAA,IAAAA,MAAM,CAACI,IAAP,CAAY;AAAEC,MAAAA;AAAF,KAAZ;AACA,WAAOL,MAAP;AACD,GATD;AAUD;;eAEcd,0B","sourcesContent":["/**\n * @packageDocumentation\n * @module Reader\n */\nimport { createSchema, Plugin } from '@ali/4ever-cangjie';\nimport { sortPlugins, Factory } from '@ali/4ever-utils';\nimport { zhiFactory as clipboard } from '@ali/4ever-plugin-clipboard';\nimport { zhiFactory as paragraph } from '@ali/4ever-plugin-paragraph';\nimport { zhiFactory as container } from '@ali/4ever-plugin-container';\nimport { createUnknownCardZhiPlugin as createUnknownCardPlugin, createUnknownTagZhiPlugin as createUnknownTagPlugin } from '@ali/4ever-factory';\n/**\n * 创建自定义插件。传入自定义的插件 Map，返回一个插件创建函数（createZhiPlugins）。\n * 传入内容格式：{ PluginName: PluginFactory }\n */\nfunction createCustomizedZhiPlugins(plugins: Record<string, Function>) {\n  const paragraphPlugin = plugins.paragraph || paragraph;\n  const { unknownCard = createUnknownCardPlugin, unknownTag = createUnknownTagPlugin, ...rest } = plugins;\n\n  const allPlugins = {\n    ...rest,\n    container,\n    // unknown 卡片/标签必须放在最后做兜底显示\n    unknownCard,\n    unknownTag,\n    clipboard,\n    paragraph: paragraphPlugin,\n  } as unknown as Record<string, Factory<Plugin>>;\n\n  return function createZhiPlugins(configs = {}) {\n    const result: Plugin[] = [];\n    sortPlugins(allPlugins).forEach(({ factory }) => {\n      const plugin = factory(configs);\n      result.push(plugin);\n    });\n    const schema = createSchema(result as any);\n    result.push({ schema });\n    return result;\n  };\n}\n\nexport default createCustomizedZhiPlugins;\n"],"file":"createCustomizedZhiPlugins.js"}