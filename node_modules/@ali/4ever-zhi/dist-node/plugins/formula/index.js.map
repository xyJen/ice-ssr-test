{"version":3,"sources":["../../../../src/plugins/formula/index.tsx"],"names":["FormulaPlaceholder","FormulaView","FormulaPlugin","components","createZhiFormulaTagPlugin","config","formulaConfig","formula","locale","tagType","renderNode","props","node","data","metadata","moFactory"],"mappings":";;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;uBAH4B,a;AAK5B,MAAM;AACJA,EAAAA,kBADI;AAEJC,EAAAA;AAFI,IAGFC,sBAAcC,UAHlB;AAYA,MAAMC,yBAAyB,GAAG,gCAAYC,MAAD,IAAyC;AACpF,QAAMC,aAAa,GAAGD,MAAM,CAACE,OAAP,IAAkB,EAAxC;AACA,QAAM;AAAEC,IAAAA,MAAM,GAAG;AAAX,MAAkBF,aAAxB;;AAFoF,0BAkB9E,eAAC,kBAAD;AACE,IAAA,MAAM,EAAEE,MADV;AAEE,IAAA,UAAU,MAFZ;AAGE,IAAA,QAAQ;AAHV,IAlB8E;;AAGpF,SAAO;AACLC,IAAAA,OAAO,EAAE,SADJ;AAELC,IAAAA,UAAU,EAAGC,KAAD,IAA4B;AACtC,YAAMC,IAAI,GAAGD,KAAK,CAACC,IAAnB;AACA,YAAM;AAAEL,QAAAA;AAAF,UAAcK,IAAI,CAACC,IAAL,CAAUC,QAA9B;;AACA,UAAIP,OAAJ,EAAa;AACX,4BACE,eAAC,WAAD;AACE,UAAA,OAAO,EAAEA,OADX;AAEE,UAAA,SAAS,EAAE,KAFb;AAGE,UAAA,QAAQ;AAHV,UADF;AAOD;;AACD;AAOD;AArBI,GAAP;AAuBD,CA1BiC,EA0B/BQ,4BA1B+B,CAAlC;eA4BeX,yB","sourcesContent":["import * as React from 'react';\nimport { RenderNodeProps, Inline } from '@ali/4ever-cangjie';\nimport { FormulaPlugin } from '@ali/4ever-bi';\nimport { zhiTagFactory as tagFactory } from '@ali/4ever-factory';\nimport { moFactory } from '@ali/4ever-plugin-formula';\n\nconst {\n  FormulaPlaceholder,\n  FormulaView,\n} = FormulaPlugin.components!;\n\nexport interface FormulaConfig {\n  /**\n   * 国际化文案。\n   */\n  locale?: Record<string, string>;\n}\n\nconst createZhiFormulaTagPlugin = tagFactory((config: { formula?: FormulaConfig }) => {\n  const formulaConfig = config.formula || {};\n  const { locale = {} } = formulaConfig;\n  return {\n    tagType: 'formula',\n    renderNode: (props: RenderNodeProps) => {\n      const node = props.node as Inline;\n      const { formula } = node.data.metadata;\n      if (formula) {\n        return (\n          <FormulaView\n            formula={formula}\n            isEditing={false}\n            readOnly\n          />\n        );\n      }\n      return (\n        <FormulaPlaceholder\n          locale={locale}\n          notAllowed\n          readOnly\n        />\n      );\n    },\n  };\n}, moFactory);\n\nexport default createZhiFormulaTagPlugin;\n"],"file":"index.js"}