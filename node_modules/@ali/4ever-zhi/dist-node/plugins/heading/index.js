"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createParagraphPlugin;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var React = _interopRequireWildcard(require("react"));

var _everMo = require("@ali/4ever-mo");

var _HeadingWrapper = _interopRequireDefault(require("./HeadingWrapper"));

var _everPluginParagraph = require("@ali/4ever-plugin-paragraph");

var _everPluginList = require("@ali/4ever-plugin-list");

var _Heading = _interopRequireDefault(require("../heading/Heading"));

var _everPluginHeading = require("@ali/4ever-plugin-heading");

const _createElement = /*#__PURE__*/React.createElement;
const Paragraph = (0, _everPluginList.createZhiListItem)(_everPluginParagraph.ReadParagraph);

function createParagraphPlugin(config) {
  const Heading = (0, _Heading.default)(Paragraph);
  const headingConfig = config.heading || {};
  const {
    onHeadingsChange
  } = headingConfig;
  const maybeRenderEditable = typeof onHeadingsChange === 'function' ? {
    renderEditable(props, controller, next) {
      return /*#__PURE__*/_createElement(_HeadingWrapper.default, (0, _extends2.default)({}, props, {
        controller: controller,
        onHeadingsChange: headingConfig.onHeadingsChange
      }), next());
    }

  } : {};
  return { ...(0, _everPluginHeading.moFactory)({}),
    ...maybeRenderEditable,

    renderNode(props, _, next) {
      const {
        node
      } = props;

      if (!_everMo.Heading.isHeading(node)) {
        return next();
      }

      return /*#__PURE__*/_createElement(Heading, (0, _extends2.default)({}, props, {
        onHeadingsChange: onHeadingsChange
      }));
    }

  };
}
//# sourceMappingURL=index.js.map