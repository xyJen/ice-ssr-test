{"version":3,"sources":["../../../../../src/plugins/subject/components/content.tsx"],"names":["components","utils","SubjectPlugin","isEmptyNode","InlinePlaceholder","Placeholder","Content","HeadingGroupPlugin","SubjectContent","props","node","children","config","controller","rest","subjectPr","data","name","locale","reviewTextPlaceholderMobile","topicContentPlaceholderMobile","conclusionContentPlaceholder","node1","nodes","displayPlaceholder1","item","length","placeholder","React","useMemo","slice","displayName"],"mappings":";;;;;;;;;AAAA;;AAGA;;AAEA;;uBAJ4B,a;AAM5B,MAAM;AAAEA,EAAAA,UAAF;AAAcC,EAAAA;AAAd,IAAwBC,yBAA9B;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAkBF,KAAxB;AACA,MAAM;AAAEG,EAAAA,iBAAF;AAAqBC,EAAAA;AAArB,IAAqCL,UAA3C;AAEA,MAAM;AAAEM,EAAAA;AAAF,IAAcC,8BAApB;;AASA,MAAMC,cAA6C,GAAIC,KAAD,IAAW;AAC/D,QAAM;AACJC,IAAAA,IADI;AAEJC,IAAAA,QAFI;AAGJC,IAAAA,MAHI;AAIJC,IAAAA,UAJI;AAKJ,OAAGC;AALC,MAMFL,KANJ;AAQA,QAAM;AAAEM,IAAAA,SAAS,GAAG;AAAd,MAAqBL,IAAI,CAACM,IAAhC;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAWF,SAAjB;AACA,QAAM;AAAEG,IAAAA,MAAM,GAAG;AAAX,MAAkBN,MAAxB;AAEA,QAAM;AACJO,IAAAA,2BADI;AAEJC,IAAAA,6BAFI;AAGJC,IAAAA;AAHI,MAIFH,MAJJ;AAMA,QAAMI,KAAK,GAAGZ,IAAI,CAACa,KAAL,CAAW,CAAX,CAAd;;AAEA,QAAMC,mBAAmB,GAAIC,IAAD,IAAiB;AAC3C,QAAIR,IAAI,KAAK,QAAT,IAAqBA,IAAI,KAAK,OAA9B,IAAyCA,IAAI,KAAK,YAAtD,EAAoE;AAClE,aAAO,8BAAkBQ,IAAlB,KAA2BtB,WAAW,CAACsB,IAAD,CAAtC,IAAgDf,IAAI,CAACa,KAAL,CAAWG,MAAX,KAAsB,CAA7E;AACD;;AACD,WAAO,KAAP;AACD,GALD;;AArB+D,0BAgCzD,eAAC,iBAAD;AAAmB;AAAnB,KACGP,2BADH,CAhCyD;;AAAA,2BAyCzD,eAAC,iBAAD;AAAmB;AAAnB,KACGC,6BADH,CAzCyD;;AAAA,2BAkDzD,eAAC,iBAAD;AAAmB;AAAnB,KACGC,4BADH,CAlDyD;;AA4B/D,QAAMM,WAAW,GAAGC,KAAK,CAACC,OAAN,CAAc,MAAM;AAEtC,QAAIZ,IAAI,KAAK,QAAb,EAAuB;AACrB;AAKD,KARqC,CAUtC;;;AACA,QAAIA,IAAI,KAAK,OAAb,EAAsB;AACpB;AAKD,KAjBqC,CAmBtC;;;AACA,QAAIA,IAAI,KAAK,YAAb,EAA2B;AACzB;AAKD;;AACD,WAAO,IAAP;AACD,GA5BmB,EA4BjB,CAACI,4BAAD,EAA+BJ,IAA/B,EAAqCG,6BAArC,EAAoED,2BAApE,CA5BiB,CAApB;;AA8BA,MAAIR,QAAQ,CAACe,MAAT,KAAoB,CAAxB,EAA2B;AACzB,WAAO,IAAP;AACD;;AAED,sBACE,eAAC,OAAD,EAAaZ,IAAb,EACGQ,KAAK,iBACJ,eAAC,WAAD;AACE,IAAA,UAAU,EAAET,UADd;AAEE,IAAA,IAAI,EAAES,KAFR;AAGE,IAAA,OAAO,EAAEE,mBAHX;AAIE,IAAA,WAAW,EAAEG;AAJf,KAMGhB,QAAQ,CAAC,CAAD,CANX,CAFJ,EAWGA,QAAQ,CAACmB,KAAT,CAAe,CAAf,CAXH,CADF;AAeD,CA7ED;;AA+EAtB,cAAc,CAACuB,WAAf,GAA6B,gBAA7B;eAEevB,c","sourcesContent":["import * as React from 'react';\nimport {  Block, Controller } from '@ali/4ever-cangjie';\nimport { Heading1Data } from '@ali/4ever-mo';\nimport { HeadingGroupPlugin, SubjectPlugin } from '@ali/4ever-bamboo';\nimport { SubjectConfig } from '../types';\nimport { isNormalParagraph } from '../utils';\n\nconst { components, utils } = SubjectPlugin;\nconst { isEmptyNode } = utils;\nconst { InlinePlaceholder, Placeholder } = components;\n\nconst { Content } = HeadingGroupPlugin;\n\nexport interface SubjectContentProps extends HeadingGroupPlugin.ContentProps {\n  node: Block<Heading1Data>;\n  children: React.ReactNode[];\n  config: SubjectConfig;\n  controller: Controller;\n}\n\nconst SubjectContent: React.FC<SubjectContentProps> = (props) => {\n  const {\n    node,\n    children,\n    config,\n    controller,\n    ...rest\n  } = props;\n\n  const { subjectPr = {} } = node.data;\n  const { name } = subjectPr;\n  const { locale = {} } = config;\n\n  const {\n    reviewTextPlaceholderMobile,\n    topicContentPlaceholderMobile,\n    conclusionContentPlaceholder,\n  } = locale;\n\n  const node1 = node.nodes[1] as Block;\n\n  const displayPlaceholder1 = (item: Block) => {\n    if (name === 'review' || name === 'topic' || name === 'conclusion') {\n      return isNormalParagraph(item) && isEmptyNode(item) && node.nodes.length === 2;\n    }\n    return false;\n  };\n\n  const placeholder = React.useMemo(() => {\n\n    if (name === 'review') {\n      return (\n        <InlinePlaceholder data-placeholder>\n          {reviewTextPlaceholderMobile}\n        </InlinePlaceholder>\n      );\n    }\n\n    // 议题内容 placeholder\n    if (name === 'topic') {\n      return (\n        <InlinePlaceholder data-placeholder>\n          {topicContentPlaceholderMobile}\n        </InlinePlaceholder>\n      );\n    }\n\n    // 会议小结内容 placeholder\n    if (name === 'conclusion') {\n      return (\n        <InlinePlaceholder data-placeholder>\n          {conclusionContentPlaceholder}\n        </InlinePlaceholder>\n      );\n    }\n    return null;\n  }, [conclusionContentPlaceholder, name, topicContentPlaceholderMobile, reviewTextPlaceholderMobile]);\n\n  if (children.length === 0) {\n    return null;\n  }\n\n  return (\n    <Content {...rest}>\n      {node1 && (\n        <Placeholder\n          controller={controller}\n          node={node1}\n          display={displayPlaceholder1}\n          placeholder={placeholder}\n        >\n          {children[0]}\n        </Placeholder>\n      )}\n      {children.slice(1)}\n    </Content>\n  );\n};\n\nSubjectContent.displayName = 'SubjectContent';\n\nexport default SubjectContent;\n"],"file":"content.js"}