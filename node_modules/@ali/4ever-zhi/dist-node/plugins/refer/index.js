"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createReferPlugin;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var React = _interopRequireWildcard(require("react"));

var _everBamboo = require("@ali/4ever-bamboo");

var _everPluginRefer = require("@ali/4ever-plugin-refer");

const _createElement = /*#__PURE__*/React.createElement;

function createReferPlugin(config) {
  const referConfig = config.refer || {};
  const {
    previewDingTalkFile
  } = referConfig;
  return { ...(0, _everPluginRefer.moFactory)({}),

    renderNode(props, _, next) {
      const {
        node
      } = props;

      if (node.type !== 'refer') {
        return next();
      }

      return /*#__PURE__*/_createElement(_everBamboo.ReferPlugin.Refer, (0, _extends2.default)({}, props, {
        onDingpanPreview: previewDingTalkFile
      }));
    }

  };
}
//# sourceMappingURL=index.js.map