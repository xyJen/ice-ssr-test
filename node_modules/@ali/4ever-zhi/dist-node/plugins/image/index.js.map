{"version":3,"sources":["../../../../src/plugins/image/index.tsx"],"names":["createImagePlugin","config","imageConfig","image","renderNode","props","controller","next","node","type","data","locale","placeholder","attributes","renderEditable"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;AACA;;AACA;;uBAL4B,a;;AAQb,SAASA,iBAAT,CAA2BC,MAA3B,EAEJ;AACT,QAAMC,WAAW,GAAGD,MAAM,CAACE,KAAP,IAAgB,EAApC;AAEA,SAAO,EACL,GAAG,gCAAU,EAAV,CADE;;AAELC,IAAAA,UAAU,CAACC,KAAD,EAAQC,UAAR,EAAoBC,IAApB,EAA0B;AAClC,YAAM;AAAEC,QAAAA;AAAF,UAAWH,KAAjB,CADkC,CAElC;;AACA,UAAIG,IAAI,CAACC,IAAL,KAAc,OAAlB,EAA2B;AACzB,eAAOF,IAAI,EAAX;AACD;;AAED,UAAI,qBAASC,IAAD,CAAiBE,IAAzB,CAAJ,EAAoC;AAClC,4BACE,eAAC,uBAAD,CAAa,iBAAb,QACGR,WAAW,EAAES,MAAb,EAAqBC,WAArB,IAAoC,OADvC,CADF;AAKD;;AAED,YAAM;AAAEC,QAAAA;AAAF,UAAiBR,KAAvB;AAEA,0BACE,eAAC,cAAD,6BACMQ,UADN;AAEE;AACA,QAAA,IAAI,EAAEL,IAHR;AAIE,QAAA,UAAU,EAAEF,UAJd,CAKE;AALF;AAME,QAAA,WAAW,EAAEJ;AANf,SADF;AAUD,KA7BI;;AA8BLY,IAAAA,cAAc,EAAE,mCAAqBZ,WAArB;AA9BX,GAAP;AAgCD","sourcesContent":["import * as React from 'react';\nimport { isEmpty } from 'lodash-es';\nimport { ImagePlugin } from '@ali/4ever-bamboo';\nimport { Plugin, Inline } from '@ali/4ever-cangjie';\nimport Image from './image';\nimport createRenderEditable from './createRenderEditable';\nimport { moFactory } from '@ali/4ever-plugin-image';\n\n\nexport default function createImagePlugin(config: {\n  image?: ImagePlugin.ImagePluginConfig;\n}): Plugin {\n  const imageConfig = config.image || {};\n\n  return {\n    ...moFactory({}),\n    renderNode(props, controller, next) {\n      const { node } = props;\n      // @ts-ignore\n      if (node.type !== 'image') {\n        return next();\n      }\n\n      if (isEmpty((node as Inline).data)) {\n        return (\n          <ImagePlugin.InlinePlaceholder>\n            {imageConfig?.locale?.placeholder || 'Image'}\n          </ImagePlugin.InlinePlaceholder>\n        )\n      }\n\n      const { attributes } = props;\n\n      return (\n        <Image\n          {...attributes}\n          // @ts-ignore\n          node={node}\n          controller={controller}\n          // @ts-ignore\n          imageConfig={imageConfig}\n        />\n      );\n    },\n    renderEditable: createRenderEditable(imageConfig),\n  };\n}\n"],"file":"index.js"}