{"version":3,"sources":["../../src/createCustomizedZhiPlugins.ts"],"names":["createSchema","sortPlugins","zhiFactory","clipboard","paragraph","container","createUnknownCardZhiPlugin","createUnknownCardPlugin","createUnknownTagZhiPlugin","createUnknownTagPlugin","createCustomizedZhiPlugins","plugins","paragraphPlugin","unknownCard","unknownTag","rest","allPlugins","createZhiPlugins","configs","result","forEach","factory","plugin","push","schema"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA,SAASA,YAAT,QAAqC,oBAArC;AACA,SAASC,WAAT,QAAqC,kBAArC;AACA,SAASC,UAAU,IAAIC,SAAvB,QAAwC,6BAAxC;AACA,SAASD,UAAU,IAAIE,SAAvB,QAAwC,6BAAxC;AACA,SAASF,UAAU,IAAIG,SAAvB,QAAwC,6BAAxC;AACA,SAASC,0BAA0B,IAAIC,uBAAvC,EAAgEC,yBAAyB,IAAIC,sBAA7F,QAA2H,oBAA3H;AACA;AACA;AACA;AACA;;AACA,SAASC,0BAAT,CAAoCC,OAApC,EAAuE;AACrE,MAAMC,eAAe,GAAGD,OAAO,CAACP,SAAR,IAAqBA,SAA7C;;AADqE,6BAE2BO,OAF3B,CAE7DE,WAF6D;AAAA,MAE7DA,WAF6D,qCAE/CN,uBAF+C;AAAA,4BAE2BI,OAF3B,CAEtBG,UAFsB;AAAA,MAEtBA,UAFsB,oCAETL,sBAFS;AAAA,MAEkBM,IAFlB,iCAE2BJ,OAF3B;;AAIrE,MAAMK,UAAU,gBACXD,IADW;AAEdV,IAAAA,SAAS,EAATA,SAFc;AAGd;AACAQ,IAAAA,WAAW,EAAXA,WAJc;AAKdC,IAAAA,UAAU,EAAVA,UALc;AAMdX,IAAAA,SAAS,EAATA,SANc;AAOdC,IAAAA,SAAS,EAAEQ;AAPG,IAAhB;;AAUA,SAAO,SAASK,gBAAT,CAA0BC,OAA1B,EAAwC;AAAA,QAAdA,OAAc;AAAdA,MAAAA,OAAc,GAAJ,EAAI;AAAA;;AAC7C,QAAMC,MAAgB,GAAG,EAAzB;AACAlB,IAAAA,WAAW,CAACe,UAAD,CAAX,CAAwBI,OAAxB,CAAgC,gBAAiB;AAAA,UAAdC,OAAc,QAAdA,OAAc;AAC/C,UAAMC,MAAM,GAAGD,OAAO,CAACH,OAAD,CAAtB;AACAC,MAAAA,MAAM,CAACI,IAAP,CAAYD,MAAZ;AACD,KAHD;AAIA,QAAME,MAAM,GAAGxB,YAAY,CAACmB,MAAD,CAA3B;AACAA,IAAAA,MAAM,CAACI,IAAP,CAAY;AAAEC,MAAAA,MAAM,EAANA;AAAF,KAAZ;AACA,WAAOL,MAAP;AACD,GATD;AAUD;;AAED,eAAeT,0BAAf","sourcesContent":["/**\n * @packageDocumentation\n * @module Reader\n */\nimport { createSchema, Plugin } from '@ali/4ever-cangjie';\nimport { sortPlugins, Factory } from '@ali/4ever-utils';\nimport { zhiFactory as clipboard } from '@ali/4ever-plugin-clipboard';\nimport { zhiFactory as paragraph } from '@ali/4ever-plugin-paragraph';\nimport { zhiFactory as container } from '@ali/4ever-plugin-container';\nimport { createUnknownCardZhiPlugin as createUnknownCardPlugin, createUnknownTagZhiPlugin as createUnknownTagPlugin } from '@ali/4ever-factory';\n/**\n * 创建自定义插件。传入自定义的插件 Map，返回一个插件创建函数（createZhiPlugins）。\n * 传入内容格式：{ PluginName: PluginFactory }\n */\nfunction createCustomizedZhiPlugins(plugins: Record<string, Function>) {\n  const paragraphPlugin = plugins.paragraph || paragraph;\n  const { unknownCard = createUnknownCardPlugin, unknownTag = createUnknownTagPlugin, ...rest } = plugins;\n\n  const allPlugins = {\n    ...rest,\n    container,\n    // unknown 卡片/标签必须放在最后做兜底显示\n    unknownCard,\n    unknownTag,\n    clipboard,\n    paragraph: paragraphPlugin,\n  } as unknown as Record<string, Factory<Plugin>>;\n\n  return function createZhiPlugins(configs = {}) {\n    const result: Plugin[] = [];\n    sortPlugins(allPlugins).forEach(({ factory }) => {\n      const plugin = factory(configs);\n      result.push(plugin);\n    });\n    const schema = createSchema(result as any);\n    result.push({ schema });\n    return result;\n  };\n}\n\nexport default createCustomizedZhiPlugins;\n"],"file":"createCustomizedZhiPlugins.js"}