{"version":3,"sources":["../../../../../src/plugins/headingGroup/handlers/createOnCangjieSelect.ts"],"names":["HeadingGroupPlugin","createAutoUnfold","handlers","toggleFold","actions","createOnCangjieSelect","config","autoUnfold","handleAutoUnfold","onAutoUnfold","controller","node","run","fold","inject","onCangjieSelect","event","next"],"mappings":"AACA,SAASA,kBAAT,QAAmC,mBAAnC;IAGQC,gB,GAAqBD,kBAAkB,CAACE,Q,CAAxCD,gB;IACAE,U,GAAeH,kBAAkB,CAACI,O,CAAlCD,U;;AAER,SAASE,qBAAT,CAA+BC,MAA/B,EAAsF;AAAA,2BACrDA,MADqD,CAC5EC,UAD4E;AAAA,MAC5EA,UAD4E,mCAC/D,KAD+D;AAGpF,MAAMC,gBAAgB,GAAGP,gBAAgB,CAAC;AACxCQ,IAAAA,YAAY,EAAE,sBAACC,UAAD,EAAaC,IAAb;AAAA,aAAsBD,UAAU,CAACE,GAAX,CAAe,UAAf,EAA2BT,UAAU,CAAC;AACxEQ,QAAAA,IAAI,EAAJA,IADwE;AAExEE,QAAAA,IAAI,EAAE;AAFkE,OAAD,CAArC,CAAtB;AAAA,KAD0B;AAKxCC,IAAAA,MAAM,EAAE;AALgC,GAAD,CAAzC;AAQA,SAAO,SAASC,eAAT,CAAyBC,KAAzB,EAAgCN,UAAhC,EAA4CO,IAA5C,EAAkD;AACvD,QAAIV,UAAJ,EAAgB;AACdC,MAAAA,gBAAgB,CAACQ,KAAD,EAAQN,UAAR,CAAhB;AACD;;AACD,WAAOO,IAAI,EAAX;AACD,GALD;AAMD;;AAED,eAAeZ,qBAAf","sourcesContent":["import { Plugin } from '@ali/4ever-cangjie';\nimport { HeadingGroupPlugin } from '@ali/4ever-bamboo';\nimport { HeadingGroupConfig } from '../types';\n\nconst { createAutoUnfold } = HeadingGroupPlugin.handlers;\nconst { toggleFold } = HeadingGroupPlugin.actions;\n\nfunction createOnCangjieSelect(config: HeadingGroupConfig): Plugin['onCangjieSelect'] {\n  const { autoUnfold = false } = config;\n\n  const handleAutoUnfold = createAutoUnfold({\n    onAutoUnfold: (controller, node) => controller.run('onAction', toggleFold({\n      node,\n      fold: false,\n    })),\n    inject: true,\n  });\n\n  return function onCangjieSelect(event, controller, next) {\n    if (autoUnfold) {\n      handleAutoUnfold(event, controller);\n    }\n    return next();\n  };\n}\n\nexport default createOnCangjieSelect;\n"],"file":"createOnCangjieSelect.js"}