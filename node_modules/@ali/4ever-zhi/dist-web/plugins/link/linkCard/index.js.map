{"version":3,"sources":["../../../../../src/plugins/link/linkCard/index.tsx"],"names":["zhiCardFactory","cardFactory","locale","createRenderNode","LinkCardPlugin","LinkPlugin","copyLink","utils","LINK_CARD_COPY_LINK","actions","createZhiCalendarCardPlugin","config","linkConfig","link","serializer","clipboard","cardType","renderNode","queries","getMinTableColWidth","getMinTableColWidthForBlockLinkCard","onAction","action","controller","next","type","payload","node"],"mappings":";AAAA,SAASA,cAAc,IAAIC,WAA3B,QAA8C,oBAA9C;AACA,OAAOC,MAAP;AACA,OAAOC,gBAAP;AAEA,SAASC,cAAT,QAA+B,eAA/B;AACA,SAASC,UAAT,QAA2B,mBAA3B;IAEQC,Q,GAAaF,cAAc,CAACG,K,CAA5BD,Q;IACAE,mB,GAAwBJ,cAAc,CAACK,O,CAAvCD,mB;AAGR,IAAME,2BAA2B,GAAGT,WAAW,CAAC,UAACU,MAAD,EAA2E;AAAA;;AACzH,MAAMC,UAAU;AACdV,IAAAA,MAAM,eAAOA,MAAM,CAACW,IAAP,CAAYX,MAAnB;AADQ,KAEXS,MAAM,CAACE,IAFI,CAAhB;;AAKA,MAAMC,UAAU,wBAAGH,MAAM,CAACI,SAAV,qBAAG,kBAAkBD,UAArC;AAEA,SAAO;AACLE,IAAAA,QAAQ,EAAE,MADL;AAELC,IAAAA,UAAU,EAAEd,gBAAgB,CAACS,UAAD,EAAa,KAAb,CAFvB;AAGLM,IAAAA,OAAO,EAAE;AACPC,MAAAA,mBAAmB,EAAEd,UAAU,CAACe;AADzB,KAHJ;AAMLC,IAAAA,QAAQ,EAAE,kBAACC,MAAD,EAASC,UAAT,EAAqBC,IAArB,EAA8B;AAAA,UAC9BC,IAD8B,GACZH,MADY,CAC9BG,IAD8B;AAAA,UACxBC,OADwB,GACZJ,MADY,CACxBI,OADwB;;AAGtC,UAAID,IAAI,KAAKjB,mBAAb,EAAkC;AAAA,mBACfkB,OADe;AAAA,YACxBC,IADwB,QACxBA,IADwB;AAEhC,eAAOrB,QAAQ,CAACiB,UAAD,EAAaI,IAAb,EAAmBb,UAAU,IAAIS,UAAU,CAACT,UAA5C,CAAf;AACD;;AAED,aAAOU,IAAI,EAAX;AACD;AAfI,GAAP;AAiBD,CAzB8C,CAA/C;AA2BA,eAAed,2BAAf","sourcesContent":["import { zhiCardFactory as cardFactory } from '@ali/4ever-factory';\nimport locale from '../../../locales/zh_CN';\nimport createRenderNode from './createRenderNode';\nimport { BlockLinkCard, LinkPluginConfig } from '../types';\nimport { LinkCardPlugin } from '@ali/4ever-bi';\nimport { LinkPlugin } from '@ali/4ever-bamboo';\n\nconst { copyLink } = LinkCardPlugin.utils;\nconst { LINK_CARD_COPY_LINK } = LinkCardPlugin.actions;\n\n\nconst createZhiCalendarCardPlugin = cardFactory((config: { link?: LinkPluginConfig, clipboard?: { serializer?: any } }) => {\n  const linkConfig = {\n    locale: { ...locale.link.locale },\n    ...config.link\n  };\n\n  const serializer = config.clipboard?.serializer;\n\n  return {\n    cardType: 'link',\n    renderNode: createRenderNode(linkConfig, false),\n    queries: {\n      getMinTableColWidth: LinkPlugin.getMinTableColWidthForBlockLinkCard\n    },\n    onAction: (action, controller, next) => {\n      const { type, payload } = action;\n\n      if (type === LINK_CARD_COPY_LINK) {\n        const { node } = payload as { node: BlockLinkCard };\n        return copyLink(controller, node, serializer || controller.serializer);\n      }\n\n      return next();\n    }\n  };\n});\n\nexport default createZhiCalendarCardPlugin;\n"],"file":"index.js"}