{"version":3,"sources":["../../../../src/plugins/formula/index.tsx"],"names":["React","FormulaPlugin","zhiTagFactory","tagFactory","moFactory","components","FormulaPlaceholder","FormulaView","createZhiFormulaTagPlugin","config","formulaConfig","formula","locale","tagType","renderNode","props","node","data","metadata"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAC5B,SAASC,aAAT,QAA8B,eAA9B;AACA,SAASC,aAAa,IAAIC,UAA1B,QAA4C,oBAA5C;AACA,SAASC,SAAT,QAA0B,2BAA1B;WAKIH,aAAa,CAACI,U;IAFhBC,kB,QAAAA,kB;IACAC,W,QAAAA,W;AAUF,IAAMC,yBAAyB,GAAGL,UAAU,CAAC,UAACM,MAAD,EAAyC;AACpF,MAAMC,aAAa,GAAGD,MAAM,CAACE,OAAP,IAAkB,EAAxC;AADoF,8BAE5DD,aAF4D,CAE5EE,MAF4E;AAAA,MAE5EA,MAF4E,sCAEnE,EAFmE;;AAAA,2BAkB9E,eAAC,kBAAD;AACE,IAAA,MAAM,EAAEA,MADV;AAEE,IAAA,UAAU,MAFZ;AAGE,IAAA,QAAQ;AAHV,IAlB8E;;AAGpF,SAAO;AACLC,IAAAA,OAAO,EAAE,SADJ;AAELC,IAAAA,UAAU,EAAE,oBAACC,KAAD,EAA4B;AACtC,UAAMC,IAAI,GAAGD,KAAK,CAACC,IAAnB;AADsC,UAE9BL,OAF8B,GAElBK,IAAI,CAACC,IAAL,CAAUC,QAFQ,CAE9BP,OAF8B;;AAGtC,UAAIA,OAAJ,EAAa;AACX,4BACE,eAAC,WAAD;AACE,UAAA,OAAO,EAAEA,OADX;AAEE,UAAA,SAAS,EAAE,KAFb;AAGE,UAAA,QAAQ;AAHV,UADF;AAOD;;AACD;AAOD;AArBI,GAAP;AAuBD,CA1B2C,EA0BzCP,SA1ByC,CAA5C;AA4BA,eAAeI,yBAAf","sourcesContent":["import * as React from 'react';\nimport { RenderNodeProps, Inline } from '@ali/4ever-cangjie';\nimport { FormulaPlugin } from '@ali/4ever-bi';\nimport { zhiTagFactory as tagFactory } from '@ali/4ever-factory';\nimport { moFactory } from '@ali/4ever-plugin-formula';\n\nconst {\n  FormulaPlaceholder,\n  FormulaView,\n} = FormulaPlugin.components!;\n\nexport interface FormulaConfig {\n  /**\n   * 国际化文案。\n   */\n  locale?: Record<string, string>;\n}\n\nconst createZhiFormulaTagPlugin = tagFactory((config: { formula?: FormulaConfig }) => {\n  const formulaConfig = config.formula || {};\n  const { locale = {} } = formulaConfig;\n  return {\n    tagType: 'formula',\n    renderNode: (props: RenderNodeProps) => {\n      const node = props.node as Inline;\n      const { formula } = node.data.metadata;\n      if (formula) {\n        return (\n          <FormulaView\n            formula={formula}\n            isEditing={false}\n            readOnly\n          />\n        );\n      }\n      return (\n        <FormulaPlaceholder\n          locale={locale}\n          notAllowed\n          readOnly\n        />\n      );\n    },\n  };\n}, moFactory);\n\nexport default createZhiFormulaTagPlugin;\n"],"file":"index.js"}