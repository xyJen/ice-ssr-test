{"version":3,"sources":["../../../../../src/plugins/subject/components/content.tsx"],"names":["React","HeadingGroupPlugin","SubjectPlugin","isNormalParagraph","components","utils","isEmptyNode","InlinePlaceholder","Placeholder","Content","SubjectContent","props","node","children","config","controller","rest","data","subjectPr","name","locale","reviewTextPlaceholderMobile","topicContentPlaceholderMobile","conclusionContentPlaceholder","node1","nodes","displayPlaceholder1","item","length","placeholder","useMemo","slice","displayName"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {  Block, Controller } from '@ali/4ever-cangjie';\nimport { Heading1Data } from '@ali/4ever-mo';\nimport { HeadingGroupPlugin, SubjectPlugin } from '@ali/4ever-bamboo';\nimport { SubjectConfig } from '../types';\nimport { isNormalParagraph } from '../utils';\n\nconst { components, utils } = SubjectPlugin;\nconst { isEmptyNode } = utils;\nconst { InlinePlaceholder, Placeholder } = components;\n\nconst { Content } = HeadingGroupPlugin;\n\nexport interface SubjectContentProps extends HeadingGroupPlugin.ContentProps {\n  node: Block<Heading1Data>;\n  children: React.ReactNode[];\n  config: SubjectConfig;\n  controller: Controller;\n}\n\nconst SubjectContent: React.FC<SubjectContentProps> = (props) => {\n  const {\n    node,\n    children,\n    config,\n    controller,\n    ...rest\n  } = props;\n\n  const { subjectPr = {} } = node.data;\n  const { name } = subjectPr;\n  const { locale = {} } = config;\n\n  const {\n    reviewTextPlaceholderMobile,\n    topicContentPlaceholderMobile,\n    conclusionContentPlaceholder,\n  } = locale;\n\n  const node1 = node.nodes[1] as Block;\n\n  const displayPlaceholder1 = (item: Block) => {\n    if (name === 'review' || name === 'topic' || name === 'conclusion') {\n      return isNormalParagraph(item) && isEmptyNode(item) && node.nodes.length === 2;\n    }\n    return false;\n  };\n\n  const placeholder = React.useMemo(() => {\n\n    if (name === 'review') {\n      return (\n        <InlinePlaceholder data-placeholder>\n          {reviewTextPlaceholderMobile}\n        </InlinePlaceholder>\n      );\n    }\n\n    // 议题内容 placeholder\n    if (name === 'topic') {\n      return (\n        <InlinePlaceholder data-placeholder>\n          {topicContentPlaceholderMobile}\n        </InlinePlaceholder>\n      );\n    }\n\n    // 会议小结内容 placeholder\n    if (name === 'conclusion') {\n      return (\n        <InlinePlaceholder data-placeholder>\n          {conclusionContentPlaceholder}\n        </InlinePlaceholder>\n      );\n    }\n    return null;\n  }, [conclusionContentPlaceholder, name, topicContentPlaceholderMobile, reviewTextPlaceholderMobile]);\n\n  if (children.length === 0) {\n    return null;\n  }\n\n  return (\n    <Content {...rest}>\n      {node1 && (\n        <Placeholder\n          controller={controller}\n          node={node1}\n          display={displayPlaceholder1}\n          placeholder={placeholder}\n        >\n          {children[0]}\n        </Placeholder>\n      )}\n      {children.slice(1)}\n    </Content>\n  );\n};\n\nSubjectContent.displayName = 'SubjectContent';\n\nexport default SubjectContent;\n"],"file":"content.js"}