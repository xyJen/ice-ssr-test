{"version":3,"sources":["../../../../../src/bi/components/next/highlightButton.tsx"],"names":["React","EColorPanelMode","HighlightColorPicker","setHighlight","DEFAULT_COLOR","setColorPanelMode","HighlightRole","HighlightButton","props","controller","locale","rest","currentHighlight","query","highlight","isCollapsedAtEdge","value","selection","isDisabled","handleChange","useCallback","color","run","currentPreset","mode","handleSelectValueChange","art","normal","buttonTitle"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAC5B,SAASC,eAAT,QAAgC,iBAAhC;AACA,SAASC,oBAAT,QAAqC,sBAArC;AACA,SAASC,YAAT;AACA,SAASC,aAAT;AACA,SAASC,iBAAT,QAAkC,wBAAlC;AACA,SAASC,aAAT;AAOA,eAAe,SAASC,eAAT,CAAyBC,KAAzB,EAAsD;AAAA;;AAAA,MAC3DC,UAD2D,GAC3BD,KAD2B,CAC3DC,UAD2D;AAAA,MAC/CC,MAD+C,GAC3BF,KAD2B,CAC/CE,MAD+C;AAAA,MACpCC,IADoC,iCAC3BH,KAD2B;;AAEnE,MAAMI,gBAAgB,GAAGH,UAAU,CAACI,KAAX,CAAiB,cAAjB,CAAzB;AACA,MAAMC,SAAS,GAAG,OAAOF,gBAAP,KAA4B,QAA5B,GAAuCA,gBAAvC,GAA0DR,aAA5E;AAHmE,MAI3DW,iBAJ2D,GAIrCN,UAAU,CAACO,KAAX,CAAiBC,SAJoB,CAI3DF,iBAJ2D;AAKnE,MAAMG,UAAU,GAAGH,iBAAiB,IAC/BN,UAAU,CAACI,KAAX,CAAiB,oBAAjB,CADc,IAEdJ,UAAU,CAACI,KAAX,CAAiB,iBAAjB,CAFc,IAGdJ,UAAU,CAACI,KAAX,CAAiB,uBAAjB,CAHL;AAMA,MAAMM,YAAY,GAAGnB,KAAK,CAACoB,WAAN,CAAkB,UAACC,KAAD,EAAmB;AACxDZ,IAAAA,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BnB,YAAY,CAACkB,KAAD,CAAvC;AACD,GAFoB,EAElB,CAACZ,UAAD,CAFkB,CAArB;AAIA,MAAMc,aAAa,wBAAGd,UAAU,CAACI,KAAX,CAAiB,mBAAjB,CAAH,qBAAG,kBAAuCW,IAA7D;AAEA,MAAMC,uBAAuB,GAAGzB,KAAK,CAACoB,WAAN,CAAkB,UAACI,IAAD,EAA4B;AAC5Ef,IAAAA,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BjB,iBAAiB,CAAC;AAAEmB,MAAAA,IAAI,EAAGA,IAAI,KAAK,KAAT,GAAiBvB,eAAe,CAACyB,GAAjC,GAAuCzB,eAAe,CAAC0B;AAAhE,KAAD,CAA5C;AACD,GAF+B,EAE7B,CAAClB,UAAD,CAF6B,CAAhC;AAIA,sBACE,eAAC,oBAAD;AACE,IAAA,MAAM,EAAC,sBADT;AAEE,IAAA,QAAQ,EAAE,CAAC,CAACS,UAFd;AAGE,IAAA,KAAK,EAAEJ,SAHT;AAIE,IAAA,aAAa,EAAEK,YAJjB;AAKE,IAAA,KAAK,EAAET,MAAM,CAACkB,WALhB;AAME,IAAA,OAAO,EAAElB,MAAM,CAACkB,WANlB;AAOE,IAAA,IAAI,EAAEtB,aAAa,CAACQ,SAPtB;AAQE,IAAA,aAAa,EAAES,aARjB;AASE,IAAA,qBAAqB,EAAEE;AATzB,KAUMd,IAVN,EADF;AAcD","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { EColorPanelMode } from '@ali/we-toolbar';\nimport { HighlightColorPicker } from '@ali/4ever-component';\nimport { setHighlight } from '../../actions';\nimport { DEFAULT_COLOR } from '../../constants';\nimport { setColorPanelMode } from '@ali/4ever-plugin-pref';\nimport { HighlightRole } from '../../../utils/role';\n\nexport interface HighlightButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n}\n\nexport default function HighlightButton(props: HighlightButtonProps) {\n  const { controller, locale, ...rest } = props;\n  const currentHighlight = controller.query('getHighlight');\n  const highlight = typeof currentHighlight === 'string' ? currentHighlight : DEFAULT_COLOR;\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled = isCollapsedAtEdge\n    || controller.query('isSelectionInImage')\n    || controller.query('isSelectionInHr')\n    || controller.query('isSelectionInLinkCard');\n\n\n  const handleChange = React.useCallback((color: string) => {\n    controller.run('onAction', setHighlight(color));\n  }, [controller]);\n\n  const currentPreset = controller.query('getColorPanelMode')?.mode;\n\n  const handleSelectValueChange = React.useCallback((mode: 'normal' | 'art') => {\n    controller.run('onAction', setColorPanelMode({ mode: (mode === 'art' ? EColorPanelMode.art : EColorPanelMode.normal) }));\n  }, [controller]);\n\n  return (\n    <HighlightColorPicker\n      testid=\"bi-toolbar-highlight\"\n      disabled={!!isDisabled}\n      color={highlight}\n      onColorChange={handleChange}\n      title={locale.buttonTitle}\n      tooltip={locale.buttonTitle}\n      role={HighlightRole.highlight}\n      currentPreset={currentPreset}\n      onCurrentPresetChange={handleSelectValueChange}\n      {...rest}\n    />\n  );\n}\n"],"file":"highlightButton.js"}