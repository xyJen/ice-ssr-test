{"version":3,"sources":["../../../../src/bi/components/highlightButton.tsx"],"names":["React","ColorPicker","EColorPickerIcon","setHighlight","DEFAULT_COLOR","setColorPanelMode","HighlightRole","HighlightButton","props","controller","locale","rest","currentHighlight","query","highlight","isCollapsedAtEdge","value","selection","isDisabled","handleChange","useCallback","color","run","getColorPanelMode","mode","handleSelectValueChange","backgroundfont","buttonTitle"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAC5B,SAASC,WAAT,EAAsBC,gBAAtB,QAA+D,iBAA/D;AACA;AACA,SAASC,YAAT;AACA,SAASC,aAAT;AACA,SAASC,iBAAT,QAAkC,wBAAlC;AACA,SAASC,aAAT;AAOA,eAAe,SAASC,eAAT,CAAyBC,KAAzB,EAAsD;AAAA,MAC3DC,UAD2D,GAC3BD,KAD2B,CAC3DC,UAD2D;AAAA,MAC/CC,MAD+C,GAC3BF,KAD2B,CAC/CE,MAD+C;AAAA,MACpCC,IADoC,iCAC3BH,KAD2B;;AAEnE,MAAMI,gBAAgB,GAAGH,UAAU,CAACI,KAAX,CAAiB,cAAjB,CAAzB;AACA,MAAMC,SAAS,GAAG,OAAOF,gBAAP,KAA4B,QAA5B,GAAuCA,gBAAvC,GAA0DR,aAA5E;AAHmE,MAI3DW,iBAJ2D,GAIrCN,UAAU,CAACO,KAAX,CAAiBC,SAJoB,CAI3DF,iBAJ2D;AAKnE,MAAMG,UAAU,GAAGH,iBAAiB,IAC/BN,UAAU,CAACI,KAAX,CAAiB,oBAAjB,CADc,IAEdJ,UAAU,CAACI,KAAX,CAAiB,iBAAjB,CAFc,IAGdJ,UAAU,CAACI,KAAX,CAAiB,uBAAjB,CAHL;AAMA,MAAMM,YAAY,GAAGnB,KAAK,CAACoB,WAAN,CAAkB,UAACC,KAAD,EAAmB;AACxDZ,IAAAA,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BnB,YAAY,CAACkB,KAAD,CAAvC;AACD,GAFoB,EAElB,CAACZ,UAAD,CAFkB,CAArB;AAIA,MAAMc,iBAAiB,GACrBvB,KAAK,CAACoB,WAAN,CAAkB;AAAA;;AAAA,gCAAMX,UAAU,CAACI,KAAX,CAAiB,mBAAjB,CAAN,qBAAM,kBAAuCW,IAA7C;AAAA,GAAlB,EAAqE,CAACf,UAAD,CAArE,CADF;AAGA,MAAMgB,uBAAuB,GAAGzB,KAAK,CAACoB,WAAN,CAAkB,UAACI,IAAD,EAA2B;AAC3Ef,IAAAA,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BjB,iBAAiB,CAAC;AAAEmB,MAAAA,IAAI,EAAJA;AAAF,KAAD,CAA5C;AACD,GAF+B,EAE7B,CAACf,UAAD,CAF6B,CAAhC;AAIA,sBACE,eAAC,WAAD,eACME,IADN;AAEE,IAAA,MAAM,EAAC,sBAFT;AAGE,IAAA,QAAQ,EAAE,CAAC,CAACO,UAHd;AAIE,IAAA,KAAK,EAAEJ,SAJT;AAKE,IAAA,aAAa,EAAEK,YALjB;AAME,IAAA,YAAY,EAAE,EANhB;AAOE,IAAA,cAAc,EAAC,EAPjB;AAQE,IAAA,UAAU,EAAC,EARb;AASE,IAAA,OAAO,EAAEjB,gBAAgB,CAACwB,cAT5B;AAUE,IAAA,YAAY,EAAEhB,MAAM,CAACiB,WAVvB;AAWE,IAAA,IAAI,EAAErB,aAAa,CAACQ,SAXtB;AAYE,IAAA,gBAAgB,MAZlB;AAaE,IAAA,iBAAiB,EAAES,iBAbrB;AAcE,IAAA,mBAAmB,EAAEE;AAdvB,KADF;AAkBD","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { ColorPicker, EColorPickerIcon, EColorPanelMode } from '@ali/we-toolbar';\n;\nimport { setHighlight } from '../actions';\nimport { DEFAULT_COLOR } from '../constants';\nimport { setColorPanelMode } from '@ali/4ever-plugin-pref';\nimport { HighlightRole } from '../../utils/role';\n\nexport interface HighlightButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n}\n\nexport default function HighlightButton(props: HighlightButtonProps) {\n  const { controller, locale, ...rest } = props;\n  const currentHighlight = controller.query('getHighlight');\n  const highlight = typeof currentHighlight === 'string' ? currentHighlight : DEFAULT_COLOR;\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled = isCollapsedAtEdge\n    || controller.query('isSelectionInImage')\n    || controller.query('isSelectionInHr')\n    || controller.query('isSelectionInLinkCard');\n\n\n  const handleChange = React.useCallback((color: string) => {\n    controller.run('onAction', setHighlight(color));\n  }, [controller]);\n\n  const getColorPanelMode =\n    React.useCallback(() => controller.query('getColorPanelMode')?.mode, [controller]);\n\n  const handleSelectValueChange = React.useCallback((mode: EColorPanelMode) => {\n    controller.run('onAction', setColorPanelMode({ mode }));\n  }, [controller]);\n\n  return (\n    <ColorPicker\n      {...rest}\n      testid=\"bi-toolbar-highlight\"\n      disabled={!!isDisabled}\n      color={highlight}\n      onColorPicker={handleChange}\n      defaultColor={''}\n      automaticColor=\"\"\n      clearColor=\"\"\n      btnType={EColorPickerIcon.backgroundfont}\n      shortcutText={locale.buttonTitle}\n      role={HighlightRole.highlight}\n      showToggleSelect\n      getColorPanelMode={getColorPanelMode}\n      onSelectValueChange={handleSelectValueChange}\n    />\n  );\n}\n"],"file":"highlightButton.js"}