{"version":3,"sources":["../../../../src/bi/dragEventHandlers/dragOverUnknownHandler.ts"],"names":["dragOverUnknownHandler","event","controller","range","document","selection","value","preFocus","convertToTextPoints","focus","nextFocus","key","offset","run"],"mappings":";;;;;;;;;AAAA;;AACA;;AAGe,SAASA,sBAAT,CACbC,KADa,EAEbC,UAFa,EAGb;AACA,QAAMC,KAAK,GAAG,oCAAsBD,UAAtB,EAAkCD,KAAlC,CAAd;AACA,MAAI,CAACE,KAAL,EAAY;AAEZ,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAA0BH,UAAU,CAACI,KAA3C;AACA,QAAMC,QAAQ,GAAGF,SAAS,CAACG,mBAAV,CAA8BJ,QAA9B,EAAwCK,KAAzD;AACA,QAAMC,SAAS,GAAGP,KAAK,CAACK,mBAAN,CAA0BJ,QAA1B,EAAoCK,KAAtD;;AACA,MACEF,QAAQ,CAACI,GAAT,KAAiBD,SAAS,CAACC,GAA3B,IACAJ,QAAQ,CAACK,MAAT,KAAoBF,SAAS,CAACE,MAFhC,EAGE;AACA;AACD,GAZD,CAcA;;;AACAV,EAAAA,UAAU,CAACW,GAAX,CAAe,iBAAf,EAAkC,qCAAmB;AACnDR,IAAAA,SAAS,EAAEF;AADwC,GAAnB,CAAlC;AAGAD,EAAAA,UAAU,CAACW,GAAX,CAAe,gBAAf;AACD","sourcesContent":["import { Controller, CangjieSelectEvent } from '@ali/4ever-cangjie';\nimport getRangeFromDragEvent from '../utils/getRangeFromDragEvent';\n\n\nexport default function dragOverUnknownHandler(\n  event: DragEvent,\n  controller: Controller,\n) {\n  const range = getRangeFromDragEvent(controller, event);\n  if (!range) return;\n\n  const { document, selection } = controller.value;\n  const preFocus = selection.convertToTextPoints(document).focus;\n  const nextFocus = range.convertToTextPoints(document).focus;\n  if (\n    preFocus.key === nextFocus.key &&\n    preFocus.offset === nextFocus.offset\n  ) {\n    return;\n  }\n\n  // UI 层拿到不到数据层 controller，使用 action 在排版模式下同步更新选区\n  controller.run('onCangjieSelect', CangjieSelectEvent({\n    selection: range,\n  }));\n  controller.run('onCangjieFocus');\n}\n"],"file":"dragOverUnknownHandler.js"}