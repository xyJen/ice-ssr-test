{"version":3,"sources":["../../../../src/bi/components/useTransformMenus.tsx"],"names":["commonHeadStyle","padding","height","fontWeight","Selected","styled","span","useTransformMenus","locale","currentBlock","useCustomBlock","controller","Controller","useController","disableSubjectHeading","disableMenu","query","isCode","Code","extras","extrasMap","forEach","key","value","menus","type","TYPE_SUB_MENU","icon","title","transform","maxHeight","overlayStyle","minWidth","overflow","TYPE_GROUP","block","TYPE_MENU_ITEM","menuKey","paragraph","action","disabled","role","ParagraphRole","extra","h1","HeadingRole","heading1","style","fontSize","theme","lineHeight","h2","heading2","h3","heading3","h4","heading4","list","olist","ListRole","listOrdered","ulist","listUnordered","tlist","listTask","blockquote","BlockquoteRole","code","CodeRole","callout","CalloutRole"],"mappings":"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","sourcesContent":["import React, { useMemo, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { QuoteBetaNormal } from '@ali/we-design';\nimport { Controller, Block } from '@ali/4ever-cangjie';\nimport { Code, CodeRole } from '@ali/4ever-plugin-code';\nimport { ParagraphRole } from '@ali/4ever-plugin-paragraph';\nimport { HeadingRole } from '@ali/4ever-plugin-heading';\nimport { ListRole } from '@ali/4ever-plugin-list';\nimport { CalloutRole } from '@ali/4ever-plugin-callout';\nimport { BlockquoteRole } from '@ali/4ever-plugin-blockquote';\nimport { theme } from '@ali/4ever-utils';\nimport {\n  DocToolbarH1Normal,\n  DocToolbarH2Normal,\n  DocToolbarH3Normal,\n  DocToolbarH4Normal,\n  ToolbarOrderListNormal,\n  ToolbarCheckBoxNormal,\n  ToolbarUnorderListNormal,\n  DocToolbarTextNormal,\n  DocHighBlockNormal,\n  ChangetoNormal,\n  SelectedNormalNormal,\n} from '@ali/we-icon';\nimport { isSubjectHeading } from '@ali/4ever-plugin-subject';\nimport {\n  TYPE_GROUP,\n  TYPE_MENU_ITEM,\n  TYPE_SUB_MENU,\n  IconSquareBrackets,\n} from '@ali/4ever-component';\nimport isConvertSelected from '../utils/isConvertSelected';\n\nconst commonHeadStyle = {\n  padding: '6px 8px',\n  height: 'auto',\n  fontWeight: 500,\n};\n\nconst Selected = styled.span`\n  margin-left: 20px;\n  svg {\n    fill: #0089FF;\n  }\n`;\n\nexport default function useTransformMenus(\n  locale?: Record<string, string>,\n  currentBlock?: Block,\n  useCustomBlock?: boolean,\n) {\n  const controller = Controller.useController();\n  const disableSubjectHeading = useMemo(() => {\n    return isSubjectHeading(currentBlock);\n  }, [currentBlock]);\n  const disableMenu = disableSubjectHeading || controller.query('isListSymbolSelected');\n  const isCode = Code.isCode(currentBlock);\n  \n  const extras = useMemo(() => {\n    const extrasMap: Record<string, JSX.Element> = {};\n    [ \n      'paragraph',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'olist',\n      'ulist',\n      'tlist',\n      'blockquote',\n      'code',\n      'callout',\n    ].forEach((key) => {\n      if (!useCustomBlock && isConvertSelected(key, controller)) {\n        // 代表没有指定 currentBlock，由当前选区决定（选区工具栏场景）\n        extrasMap[key] = <Selected><SelectedNormalNormal /></Selected>;\n      } else if (currentBlock && isConvertSelected(key, controller, currentBlock)) {\n        extrasMap[key] = <Selected><SelectedNormalNormal /></Selected>;\n      }\n    });\n    return extrasMap;\n  }, [currentBlock, controller.value, useCustomBlock]);\n\n  const menus = useMemo(() => {\n    return {\n      type: TYPE_SUB_MENU,\n      icon: <ChangetoNormal />,\n      title: locale?.transform,\n      maxHeight: 550,\n      overlayStyle: {\n        minWidth: 173,\n        overflow: 'auto',\n      },\n      menus: [{\n        type: TYPE_GROUP,\n        title: locale?.block,\n        menus: [{\n          type: TYPE_MENU_ITEM,\n          menuKey: 'heading.paragraph',\n          title: locale?.paragraph,\n          icon: <DocToolbarTextNormal />,\n          action: 'format',\n          disabled: disableMenu,\n          role: ParagraphRole.paragraph,\n          extra: extras['paragraph'],\n        },\n        {\n          type: TYPE_MENU_ITEM,\n          menuKey: 'heading.heading1',\n          title: locale?.h1,\n          icon: <DocToolbarH1Normal />,\n          action: 'format',\n          disabled: disableMenu,\n          role: HeadingRole.heading1,\n          extra: extras['h1'],\n          style: {\n            fontSize: theme['heading-1']['font-size'],\n            lineHeight: theme['heading-1']['line-height'],\n            ...commonHeadStyle,\n          }\n        },\n        {\n          type: TYPE_MENU_ITEM,\n          title: locale?.h2,\n          menuKey: 'heading.heading2',\n          icon: <DocToolbarH2Normal />,\n          action: 'format',\n          disabled: disableMenu,\n          role: HeadingRole.heading2,\n          extra: extras['h2'],\n          style: {\n            fontSize: theme['heading-2']['font-size'],\n            lineHeight: theme['heading-2']['line-height'],\n            ...commonHeadStyle,\n          }\n        },\n        {\n          type: TYPE_MENU_ITEM,\n          menuKey: 'heading.heading3',\n          title: locale?.h3,\n          icon: <DocToolbarH3Normal />,\n          action: 'format',\n          disabled: disableMenu,\n          role: HeadingRole.heading3,\n          extra: extras['h3'],\n          style: {\n            fontSize: theme['heading-3']['font-size'],\n            lineHeight: theme['heading-3']['line-height'],\n            ...commonHeadStyle,\n          }\n        },\n        {\n          type: TYPE_MENU_ITEM,\n          menuKey: 'heading.heading4',\n          title: locale?.h4,\n          icon: <DocToolbarH4Normal />,\n          action: 'format',\n          disabled: disableMenu,\n          role: HeadingRole.heading4,\n          extra: extras['h4'],\n          style: {\n            fontSize: theme['heading-4']['font-size'],\n            lineHeight: theme['heading-4']['line-height'],\n            ...commonHeadStyle,\n          }\n        }],\n      }, {\n        type: TYPE_GROUP,\n        title: locale?.list,\n        menus: [{\n          type: TYPE_MENU_ITEM,\n          menuKey: 'list.olist',\n          title: locale?.olist,\n          icon: <ToolbarOrderListNormal />,\n          action: 'format',\n          disabled: disableSubjectHeading,\n          role: ListRole.listOrdered,\n          extra: extras['olist'],\n        },\n        {\n          type: TYPE_MENU_ITEM,\n          menuKey: 'list.ulist',\n          title: locale?.ulist,\n          icon: <ToolbarUnorderListNormal />,\n          action: 'format',\n          disabled: disableSubjectHeading,\n          role: ListRole.listUnordered,\n          extra: extras['ulist'],\n        },\n        {\n          type: TYPE_MENU_ITEM,\n          menuKey: 'list.tlist',\n          title: locale?.tlist,\n          icon: <ToolbarCheckBoxNormal />,\n          action: 'format',\n          disabled: disableSubjectHeading,\n          role: ListRole.listTask,\n          extra: extras['tlist'],\n        }],\n      }, {\n        type: TYPE_GROUP,\n        title: locale?.block,\n        menus: [\n          {\n            type: TYPE_MENU_ITEM,\n            title: locale?.blockquote,\n            menuKey: 'blockquote',\n            icon: <QuoteBetaNormal />,\n            action: 'format',\n            disabled: disableMenu || isCode,\n            role: BlockquoteRole.blockquote,\n            extra: extras['blockquote'],\n          },\n          {\n            type: TYPE_MENU_ITEM,\n            title: locale?.code,\n            menuKey: 'code',\n            icon: <IconSquareBrackets />,\n            action: 'format',\n            disabled: disableMenu,\n            role: CodeRole.code,\n            // 为 undefined 会导致显示快捷键\n            extra: extras['code'] || '',\n          },\n          {\n            type: TYPE_MENU_ITEM,\n            title: locale?.callout,\n            menuKey: 'callout',\n            icon: <DocHighBlockNormal />,\n            action: 'format',\n            disabled: disableMenu || isCode,\n            role: CalloutRole.callout,\n            extra: extras['callout'],\n          },\n        ],\n      }],\n    };\n  }, [extras, locale, disableMenu, isCode, disableSubjectHeading]);\n\n  return {\n    extras,\n    menus,\n  };\n}\n\n"],"file":"useTransformMenus.js"}