{"version":3,"sources":["../../../../src/bi/commands/deleteDragFragment.ts"],"names":["deleteDragFragment","controller","payload","dragFragment","type","DRAG_TYPE","blocks","Array","isArray","fragment","forEach","block","command","Commands","removeNodeByKey","key","inline"],"mappings":";;;;;;;AAAA;;AACA;;AAGe,SAASA,kBAAT,CAA4BC,UAA5B,EAAoDC,OAApD,EAAiF;AAC9F,QAAM;AAAEC,IAAAA;AAAF,MAAmBD,OAAzB;AACA,MAAI,CAACC,YAAL,EAAmB,OAAOF,UAAP;AACnB,QAAM;AAAEG,IAAAA;AAAF,MAAWD,YAAjB;;AACA,MAAIC,IAAI,KAAKC,iBAAUC,MAAnB,IAA6BC,KAAK,CAACC,OAAN,CAAcL,YAAY,CAACM,QAA3B,CAAjC,EAAuE;AACrE,UAAMA,QAAQ,GAAG,CAAC,GAAGN,YAAY,CAACM,QAAjB,CAAjB;AACAA,IAAAA,QAAQ,CAACC,OAAT,CAAkBC,KAAD,IAAW;AAC1BV,MAAAA,UAAU,CAACW,OAAX,CAAmBC,sBAASC,eAA5B,EAA6CH,KAAK,CAACI,GAAnD;AACD,KAFD;AAGD,GALD,MAKO,IAAIX,IAAI,KAAKC,iBAAUW,MAAnB,IAA8Bb,YAAY,CAACM,QAAd,CAA2CM,GAA5E,EAAiF;AACtFd,IAAAA,UAAU,CAACW,OAAX,CAAmBC,sBAASC,eAA5B,EAA8CX,YAAY,CAACM,QAAd,CAA2CM,GAAxF;AACD;;AAED,SAAOd,UAAP;AACD","sourcesContent":["import { Block, Commands, Controller } from '@ali/4ever-cangjie';\nimport { DraggableDataProps, DRAG_TYPE, DragBlocksProps, DragInlineProps } from '../types';\n\n\nexport default function deleteDragFragment(controller: Controller, payload: DraggableDataProps) {\n  const { dragFragment } = payload;\n  if (!dragFragment) return controller;\n  const { type } = dragFragment;\n  if (type === DRAG_TYPE.blocks && Array.isArray(dragFragment.fragment)) {\n    const fragment = [...dragFragment.fragment] as DragBlocksProps;\n    fragment.forEach((block) => {\n      controller.command(Commands.removeNodeByKey, block.key);\n    });\n  } else if (type === DRAG_TYPE.inline && (dragFragment.fragment as DragInlineProps).key) {\n    controller.command(Commands.removeNodeByKey, (dragFragment.fragment as DragInlineProps).key);\n  }\n\n  return controller\n}\n"],"file":"deleteDragFragment.js"}