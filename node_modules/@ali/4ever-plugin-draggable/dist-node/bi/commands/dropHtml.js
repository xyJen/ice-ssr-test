"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = dropHtml;

var _everCangjie = require("@ali/4ever-cangjie");

var _everLogger = _interopRequireDefault(require("@ali/4ever-logger"));

var _isUrl = _interopRequireDefault(require("is-url"));

function dropHtml(controller, html) {
  if (!html) return controller;
  const {
    selection
  } = controller.value;

  try {
    // url 额外插入一个空格避免后续连续文本被识别为链接
    const space = (0, _isUrl.default)(html) ? ' ' : '';
    const value = controller.serializer.htmlToValue(html + space);
    controller.command(_everCangjie.Commands.insertFragmentAtRange, selection, value.document);

    _everLogger.default.sum('drag_html');
  } catch (e) {
    console.warn(e);

    _everLogger.default.sum('drag_html_failed');
  }

  return controller;
}
//# sourceMappingURL=dropHtml.js.map