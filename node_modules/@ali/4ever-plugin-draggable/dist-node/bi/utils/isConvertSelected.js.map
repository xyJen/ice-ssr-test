{"version":3,"sources":["../../../../src/bi/utils/isConvertSelected.ts"],"names":["isConvertSelected","type","controller","block","Heading1","Heading2","Heading3","Heading4","Heading","document","startBlock","endBlock","value","isHeading1","isHeading2","isHeading3","isHeading4","Paragraph","isParagraph","isHeading","data","list","isOrdered","isTaskList","blockquote","Code","isCode","checkColorBlock","Block","isBlock","ColorBlocks","isColorBlocks","closestColorBlock","getClosest","key","_block"],"mappings":"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","sourcesContent":["import { Controller, Block, Document } from '@ali/4ever-cangjie';\nimport { ColorBlocks } from '@ali/4ever-plugin-color-blocks';\nimport { Code } from '@ali/4ever-plugin-code';\nimport { Heading } from '@ali/4ever-plugin-heading';\nimport { Paragraph } from '@ali/4ever-plugin-paragraph';\n\nexport default function isConvertSelected(type, controller: Controller, block?: Block) {\n  const { Heading1, Heading2, Heading3, Heading4 } = Heading;\n  const { document, startBlock, endBlock } = controller.value;\n  if (type === 'h1') {\n    if (block) {\n      return Heading1.isHeading1(block);\n    } else {\n      return startBlock && endBlock && Heading1.isHeading1(startBlock) && Heading1.isHeading1(endBlock);\n    }\n  } else if (type === 'h2') {\n    if (block) {\n      return Heading2.isHeading2(block);\n    } else {\n      return startBlock && endBlock && Heading2.isHeading2(startBlock) && Heading2.isHeading2(endBlock);\n    }\n  } else if (type === 'h3') {\n    if (block) {\n      return Heading3.isHeading3(block);\n    } else {\n      return startBlock && endBlock && Heading3.isHeading3(startBlock) && Heading3.isHeading3(endBlock);\n    }\n  } else if (type === 'h4') {\n    if (block) {\n      return Heading4.isHeading4(block);\n    } else {\n      return startBlock && endBlock && Heading4.isHeading4(startBlock) && Heading4.isHeading4(endBlock);\n    }\n  } else if (type === 'paragraph') {\n    if (block) {\n      return Paragraph.isParagraph(block) && !Heading.isHeading(block);\n    } else {\n      return startBlock && endBlock && Paragraph.isParagraph(startBlock) && Paragraph.isParagraph(endBlock) && !Heading.isHeading(startBlock) && !Heading.isHeading(endBlock);\n    }\n  } else if (type === 'olist') {\n    if (block) {\n      return block.data.list?.isOrdered;\n    } else {\n      return startBlock && endBlock && startBlock.data.list?.isOrdered && endBlock.data.list?.isOrdered;\n    }\n  } else if (type === 'ulist') {\n    if (block) {\n      return block.data.list && !block.data.list.isOrdered && !block.data.list.isTaskList;\n    } else {\n      return startBlock && startBlock.data.list && !startBlock.data.list.isOrdered && !startBlock.data.list.isTaskList\n        && endBlock && endBlock.data.list && !endBlock.data.list.isOrdered && !endBlock.data.list.isTaskList;\n    }\n  } else if (type === 'tlist') {\n    if (block) {\n      return block.data.list?.isTaskList;\n    } else {\n      return startBlock && endBlock && startBlock.data.list?.isTaskList && endBlock.data.list?.isTaskList;\n    }\n  } else if (type === 'blockquote') {\n    if (block) {\n      return block.data.blockquote;\n    } else {\n      return startBlock && endBlock && startBlock.data.blockquote && endBlock.data.blockquote;\n    }\n  } else if (type === 'code') {\n    if (block) {\n      return Code.isCode(block);\n    } else {\n      return startBlock && endBlock && Code.isCode(startBlock) && Code.isCode(endBlock);\n    }\n  } else if (type === 'callout') {\n    if (block) {\n      if (checkColorBlock(block, document)) {\n        return true;\n      }\n    } else {\n      return startBlock && endBlock && checkColorBlock(startBlock, document) && checkColorBlock(endBlock, document);\n    }\n  }\n}\n\nfunction checkColorBlock(block: Block, document: Document) {\n  if (Block.isBlock(block) && ColorBlocks.isColorBlocks(block)) {\n    return true;\n  }\n  const closestColorBlock = document.getClosest(block.key, (_block) => {\n    if (Block.isBlock(_block) && ColorBlocks.isColorBlocks(_block)) {\n      return true;\n    }\n    return false;\n  });\n  if (closestColorBlock) {\n    return true;\n  }\n  return false;\n}"],"file":"isConvertSelected.js"}