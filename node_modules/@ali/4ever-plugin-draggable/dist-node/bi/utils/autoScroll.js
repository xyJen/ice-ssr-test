"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
const AUTO_SCROLL_THRESHOLD_TOP = 100;
const AUTO_SCROLL_THRESHOLD_BOTTOM = 50;
const AUTO_SCROLL_HEIGHT = 20;
let scrollableContainer = null;
/**
 * 查找第一个滚动容器
 * https://github.com/jquery/jquery-ui/blob/main/ui/scroll-parent.js
 */

function getScrollParent(element) {
  let style = window.getComputedStyle(element);
  const excludeStaticParent = style.position === 'absolute';
  const overflowRegex = /(auto|scroll)/;
  const scrollRoot = document.documentElement || document.body;
  if (style.position === 'fixed') return scrollRoot;
  let parent = element;

  while (parent) {
    style = getComputedStyle(parent);

    if (!(excludeStaticParent && style.position === 'static') && overflowRegex.test(style.overflow + style.overflowY + style.overflowX)) {
      return parent;
    }

    parent = parent.parentElement;
  }

  return scrollRoot;
}

function autoScroll(event, threshold) {
  if (scrollableContainer) {
    const {
      clientY
    } = event;
    const topThreshold = threshold?.top !== undefined ? threshold.top : AUTO_SCROLL_THRESHOLD_TOP;
    const bottomThreshold = threshold?.bottom !== undefined ? threshold.bottom : AUTO_SCROLL_THRESHOLD_BOTTOM;

    if (scrollableContainer.scrollTop && clientY < topThreshold) {
      scrollableContainer.scrollTop -= AUTO_SCROLL_HEIGHT;
    } else if (clientY > window.innerHeight - bottomThreshold) {
      scrollableContainer.scrollTop += AUTO_SCROLL_HEIGHT;
    }
  } else {
    scrollableContainer = getScrollParent(event.target);
  }
}

var _default = autoScroll;
exports.default = _default;
//# sourceMappingURL=autoScroll.js.map