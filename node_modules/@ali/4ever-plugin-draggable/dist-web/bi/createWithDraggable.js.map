{"version":3,"sources":["../../../src/bi/createWithDraggable.tsx"],"names":["React","Block","Draggable","createDraggableElement","props","controller","component","draggablePluginConfig","draggableConfig","enabled","isBlock","node","createWithDraggable","renderNode","types","next","type"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAAsCC,KAAtC,QAAmD,oBAAnD;AACA,OAAOC,SAAP;AAGA,OAAO,SAASC,sBAAT,CACLC,KADK,EAELC,UAFK,EAGLC,SAHK,EAILC,qBAJK,EAKLC,eALK,EAMQ;AACb,MAAI,CAACD,qBAAD,IAA0B,CAACA,qBAAqB,CAACE,OAArD,EAA8D;AAC5D,WAAOH,SAAP;AACD;;AACD,MAAIL,KAAK,CAACS,OAAN,CAAcN,KAAK,CAACO,IAApB,CAAJ,EAA+B,OAAOL,SAAP;AAC/B,sBACE,eAAC,SAAD;AACE,IAAA,UAAU,EAAED,UADd;AAEE,IAAA,eAAe,EAAED,KAFnB;AAGE,IAAA,eAAe,EAAEI;AAHnB,KAKGF,SALH,CADF;AASD;AAED,eAAe,SAASM,mBAAT,CACbC,UADa,EAEbC,KAFa,EAGbP,qBAHa,EAIbC,eAJa,EAKb;AACA,MAAI,CAACD,qBAAD,IAA0B,CAACA,qBAAqB,CAACE,OAArD,EAA8D;AAC5D,WAAOI,UAAP;AACD;;AAED,SAAO,UAAUT,KAAV,EAAkCC,UAAlC,EAA0DU,IAA1D,EAAgE;AACrE,QAAId,KAAK,CAACS,OAAN,CAAcN,KAAK,CAACO,IAApB,KAA6B,CAACG,KAAK,CAAEV,KAAK,CAACO,IAAP,CAAsBK,IAAvB,CAAvC,EAAqE,OAAOH,UAAU,CAACT,KAAD,EAAQC,UAAR,EAAoBU,IAApB,CAAjB;AAErE,wBACE,eAAC,SAAD;AACE,MAAA,UAAU,EAAEV,UADd;AAEE,MAAA,eAAe,EAAED,KAFnB;AAGE,MAAA,eAAe,EAAEI;AAHnB,OAKGK,UAAU,CAACT,KAAD,EAAQC,UAAR,EAAoBU,IAApB,CALb,CADF;AASD,GAZD;AAaD","sourcesContent":["import * as React from 'react';\nimport { Controller, RenderNodeProps, Block } from '@ali/4ever-cangjie';\nimport Draggable from './components/draggable';\nimport { DraggablePluginConfig, DraggableConfig } from './types';\n\nexport function createDraggableElement(\n  props: RenderNodeProps,\n  controller: Controller,\n  component: JSX.Element,\n  draggablePluginConfig? : DraggablePluginConfig,\n  draggableConfig?: DraggableConfig,\n): JSX.Element {\n  if (!draggablePluginConfig || !draggablePluginConfig.enabled) {\n    return component;\n  }\n  if (Block.isBlock(props.node)) return component;\n  return (\n    <Draggable\n      controller={controller}\n      renderNodeProps={props}\n      draggableConfig={draggableConfig}\n    >\n      {component}\n    </Draggable>\n  );\n}\n\nexport default function createWithDraggable(\n  renderNode,\n  types: Record<string, boolean>,\n  draggablePluginConfig?: DraggablePluginConfig,\n  draggableConfig?: DraggableConfig,\n) {\n  if (!draggablePluginConfig || !draggablePluginConfig.enabled) {\n    return renderNode;\n  }\n\n  return function (props: RenderNodeProps, controller: Controller, next) {\n    if (Block.isBlock(props.node) || !types[(props.node as Block).type]) return renderNode(props, controller, next);\n\n    return (\n      <Draggable\n        controller={controller}\n        renderNodeProps={props}\n        draggableConfig={draggableConfig}\n      >\n        {renderNode(props, controller, next)}\n      </Draggable>\n    );\n  };\n}\n"],"file":"createWithDraggable.js"}