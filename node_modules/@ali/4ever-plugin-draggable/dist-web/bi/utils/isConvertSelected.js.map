{"version":3,"sources":["../../../../src/bi/utils/isConvertSelected.ts"],"names":["Block","ColorBlocks","Code","Heading","Paragraph","isConvertSelected","type","controller","block","Heading1","Heading2","Heading3","Heading4","value","document","startBlock","endBlock","isHeading1","isHeading2","isHeading3","isHeading4","isParagraph","isHeading","data","list","isOrdered","isTaskList","blockquote","isCode","checkColorBlock","isBlock","isColorBlocks","closestColorBlock","getClosest","key","_block"],"mappings":"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","sourcesContent":["import { Controller, Block, Document } from '@ali/4ever-cangjie';\nimport { ColorBlocks } from '@ali/4ever-plugin-color-blocks';\nimport { Code } from '@ali/4ever-plugin-code';\nimport { Heading } from '@ali/4ever-plugin-heading';\nimport { Paragraph } from '@ali/4ever-plugin-paragraph';\n\nexport default function isConvertSelected(type, controller: Controller, block?: Block) {\n  const { Heading1, Heading2, Heading3, Heading4 } = Heading;\n  const { document, startBlock, endBlock } = controller.value;\n  if (type === 'h1') {\n    if (block) {\n      return Heading1.isHeading1(block);\n    } else {\n      return startBlock && endBlock && Heading1.isHeading1(startBlock) && Heading1.isHeading1(endBlock);\n    }\n  } else if (type === 'h2') {\n    if (block) {\n      return Heading2.isHeading2(block);\n    } else {\n      return startBlock && endBlock && Heading2.isHeading2(startBlock) && Heading2.isHeading2(endBlock);\n    }\n  } else if (type === 'h3') {\n    if (block) {\n      return Heading3.isHeading3(block);\n    } else {\n      return startBlock && endBlock && Heading3.isHeading3(startBlock) && Heading3.isHeading3(endBlock);\n    }\n  } else if (type === 'h4') {\n    if (block) {\n      return Heading4.isHeading4(block);\n    } else {\n      return startBlock && endBlock && Heading4.isHeading4(startBlock) && Heading4.isHeading4(endBlock);\n    }\n  } else if (type === 'paragraph') {\n    if (block) {\n      return Paragraph.isParagraph(block) && !Heading.isHeading(block);\n    } else {\n      return startBlock && endBlock && Paragraph.isParagraph(startBlock) && Paragraph.isParagraph(endBlock) && !Heading.isHeading(startBlock) && !Heading.isHeading(endBlock);\n    }\n  } else if (type === 'olist') {\n    if (block) {\n      return block.data.list?.isOrdered;\n    } else {\n      return startBlock && endBlock && startBlock.data.list?.isOrdered && endBlock.data.list?.isOrdered;\n    }\n  } else if (type === 'ulist') {\n    if (block) {\n      return block.data.list && !block.data.list.isOrdered && !block.data.list.isTaskList;\n    } else {\n      return startBlock && startBlock.data.list && !startBlock.data.list.isOrdered && !startBlock.data.list.isTaskList\n        && endBlock && endBlock.data.list && !endBlock.data.list.isOrdered && !endBlock.data.list.isTaskList;\n    }\n  } else if (type === 'tlist') {\n    if (block) {\n      return block.data.list?.isTaskList;\n    } else {\n      return startBlock && endBlock && startBlock.data.list?.isTaskList && endBlock.data.list?.isTaskList;\n    }\n  } else if (type === 'blockquote') {\n    if (block) {\n      return block.data.blockquote;\n    } else {\n      return startBlock && endBlock && startBlock.data.blockquote && endBlock.data.blockquote;\n    }\n  } else if (type === 'code') {\n    if (block) {\n      return Code.isCode(block);\n    } else {\n      return startBlock && endBlock && Code.isCode(startBlock) && Code.isCode(endBlock);\n    }\n  } else if (type === 'callout') {\n    if (block) {\n      if (checkColorBlock(block, document)) {\n        return true;\n      }\n    } else {\n      return startBlock && endBlock && checkColorBlock(startBlock, document) && checkColorBlock(endBlock, document);\n    }\n  }\n}\n\nfunction checkColorBlock(block: Block, document: Document) {\n  if (Block.isBlock(block) && ColorBlocks.isColorBlocks(block)) {\n    return true;\n  }\n  const closestColorBlock = document.getClosest(block.key, (_block) => {\n    if (Block.isBlock(_block) && ColorBlocks.isColorBlocks(_block)) {\n      return true;\n    }\n    return false;\n  });\n  if (closestColorBlock) {\n    return true;\n  }\n  return false;\n}"],"file":"isConvertSelected.js"}