import { Commands } from '@ali/4ever-cangjie';
import logger from '@ali/4ever-logger';
import isUrl from 'is-url';
export default function dropHtml(controller, html) {
  if (!html) return controller;
  var selection = controller.value.selection;

  try {
    // url 额外插入一个空格避免后续连续文本被识别为链接
    var space = isUrl(html) ? ' ' : '';
    var value = controller.serializer.htmlToValue(html + space);
    controller.command(Commands.insertFragmentAtRange, selection, value.document);
    logger.sum('drag_html');
  } catch (e) {
    console.warn(e);
    logger.sum('drag_html_failed');
  }

  return controller;
}
//# sourceMappingURL=dropHtml.js.map