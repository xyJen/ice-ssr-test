{"version":3,"sources":["../../../../src/bi/commands/deleteDragFragment.ts"],"names":["Commands","DRAG_TYPE","deleteDragFragment","controller","payload","dragFragment","type","blocks","Array","isArray","fragment","forEach","block","command","removeNodeByKey","key","inline"],"mappings":"AAAA,SAAgBA,QAAhB,QAA4C,oBAA5C;AACA,SAA6BC,SAA7B;AAGA,eAAe,SAASC,kBAAT,CAA4BC,UAA5B,EAAoDC,OAApD,EAAiF;AAAA,MACtFC,YADsF,GACrED,OADqE,CACtFC,YADsF;AAE9F,MAAI,CAACA,YAAL,EAAmB,OAAOF,UAAP;AAF2E,MAGtFG,IAHsF,GAG7ED,YAH6E,CAGtFC,IAHsF;;AAI9F,MAAIA,IAAI,KAAKL,SAAS,CAACM,MAAnB,IAA6BC,KAAK,CAACC,OAAN,CAAcJ,YAAY,CAACK,QAA3B,CAAjC,EAAuE;AACrE,QAAMA,QAAQ,aAAOL,YAAY,CAACK,QAApB,CAAd;AACAA,IAAAA,QAAQ,CAACC,OAAT,CAAiB,UAACC,KAAD,EAAW;AAC1BT,MAAAA,UAAU,CAACU,OAAX,CAAmBb,QAAQ,CAACc,eAA5B,EAA6CF,KAAK,CAACG,GAAnD;AACD,KAFD;AAGD,GALD,MAKO,IAAIT,IAAI,KAAKL,SAAS,CAACe,MAAnB,IAA8BX,YAAY,CAACK,QAAd,CAA2CK,GAA5E,EAAiF;AACtFZ,IAAAA,UAAU,CAACU,OAAX,CAAmBb,QAAQ,CAACc,eAA5B,EAA8CT,YAAY,CAACK,QAAd,CAA2CK,GAAxF;AACD;;AAED,SAAOZ,UAAP;AACD","sourcesContent":["import { Block, Commands, Controller } from '@ali/4ever-cangjie';\nimport { DraggableDataProps, DRAG_TYPE, DragBlocksProps, DragInlineProps } from '../types';\n\n\nexport default function deleteDragFragment(controller: Controller, payload: DraggableDataProps) {\n  const { dragFragment } = payload;\n  if (!dragFragment) return controller;\n  const { type } = dragFragment;\n  if (type === DRAG_TYPE.blocks && Array.isArray(dragFragment.fragment)) {\n    const fragment = [...dragFragment.fragment] as DragBlocksProps;\n    fragment.forEach((block) => {\n      controller.command(Commands.removeNodeByKey, block.key);\n    });\n  } else if (type === DRAG_TYPE.inline && (dragFragment.fragment as DragInlineProps).key) {\n    controller.command(Commands.removeNodeByKey, (dragFragment.fragment as DragInlineProps).key);\n  }\n\n  return controller\n}\n"],"file":"deleteDragFragment.js"}