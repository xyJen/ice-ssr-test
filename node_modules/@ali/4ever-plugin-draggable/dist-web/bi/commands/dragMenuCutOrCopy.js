import { Commands, Selection, Point } from '@ali/4ever-cangjie';
import { ColorBlocks } from '@ali/4ever-plugin-color-blocks';
import { getSiblingDraggableBlocks } from "../utils";
export default function dragMenuCutOrCopy(controller, payload) {
  var currentBlock = payload.node,
      action = payload.action;
  var blocks = getSiblingDraggableBlocks(controller, currentBlock);

  if (!blocks || (blocks == null ? void 0 : blocks.length) === 0) {
    return controller;
  }

  var anchor;
  var focus;

  if (ColorBlocks.isColorBlocks(currentBlock)) {
    anchor = Point.createFromParams(currentBlock.key, 'before');
    focus = Point.createFromParams(currentBlock.key, 'after');
  } else {
    anchor = Point.createFromParams(blocks[0].key, 'before');
    focus = Point.createFromParams(blocks[blocks.length - 1].key, 'after');
  }

  var newSelection = Selection.create({
    anchor: anchor,
    focus: focus
  });
  controller.command(Commands.select, newSelection);
  controller.run('onAction', {
    type: action
  });
  controller.command(Commands.blur);
  return controller;
}
//# sourceMappingURL=dragMenuCutOrCopy.js.map