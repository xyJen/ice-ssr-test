{"version":3,"sources":["../../../src/bi/createRenderNode.tsx"],"names":["React","Inline","Draggable","getElementType","createRenderNode","config","draggable","draggableInlineElements","props","controller","next","node","isInline","type"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAAqCC,MAArC,QAAoE,oBAApE;AACA,OAAOC,SAAP;AACA,OAAOC,cAAP;AAGA,eAAe,SAASC,gBAAT,CAA0BC,MAA1B,EAAkD;AAAA,aACtBA,MAAM,CAACC,SAAP,IAAoB,EADE;AAAA,mCACvDC,uBADuD;AAAA,MACvDA,uBADuD,sCAC7B,EAD6B;;AAE/D,SAAO,UAACC,KAAD,EAAyBC,UAAzB,EAAiDC,IAAjD,EAA0D;AAAA,QACvDC,IADuD,GAC9CH,KAD8C,CACvDG,IADuD;;AAE/D,QAAIV,MAAM,CAACW,QAAP,CAAgBD,IAAhB,CAAJ,EAA2B;AACzB,UAAME,IAAI,GAAGV,cAAc,CAACQ,IAAD,CAA3B,CADyB,CAEzB;AACA;;AACA,UAAIJ,uBAAuB,CAACI,IAAI,CAACE,IAAN,CAAvB,IAAsCN,uBAAuB,CAACM,IAAD,CAAjE,EAAyE;AACvE,4BACE,eAAC,SAAD;AACE,UAAA,UAAU,EAAEJ,UADd;AAEE,UAAA,eAAe,EAAED;AAFnB,WAIGE,IAAI,EAJP,CADF;AAQD;AACF;;AACD,WAAOA,IAAI,EAAX;AACD,GAlBD;AAmBD","sourcesContent":["import * as React from 'react';\nimport { BiPluginConfig, Controller, Inline, RenderNodeProps } from '@ali/4ever-cangjie';\nimport Draggable from './components/draggable';\nimport getElementType from './utils/getElementType';\n\n\nexport default function createRenderNode(config: BiPluginConfig) {\n  const { draggableInlineElements = {} } = config.draggable || {};\n  return (props: RenderNodeProps, controller: Controller, next) => {\n    const { node } = props;\n    if (Inline.isInline(node)) {\n      const type = getElementType(node);\n      // 排版下有较多诸如 inline-box, float-inline-box, filed 等暂不需要拖拽的行内元素，因此这里默认不开启\n      // 优先根据 node.type 判断，以便批量设置（例如批量设置 tag 类可拖拽）\n      if (draggableInlineElements[node.type] || draggableInlineElements[type]) {\n        return (\n          <Draggable\n            controller={controller}\n            renderNodeProps={props}\n          >\n            {next()}\n          </Draggable>\n        );\n      }\n    }\n    return next();\n  };\n}\n"],"file":"createRenderNode.js"}