{"version":3,"sources":["../../../../src/bi/utils/getPrevLevelItem.ts"],"names":["value","currentItem","offset","document","curListConfig","data","list","curListId","listId","curLevel","level","prevBlock","getPreviousNode","key","listConfig"],"mappings":"AAEA,gBAAe,UAACA,KAAD,EAAeC,WAAf,EAAmCC,MAAnC,EAAmE;AAAA;;AAAA,MACxEC,QADwE,GAC3DH,KAD2D,CACxEG,QADwE;AAEhF,MAAMC,aAAa,GAAGH,WAAH,yCAAGA,WAAW,CAAEI,IAAhB,qBAAG,kBAAmBC,IAAzC;AACA,MAAI,CAACF,aAAL,EAAoB,OAAO,IAAP;AAH4D,MAIhEG,SAJgE,GAIjCH,aAJiC,CAIxEI,MAJwE;AAAA,MAI9CC,QAJ8C,GAIjCL,aAJiC,CAIrDM,KAJqD;AAKhF,MAAI,CAACH,SAAL,EAAgB,OAAO,IAAP;AAChB,MAAII,SAAS,GAAGR,QAAQ,CAACS,eAAT,CAAyBX,WAAW,CAACY,GAArC,CAAhB;;AACA,SAAOF,SAAP,EAAkB;AAAA;;AAChB,QAAMG,UAAU,iBAAGH,SAAH,wCAAG,WAAWN,IAAd,qBAAG,gBAAiBC,IAApC;;AACA,QAAIQ,UAAJ,EAAgB;AAAA,UACNN,MADM,GACYM,UADZ,CACNN,MADM;AAAA,UACEE,KADF,GACYI,UADZ,CACEJ,KADF,EAEd;;AACA,UAAIR,MAAM,GAAG,CAAT,IAAcQ,KAAK,IAAID,QAA3B,EAAqC,OAAO,IAAP;;AACrC,UAAID,MAAM,KAAKD,SAAX,IAAwBG,KAAK,KAAKD,QAAQ,GAAGP,MAAjD,EAAyD;AACvD;AACA,eAAOS,SAAP;AACD;AACF;;AACDA,IAAAA,SAAS,GAAGR,QAAQ,CAACS,eAAT,CAAyBD,SAAS,CAACE,GAAnC,CAAZ;AACD;;AACD,SAAO,IAAP;AACD,CArBD","sourcesContent":["import { Value, Block, Node } from '@ali/4ever-cangjie';\n\nexport default (value: Value, currentItem: Block, offset: 1 | -1): Node | null => {\n  const { document } = value;\n  const curListConfig = currentItem?.data?.list;\n  if (!curListConfig) return null;\n  const { listId: curListId, level: curLevel } = curListConfig;\n  if (!curListId) return null;\n  let prevBlock = document.getPreviousNode(currentItem.key) as Block;\n  while (prevBlock) {\n    const listConfig = prevBlock?.data?.list;\n    if (listConfig) {\n      const { listId, level } = listConfig;\n      // 当增加缩进，列表项前边无可继承样式的节点时，使用当前列表项的样式\n      if (offset > 0 && level <= curLevel) return null;\n      if (listId === curListId && level === curLevel + offset) {\n        // 继承离当前项最近，且listId相同的列表项样式\n        return prevBlock;\n      }\n    }\n    prevBlock = document.getPreviousNode(prevBlock.key) as Block;\n  }\n  return null;\n};\n"],"file":"getPrevLevelItem.js"}