{"version":3,"sources":["../../../../src/bi/utils/assertZeroCharacter.ts"],"names":["Text","ZERO_CHAR","LINE_BREAK","isList","assertZeroCharacter","controller","value","selection","startBlock","document","isCollapsed","focus","key","offset","focusNode","getNode","isText","text"],"mappings":"AAAA,SAAqBA,IAArB,QAA4C,oBAA5C;AACA,SAASC,SAAT,EAAoBC,UAApB;AACA,OAAOC,MAAP;AAEA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,mBAAT,CAA6BC,UAA7B,EAA8D;AAAA,0BAC/BA,UAAU,CAACC,KADoB;AAAA,MACnEC,SADmE,qBACnEA,SADmE;AAAA,MACxDC,UADwD,qBACxDA,UADwD;AAAA,MAC5CC,QAD4C,qBAC5CA,QAD4C;;AAE3E,MAAI,EAAEN,MAAM,CAACK,UAAD,CAAN,IAAsBD,SAAS,CAACG,WAAlC,CAAJ,EAAoD;AAClD,WAAO,KAAP;AACD;;AAJ0E,aAKnDH,SAAS,CAACI,KALyC;AAAA,MAKnEC,GALmE,QAKnEA,GALmE;AAAA,MAK9DC,MAL8D,QAK9DA,MAL8D;AAM3E,MAAMC,SAAS,GAAGL,QAAQ,CAACM,OAAT,CAAiBH,GAAjB,CAAlB;AACA,SACEZ,IAAI,CAACgB,MAAL,CAAYF,SAAZ,KACAA,SAAS,CAACG,IAAV,CAAeJ,MAAM,GAAG,CAAxB,MAA+BZ,SAD/B,IAEAa,SAAS,CAACG,IAAV,CAAeJ,MAAM,GAAG,CAAxB,MAA+BX,UAHjC;AAKD","sourcesContent":["import { Controller, Text, TextPoint } from '@ali/4ever-cangjie';\nimport { ZERO_CHAR, LINE_BREAK } from '../constants';\nimport isList from './isList';\n\n/**\n * 判断光标左侧位置，是否有\\n + 零宽字符\n * @param {Controller} controller\n * @return {*}  {boolean}\n */\nexport default function assertZeroCharacter(controller: Controller): boolean {\n  const { selection, startBlock, document } = controller.value;\n  if (!(isList(startBlock) && selection.isCollapsed)) {\n    return false;\n  }\n  const { key, offset } = selection.focus as TextPoint;\n  const focusNode = document.getNode(key);\n  return (\n    Text.isText(focusNode) &&\n    focusNode.text[offset - 1] === ZERO_CHAR &&\n    focusNode.text[offset - 2] === LINE_BREAK\n  );\n}\n"],"file":"assertZeroCharacter.js"}