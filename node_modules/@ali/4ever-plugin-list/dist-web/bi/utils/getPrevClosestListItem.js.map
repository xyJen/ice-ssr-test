{"version":3,"sources":["../../../../src/bi/utils/getPrevClosestListItem.ts"],"names":["getMatchLevel","value","currentItem","config","document","level","prevBlock","getPreviousNode","key","listConfig","data","list","undefined","unLimitLevel","isSameType","isTaskList","isOrdered"],"mappings":"AACA,OAAOA,aAAP;AAOA,gBAAe,UACbC,KADa,EAEbC,WAFa,EAGbC,MAHa,EAIG;AAAA,MADhBA,MACgB;AADhBA,IAAAA,MACgB,GADE,EACF;AAAA;;AAAA,MACRC,QADQ,GACKH,KADL,CACRG,QADQ;AAEhB,MAAMC,KAAK,GAAGL,aAAa,CAACE,WAAD,CAA3B;AACA,MAAII,SAAS,GAAGF,QAAQ,CAACG,eAAT,CAAyBL,WAAW,CAACM,GAArC,CAAhB;;AACA,SAAOF,SAAP,EAAkB;AAAA;;AAChB,QAAMG,UAAU,iBAAGH,SAAH,wCAAG,WAAWI,IAAd,qBAAG,gBAAiBC,IAApC;;AACA,QAAIF,UAAU,IAAIA,UAAU,CAACJ,KAAX,KAAqBO,SAAvC,EAAkD;AAChD,UAAIT,MAAM,CAACU,YAAP,IAAuB,CAAAJ,UAAU,QAAV,YAAAA,UAAU,CAAEJ,KAAZ,MAAsBA,KAAjD,EAAwD;AACtD,YAAMS,UAAU,GACd,CAACL,UAAU,CAACM,UAAZ,IAA0BN,UAAU,CAACO,SAAX,KAAyBb,MAAM,CAACa,SAD5D;;AAEA,YAAIb,MAAM,CAACa,SAAP,KAAqBJ,SAArB,IAAkCE,UAAtC,EAAkD;AAChD,iBAAOR,SAAP;AACD,SAFD,MAEO;AACLA,UAAAA,SAAS,GAAGF,QAAQ,CAACG,eAAT,CAAyBD,SAAS,CAACE,GAAnC,CAAZ;AACA;AACD;AACF;AACF;;AACDF,IAAAA,SAAS,GAAGF,QAAQ,CAACG,eAAT,CAAyBD,SAAS,CAACE,GAAnC,CAAZ;AACD;;AACD,SAAO,IAAP;AACD,CAzBD","sourcesContent":["import { Value, Block, Node } from '@ali/4ever-cangjie';\nimport getMatchLevel from './getMatchLevel';\n\ninterface IConfig {\n  unLimitLevel?: boolean;\n  isOrdered?: boolean;\n}\n\nexport default (\n  value: Value,\n  currentItem: Block,\n  config: IConfig = {},\n): Node | null => {\n  const { document } = value;\n  const level = getMatchLevel(currentItem);\n  let prevBlock = document.getPreviousNode(currentItem.key) as Block;\n  while (prevBlock) {\n    const listConfig = prevBlock?.data?.list;\n    if (listConfig && listConfig.level !== undefined) {\n      if (config.unLimitLevel || listConfig?.level === level) {\n        const isSameType =\n          !listConfig.isTaskList && listConfig.isOrdered === config.isOrdered;\n        if (config.isOrdered === undefined || isSameType) {\n          return prevBlock;\n        } else {\n          prevBlock = document.getPreviousNode(prevBlock.key) as Block;\n          continue;\n        }\n      }\n    }\n    prevBlock = document.getPreviousNode(prevBlock.key) as Block;\n  }\n  return null;\n};\n"],"file":"getPrevClosestListItem.js"}