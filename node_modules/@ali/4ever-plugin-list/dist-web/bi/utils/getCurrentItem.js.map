{"version":3,"sources":["../../../../src/bi/utils/getCurrentItem.ts"],"names":["getClosestParagraph","generateRangesFromTableSelection","controller","tableSelection","query","value","document","selection","ranges","blocks","reduce","list","range","nodes","getLeafBlocksAtRange","concat","paragraphs","map","block"],"mappings":"AACA,SAASA,mBAAT,EAA8BC,gCAA9B,QAAsE,kBAAtE;AAEA,gBAAe,UAACC,UAAD,EAA4B;AACzC,MAAMC,cAAc,GAAGD,UAAU,CAACE,KAAX,CAAiB,gBAAjB,CAAvB;AADyC,0BAETF,UAAU,CAACG,KAFF;AAAA,MAEjCC,QAFiC,qBAEjCA,QAFiC;AAAA,MAEvBC,SAFuB,qBAEvBA,SAFuB;AAGzC,MAAMC,MAAM,GAAGL,cAAc,GACzBF,gCAAgC,CAACC,UAAD,EAAa,CAACC,cAAD,CAAb,CADP,GAEzB,CAACI,SAAD,CAFJ;AAIA,MAAME,MAAM,GAAGD,MAAH,oBAAGA,MAAM,CAAEE,MAAR,CAAe,UAACC,IAAD,EAAOC,KAAP,EAAiB;AAC7C,QAAMC,KAAK,GAAGP,QAAQ,CAACQ,oBAAT,CAA8BF,KAA9B,CAAd;AACA,WAAOD,IAAI,CAACI,MAAL,CAAYF,KAAZ,CAAP;AACD,GAHc,EAGZ,EAHY,CAAf;AAIA,MAAMG,UAAU,GAAGP,MAAH,oBAAGA,MAAM,CAAEQ,GAAR,CAAY,UAACC,KAAD;AAAA,WAAWlB,mBAAmB,CAACE,UAAU,CAACG,KAAZ,EAAmBa,KAAnB,CAA9B;AAAA,GAAZ,CAAnB;AACA,SAAOF,UAAU,IAAI,EAArB;AACD,CAbD","sourcesContent":["import { Block, Controller } from '@ali/4ever-cangjie';\nimport { getClosestParagraph, generateRangesFromTableSelection } from '@ali/4ever-utils';\n\nexport default (controller: Controller) => {\n  const tableSelection = controller.query('tableSelection');\n  const { document, selection } = controller.value;\n  const ranges = tableSelection\n    ? generateRangesFromTableSelection(controller, [tableSelection])\n    : [selection];\n\n  const blocks = ranges?.reduce((list, range) => {\n    const nodes = document.getLeafBlocksAtRange(range);\n    return list.concat(nodes);\n  }, [] as Block[]);\n  const paragraphs = blocks?.map((block) => getClosestParagraph(controller.value, block));\n  return paragraphs || [];\n};\n"],"file":"getCurrentItem.js"}