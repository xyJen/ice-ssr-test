{"version":3,"sources":["../../../../src/bi/utils/selectSymbol.ts"],"names":["Injection","selectSymbol","controller","listItemSelected","isSelected","value","injections","data","allInjections","curInjections","curInjectionMap","Map","forEach","item","includes","key","push","set","result","length","map","inj","create","get","setInjections"],"mappings":";AAAA,SAAqBA,SAArB,QAAsC,oBAAtC;AAEA,eAAe,SAASC,YAAT,CACbC,UADa,EAEbC,gBAFa,EAGbC,UAHa,EAIP;AAAA,0BACuBF,UAAU,CAACG,KADlC;AAAA,MACEC,UADF,qBACEA,UADF;AAAA,MACcC,IADd,qBACcA,IADd;AAEN,MAAMC,aAA0B,GAAG,EAAnC;AACA,MAAMC,aAA0B,GAAG,EAAnC;AACA,MAAMC,eAAe,GAAG,IAAIC,GAAJ,EAAxB;AACAL,EAAAA,UAAU,CAACM,OAAX,CAAmB,UAAAC,IAAI,EAAI;AACzB,QAAIV,gBAAgB,CAACW,QAAjB,CAA0BD,IAAI,CAACE,GAA/B,CAAJ,EAAyC;AACvCN,MAAAA,aAAa,CAACO,IAAd,CAAmBH,IAAnB;AACAH,MAAAA,eAAe,CAACO,GAAhB,CAAoBJ,IAAI,CAACE,GAAzB,EAA8B,IAA9B;AACD,KAHD,MAGO;AACLP,MAAAA,aAAa,CAACQ,IAAd,CAAmBH,IAAnB;AACD;AACF,GAPD;AAQA,MAAIK,MAAmB,GAAG,EAA1B;;AACA,MAAIT,aAAa,CAACU,MAAlB,EAA0B;AACxBD,IAAAA,MAAM,GAAGT,aAAa,CAACW,GAAd,CAAkB,UAAAC,GAAG;AAAA,aAAIrB,SAAS,CAACsB,MAAV,cAC7BD,GAD6B;AAEhCd,QAAAA,IAAI,eACEc,GAAG,CAACd,IAAJ,IAAY,EADd;AAEFH,UAAAA,UAAU,EAAVA;AAFE;AAF4B,SAAJ;AAAA,KAArB,CAAT;AAOD;;AAEDD,EAAAA,gBAAgB,CAACS,OAAjB,CAAyB,UAAAG,GAAG,EAAI;AAC9B,QAAI,CAACL,eAAe,CAACa,GAAhB,CAAoBR,GAApB,CAAL,EAA+B;AAC7BG,MAAAA,MAAM,CAACF,IAAP,CAAYhB,SAAS,CAACsB,MAAV,CAAiB;AAC3BP,QAAAA,GAAG,EAAHA,GAD2B;AAE3BR,QAAAA,IAAI,EAAE;AACJH,UAAAA,UAAU,EAAVA;AADI;AAFqB,OAAjB,CAAZ;AAMD;AACF,GATD;AAWAF,EAAAA,UAAU,CAACsB,aAAX,WAA6BhB,aAA7B,EAA+CU,MAA/C;AACD","sourcesContent":["import { Controller, Injection } from '@ali/4ever-cangjie';\n\nexport default function selectSymbol(\n  controller: Controller,\n  listItemSelected: string[],\n  isSelected: boolean,\n): void {\n  const { injections, data } = controller.value;\n  const allInjections: Injection[] = [];\n  const curInjections: Injection[] = [];\n  const curInjectionMap = new Map();\n  injections.forEach(item => {\n    if (listItemSelected.includes(item.key)) {\n      curInjections.push(item);\n      curInjectionMap.set(item.key, true);\n    } else {\n      allInjections.push(item);\n    }\n  });\n  let result: Injection[] = [];\n  if (curInjections.length) {\n    result = curInjections.map(inj => Injection.create({\n      ...inj,\n      data: {\n        ...(inj.data || {}),\n        isSelected,\n      },\n    }));\n  }\n\n  listItemSelected.forEach(key => {\n    if (!curInjectionMap.get(key)) {\n      result.push(Injection.create({\n        key,\n        data: {\n          isSelected,\n        },\n      }))\n    }\n  });\n\n  controller.setInjections([...allInjections, ...result]);\n}\n"],"file":"selectSymbol.js"}