{"version":3,"sources":["../../../../src/bi/utils/adjustSymbolSz.ts"],"names":["Commands","findNextSz","getWholeListItemSelected","mergeListData","adjustSymbolSz","controller","isIncreasingSz","value","document","data","wholeListItemSelected","listSelections","length","map","block","key","forEach","node","getNode","listSymbolStyle","list","symbolStyle","sz","query","direction","newSz","newStyle","newData","command","setNodeByKey"],"mappings":";AAAA,SAASA,QAAT,QAA4C,oBAA5C;AACA,SAASC,UAAT,QAA2B,sBAA3B;AACA,OAAOC,wBAAP;AACA,OAAOC,aAAP;AAEA,eAAe,SAASC,cAAT,CAAwBC,UAAxB,EAAgDC,cAAhD,EAA+E;AAAA;;AAAA,0BACjED,UAAU,CAACE,KADsD;AAAA,MACpFC,QADoF,qBACpFA,QADoF;AAAA,MAC1EC,IAD0E,qBAC1EA,IAD0E;AAE5F,MAAMC,qBAAqB,GAAGR,wBAAwB,CAACG,UAAU,CAACE,KAAZ,CAAtD;AAF4F,6BAG9DE,IAH8D,CAGtFE,cAHsF;AAAA,MAGtFA,cAHsF,qCAGrE,EAHqE;;AAI5F,MAAI,oBAAAA,cAAc,SAAd,4BAAgBC,MAAhB,MAA2B,CAA3B,IAAgCF,qBAAqB,CAACE,MAAtB,GAA+B,CAAnE,EAAsE;AACpED,IAAAA,cAAc,GAAGD,qBAAqB,CAACG,GAAtB,CAA0B,UAACC,KAAD;AAAA,aAAWA,KAAK,CAACC,GAAjB;AAAA,KAA1B,CAAjB;AACD;;AACDJ,EAAAA,cAAc,IAAIA,cAAc,CAACK,OAAf,CAAuB,UAACD,GAAD,EAAS;AAAA;;AAChD,QAAME,IAAI,GAAGT,QAAQ,CAACU,OAAT,CAAiBH,GAAjB,CAAb;;AACA,QAAMI,eAAe,gBAChBF,IADgB,kCAChBA,IAAI,CAAER,IADU,wCAChB,WAAYW,IADI,qBAChB,gBAAkBC,WADF,CAArB;;AAFgD,8BAKOF,eALP,CAKxCG,EALwC;AAAA,QAKxCA,EALwC,oCAKnCjB,UAAU,CAACkB,KAAX,CAAiB,cAAjB,EAAiCR,GAAjC,CALmC;AAMhD,QAAMS,SAAS,GAAGlB,cAAc,GAAG,OAAH,GAAa,MAA7C;AACA,QAAMmB,KAAK,GAAGxB,UAAU,CAACqB,EAAD,EAAKE,SAAL,CAAxB;AACA,QAAME,QAAQ,GAAG;AACfJ,MAAAA,EAAE,EAAEG;AADW,KAAjB;AAGA,QAAME,OAAO,GAAGxB,aAAa,CAACc,IAAI,CAACR,IAAN,EAAY;AACvCY,MAAAA,WAAW,eACNF,eADM,EAENO,QAFM;AAD4B,KAAZ,CAA7B;AAMArB,IAAAA,UAAU,CAACuB,OAAX,CAAmB5B,QAAQ,CAAC6B,YAA5B,EAA0CZ,IAAI,CAACF,GAA/C,EAAoDY,OAApD;AACD,GAlBiB,CAAlB;AAmBD","sourcesContent":["import { Commands, Controller, Block } from '@ali/4ever-cangjie';\nimport { findNextSz } from '@ali/4ever-plugin-sz';\nimport getWholeListItemSelected from './getWholeListItemSelected';\nimport mergeListData from './mergeListData';\n\nexport default function adjustSymbolSz(controller: Controller, isIncreasingSz: boolean): void {\n  const { document, data } = controller.value;\n  const wholeListItemSelected = getWholeListItemSelected(controller.value);\n  let { listSelections = [] } = data;\n  if (listSelections?.length === 0 && wholeListItemSelected.length > 0) {\n    listSelections = wholeListItemSelected.map((block) => block.key);\n  }\n  listSelections && listSelections.forEach((key) => {\n    const node = document.getNode(key) as Block;\n    const listSymbolStyle = {\n      ...node?.data?.list?.symbolStyle,\n    };\n    const { sz = controller.query('getDefaultSz', key) } = listSymbolStyle;\n    const direction = isIncreasingSz ? 'right' : 'left';\n    const newSz = findNextSz(sz, direction);\n    const newStyle = {\n      sz: newSz,\n    };\n    const newData = mergeListData(node.data, {\n      symbolStyle: {\n        ...listSymbolStyle,\n        ...newStyle,\n      },\n    });\n    controller.command(Commands.setNodeByKey, node.key, newData);\n  });\n}\n"],"file":"adjustSymbolSz.js"}