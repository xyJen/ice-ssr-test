{"version":3,"sources":["../../../../src/bi/components/unorderedListButton.tsx"],"names":["React","useCallback","environment","ToolbarUnorderListNormal","ListSet","IconButton","IconButtonShortcut","isUnorderedList","toggleList","getListStyleType","ULLIST_HOT_KEY_TIP","isSelectionInListSymbol","ListRole","DEFAULT_BULLET_LIST_ARRAY","bulletLists","isMobile","IS_MOBILE","MemoListSet","memo","renderUnorderedListButton","config","enableSticker","UnorderedListButton","props","controller","locale","simple","rest","isCollapsedAtEdge","value","selection","isDisabled","query","listStyleType","isActive","handleClick","listType","run","undefined","unorderedList","space","listUnordered","needRender"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\nimport { Controller, environment } from '@ali/4ever-cangjie';\nimport { ToolbarUnorderListNormal } from '@ali/we-design';\nimport { ListSet, IconButton } from '@ali/we-toolbar';\nimport { IconButtonShortcut } from '@ali/4ever-component';\nimport isUnorderedList from '../queries/isUnorderedList';\nimport { toggleList } from '../actions';\nimport { getListStyleType, ULLIST_HOT_KEY_TIP } from '../utils';\nimport isSelectionInListSymbol from '../utils/isSelectionInListSymbol';\nimport { ListRole } from '../../utils/role';\nimport { DEFAULT_BULLET_LIST_ARRAY as bulletLists } from '../../utils/listStyleMapping';\n\nconst isMobile = environment.IS_MOBILE;\nconst MemoListSet = React.memo(ListSet);\n\nexport interface UnorderedListButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n  simple?: boolean;\n}\n\nexport const renderUnorderedListButton = (config = { enableSticker: false }) => {\n  const { enableSticker } = config;\n  function UnorderedListButton(props: UnorderedListButtonProps) {\n    const { controller, locale, simple, ...rest } = props;\n    const { isCollapsedAtEdge } = controller.value.selection;\n    const isDisabled =\n      isCollapsedAtEdge ||\n      controller.query('isSelectionInHr') ||\n      // fix: https://aone.alibaba-inc.com/v2/project/1090534/bug/35667506\n      controller.query('isSelectionInSubjectHeading');\n    const listStyleType = getListStyleType(controller);\n    const isActive = isUnorderedList(controller);\n\n    const handleClick = useCallback(\n      (listType: string | React.MouseEvent) =>\n        controller.run(\n          'onAction',\n          toggleList(\n            'ulist',\n            isMobile || bulletLists[listType as string] === undefined\n              ? bulletLists[0]\n              : listType,\n          ),\n        ),\n      [controller],\n    );\n    if (simple) {\n      return (<IconButton\n        {...rest}\n        testid=\"bi-toolbar-ullist\"\n        icon={<ToolbarUnorderListNormal />}\n        title={locale.unorderedList}\n        shortcutText={ULLIST_HOT_KEY_TIP}\n        tooltip={\n          <IconButtonShortcut\n            title={locale.unorderedList}\n            shortcut={ULLIST_HOT_KEY_TIP}\n            description={'Markdown: * + ' + (locale?.space || 'Space')}\n          />\n        }\n        active={isActive}\n        disabled={!!isDisabled}\n        onClick={handleClick}\n        role={ListRole.listUnordered}\n      />);\n    }\n    return (\n      <MemoListSet\n        {...rest}\n        mode=\"ul\"\n        active={isActive}\n        shortcutText={ULLIST_HOT_KEY_TIP}\n        testid=\"bi-toolbar-ullist\"\n        disabled={!!isDisabled}\n        defaultListStyle={listStyleType}\n        onChange={handleClick}\n        onClick={handleClick}\n        enableSticker={enableSticker}\n        role={ListRole.listUnordered}\n      />\n    );\n  }\n  UnorderedListButton.needRender = function (controller: Controller): boolean {\n    return isSelectionInListSymbol(controller.value);\n  };\n  return UnorderedListButton;\n};\n"],"file":"unorderedListButton.js"}