{"version":3,"sources":["../../../../../src/bi/components/next/orderedListButton.tsx"],"names":["React","useCallback","environment","ListSet","isOrderedList","getListStyleType","OLLIST_HOT_KEY_TIP","toggleList","ListRole","DEFAULT_NUMBER_LIST_ARRAY","numberLists","isMobile","IS_MOBILE","OrderedListButton","props","controller","locale","rest","listStyleType","isCollapsedAtEdge","value","selection","isDisabled","query","isActive","handleClick","listType","run","undefined","tooltip","useMemo","title","orderedList","shortCut","description","space","listOrdered"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,QAAmC,OAAnC;qBAC4B,a;AAA5B,SAAqBC,WAArB,QAAwC,oBAAxC;AACA,SAASC,OAAT,QAAwB,sBAAxB;AACA,OAAOC,aAAP;AACA,SAASC,gBAAT,EAA2BC,kBAA3B;AACA,SAASC,UAAT;AACA,SAASC,QAAT;AACA,SAASC,yBAAyB,IAAIC,WAAtC;AAEA,IAAMC,QAAQ,GAAGT,WAAW,CAACU,SAA7B;AAOA,eAAe,SAASC,iBAAT,CAA2BC,KAA3B,EAA0D;AAAA,MAC/DC,UAD+D,GAC/BD,KAD+B,CAC/DC,UAD+D;AAAA,MACnDC,MADmD,GAC/BF,KAD+B,CACnDE,MADmD;AAAA,MACxCC,IADwC,iCAC/BH,KAD+B;;AAEvE,MAAMI,aAAa,GAAGb,gBAAgB,CAACU,UAAD,CAAtC;AAFuE,MAG/DI,iBAH+D,GAGzCJ,UAAU,CAACK,KAAX,CAAiBC,SAHwB,CAG/DF,iBAH+D;AAIvE,MAAMG,UAAU,GACdH,iBAAiB,IACjBJ,UAAU,CAACQ,KAAX,CAAiB,iBAAjB,CADA,IAEA;AACAR,EAAAA,UAAU,CAACQ,KAAX,CAAiB,6BAAjB,CAJF;AAKA,MAAMC,QAAQ,GAAGpB,aAAa,CAACW,UAAD,CAA9B;AAEA,MAAMU,WAAW,GAAGxB,WAAW,CAC7B,UAACyB,QAAD,EAAyC;AACvCX,IAAAA,UAAU,CAACY,GAAX,CACE,UADF,EAEEpB,UAAU,CACR,OADQ,EAERI,QAAQ,IAAID,WAAW,CAACgB,QAAD,CAAX,KAAoCE,SAAhD,GACIlB,WAAW,CAAC,CAAD,CADf,GAEIgB,QAJI,CAFZ;AASD,GAX4B,EAY7B,CAACX,UAAD,CAZ6B,CAA/B;AAeA,MAAMc,OAAO,GAAG7B,KAAK,CAAC8B,OAAN,CACd;AAAA,WAAO;AACLC,MAAAA,KAAK,EAAEf,MAAM,CAACgB,WADT;AAELC,MAAAA,QAAQ,EAAE3B,kBAFL;AAGL4B,MAAAA,WAAW,EAAE,mBAAkBlB,MAAlB,oBAAkBA,MAAM,CAAEmB,KAA1B,KAAmC;AAH3C,KAAP;AAAA,GADc,EAMd,EANc,CAAhB;AASA,sBACE,eAAC,OAAD;AACE,IAAA,IAAI,EAAC,IADP;AAEE,IAAA,MAAM,EAAEX,QAFV;AAGE,IAAA,MAAM,EAAC,mBAHT;AAIE,IAAA,QAAQ,EAAE,CAAC,CAACF,UAJd;AAKE,IAAA,gBAAgB,EAAEJ,aALpB;AAME,IAAA,QAAQ,EAAEO,WANZ;AAOE,IAAA,OAAO,EAAEA,WAPX;AAQE,IAAA,IAAI,EAAEjB,QAAQ,CAAC4B,WARjB;AASE,IAAA,KAAK,EAAEpB,MAAM,CAACgB,WAThB;AAUE,IAAA,OAAO,EAAEH;AAVX,KAWMZ,IAXN,EADF;AAeD","sourcesContent":["import React, { useCallback } from 'react';\nimport { Controller, environment } from '@ali/4ever-cangjie';\nimport { ListSet } from '@ali/4ever-component';\nimport isOrderedList from '../../queries/isOrderedList';\nimport { getListStyleType, OLLIST_HOT_KEY_TIP } from '../../utils';\nimport { toggleList } from '../../actions';\nimport { ListRole } from '../../../utils/role';\nimport { DEFAULT_NUMBER_LIST_ARRAY as numberLists } from '../../../utils/listStyleMapping';\n\nconst isMobile = environment.IS_MOBILE;\n\nexport interface OrderedListButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n}\n\nexport default function OrderedListButton(props: OrderedListButtonProps) {\n  const { controller, locale, ...rest } = props;\n  const listStyleType = getListStyleType(controller);\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled =\n    isCollapsedAtEdge ||\n    controller.query('isSelectionInHr') ||\n    // fix: https://aone.alibaba-inc.com/v2/project/1090534/bug/35667506\n    controller.query('isSelectionInSubjectHeading');\n  const isActive = isOrderedList(controller);\n\n  const handleClick = useCallback(\n    (listType: string | React.MouseEvent) => {\n      controller.run(\n        'onAction',\n        toggleList(\n          'olist',\n          isMobile || numberLists[listType as string] === undefined\n            ? numberLists[0]\n            : listType,\n        ),\n      );\n    },\n    [controller],\n  );\n\n  const tooltip = React.useMemo(\n    () => ({\n      title: locale.orderedList,\n      shortCut: OLLIST_HOT_KEY_TIP,\n      description: 'Markdown: 1. ' + locale?.space || 'Space',\n    }),\n    [],\n  );\n\n  return (\n    <ListSet\n      mode=\"ol\"\n      active={isActive}\n      testid=\"bi-toolbar-ollist\"\n      disabled={!!isDisabled}\n      defaultListStyle={listStyleType}\n      onChange={handleClick}\n      onClick={handleClick}\n      role={ListRole.listOrdered}\n      title={locale.orderedList}\n      tooltip={tooltip}\n      {...rest}\n    />\n  );\n}\n"],"file":"orderedListButton.js"}