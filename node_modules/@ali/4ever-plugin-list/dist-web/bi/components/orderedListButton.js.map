{"version":3,"sources":["../../../../src/bi/components/orderedListButton.tsx"],"names":["React","useCallback","environment","ToolbarOrderListNormal","IconButtonShortcut","ListSet","IconButton","isOrderedList","getListStyleType","OLLIST_HOT_KEY_TIP","toggleList","isSelectionInListSymbol","ListRole","DEFAULT_NUMBER_LIST_ARRAY","numberLists","isMobile","IS_MOBILE","MemoListSet","memo","OrderedListButton","props","controller","locale","simple","rest","listStyleType","isCollapsedAtEdge","value","selection","isDisabled","query","isActive","handleClick","listType","run","undefined","orderedList","space","listOrdered","needRender"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\nimport { Controller, environment } from '@ali/4ever-cangjie';\nimport { ToolbarOrderListNormal } from '@ali/we-design';\nimport { IconButtonShortcut } from '@ali/4ever-component';\nimport { ListSet, IconButton } from '@ali/we-toolbar';\nimport isOrderedList from '../queries/isOrderedList';\nimport { getListStyleType, OLLIST_HOT_KEY_TIP } from '../utils';\nimport { toggleList } from '../actions';\nimport isSelectionInListSymbol from '../utils/isSelectionInListSymbol';\nimport { ListRole } from '../../utils/role';\nimport { DEFAULT_NUMBER_LIST_ARRAY as numberLists } from '../../utils/listStyleMapping';\n\nconst isMobile = environment.IS_MOBILE;\nconst MemoListSet = React.memo(ListSet);\n\nexport interface OrderedListButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n  simple?: boolean;\n}\n\nexport default function OrderedListButton(props: OrderedListButtonProps) {\n  const { controller, locale, simple, ...rest } = props;\n  const listStyleType = getListStyleType(controller);\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled =\n    isCollapsedAtEdge ||\n    controller.query('isSelectionInHr') ||\n    // fix: https://aone.alibaba-inc.com/v2/project/1090534/bug/35667506\n    controller.query('isSelectionInSubjectHeading');\n  const isActive = isOrderedList(controller);\n\n  const handleClick = useCallback(\n    (listType: string | React.MouseEvent) => {\n      controller.run(\n        'onAction',\n        toggleList(\n          'olist',\n          isMobile || numberLists[listType as string] === undefined\n            ? numberLists[0]\n            : listType,\n        ),\n      );\n    },\n    [controller],\n  );\n  if (simple) {\n    return (<IconButton\n      {...rest}\n      testid=\"bi-toolbar-ollist\"\n      icon={<ToolbarOrderListNormal />}\n      title={locale.orderedList}\n      shortcutText={OLLIST_HOT_KEY_TIP}\n      tooltip={\n        <IconButtonShortcut\n          title={locale.orderedList}\n          shortcut={OLLIST_HOT_KEY_TIP}\n          description={'Markdown: 1. + ' + locale?.space || 'Space'}\n        />\n      }\n      active={isActive}\n      disabled={!!isDisabled}\n      onClick={handleClick}\n      role={ListRole.listOrdered}\n    />);\n  }\n  return (\n    <MemoListSet\n      {...rest}\n      mode=\"ol\"\n      active={isActive}\n      shortcutText={OLLIST_HOT_KEY_TIP}\n      testid=\"bi-toolbar-ollist\"\n      disabled={!!isDisabled}\n      defaultListStyle={listStyleType}\n      onChange={handleClick}\n      onClick={handleClick}\n      role={ListRole.listOrdered}\n    />\n  );\n}\n\nOrderedListButton.needRender = function (controller: Controller): boolean {\n  return isSelectionInListSymbol(controller.value);\n};\n"],"file":"orderedListButton.js"}