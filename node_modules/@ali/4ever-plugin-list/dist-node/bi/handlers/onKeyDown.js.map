{"version":3,"sources":["../../../../src/bi/handlers/onKeyDown.ts"],"names":["isBackspaceHotKey","isDeleteHotKey","isEnterHotKey","isTabHotKey","isUlHotKey","isOlHotKey","isIncreaseHotKey","isDecreaseHotKey","isTlHotKey","event","controller","next","query","offset","shiftKey","preventDefault","DEFAULT_BULLET_LIST_ARRAY","DEFAULT_NUMBER_LIST_ARRAY"],"mappings":";;;;;;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAKA,MAAMA,iBAAiB,GAAG,2BAAY,WAAZ,CAA1B;AACA,MAAMC,cAAc,GAAG,2BAAY,QAAZ,CAAvB;AACA,MAAMC,aAAa,GAAG,2BAAY,cAAZ,CAAtB;AACA,MAAMC,WAAW,GAAG,2BAAY,YAAZ,CAApB;AACA,MAAMC,UAAU,GAAG,2BAAY,CAAC,aAAD,EAAgB,aAAhB,CAAZ,CAAnB;AACA,MAAMC,UAAU,GAAG,2BAAY,CAAC,aAAD,EAAgB,aAAhB,CAAZ,CAAnB;AACA,MAAMC,gBAAgB,GAAG,2BAAY,OAAZ,CAAzB;AACA,MAAMC,gBAAgB,GAAG,2BAAY,OAAZ,CAAzB;AACA,MAAMC,UAAU,GAAG,2BAAY,aAAZ,CAAnB;;eAEe,CAACC,KAAD,EAAQC,UAAR,EAAgCC,IAAhC,KAAyC;AACtD,MAAID,UAAU,CAACE,KAAX,CAAiB,wBAAjB,CAAJ,EAAgD;AAC9C,WAAOD,IAAI,EAAX;AACD;;AAED,MAAIT,aAAa,CAACO,KAAD,CAAjB,EAA0B;AACxB,WAAO,sBAAQA,KAAR,EAAeC,UAAf,EAA2BC,IAA3B,CAAP;AACD;;AAED,MAAIR,WAAW,CAACM,KAAD,CAAf,EAAwB;AACtB,UAAMI,MAAM,GAAGJ,KAAK,CAACK,QAAN,GAAiB,CAAC,CAAlB,GAAsB,CAArC;AACA,WAAO,yBAAWL,KAAX,EAAkBC,UAAlB,EAA8BG,MAA9B,EAAsCF,IAAtC,CAAP;AACD;;AAED,MAAIL,gBAAgB,CAACG,KAAD,CAApB,EAA6B;AAC3B,WAAO,yBAAWA,KAAX,EAAkBC,UAAlB,EAA8B,CAA9B,EAAiCC,IAAjC,CAAP;AACD;;AAED,MAAIJ,gBAAgB,CAACE,KAAD,CAApB,EAA6B;AAC3B,WAAO,yBAAWA,KAAX,EAAkBC,UAAlB,EAA8B,CAAC,CAA/B,EAAkCC,IAAlC,CAAP;AACD;;AAED,MAAIX,iBAAiB,CAACS,KAAD,CAAjB,IAA4BR,cAAc,CAACQ,KAAD,CAA9C,EAAuD;AACrD,WAAO,0BAAYA,KAAZ,EAAmBC,UAAnB,EAA+BC,IAA/B,CAAP;AACD;;AAED,MAAIP,UAAU,CAACK,KAAD,CAAd,EAAuB;AACrBA,IAAAA,KAAK,CAACM,cAAN;AACA,WAAO,gCACLL,UADK,EAEL,OAFK,EAGLM,4CAA0B,CAA1B,CAHK,EAIL,IAJK,CAAP;AAMD;;AAED,MAAIX,UAAU,CAACI,KAAD,CAAd,EAAuB;AACrBA,IAAAA,KAAK,CAACM,cAAN;AACA,WAAO,gCACLL,UADK,EAEL,OAFK,EAGLO,4CAA0B,CAA1B,CAHK,EAIL,IAJK,CAAP;AAMD;;AAED,MAAIT,UAAU,CAACC,KAAD,CAAd,EAAuB;AACrBA,IAAAA,KAAK,CAACM,cAAN;AACA,WAAO,gCAAiBL,UAAjB,EAA6B,OAA7B,CAAP;AACD;;AAED,SAAOC,IAAI,EAAX;AACD,C","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport { isKeyHotkey } from 'is-hotkey';\nimport onEnter from './onEnter';\nimport onBackspace from './onBackspace';\nimport onIncrease from './onIncrease';\nimport { toggleWrapInList } from '../commands';\nimport {\n  DEFAULT_BULLET_LIST_ARRAY,\n  DEFAULT_NUMBER_LIST_ARRAY,\n} from '../../utils/listStyleMapping';\n\nconst isBackspaceHotKey = isKeyHotkey('backspace');\nconst isDeleteHotKey = isKeyHotkey('delete');\nconst isEnterHotKey = isKeyHotkey('shift?+enter');\nconst isTabHotKey = isKeyHotkey('shift?+tab');\nconst isUlHotKey = isKeyHotkey(['mod+shift+7', 'mod+shift+&']);\nconst isOlHotKey = isKeyHotkey(['mod+shift+8', 'mod+shift+*']);\nconst isIncreaseHotKey = isKeyHotkey('mod+]');\nconst isDecreaseHotKey = isKeyHotkey('mod+[');\nconst isTlHotKey = isKeyHotkey('mod+shift+y');\n\nexport default (event, controller: Controller, next) => {\n  if (controller.query('isSelectionInTableEdge')) {\n    return next();\n  }\n\n  if (isEnterHotKey(event)) {\n    return onEnter(event, controller, next);\n  }\n\n  if (isTabHotKey(event)) {\n    const offset = event.shiftKey ? -1 : 1;\n    return onIncrease(event, controller, offset, next);\n  }\n\n  if (isIncreaseHotKey(event)) {\n    return onIncrease(event, controller, 1, next);\n  }\n\n  if (isDecreaseHotKey(event)) {\n    return onIncrease(event, controller, -1, next);\n  }\n\n  if (isBackspaceHotKey(event) || isDeleteHotKey(event)) {\n    return onBackspace(event, controller, next);\n  }\n\n  if (isUlHotKey(event)) {\n    event.preventDefault();\n    return toggleWrapInList(\n      controller,\n      'ulist',\n      DEFAULT_BULLET_LIST_ARRAY[0],\n      true,\n    );\n  }\n\n  if (isOlHotKey(event)) {\n    event.preventDefault();\n    return toggleWrapInList(\n      controller,\n      'olist',\n      DEFAULT_NUMBER_LIST_ARRAY[0],\n      true,\n    );\n  }\n\n  if (isTlHotKey(event)) {\n    event.preventDefault();\n    return toggleWrapInList(controller, 'tlist');\n  }\n\n  return next();\n};\n"],"file":"onKeyDown.js"}