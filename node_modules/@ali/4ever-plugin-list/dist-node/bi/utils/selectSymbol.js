"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = selectSymbol;

var _everCangjie = require("@ali/4ever-cangjie");

function selectSymbol(controller, listItemSelected, isSelected) {
  const {
    injections,
    data
  } = controller.value;
  const allInjections = [];
  const curInjections = [];
  const curInjectionMap = new Map();
  injections.forEach(item => {
    if (listItemSelected.includes(item.key)) {
      curInjections.push(item);
      curInjectionMap.set(item.key, true);
    } else {
      allInjections.push(item);
    }
  });
  let result = [];

  if (curInjections.length) {
    result = curInjections.map(inj => _everCangjie.Injection.create({ ...inj,
      data: { ...(inj.data || {}),
        isSelected
      }
    }));
  }

  listItemSelected.forEach(key => {
    if (!curInjectionMap.get(key)) {
      result.push(_everCangjie.Injection.create({
        key,
        data: {
          isSelected
        }
      }));
    }
  });
  controller.setInjections([...allInjections, ...result]);
}
//# sourceMappingURL=selectSymbol.js.map