{"version":3,"sources":["../../../../src/bi/utils/assertZeroCharacter.ts"],"names":["assertZeroCharacter","controller","selection","startBlock","document","value","isCollapsed","key","offset","focus","focusNode","getNode","Text","isText","text","ZERO_CHAR","LINE_BREAK"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA;AACA;AACA;AACA;AACA;AACe,SAASA,mBAAT,CAA6BC,UAA7B,EAA8D;AAC3E,QAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA,UAAb;AAAyBC,IAAAA;AAAzB,MAAsCH,UAAU,CAACI,KAAvD;;AACA,MAAI,EAAE,qBAAOF,UAAP,KAAsBD,SAAS,CAACI,WAAlC,CAAJ,EAAoD;AAClD,WAAO,KAAP;AACD;;AACD,QAAM;AAAEC,IAAAA,GAAF;AAAOC,IAAAA;AAAP,MAAkBN,SAAS,CAACO,KAAlC;AACA,QAAMC,SAAS,GAAGN,QAAQ,CAACO,OAAT,CAAiBJ,GAAjB,CAAlB;AACA,SACEK,kBAAKC,MAAL,CAAYH,SAAZ,KACAA,SAAS,CAACI,IAAV,CAAeN,MAAM,GAAG,CAAxB,MAA+BO,oBAD/B,IAEAL,SAAS,CAACI,IAAV,CAAeN,MAAM,GAAG,CAAxB,MAA+BQ,qBAHjC;AAKD","sourcesContent":["import { Controller, Text, TextPoint } from '@ali/4ever-cangjie';\nimport { ZERO_CHAR, LINE_BREAK } from '../constants';\nimport isList from './isList';\n\n/**\n * 判断光标左侧位置，是否有\\n + 零宽字符\n * @param {Controller} controller\n * @return {*}  {boolean}\n */\nexport default function assertZeroCharacter(controller: Controller): boolean {\n  const { selection, startBlock, document } = controller.value;\n  if (!(isList(startBlock) && selection.isCollapsed)) {\n    return false;\n  }\n  const { key, offset } = selection.focus as TextPoint;\n  const focusNode = document.getNode(key);\n  return (\n    Text.isText(focusNode) &&\n    focusNode.text[offset - 1] === ZERO_CHAR &&\n    focusNode.text[offset - 2] === LINE_BREAK\n  );\n}\n"],"file":"assertZeroCharacter.js"}