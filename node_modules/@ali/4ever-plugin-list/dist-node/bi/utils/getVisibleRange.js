"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

// TODO: 暂时拿掉该方法, 只有改造
var _default = value => {
  const {
    selection,
    document,
    startBlock,
    endBlock
  } = value;
  const {
    anchor,
    focus,
    isCollapsed
  } = selection;
  let adjustedSelection = selection;

  if (!isCollapsed && startBlock && anchor.isAtEndOfNode(startBlock) && !anchor.isAtStartOfNode(startBlock)) {
    const p = selection.anchor;
    const next = document.getNextText(p.key);

    if (next) {
      // @ts-ignore selection 没有 setStart 方法
      adjustedSelection = selection.setStart(selection.anchor.moveToStartOfNode(next));
    }
  }

  if (!isCollapsed && endBlock && focus.isAtStartOfNode(endBlock) && !focus.isAtEndOfNode(endBlock)) {
    const p = selection.focus;
    const previous = document.getPreviousText(p.key);

    if (previous) {
      // @ts-ignore selection 没有 setEnd 方法
      adjustedSelection = selection.setEnd(selection.focus.moveToEndOfNode(previous));
    }
  }

  return adjustedSelection;
};

exports.default = _default;
//# sourceMappingURL=getVisibleRange.js.map