{"version":3,"sources":["../../../../src/bi/utils/getPrevLevelItem.ts"],"names":["value","currentItem","offset","document","curListConfig","data","list","listId","curListId","level","curLevel","prevBlock","getPreviousNode","key","listConfig"],"mappings":";;;;;;;eAEe,CAACA,KAAD,EAAeC,WAAf,EAAmCC,MAAnC,KAAmE;AAChF,QAAM;AAAEC,IAAAA;AAAF,MAAeH,KAArB;AACA,QAAMI,aAAa,GAAGH,WAAW,EAAEI,IAAb,EAAmBC,IAAzC;AACA,MAAI,CAACF,aAAL,EAAoB,OAAO,IAAP;AACpB,QAAM;AAAEG,IAAAA,MAAM,EAAEC,SAAV;AAAqBC,IAAAA,KAAK,EAAEC;AAA5B,MAAyCN,aAA/C;AACA,MAAI,CAACI,SAAL,EAAgB,OAAO,IAAP;AAChB,MAAIG,SAAS,GAAGR,QAAQ,CAACS,eAAT,CAAyBX,WAAW,CAACY,GAArC,CAAhB;;AACA,SAAOF,SAAP,EAAkB;AAChB,UAAMG,UAAU,GAAGH,SAAS,EAAEN,IAAX,EAAiBC,IAApC;;AACA,QAAIQ,UAAJ,EAAgB;AACd,YAAM;AAAEP,QAAAA,MAAF;AAAUE,QAAAA;AAAV,UAAoBK,UAA1B,CADc,CAEd;;AACA,UAAIZ,MAAM,GAAG,CAAT,IAAcO,KAAK,IAAIC,QAA3B,EAAqC,OAAO,IAAP;;AACrC,UAAIH,MAAM,KAAKC,SAAX,IAAwBC,KAAK,KAAKC,QAAQ,GAAGR,MAAjD,EAAyD;AACvD;AACA,eAAOS,SAAP;AACD;AACF;;AACDA,IAAAA,SAAS,GAAGR,QAAQ,CAACS,eAAT,CAAyBD,SAAS,CAACE,GAAnC,CAAZ;AACD;;AACD,SAAO,IAAP;AACD,C","sourcesContent":["import { Value, Block, Node } from '@ali/4ever-cangjie';\n\nexport default (value: Value, currentItem: Block, offset: 1 | -1): Node | null => {\n  const { document } = value;\n  const curListConfig = currentItem?.data?.list;\n  if (!curListConfig) return null;\n  const { listId: curListId, level: curLevel } = curListConfig;\n  if (!curListId) return null;\n  let prevBlock = document.getPreviousNode(currentItem.key) as Block;\n  while (prevBlock) {\n    const listConfig = prevBlock?.data?.list;\n    if (listConfig) {\n      const { listId, level } = listConfig;\n      // 当增加缩进，列表项前边无可继承样式的节点时，使用当前列表项的样式\n      if (offset > 0 && level <= curLevel) return null;\n      if (listId === curListId && level === curLevel + offset) {\n        // 继承离当前项最近，且listId相同的列表项样式\n        return prevBlock;\n      }\n    }\n    prevBlock = document.getPreviousNode(prevBlock.key) as Block;\n  }\n  return null;\n};\n"],"file":"getPrevLevelItem.js"}