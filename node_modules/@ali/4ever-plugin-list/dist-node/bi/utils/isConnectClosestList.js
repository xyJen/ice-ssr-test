"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isConnectNextClosestList = isConnectNextClosestList;
exports.isConnectPrevClosestList = isConnectPrevClosestList;

var _everCangjie = require("@ali/4ever-cangjie");

var _putListOrder = require("../../utils/putListOrder");

function isConnectClosestList(value, closestListItem, inputNum, dir) {
  if (!closestListItem || !_everCangjie.Block.isBlock(closestListItem)) {
    return false;
  }

  const closeFormat = closestListItem.data.list?.listStyle?.format;

  if (closeFormat) {
    const parent = value.document.getParent(closestListItem.key);

    if (!parent) {
      return false;
    }

    const lists = (0, _putListOrder.getListOrderDataById)(parent.nodes, closestListItem.data.list.listId);
    const inectionList = lists.find(i => i.key === closestListItem.key);

    if (!inectionList) {
      return false;
    }

    const diff = inputNum - inectionList.data.start;
    return diff === 0 || diff === dir;
  }

  return false;
}

function isConnectNextClosestList(value, closestListItem, inputNum) {
  return isConnectClosestList(value, closestListItem, inputNum, -1);
}

function isConnectPrevClosestList(value, closestListItem, inputNum) {
  if (inputNum === 1) {
    return false;
  }

  return isConnectClosestList(value, closestListItem, inputNum, 1);
}
//# sourceMappingURL=isConnectClosestList.js.map