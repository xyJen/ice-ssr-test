"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = assertZeroCharacter;

var _everCangjie = require("@ali/4ever-cangjie");

var _constants = require("../constants");

var _isList = _interopRequireDefault(require("./isList"));

/**
 * 判断光标左侧位置，是否有\n + 零宽字符
 * @param {Controller} controller
 * @return {*}  {boolean}
 */
function assertZeroCharacter(controller) {
  const {
    selection,
    startBlock,
    document
  } = controller.value;

  if (!((0, _isList.default)(startBlock) && selection.isCollapsed)) {
    return false;
  }

  const {
    key,
    offset
  } = selection.focus;
  const focusNode = document.getNode(key);
  return _everCangjie.Text.isText(focusNode) && focusNode.text[offset - 1] === _constants.ZERO_CHAR && focusNode.text[offset - 2] === _constants.LINE_BREAK;
}
//# sourceMappingURL=assertZeroCharacter.js.map