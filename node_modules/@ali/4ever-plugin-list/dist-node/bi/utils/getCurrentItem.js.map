{"version":3,"sources":["../../../../src/bi/utils/getCurrentItem.ts"],"names":["controller","tableSelection","query","document","selection","value","ranges","blocks","reduce","list","range","nodes","getLeafBlocksAtRange","concat","paragraphs","map","block"],"mappings":";;;;;;;AACA;;eAEgBA,UAAD,IAA4B;AACzC,QAAMC,cAAc,GAAGD,UAAU,CAACE,KAAX,CAAiB,gBAAjB,CAAvB;AACA,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAA0BJ,UAAU,CAACK,KAA3C;AACA,QAAMC,MAAM,GAAGL,cAAc,GACzB,iDAAiCD,UAAjC,EAA6C,CAACC,cAAD,CAA7C,CADyB,GAEzB,CAACG,SAAD,CAFJ;AAIA,QAAMG,MAAM,GAAGD,MAAM,EAAEE,MAAR,CAAe,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC7C,UAAMC,KAAK,GAAGR,QAAQ,CAACS,oBAAT,CAA8BF,KAA9B,CAAd;AACA,WAAOD,IAAI,CAACI,MAAL,CAAYF,KAAZ,CAAP;AACD,GAHc,EAGZ,EAHY,CAAf;AAIA,QAAMG,UAAU,GAAGP,MAAM,EAAEQ,GAAR,CAAaC,KAAD,IAAW,oCAAoBhB,UAAU,CAACK,KAA/B,EAAsCW,KAAtC,CAAvB,CAAnB;AACA,SAAOF,UAAU,IAAI,EAArB;AACD,C","sourcesContent":["import { Block, Controller } from '@ali/4ever-cangjie';\nimport { getClosestParagraph, generateRangesFromTableSelection } from '@ali/4ever-utils';\n\nexport default (controller: Controller) => {\n  const tableSelection = controller.query('tableSelection');\n  const { document, selection } = controller.value;\n  const ranges = tableSelection\n    ? generateRangesFromTableSelection(controller, [tableSelection])\n    : [selection];\n\n  const blocks = ranges?.reduce((list, range) => {\n    const nodes = document.getLeafBlocksAtRange(range);\n    return list.concat(nodes);\n  }, [] as Block[]);\n  const paragraphs = blocks?.map((block) => getClosestParagraph(controller.value, block));\n  return paragraphs || [];\n};\n"],"file":"getCurrentItem.js"}