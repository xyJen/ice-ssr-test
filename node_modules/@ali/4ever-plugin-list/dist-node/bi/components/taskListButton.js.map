{"version":3,"sources":["../../../../src/bi/components/taskListButton.tsx"],"names":["isDisabled","controller","isCollapsedAtEdge","value","selection","query","Boolean","TaskListButton","props","locale","rest","isActive","handleClick","React","useCallback","run","TASKLIST_HOT_KEY_TIP","ListRole","listTask","taskList","space"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;uBAN4B,a;;AAa5B,MAAMA,UAAU,GAAIC,UAAD,IAA4B;AAC7C,QAAM;AAAEC,IAAAA;AAAF,MAAwBD,UAAU,CAACE,KAAX,CAAiBC,SAA/C;AACA,QAAMJ,UAAU,GACdE,iBAAiB,IACjBD,UAAU,CAACI,KAAX,CAAiB,iBAAjB,CADA,IAEA;AACAJ,EAAAA,UAAU,CAACI,KAAX,CAAiB,6BAAjB,CAJF;AAKA,SAAOC,OAAO,CAACN,UAAD,CAAd;AACD,CARD;;AAUe,SAASO,cAAT,CAAwBC,KAAxB,EAAoD;AACjE,QAAM;AAAEP,IAAAA,UAAF;AAAcQ,IAAAA,MAAd;AAAsB,OAAGC;AAAzB,MAAkCF,KAAxC;AACA,QAAMG,QAAQ,GAAG,yBAAWV,UAAX,CAAjB;AAEA,QAAMW,WAAW,GAAGC,KAAK,CAACC,WAAN,CAClB,MAAMb,UAAU,CAACc,GAAX,CAAe,UAAf,EAA2B,yBAAW,OAAX,CAA3B,CADY,EAElB,CAACd,UAAD,CAFkB,CAApB;AAKA,sBACE,eAAC,yBAAD,6BACMS,IADN;AAEE,IAAA,MAAM,EAAC,qBAFT;AAGE,IAAA,YAAY,EAAEM,2BAHhB,CAIE;AAJF;AAKE,IAAA,QAAQ,EAAE,KALZ;AAME,IAAA,MAAM,EAAEL,QANV;AAOE,IAAA,QAAQ,EAAEX,UAAU,CAACC,UAAD,CAPtB;AAQE,IAAA,OAAO,EAAEW,WARX;AASE,IAAA,IAAI,EAAEK,eAASC,QATjB;AAUE,IAAA,OAAO,eACL,eAAC,iCAAD;AACE,MAAA,KAAK,EAAET,MAAM,EAAEU,QADjB;AAEE,MAAA,QAAQ,EAAEH,2BAFZ;AAGE,MAAA,WAAW,EAAE,oBAAoBP,MAAM,EAAEW,KAAR,IAAiB,OAArC;AAHf;AAXJ,KADF;AAoBD","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { TaskListButton as Button } from '@ali/we-toolbar';\nimport { IconButtonShortcut } from '@ali/4ever-component';\nimport isTaskList from '../queries/isTaskList';\nimport { toggleList } from '../actions';\nimport { TASKLIST_HOT_KEY_TIP } from '../utils';\nimport { ListRole } from '../../utils/role';\n\nexport interface TaskListButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n}\n\nconst isDisabled = (controller: Controller) => {\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled =\n    isCollapsedAtEdge ||\n    controller.query('isSelectionInHr') ||\n    // fix: https://aone.alibaba-inc.com/v2/project/1090534/bug/35667506\n    controller.query('isSelectionInSubjectHeading');\n  return Boolean(isDisabled);\n};\n\nexport default function TaskListButton(props: TaskListButtonProps) {\n  const { controller, locale, ...rest } = props;\n  const isActive = isTaskList(controller);\n\n  const handleClick = React.useCallback(\n    () => controller.run('onAction', toggleList('tlist')),\n    [controller],\n  );\n\n  return (\n    <Button\n      {...rest}\n      testid=\"bi-toolbar-tasklist\"\n      shortcutText={TASKLIST_HOT_KEY_TIP}\n      // @ts-ignore 组件不存在 bordered 属性\n      bordered={false}\n      active={isActive}\n      disabled={isDisabled(controller)}\n      onClick={handleClick}\n      role={ListRole.listTask}\n      tooltip={\n        <IconButtonShortcut\n          title={locale?.taskList}\n          shortcut={TASKLIST_HOT_KEY_TIP}\n          description={' Markdown: [] ' + (locale?.space || 'Space')}\n        />\n      }\n    />\n  );\n}\n"],"file":"taskListButton.js"}