{"version":3,"sources":["../../../../src/bi/components/createListMenu.tsx"],"names":["ListTypeEnum","getActiveState","controller","type","olist","tlist","ulist","createListMenu","Component","listType","ListMenu","props","menuItem","action","title","rest","handleClick","run","isActive","isDisabled","query","getRole","ListRole","listOrdered","listUnordered","listTask","undefined","MenuItem","ulistInline","InlineMenuItem","olistInline","tlistInline"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;uBAN4B,a;IAQhBA,Y;;;WAAAA,Y;AAAAA,EAAAA,Y;AAAAA,EAAAA,Y;AAAAA,EAAAA,Y;GAAAA,Y,4BAAAA,Y;;AAML,MAAMC,cAAc,GAAG,CAACC,UAAD,EAAaC,IAAb,KAAoC;AAChE,MAAIA,IAAI,KAAKH,YAAY,CAACI,KAA1B,EAAiC,OAAO,4BAAcF,UAAd,CAAP;AACjC,MAAIC,IAAI,KAAKH,YAAY,CAACK,KAA1B,EAAiC,OAAO,yBAAWH,UAAX,CAAP;AACjC,MAAIC,IAAI,KAAKH,YAAY,CAACM,KAA1B,EAAiC,OAAO,8BAAgBJ,UAAhB,CAAP;AACjC,SAAO,KAAP;AACD,CALM;;;;AAOP,SAASK,cAAT,CAAwBC,SAAxB,EAAkDC,QAAlD,EAA0E;AACxE,SAAO,SAASC,QAAT,CAAkBC,KAAlB,EAA6C;AAClD,UAAM;AAAEC,MAAAA,QAAF;AAAYV,MAAAA;AAAZ,QAA2BS,KAAjC;AACA,UAAM;AAAEE,MAAAA,MAAF;AAAUC,MAAAA,KAAV;AAAiB,SAAGC;AAApB,QAA6BH,QAAnC;;AAEA,UAAMI,WAAW,GAAG,MAAM;AACxB;AACA;AACA;AACA;AACAd,MAAAA,UAAU,CAACe,GAAX,CAAe,UAAf,EAA2B,yBAAWR,QAAX,CAA3B;AACD,KAND;;AAOA,UAAMS,QAAQ,GAAGjB,cAAc,CAACC,UAAD,EAAaO,QAAb,CAA/B;AACA,UAAMU,UAAU,GAAGjB,UAAU,CAACkB,KAAX,CAAiB,6BAAjB,CAAnB;;AAEA,UAAMC,OAAO,GAAG,MAAM;AACpB,UAAIZ,QAAQ,KAAKT,YAAY,CAACI,KAA9B,EAAqC,OAAOkB,eAASC,WAAhB;AACrC,UAAId,QAAQ,KAAKT,YAAY,CAACM,KAA9B,EAAqC,OAAOgB,eAASE,aAAhB;AACrC,UAAIf,QAAQ,KAAKT,YAAY,CAACK,KAA9B,EAAqC,OAAOiB,eAASG,QAAhB;AACrC,aAAOC,SAAP;AACD,KALD;;AAOA,wBACE,eAAC,SAAD;AAAW,MAAA,QAAQ,EAAEP;AAArB,OAAqCJ,IAArC;AAA2C,MAAA,OAAO,EAAEC,WAApD;AAAiE,MAAA,QAAQ,EAAEE,QAA3E;AAAqF,MAAA,IAAI,EAAEG,OAAO;AAAlG,QACGP,KADH,CADF;AAKD,GA1BD;AA2BD;;AAEM,MAAMR,KAAK,GAAGC,cAAc,CAACoB,kBAAD,EAAW3B,YAAY,CAACM,KAAxB,CAA5B;;AACA,MAAMF,KAAK,GAAGG,cAAc,CAACoB,kBAAD,EAAW3B,YAAY,CAACI,KAAxB,CAA5B;;AACA,MAAMC,KAAK,GAAGE,cAAc,CAACoB,kBAAD,EAAW3B,YAAY,CAACK,KAAxB,CAA5B;;AACA,MAAMuB,WAAW,GAAGrB,cAAc,CAACsB,wBAAD,EAAiB7B,YAAY,CAACM,KAA9B,CAAlC;;AACA,MAAMwB,WAAW,GAAGvB,cAAc,CAACsB,wBAAD,EAAiB7B,YAAY,CAACI,KAA9B,CAAlC;;AACA,MAAM2B,WAAW,GAAGxB,cAAc,CAACsB,wBAAD,EAAiB7B,YAAY,CAACK,KAA9B,CAAlC","sourcesContent":["import * as React from 'react';\nimport { MenuItem, InlineMenuItem } from '@ali/we-design';\nimport { MenuItemInnerProps } from '@ali/4ever-component';\nimport { toggleList } from '../actions';\nimport isOrderedList from '../queries/isOrderedList';\nimport isTaskList from '../queries/isTaskList';\nimport isUnorderedList from '../queries/isUnorderedList';\nimport { ListRole } from '../../utils/role';\n\nexport enum ListTypeEnum {\n  ulist = 'ulist',\n  olist = 'olist',\n  tlist = 'tlist',\n}\n\nexport const getActiveState = (controller, type: ListTypeEnum) => {\n  if (type === ListTypeEnum.olist) return isOrderedList(controller);\n  if (type === ListTypeEnum.tlist) return isTaskList(controller);\n  if (type === ListTypeEnum.ulist) return isUnorderedList(controller);\n  return false;\n};\n\nfunction createListMenu(Component: React.FC<any>, listType: ListTypeEnum) {\n  return function ListMenu(props: MenuItemInnerProps) {\n    const { menuItem, controller } = props;\n    const { action, title, ...rest } = menuItem;\n\n    const handleClick = () => {\n      // 转换逻辑不再是单向强制转换了，不再使用，避免以后逻辑更改暂时保留注释\n      // if (action === 'format') {\n      //   return controller.run('onAction', transformList(listType));\n      // }\n      controller.run('onAction', toggleList(listType));\n    };\n    const isActive = getActiveState(controller, listType);\n    const isDisabled = controller.query('isSelectionInSubjectHeading');\n\n    const getRole = () => {\n      if (listType === ListTypeEnum.olist) return ListRole.listOrdered;\n      if (listType === ListTypeEnum.ulist) return ListRole.listUnordered;\n      if (listType === ListTypeEnum.tlist) return ListRole.listTask;\n      return undefined;\n    };\n\n    return (\n      <Component disabled={isDisabled} {...rest} onClick={handleClick} selected={isActive} role={getRole()}>\n        {title}\n      </Component>\n    );\n  };\n}\n\nexport const ulist = createListMenu(MenuItem, ListTypeEnum.ulist);\nexport const olist = createListMenu(MenuItem, ListTypeEnum.olist);\nexport const tlist = createListMenu(MenuItem, ListTypeEnum.tlist);\nexport const ulistInline = createListMenu(InlineMenuItem, ListTypeEnum.ulist);\nexport const olistInline = createListMenu(InlineMenuItem, ListTypeEnum.olist);\nexport const tlistInline = createListMenu(InlineMenuItem, ListTypeEnum.tlist);\n"],"file":"createListMenu.js"}