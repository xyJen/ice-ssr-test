{"version":3,"sources":["../../../../src/bi/components/unorderedListButton.tsx"],"names":["isMobile","environment","IS_MOBILE","MemoListSet","React","memo","ListSet","renderUnorderedListButton","config","enableSticker","UnorderedListButton","props","controller","locale","simple","rest","isCollapsedAtEdge","value","selection","isDisabled","query","listStyleType","isActive","handleClick","listType","run","bulletLists","undefined","unorderedList","ULLIST_HOT_KEY_TIP","space","ListRole","listUnordered","needRender"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;uBAT4B,a;AAW5B,MAAMA,QAAQ,GAAGC,yBAAYC,SAA7B;;AACA,MAAMC,WAAW,gBAAGC,eAAMC,IAAN,CAAWC,kBAAX,CAApB;;wBAsCc,eAAC,kCAAD,O;;AA9BP,MAAMC,yBAAyB,GAAG,CAACC,MAAM,GAAG;AAAEC,EAAAA,aAAa,EAAE;AAAjB,CAAV,KAAuC;AAC9E,QAAM;AAAEA,IAAAA;AAAF,MAAoBD,MAA1B;;AACA,WAASE,mBAAT,CAA6BC,KAA7B,EAA8D;AAC5D,UAAM;AAAEC,MAAAA,UAAF;AAAcC,MAAAA,MAAd;AAAsBC,MAAAA,MAAtB;AAA8B,SAAGC;AAAjC,QAA0CJ,KAAhD;AACA,UAAM;AAAEK,MAAAA;AAAF,QAAwBJ,UAAU,CAACK,KAAX,CAAiBC,SAA/C;AACA,UAAMC,UAAU,GACdH,iBAAiB,IACjBJ,UAAU,CAACQ,KAAX,CAAiB,iBAAjB,CADA,IAEA;AACAR,IAAAA,UAAU,CAACQ,KAAX,CAAiB,6BAAjB,CAJF;AAKA,UAAMC,aAAa,GAAG,6BAAiBT,UAAjB,CAAtB;AACA,UAAMU,QAAQ,GAAG,8BAAgBV,UAAhB,CAAjB;AAEA,UAAMW,WAAW,GAAG,wBACjBC,QAAD,IACEZ,UAAU,CAACa,GAAX,CACE,UADF,EAEE,yBACE,OADF,EAEEzB,QAAQ,IAAI0B,4CAAYF,QAAZ,MAAoCG,SAAhD,GACID,4CAAY,CAAZ,CADJ,GAEIF,QAJN,CAFF,CAFgB,EAWlB,CAACZ,UAAD,CAXkB,CAApB;;AAaA,QAAIE,MAAJ,EAAY;AACV,0BAAQ,eAAC,qBAAD,6BACFC,IADE;AAEN,QAAA,MAAM,EAAC,mBAFD;AAGN,QAAA,IAAI,MAHE;AAIN,QAAA,KAAK,EAAEF,MAAM,CAACe,aAJR;AAKN,QAAA,YAAY,EAAEC,yBALR;AAMN,QAAA,OAAO,eACL,eAAC,iCAAD;AACE,UAAA,KAAK,EAAEhB,MAAM,CAACe,aADhB;AAEE,UAAA,QAAQ,EAAEC,yBAFZ;AAGE,UAAA,WAAW,EAAE,oBAAoBhB,MAAM,EAAEiB,KAAR,IAAiB,OAArC;AAHf,UAPI;AAaN,QAAA,MAAM,EAAER,QAbF;AAcN,QAAA,QAAQ,EAAE,CAAC,CAACH,UAdN;AAeN,QAAA,OAAO,EAAEI,WAfH;AAgBN,QAAA,IAAI,EAAEQ,eAASC;AAhBT,SAAR;AAkBD;;AACD,wBACE,eAAC,WAAD,6BACMjB,IADN;AAEE,MAAA,IAAI,EAAC,IAFP;AAGE,MAAA,MAAM,EAAEO,QAHV;AAIE,MAAA,YAAY,EAAEO,yBAJhB;AAKE,MAAA,MAAM,EAAC,mBALT;AAME,MAAA,QAAQ,EAAE,CAAC,CAACV,UANd;AAOE,MAAA,gBAAgB,EAAEE,aAPpB;AAQE,MAAA,QAAQ,EAAEE,WARZ;AASE,MAAA,OAAO,EAAEA,WATX;AAUE,MAAA,aAAa,EAAEd,aAVjB;AAWE,MAAA,IAAI,EAAEsB,eAASC;AAXjB,OADF;AAeD;;AACDtB,EAAAA,mBAAmB,CAACuB,UAApB,GAAiC,UAAUrB,UAAV,EAA2C;AAC1E,WAAO,sCAAwBA,UAAU,CAACK,KAAnC,CAAP;AACD,GAFD;;AAGA,SAAOP,mBAAP;AACD,CAlEM","sourcesContent":["import React, { useCallback } from 'react';\nimport { Controller, environment } from '@ali/4ever-cangjie';\nimport { ToolbarUnorderListNormal } from '@ali/we-design';\nimport { ListSet, IconButton } from '@ali/we-toolbar';\nimport { IconButtonShortcut } from '@ali/4ever-component';\nimport isUnorderedList from '../queries/isUnorderedList';\nimport { toggleList } from '../actions';\nimport { getListStyleType, ULLIST_HOT_KEY_TIP } from '../utils';\nimport isSelectionInListSymbol from '../utils/isSelectionInListSymbol';\nimport { ListRole } from '../../utils/role';\nimport { DEFAULT_BULLET_LIST_ARRAY as bulletLists } from '../../utils/listStyleMapping';\n\nconst isMobile = environment.IS_MOBILE;\nconst MemoListSet = React.memo(ListSet);\n\nexport interface UnorderedListButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n  simple?: boolean;\n}\n\nexport const renderUnorderedListButton = (config = { enableSticker: false }) => {\n  const { enableSticker } = config;\n  function UnorderedListButton(props: UnorderedListButtonProps) {\n    const { controller, locale, simple, ...rest } = props;\n    const { isCollapsedAtEdge } = controller.value.selection;\n    const isDisabled =\n      isCollapsedAtEdge ||\n      controller.query('isSelectionInHr') ||\n      // fix: https://aone.alibaba-inc.com/v2/project/1090534/bug/35667506\n      controller.query('isSelectionInSubjectHeading');\n    const listStyleType = getListStyleType(controller);\n    const isActive = isUnorderedList(controller);\n\n    const handleClick = useCallback(\n      (listType: string | React.MouseEvent) =>\n        controller.run(\n          'onAction',\n          toggleList(\n            'ulist',\n            isMobile || bulletLists[listType as string] === undefined\n              ? bulletLists[0]\n              : listType,\n          ),\n        ),\n      [controller],\n    );\n    if (simple) {\n      return (<IconButton\n        {...rest}\n        testid=\"bi-toolbar-ullist\"\n        icon={<ToolbarUnorderListNormal />}\n        title={locale.unorderedList}\n        shortcutText={ULLIST_HOT_KEY_TIP}\n        tooltip={\n          <IconButtonShortcut\n            title={locale.unorderedList}\n            shortcut={ULLIST_HOT_KEY_TIP}\n            description={'Markdown: * + ' + (locale?.space || 'Space')}\n          />\n        }\n        active={isActive}\n        disabled={!!isDisabled}\n        onClick={handleClick}\n        role={ListRole.listUnordered}\n      />);\n    }\n    return (\n      <MemoListSet\n        {...rest}\n        mode=\"ul\"\n        active={isActive}\n        shortcutText={ULLIST_HOT_KEY_TIP}\n        testid=\"bi-toolbar-ullist\"\n        disabled={!!isDisabled}\n        defaultListStyle={listStyleType}\n        onChange={handleClick}\n        onClick={handleClick}\n        enableSticker={enableSticker}\n        role={ListRole.listUnordered}\n      />\n    );\n  }\n  UnorderedListButton.needRender = function (controller: Controller): boolean {\n    return isSelectionInListSymbol(controller.value);\n  };\n  return UnorderedListButton;\n};\n"],"file":"unorderedListButton.js"}