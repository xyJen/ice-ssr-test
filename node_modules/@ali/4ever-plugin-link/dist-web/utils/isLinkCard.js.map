{"version":3,"sources":["../../../src/utils/isLinkCard.ts"],"names":["Inline","isLinkCardNode","node","injections","isLinkNode","data","cardInfo","displayType","length","injection","find","i","key","isInline","type"],"mappings":"AAAA,SAAeA,MAAf,QAA8C,oBAA9C;AAcA,OAAO,SAASC,cAAT,CAAwBC,IAAxB,EAAoCC,UAApC,EAAgF;AACrF;AACA,MAAI,CAACD,IAAL,EAAW,OAAO,KAAP;;AACX,MAAIE,UAAU,CAACF,IAAD,CAAd,EAAsB;AAAA;;AAAA,QACZG,IADY,GACHH,IADG,CACZG,IADY;;AAEpB,QAAIA,IAAI,IAAI,mBAAAA,IAAI,CAACC,QAAL,oCAAeC,WAAf,MAA+B,MAA3C,EAAmD;AACjD,aAAO,IAAP;AACD;AACF,GARoF,CASrF;;;AACA,MAAIJ,UAAU,IAAIA,UAAU,CAACK,MAAX,GAAoB,CAAtC,EAAyC;AAAA;;AACvC,QAAMC,SAAS,GAAGN,UAAU,CAACO,IAAX,CAAgB,UAACC,CAAD;AAAA,aAAOA,CAAC,CAACC,GAAF,KAAUV,IAAI,CAACU,GAAtB;AAAA,KAAhB,CAAlB;;AACA,QAAIH,SAAS,IAAI,oBAAAA,SAAS,CAACJ,IAAV,8DAAgBC,QAAhB,2CAA0BC,WAA1B,MAA0C,MAA3D,EAAmE;AACjE,aAAO,IAAP;AACD;AACF;;AAED,SAAO,KAAP;AACD;AAED,OAAO,SAASH,UAAT,CAAoBF,IAApB,EAAiD;AACtD,MAAIA,IAAI,IAAIF,MAAM,CAACa,QAAP,CAAgBX,IAAhB,CAAR,IAAiCA,IAAI,CAACY,IAAL,KAAc,MAAnD,EAA2D;AACzD,WAAO,IAAP;AACD;;AAED,SAAO,KAAP;AACD","sourcesContent":["import { Node, Inline, Data, Injection } from '@ali/4ever-cangjie';\n\ninterface LinkData extends Data {\n  readonly href?: string;\n  // 卡片所需状态\n  readonly cardInfo?: {\n    displayType: 'card';\n  };\n}\n\ntype LinkNode = Inline & {\n  data: LinkData;\n};\n\nexport function isLinkCardNode(node: Node, injections?: Injection[]): node is LinkNode {\n  // 处理node 可能传入null。fix早值班问题：https://work.aone.alibaba-inc.com/issue/42388734\n  if (!node) return false;\n  if (isLinkNode(node)) {\n    const { data } = node;\n    if (data && data.cardInfo?.displayType === 'card') {\n      return true;\n    }\n  }\n  // node 注入有 displayType\n  if (injections && injections.length > 0) {\n    const injection = injections.find((i) => i.key === node.key);\n    if (injection && injection.data?.cardInfo?.displayType === 'card') {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function isLinkNode(node: any): node is LinkNode {\n  if (node && Inline.isInline(node) && node.type === 'link') {\n    return true;\n  }\n\n  return false;\n}\n"],"file":"isLinkCard.js"}