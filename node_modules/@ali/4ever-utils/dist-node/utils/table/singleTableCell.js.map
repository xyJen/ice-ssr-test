{"version":3,"sources":["../../../../src/utils/table/singleTableCell.ts"],"names":["isSingleTableCell","fragment","table","nodes","tableRow","tableCell","length","unwrapSingleTableCell","Document","create"],"mappings":";;;;;;;;AAAA;;AACA;;AACA;;AAEA;AACA;AACA;AACA;AACO,SAASA,iBAAT,CAA2BC,QAA3B,EAAwD;AAC7D,QAAMC,KAAK,GAAGD,QAAQ,CAACE,KAAT,CAAe,CAAf,CAAd;AACA,QAAMC,QAAQ,GAAG,iBAAIF,KAAJ,EAAW,CAAC,OAAD,EAAU,CAAV,CAAX,CAAjB;AACA,QAAMG,SAAS,GAAG,iBAAID,QAAJ,EAAc,CAAC,OAAD,EAAU,CAAV,CAAd,CAAlB;AAEA,SACEH,QAAQ,CAACE,KAAT,CAAeG,MAAf,KAA0B,CAA1B,IACA,wBAAQJ,KAAR,CADA,IAEAA,KAAK,CAACC,KAAN,CAAYG,MAAZ,KAAuB,CAFvB,IAGA,2BAAWF,QAAX,CAHA,IAIAA,QAAQ,CAACD,KAAT,CAAeG,MAAf,KAA0B,CAJ1B,IAKA,4BAAYD,SAAZ,CANF;AAQD;AAED;AACA;AACA;AACA;;;AACO,SAASE,qBAAT,CAA+BN,QAA/B,EAA6D;AAClE,QAAMC,KAAK,GAAGD,QAAQ,CAACE,KAAT,CAAe,CAAf,CAAd;AACA,QAAMC,QAAQ,GAAG,iBAAIF,KAAJ,EAAW,CAAC,OAAD,EAAU,CAAV,CAAX,CAAjB;AACA,QAAMG,SAAS,GAAG,iBAAID,QAAJ,EAAc,CAAC,OAAD,EAAU,CAAV,CAAd,CAAlB;;AAEA,MAAI,4BAAYC,SAAZ,CAAJ,EAA4B;AAC1B,WAAOG,sBAASC,MAAT,CAAgB;AACrBN,MAAAA,KAAK,EAAEE,SAAS,CAACF;AADI,KAAhB,CAAP;AAGD;;AAED,SAAOF,QAAP;AACD","sourcesContent":["import { Document, Block } from '@ali/4ever-cangjie';\nimport { get } from 'lodash-es';\nimport { isTable, isTableRow, isTableCell } from './nodeTypes';\n\n/**\n * 检测 fragment 是否仅包含一个 tableCell\n * @param fragment\n */\nexport function isSingleTableCell(fragment: Document): boolean {\n  const table = fragment.nodes[0];\n  const tableRow = get(table, ['nodes', 0]);\n  const tableCell = get(tableRow, ['nodes', 0]);\n\n  return (\n    fragment.nodes.length === 1 &&\n    isTable(table) &&\n    table.nodes.length === 1 &&\n    isTableRow(tableRow) &&\n    tableRow.nodes.length === 1 &&\n    isTableCell(tableCell)\n  );\n}\n\n/**\n * 从 fragment 中把 single tableCell 解构出来\n * @param fragment\n */\nexport function unwrapSingleTableCell(fragment: Document): Document {\n  const table = fragment.nodes[0];\n  const tableRow = get(table, ['nodes', 0]);\n  const tableCell = get(tableRow, ['nodes', 0]);\n\n  if (isTableCell(tableCell)) {\n    return Document.create({\n      nodes: tableCell.nodes as Block[],\n    });\n  }\n\n  return fragment;\n}\n"],"file":"singleTableCell.js"}