"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isSingleTableCell = isSingleTableCell;
exports.unwrapSingleTableCell = unwrapSingleTableCell;

var _everCangjie = require("@ali/4ever-cangjie");

var _lodash = require("lodash");

var _nodeTypes = require("./nodeTypes");

/**
 * 检测 fragment 是否仅包含一个 tableCell
 * @param fragment
 */
function isSingleTableCell(fragment) {
  const table = fragment.nodes[0];
  const tableRow = (0, _lodash.get)(table, ['nodes', 0]);
  const tableCell = (0, _lodash.get)(tableRow, ['nodes', 0]);
  return fragment.nodes.length === 1 && (0, _nodeTypes.isTable)(table) && table.nodes.length === 1 && (0, _nodeTypes.isTableRow)(tableRow) && tableRow.nodes.length === 1 && (0, _nodeTypes.isTableCell)(tableCell);
}
/**
 * 从 fragment 中把 single tableCell 解构出来
 * @param fragment
 */


function unwrapSingleTableCell(fragment) {
  const table = fragment.nodes[0];
  const tableRow = (0, _lodash.get)(table, ['nodes', 0]);
  const tableCell = (0, _lodash.get)(tableRow, ['nodes', 0]);

  if ((0, _nodeTypes.isTableCell)(tableCell)) {
    return _everCangjie.Document.create({
      nodes: tableCell.nodes
    });
  }

  return fragment;
}
//# sourceMappingURL=singleTableCell.js.map