"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.sample = sample;
exports.Sample = Sample;

/**
 * 装饰函数对齐进行采样
 * @param fn 采样函数
 * @param options 采样配置
 */
function sample(fn, options) {
  const {
    sample: divisor
  } = options;
  const threshold = 1 / divisor;
  return function _sample(...args) {
    if (Math.random() < threshold) {
      fn.apply(this, args);
    }
  };
}
/**
 * 函数采样装饰器
 * @param options
 */


function Sample(options) {
  return function deco(target, propertyKey, descriptor) {
    if (!descriptor || typeof descriptor.value !== 'function') {
      throw new TypeError(`Only methods can be decorated with @Sample. <${String(propertyKey)}> is not a method!`);
    }

    return { ...descriptor,
      value: sample(descriptor.value, options)
    };
  };
}
//# sourceMappingURL=sample.js.map