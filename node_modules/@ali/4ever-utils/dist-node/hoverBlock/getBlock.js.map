{"version":3,"sources":["../../../src/hoverBlock/getBlock.ts"],"names":["findDocumentNode","document","domNode","domUtils","findDOMNode","key","error","getBlock","event","options","zoomContainer","container","blockKey","block","getNode","isElement","type","getParent","result","Block","isBlock"],"mappings":";;;;;;;;;AACA;;AACA;;AAFA;AAQA,SAASA,gBAAT,CAA0BC,QAA1B,EAA8C;AAC5C,MAAI;AACF;AACA,UAAMC,OAAO,GAAGC,sBAASC,WAAT,CAAqBH,QAAQ,CAACI,GAA9B,CAAhB;;AACA,WAAOH,OAAP;AACD,GAJD,CAIE,OAAOI,KAAP,EAAc,CACd;AACD;;AACD,SAAO,IAAP;AACD;;AAQc,SAASC,QAAT,CACbC,KADa,EAEbP,QAFa,EAGbQ,OAHa,EAIb;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAoBD,OAAO,IAAI,EAArC;AACA,QAAME,SAAS,GAAGD,aAAa,IAAIV,gBAAgB,CAACC,QAAD,CAAnD;AACA,QAAMW,QAAQ,GAAG,oCAAsBJ,KAAtB,EAA6BG,SAA7B,EAAwCF,OAAxC,CAAjB;AACA,MAAII,KAAK,GAAGZ,QAAQ,CAACa,OAAT,CAAiBF,QAAjB,CAAZ;;AAEA,MAAIC,KAAK,EAAEE,SAAP,MAAsBF,KAAK,CAACG,IAAN,KAAe,MAAzC,EAAiD;AAC/CH,IAAAA,KAAK,GAAGZ,QAAQ,CAACgB,SAAT,CAAmBJ,KAAK,CAACR,GAAzB,CAAR;AACD;;AAED,QAAMa,MAAmB,GAAGC,mBAAMC,OAAN,CAAcP,KAAd,IAAuB;AAAEA,IAAAA;AAAF,GAAvB,GAAmC,EAA/D;AACA,SAAOK,MAAP;AACD","sourcesContent":["/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { Controller, Block, domUtils, Document } from '@ali/4ever-cangjie';\nimport findBlockKeyFromEvent from './utils/findBlockKeyFromEvent';\n\ntype HoverResult = {\n  block?: Block;\n};\n\nfunction findDocumentNode(document: Document) {\n  try {\n    // eslint-disable-next-line react/no-find-dom-node\n    const domNode = domUtils.findDOMNode(document.key);\n    return domNode;\n  } catch (error) {\n    // ignore\n  }\n  return null;\n}\n\ntype Options = {\n  zoomContainer?: HTMLElement | null;\n  zoom?: number;\n  filterColumn?: boolean;\n};\n\nexport default function getBlock(\n  event: MouseEvent,\n  document: Document,\n  options?: Options,\n) {\n  const { zoomContainer } = options || {};\n  const container = zoomContainer || findDocumentNode(document);\n  const blockKey = findBlockKeyFromEvent(event, container, options);\n  let block = document.getNode(blockKey);\n\n  if (block?.isElement() && block.type === 'line') {\n    block = document.getParent(block.key);\n  }\n\n  const result: HoverResult = Block.isBlock(block) ? { block } : {};\n  return result;\n}\n"],"file":"getBlock.js"}