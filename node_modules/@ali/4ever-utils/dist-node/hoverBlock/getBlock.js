"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = getBlock;

var _everCangjie = require("@ali/4ever-cangjie");

var _findBlockKeyFromEvent = _interopRequireDefault(require("./utils/findBlockKeyFromEvent"));

/* eslint-disable @typescript-eslint/ban-ts-comment */
function findDocumentNode(document) {
  try {
    // eslint-disable-next-line react/no-find-dom-node
    const domNode = _everCangjie.domUtils.findDOMNode(document.key);

    return domNode;
  } catch (error) {// ignore
  }

  return null;
}

function getBlock(event, document, options) {
  const {
    zoomContainer
  } = options || {};
  const container = zoomContainer || findDocumentNode(document);
  const blockKey = (0, _findBlockKeyFromEvent.default)(event, container, options);
  let block = document.getNode(blockKey);

  if (block?.isElement() && block.type === 'line') {
    block = document.getParent(block.key);
  }

  const result = _everCangjie.Block.isBlock(block) ? {
    block
  } : {};
  return result;
}
//# sourceMappingURL=getBlock.js.map