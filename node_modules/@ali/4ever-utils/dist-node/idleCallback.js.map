{"version":3,"sources":["../../src/idleCallback.ts"],"names":["isNativeRequestIdleCallback","window","requestIdleCallback","now","Date","IdleDeadline","constructor","initTime","didTimeout","timeRemaining","Math","max","requestIdleCallbackShim","callback","deadline","setTimeout","cancelIdleCallbackShim","handle","clearTimeout","cancelIdleCallback"],"mappings":";;;;;;AAKA,MAAMA,2BAA2B,GAC/B,OAAOC,MAAP,KAAkB,WAAlB,IACA,OAAQA,MAAD,CAAmCC,mBAA1C,KAAkE,UAFpE;;AAKA,MAAMC,GAAG,GAAG,MAAc;AACxB,SAAOC,IAAI,CAACD,GAAL,EAAP;AACD,CAFD;;AAIA,MAAME,YAAN,CAAmB;AAGjBC,EAAAA,WAAW,CAACC,QAAD,EAAW;AAAA,SAFdA,QAEc;AACpB,SAAKA,QAAL,GAAgBA,QAAhB;AACD;;AAED,MAAIC,UAAJ,GAA0B;AACxB,WAAO,KAAP;AACD;;AAEMC,EAAAA,aAAP,GAA+B;AAC7B,WAAOC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY,MAAMR,GAAG,KAAK,KAAKI,QAAnB,CAAZ,CAAP;AACD;;AAbgB;;AAgBnB,MAAMK,uBAAuB,GAAIC,QAAD,IAAgC;AAC9D,QAAMC,QAAQ,GAAG,IAAIT,YAAJ,CAAiBF,GAAG,EAApB,CAAjB;AAGA;AACA,SAAOF,MAAM,CAACc,UAAP,CAAkB,MAAMF,QAAQ,CAACC,QAAD,CAAhC,EAA4C,CAA5C,CAAP;AACD,CAND;;AAQA,MAAME,sBAAsB,GAAIC,MAAD,IAAkB;AAE/ChB,EAAAA,MAAM,CAACiB,YAAP,CAAoBD,MAApB;AACD,CAHD;;AAKA,MAAMf,mBAAmB,GAAGF,2BAA2B,GAAIC,MAAD,CAAmCC,mBAAtC,GAA4DU,uBAAnH;;AACA,MAAMO,kBAAkB,GAAGnB,2BAA2B,GAAIC,MAAD,CAAmCkB,kBAAtC,GAA2DH,sBAAjH","sourcesContent":["type WindowWithIdleCallback = (typeof window) & {\n  requestIdleCallback?: Function;\n  cancelIdleCallback?: Function;\n}\n\nconst isNativeRequestIdleCallback = (\n  typeof window !== 'undefined' &&\n  typeof (window as WindowWithIdleCallback).requestIdleCallback === 'function'\n);\n\nconst now = (): number => {\n  return Date.now();\n};\n\nclass IdleDeadline {\n  private initTime: number;\n\n  constructor(initTime) {\n    this.initTime = initTime;\n  }\n\n  get didTimeout(): boolean {\n    return false;\n  }\n\n  public timeRemaining(): number {\n    return Math.max(0, 50 - (now() - this.initTime));\n  }\n}\n\nconst requestIdleCallbackShim = (callback: Function): number => {\n  const deadline = new IdleDeadline(now());\n\n  console.assert(!window, 'You should not invoke requestIdleCallback out of browser.')\n  // * Push callback into task queue.\n  return window.setTimeout(() => callback(deadline), 0);\n};\n\nconst cancelIdleCallbackShim = (handle): void => {\n  console.assert(!window, 'You should not invoke cancelIdleCallback out of browser.')\n  window.clearTimeout(handle);\n};\n\nconst requestIdleCallback = isNativeRequestIdleCallback ? (window as WindowWithIdleCallback).requestIdleCallback : requestIdleCallbackShim;\nconst cancelIdleCallback = isNativeRequestIdleCallback ? (window as WindowWithIdleCallback).cancelIdleCallback : cancelIdleCallbackShim;\n\nexport {\n  requestIdleCallback,\n  cancelIdleCallback,\n}\n"],"file":"idleCallback.js"}