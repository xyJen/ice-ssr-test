{"version":3,"sources":["../../../../src/utils/table/singleTableCell.ts"],"names":["Document","get","isTable","isTableRow","isTableCell","isSingleTableCell","fragment","table","nodes","tableRow","tableCell","length","unwrapSingleTableCell","create"],"mappings":"AAAA,SAASA,QAAT,QAAgC,oBAAhC;AACA,SAASC,GAAT,QAAoB,WAApB;AACA,SAASC,OAAT,EAAkBC,UAAlB,EAA8BC,WAA9B;AAEA;AACA;AACA;AACA;;AACA,OAAO,SAASC,iBAAT,CAA2BC,QAA3B,EAAwD;AAC7D,MAAMC,KAAK,GAAGD,QAAQ,CAACE,KAAT,CAAe,CAAf,CAAd;AACA,MAAMC,QAAQ,GAAGR,GAAG,CAACM,KAAD,EAAQ,CAAC,OAAD,EAAU,CAAV,CAAR,CAApB;AACA,MAAMG,SAAS,GAAGT,GAAG,CAACQ,QAAD,EAAW,CAAC,OAAD,EAAU,CAAV,CAAX,CAArB;AAEA,SACEH,QAAQ,CAACE,KAAT,CAAeG,MAAf,KAA0B,CAA1B,IACAT,OAAO,CAACK,KAAD,CADP,IAEAA,KAAK,CAACC,KAAN,CAAYG,MAAZ,KAAuB,CAFvB,IAGAR,UAAU,CAACM,QAAD,CAHV,IAIAA,QAAQ,CAACD,KAAT,CAAeG,MAAf,KAA0B,CAJ1B,IAKAP,WAAW,CAACM,SAAD,CANb;AAQD;AAED;AACA;AACA;AACA;;AACA,OAAO,SAASE,qBAAT,CAA+BN,QAA/B,EAA6D;AAClE,MAAMC,KAAK,GAAGD,QAAQ,CAACE,KAAT,CAAe,CAAf,CAAd;AACA,MAAMC,QAAQ,GAAGR,GAAG,CAACM,KAAD,EAAQ,CAAC,OAAD,EAAU,CAAV,CAAR,CAApB;AACA,MAAMG,SAAS,GAAGT,GAAG,CAACQ,QAAD,EAAW,CAAC,OAAD,EAAU,CAAV,CAAX,CAArB;;AAEA,MAAIL,WAAW,CAACM,SAAD,CAAf,EAA4B;AAC1B,WAAOV,QAAQ,CAACa,MAAT,CAAgB;AACrBL,MAAAA,KAAK,EAAEE,SAAS,CAACF;AADI,KAAhB,CAAP;AAGD;;AAED,SAAOF,QAAP;AACD","sourcesContent":["import { Document, Block } from '@ali/4ever-cangjie';\nimport { get } from 'lodash-es';\nimport { isTable, isTableRow, isTableCell } from './nodeTypes';\n\n/**\n * 检测 fragment 是否仅包含一个 tableCell\n * @param fragment\n */\nexport function isSingleTableCell(fragment: Document): boolean {\n  const table = fragment.nodes[0];\n  const tableRow = get(table, ['nodes', 0]);\n  const tableCell = get(tableRow, ['nodes', 0]);\n\n  return (\n    fragment.nodes.length === 1 &&\n    isTable(table) &&\n    table.nodes.length === 1 &&\n    isTableRow(tableRow) &&\n    tableRow.nodes.length === 1 &&\n    isTableCell(tableCell)\n  );\n}\n\n/**\n * 从 fragment 中把 single tableCell 解构出来\n * @param fragment\n */\nexport function unwrapSingleTableCell(fragment: Document): Document {\n  const table = fragment.nodes[0];\n  const tableRow = get(table, ['nodes', 0]);\n  const tableCell = get(tableRow, ['nodes', 0]);\n\n  if (isTableCell(tableCell)) {\n    return Document.create({\n      nodes: tableCell.nodes as Block[],\n    });\n  }\n\n  return fragment;\n}\n"],"file":"singleTableCell.js"}