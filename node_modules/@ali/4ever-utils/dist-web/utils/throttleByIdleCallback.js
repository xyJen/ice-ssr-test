/* eslint-disable no-nested-ternary */
var unsupportFunc = function unsupportFunc() {
  throw Error('unsupported platform');
};

var nextTick = typeof window !== 'undefined' ? window.requestIdleCallback ? window.requestIdleCallback : window.requestAnimationFrame : unsupportFunc;
var cancelTick = typeof window !== 'undefined' ? nextTick === window.requestIdleCallback ? window.cancelIdleCallback : window.cancelAnimationFrame : unsupportFunc;
export default function throttleByIdleCallback(fn) {
  var requestId = null;

  var later = function later(args) {
    return function () {
      requestId = null;
      fn.apply(void 0, args);
    };
  };

  var throttled = function throttled() {
    if (requestId === null) {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      requestId = nextTick(later(args));
    }
  };

  throttled.cancel = function () {
    return cancelTick(requestId);
  };

  return throttled;
}
//# sourceMappingURL=throttleByIdleCallback.js.map