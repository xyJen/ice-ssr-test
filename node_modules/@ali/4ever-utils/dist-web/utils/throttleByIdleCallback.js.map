{"version":3,"sources":["../../../src/utils/throttleByIdleCallback.ts"],"names":["unsupportFunc","Error","nextTick","window","requestIdleCallback","requestAnimationFrame","cancelTick","cancelIdleCallback","cancelAnimationFrame","throttleByIdleCallback","fn","requestId","later","args","throttled","cancel"],"mappings":"AAAA;AACA,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAAE,QAAMC,KAAK,CAAC,sBAAD,CAAX;AAAsC,CAApE;;AAEA,IAAMC,QAAQ,GAAI,OAAOC,MAAP,KAAkB,WAAnB,GAAmCA,MAAM,CAACC,mBAAP,GAChDD,MAAM,CAACC,mBADyC,GACnBD,MAAM,CAACE,qBADvB,GACgDL,aADjE;AAGA,IAAMM,UAAU,GAAI,OAAOH,MAAP,KAAkB,WAAnB,GAAmCD,QAAQ,KAAKC,MAAM,CAACC,mBAApB,GAClDD,MAAM,CAACI,kBAD2C,GACtBJ,MAAM,CAACK,oBADpB,GAC4CR,aAD/D;AAGA,eAAe,SAASS,sBAAT,CAAgCC,EAAhC,EAAoC;AACjD,MAAIC,SAAwB,GAAG,IAA/B;;AAEA,MAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,IAAD;AAAA,WAAU,YAAM;AAC5BF,MAAAA,SAAS,GAAG,IAAZ;AACAD,MAAAA,EAAE,MAAF,SAAMG,IAAN;AACD,KAHa;AAAA,GAAd;;AAKA,MAAMC,SAAS,GAAG,SAAZA,SAAY,GAAa;AAC7B,QAAIH,SAAS,KAAK,IAAlB,EAAwB;AAAA,wCADJE,IACI;AADJA,QAAAA,IACI;AAAA;;AACtBF,MAAAA,SAAS,GAAGT,QAAQ,CAACU,KAAK,CAACC,IAAD,CAAN,CAApB;AACD;AACF,GAJD;;AAMAC,EAAAA,SAAS,CAACC,MAAV,GAAmB;AAAA,WAAMT,UAAU,CAACK,SAAD,CAAhB;AAAA,GAAnB;;AAEA,SAAOG,SAAP;AACD","sourcesContent":["/* eslint-disable no-nested-ternary */\nconst unsupportFunc = () => { throw Error('unsupported platform'); };\n\nconst nextTick = (typeof window !== 'undefined') ? (window.requestIdleCallback\n  ? window.requestIdleCallback : window.requestAnimationFrame) : unsupportFunc;\n\nconst cancelTick = (typeof window !== 'undefined') ? (nextTick === window.requestIdleCallback\n  ? window.cancelIdleCallback : window.cancelAnimationFrame) : unsupportFunc;\n\nexport default function throttleByIdleCallback(fn) {\n  let requestId: number | null = null;\n\n  const later = (args) => () => {\n    requestId = null;\n    fn(...args);\n  };\n\n  const throttled = (...args) => {\n    if (requestId === null) {\n      requestId = nextTick(later(args));\n    }\n  };\n\n  throttled.cancel = () => cancelTick(requestId!);\n\n  return throttled;\n}\n"],"file":"throttleByIdleCallback.js"}