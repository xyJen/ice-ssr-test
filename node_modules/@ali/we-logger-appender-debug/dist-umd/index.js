!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self)["@ali/we-logger-appender-debug"]={})}(this,(function(e){"use strict";function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,n){return e(n={exports:{}},n.exports),n.exports}var r=n(t((function(e){function n(){return e.exports=n=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0}))),o=t((function(e){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0}));n(o);var s,i=n(t((function(e){e.exports=function(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n)},e.exports.default=e.exports,e.exports.__esModule=!0})));!function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.FATAL=5]="FATAL"}(s||(s={}));var a=s,u=function(){function e(){}var n=e.prototype;return n.ignore=function(e,n){return!1},n.setBaseInfo=function(e){},n.sum=function(e){},n.avg=function(e,n){},n.log=function(e,n,t){},n.api=function(e){},e}(),c=1e3,f=6e4,l=60*f,d=24*l,C=function(e,n){n=n||{};var t=typeof e;if("string"===t&&e.length>0)return function(e){if((e=String(e)).length>100)return;var n=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!n)return;var t=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"weeks":case"week":case"w":return 6048e5*t;case"days":case"day":case"d":return t*d;case"hours":case"hour":case"hrs":case"hr":case"h":return t*l;case"minutes":case"minute":case"mins":case"min":case"m":return t*f;case"seconds":case"second":case"secs":case"sec":case"s":return t*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}(e);if("number"===t&&isFinite(e))return n.long?function(e){var n=Math.abs(e);if(n>=d)return p(e,n,d,"day");if(n>=l)return p(e,n,l,"hour");if(n>=f)return p(e,n,f,"minute");if(n>=c)return p(e,n,c,"second");return e+" ms"}(e):function(e){var n=Math.abs(e);if(n>=d)return Math.round(e/d)+"d";if(n>=l)return Math.round(e/l)+"h";if(n>=f)return Math.round(e/f)+"m";if(n>=c)return Math.round(e/c)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function p(e,n,t,r){var o=n>=1.5*t;return Math.round(e/t)+" "+r+(o?"s":"")}var g,h=function(e){function n(e){var r,o=null;function s(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(s.enabled){var i=s,a=Number(new Date),u=a-(r||a);i.diff=u,i.prev=r,i.curr=a,r=a,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return"%";c++;var o=n.formatters[r];if("function"==typeof o){var s=t[c];e=o.call(i,s),t.splice(c,1),c--}return e})),n.formatArgs.call(i,t);var f=i.log||n.log;f.apply(i,t)}}return s.namespace=e,s.useColors=n.useColors(),s.color=n.selectColor(e),s.extend=t,s.destroy=n.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===o?n.enabled(e):o},set:function(e){o=e}}),"function"==typeof n.init&&n.init(s),s}function t(e,t){var r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){var e=[].concat(n.names.map(r),n.skips.map(r).map((function(e){return"-"+e}))).join(",");return n.enable(""),e},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=C,n.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(t){n[t]=e[t]})),n.names=[],n.skips=[],n.formatters={},n.selectColor=function(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]},n.enable(n.load()),n},F=t((function(e,n){var t;n.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var t="color: "+this.color;n.splice(1,0,t,"color: inherit");var r=0,o=0;n[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))})),n.splice(o,0,t)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){var e;try{e=n.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},n.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage=function(){try{return localStorage}catch(e){}}(),n.destroy=(t=!1,function(){t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||function(){},e.exports=h(n),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),m=(F.formatArgs,F.save,F.load,F.useColors,F.storage,F.destroy,F.colors,F.log,(g={})[a.TRACE]=console.trace.bind(console),g[a.DEBUG]=console.debug.bind(console),g[a.INFO]=console.info.bind(console),g[a.WARN]=console.warn.bind(console),g[a.ERROR]=console.error.bind(console),g[a.FATAL]=console.error.bind(console),g),v=function(e){function n(n){var t;return(t=e.call(this)||this)._ignoreFunction=void 0,t._baseInfo={},t.debug=void 0,t.setName(n),t}i(n,e);var t=n.prototype;return t.setName=function(e){this.debug=F(e)},t.setupIgnore=function(e){this._ignoreFunction=e},t.ignore=function(e,n){return!!this._ignoreFunction&&this._ignoreFunction(e,n)},t.setBaseInfo=function(e){void 0===e&&(e={}),this._baseInfo=r({},this._baseInfo,e)},t.sum=function(e){var n="[sum]"+this._generateBaseInfoText()+":: "+e;this.debug(n)},t.avg=function(e,n){void 0===n&&(n=0);var t="[avg]"+this._generateBaseInfoText()+":: "+e+" - "+n;this.debug(t)},t.log=function(e,n,t){var r=this.debug.log,o=m[e]||m[a.INFO];this.debug.log=o,this.debug("[log]["+a[e].toLowerCase()+"]"+this._generateBaseInfoText()+"["+n+"]:: "+function(e){if(!e)return"";if("object"!=typeof e)return String(e);if(e instanceof Error){var n=e;return(n.message||"")+"\nstack:\n"+(n.stack||"")}try{return JSON.stringify(e)}catch(e){}return""}(t)),this.debug.log=r},t.api=function(e){var n=e.api,t=e.success,r=e.time,o=e.code,s=(e.msg,"[api]"+this._generateBaseInfoText()+":: "+n+" "+t+" "+o+" "+r);this.debug(s)},t._generateBaseInfoText=function(){var e=this;if(!this._baseInfo)return"";var n=Object.keys(this._baseInfo);return n.length?n.map((function(n){return"["+n+":"+e._baseInfo[n]+"]"})).join(""):""},n}(u);e.default=v,Object.defineProperty(e,"__esModule",{value:!0})}));
