{"version":3,"sources":["../../../../src/bi/handlers/onCangjiePaste.ts"],"names":["createOnCangjiePaste","clipboard","tableConfig","onCangjiePaste","event","controller","next","clipboardData","query","fragment","getFragment","PasteMode","text","mode"],"mappings":";;;;;;;AACA;;AAEA;;AAEe,SAASA,oBAAT,CACbC,SADa,EAEbC,WAFa,EAGa;AAC1B,SAAO,SAASC,cAAT,CAAwBC,KAAxB,EAA+BC,UAA/B,EAAuDC,IAAvD,EAA6D;AAClE,UAAMC,aAAa,GAAGF,UAAU,CAACG,KAAX,CAAiB,kBAAjB,EAAqCJ,KAArC,CAAtB;AAEA,UAAMK,QAAQ,GAAGF,aAAa,EAAEG,WAAf,EAAjB;AACA,QAAI,CAACD,QAAD,IAAaE,+BAAUC,IAAV,KAAmBX,SAAS,CAACY,IAA9C,EAAoD,OAAOP,IAAI,EAAX;AAEpD,WAAO,+BACLD,UADK,EAEL;AACEI,MAAAA,QADF;AAEEP,MAAAA;AAFF,KAFK,EAMLI,IANK,CAAP;AAQD,GAdD;AAeD","sourcesContent":["import { Controller, Plugin } from '@ali/4ever-cangjie';\nimport { handleCangjiePaste } from '../utils';\nimport { TableConfig } from '../types';\nimport { ClipboardPluginConfig, PasteMode } from '@ali/4ever-plugin-clipboard';\n\nexport default function createOnCangjiePaste(\n  clipboard: Partial<ClipboardPluginConfig>,\n  tableConfig: TableConfig,\n): Plugin['onCangjiePaste'] {\n  return function onCangjiePaste(event, controller: Controller, next) {\n    const clipboardData = controller.query('getClipboardData', event);\n\n    const fragment = clipboardData?.getFragment();\n    if (!fragment || PasteMode.text === clipboard.mode) return next();\n\n    return handleCangjiePaste(\n      controller,\n      {\n        fragment,\n        tableConfig,\n      },\n      next,\n    );\n  };\n}\n"],"file":"onCangjiePaste.js"}