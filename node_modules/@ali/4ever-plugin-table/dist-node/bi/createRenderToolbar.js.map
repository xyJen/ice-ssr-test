{"version":3,"sources":["../../../src/bi/createRenderToolbar.tsx"],"names":["buttons","TablePickerButton","TableMergeButton","TableBorderButton","TableVAlignButton","TableFillButton","TableThemeButton","enableButtons","key","isInColumns","createRenderToolbar","config","props","controller","buttonName","extraProps","value","query","isInTableOrColumns","Component","ItemKey","SlotType","iconMenu","locale"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;uBAP4B,a;AAS5B,MAAMA,OAA+E,GAAG;AACtF,kBAAgBC,0BADsE;AAEtF,iBAAeC,yBAFuE;AAGtF,kBAAgBC,uBAHsE;AAItF,kBAAgBC,0BAJsE;AAKtF,gBAAcC,wBALwE;AAMtF,iBAAeC;AANuE,CAAxF;;AASA,SAASC,aAAT,CAAuBC,GAAvB,EAA+CC,WAA/C,EAAqE;AACnE,MAAIA,WAAJ,EAAiB;AACf,YAAQD,GAAR;AACE,WAAK,cAAL;AACA,WAAK,YAAL;AACA,WAAK,cAAL;AACE,eAAO,IAAP;;AACF;AACE,eAAO,KAAP;AANJ;AAQD,GATD,MASO;AACL,YAAQA,GAAR;AACE,WAAK,cAAL;AACA,WAAK,YAAL;AACA,WAAK,aAAL;AACA,WAAK,cAAL;AACA,WAAK,cAAL;AACA,WAAK,aAAL;AACE,eAAO,IAAP;;AACF;AACE,eAAO,KAAP;AATJ;AAWD;AAEF;;AAEc,SAASE,mBAAT,CACbC,MADa,EAEE;AAGf,SAAO,CAACC,KAAD,EAAQC,UAAR,KAAuB;AAE5B,UAAM;AAAEC,MAAAA,UAAF;AAAcC,MAAAA;AAAd,QAA6BH,KAAnC;AACA,UAAM;AAAEI,MAAAA;AAAF,QAAYH,UAAlB;AACA,UAAMJ,WAAW,GAAGI,UAAU,CAACI,KAAX,CAAiB,sBAAjB,CAApB;AACA,UAAMC,kBAAkB,GAAGT,WAAW,IAAI,+BAAmBO,KAAnB,CAA1C;AAEA,UAAMG,SAAS,GAAGnB,OAAO,CAACc,UAAD,CAAzB;;AACA,QAAIK,SAAJ,EAAe;AACb;AACA,UAAIL,UAAU,KAAKM,uBAAQ,cAAR,CAAf,IACC,CAACF,kBADN,EAC0B;AACxB,eAAO,IAAP;AACD;;AAED,UAAI,CAACX,aAAa,CAACO,UAAD,EAAaL,WAAb,CAAlB,EAA6C;AAC3C,eAAO,IAAP;AACD;;AAED,0BACE,eAAC,uBAAD;AAAU,QAAA,OAAO,EAAEY,wBAASC;AAA5B,sBACE,eAAC,SAAD;AACE,QAAA,UAAU,EAAET,UADd;AAEE,QAAA,MAAM,EAAEF,MAAM,CAACY;AAFjB,SAGMR,UAHN,EADF,CADF;AASD;;AAED,WAAO,IAAP;AACD,GA/BD;AAgCD","sourcesContent":["import * as React from 'react';\nimport { ItemKeys, ItemKey, ItemSlot, RenderToolbar, SlotType } from '@ali/4ever-component';\nimport TablePickerButton, { TablePickerButtonProps } from './components/toolbarButtons/next/tablePickerButton';\nimport TableFillButton from './components/toolbarButtons/next/tableFillButton';\nimport TableBorderButton from './components/toolbarButtons/next/tableBorderSet';\nimport TableMergeButton from './components/toolbarButtons/next/tableMergeButton';\nimport TableVAlignButton, { TableVAlignButtonProps } from './components/toolbarButtons/next/tableVAlignButton';\nimport TableThemeButton from './components/toolbarButtons/next/tableThemeButton';\nimport { isSelectionInTable } from './utils';\n\nconst buttons: Partial<Record<ItemKeys, React.ComponentType<TableVAlignButtonProps>>> = {\n  'table.picker': TablePickerButton,\n  'table.merge': TableMergeButton,\n  'table.border': TableBorderButton,\n  'table.vAlign': TableVAlignButton,\n  'table.fill': TableFillButton,\n  'table.theme': TableThemeButton,\n};\n\nfunction enableButtons(key: ItemKeys | string, isInColumns: boolean) {\n  if (isInColumns) {\n    switch (key) {\n      case 'table.picker':\n      case 'table.fill':\n      case 'table.vAlign':\n        return true;\n      default:\n        return false;\n    }\n  } else {\n    switch (key) {\n      case 'table.picker':\n      case 'table.fill':\n      case 'table.merge':\n      case 'table.vAlign':\n      case 'table.border':\n      case 'table.theme':\n        return true;\n      default:\n        return false;\n    }\n  }\n\n}\n\nexport default function createRenderToolbar(\n  config: any,\n): RenderToolbar {\n\n\n  return (props, controller) => {\n\n    const { buttonName, extraProps } = props;\n    const { value } = controller;\n    const isInColumns = controller.query('isSelectionInColumns')\n    const isInTableOrColumns = isInColumns || isSelectionInTable(value)\n\n    const Component = buttons[buttonName] as React.ComponentType<TablePickerButtonProps>;\n    if (Component) {\n      // 处理 table.picker 以外，其他都需要在选中 table 时出现\n      if (buttonName !== ItemKey['table.picker']\n        && !isInTableOrColumns) {\n        return null;\n      }\n\n      if (!enableButtons(buttonName, isInColumns)) {\n        return null;\n      }\n\n      return (\n        <ItemSlot display={SlotType.iconMenu}>\n          <Component\n            controller={controller}\n            locale={config.locale}\n            {...extraProps}\n          />\n        </ItemSlot>\n      )\n    }\n\n    return null\n  };\n}\n"],"file":"createRenderToolbar.js"}