"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = resizeTableWidth;

var _models = _interopRequireDefault(require("../../mo/models"));

var _setTableColsWidth = _interopRequireDefault(require("../utils/setTableColsWidth"));

var _calcResizeColsWidth = _interopRequireDefault(require("../utils/calcResizeColsWidth"));

var _enableAutofitWidth = _interopRequireDefault(require("../../utils/commands/enableAutofitWidth"));

var _colsWidthConverter = require("../../utils/utils/colsWidthConverter");

var _getTableMaxWidthByContainer = _interopRequireDefault(require("../../utils/utils/getTableMaxWidthByContainer"));

function resizeTableWidth(controller, table, delta, maxWidth) {
  let newTable = table;

  if (_models.default.isAutofitWidth(table)) {
    const containerWidth = maxWidth || (0, _getTableMaxWidthByContainer.default)(controller, table);
    if (!containerWidth) return controller;
    const pixelColsWidth = (0, _colsWidthConverter.convertFromPercentToPixel)(table, containerWidth);
    (0, _enableAutofitWidth.default)(controller, table, false);
    const tbl = controller.value.document.getNode(table.key);
    (0, _setTableColsWidth.default)(controller, tbl, pixelColsWidth);
    newTable = controller.value.document.getNode(table.key);
  }

  const outputColsWidth = (0, _calcResizeColsWidth.default)(controller, newTable, delta, maxWidth);
  return (0, _setTableColsWidth.default)(controller, newTable, outputColsWidth);
}
//# sourceMappingURL=resizeTableWidth.js.map