{"version":3,"sources":["../../../../../../../src/bi/mobile/components/floatToolbar/utils/getToolbarPostion.ts"],"names":["MIN_SPACE","MIN_TOP_SPACE","SPACE_BETWEEN_TOOLBAR_TABLE","TOOLBAR_WIDTH","TOOLBAR_HEIGHT","getToolbarPosition","params","targetRect","toolbarType","x","left","width","window","innerWidth","Math","max","targetTop","top","TOOLBAR_ITEM_SIZE_MOBILE","y","targetHeight","height"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,SAAS,GAAG,CAAlB;AAEA,MAAMC,aAAa,GAAG,EAAtB,C,CAEA;;AACA,MAAMC,2BAA2B,GAAG,EAApC,C,CAEA;;AACA,MAAMC,aAAa,GAAG,KAAK,CAAL,GAAS,IAAI,CAAnC,C,CAEA;;AACA,MAAMC,cAAc,GAAG,KAAK,CAAL,GAAS,IAAI,CAAb,GAAiB,CAAxC;;AAYO,MAAMC,kBAAkB,GAAIC,MAAD,IAA+B;AAC/D,QAAM;AAAEC,IAAAA,UAAF;AAAcC,IAAAA;AAAd,MAA8BF,MAApC;AACA,MAAIG,CAAC,GAAG,CAAR,CAF+D,CAG/D;;AACA,MAAID,WAAW,KAAK,KAApB,EAA2B;AACzBC,IAAAA,CAAC,GAAGF,UAAU,CAACG,IAAf;AACD,GAFD,MAEO;AACLD,IAAAA,CAAC,GAAGF,UAAU,CAACG,IAAX,GAAkBH,UAAU,CAACI,KAAX,GAAmB,CAArC,GAAyCR,aAAa,GAAG,CAA7D;;AACA,QAAIM,CAAC,GAAGN,aAAJ,GAAoBS,MAAM,CAACC,UAA/B,EAA2C;AACzCJ,MAAAA,CAAC,GAAGG,MAAM,CAACC,UAAP,GAAoBb,SAApB,GAAgCG,aAApC;AACD;AACF;;AACDM,EAAAA,CAAC,GAAGK,IAAI,CAACC,GAAL,CAASf,SAAT,EAAoBS,CAApB,CAAJ,CAZ+D,CAc/D;;AACA,QAAMO,SAAS,GAAGR,WAAW,KAAK,KAAhB,GAAwBD,UAAU,CAACU,GAAnC,GAAyCV,UAAU,CAACU,GAAX,GAAiBC,mCAA5E;AACA,MAAIC,CAAC,GAAGH,SAAS,GAAGZ,cAAZ,GAA6BF,2BAArC;AACA,QAAMkB,YAAY,GAAGZ,WAAW,KAAK,KAAhB,GAAwBD,UAAU,CAACc,MAAnC,GAA4CH,mCAAjE;;AACA,MAAIC,CAAC,GAAGlB,aAAR,EAAuB;AACrBkB,IAAAA,CAAC,GAAGL,IAAI,CAACC,GAAL,CAASd,aAAT,EAAwBe,SAAS,GAAGI,YAAZ,GAA2BlB,2BAAnD,CAAJ;AACD;;AAED,SAAO;AACLO,IAAAA,CADK;AAELU,IAAAA;AAFK,GAAP;AAID,CA1BM","sourcesContent":["import { TOOLBAR_ITEM_SIZE_MOBILE } from '../../../../constants';\n\nconst MIN_SPACE = 6;\n\nconst MIN_TOP_SPACE = 42;\n\n// toolbar 和表格距离（垂直方向）\nconst SPACE_BETWEEN_TOOLBAR_TABLE = 11;\n\n// 按钮宽 56，toolbar 左右 padding 4\nconst TOOLBAR_WIDTH = 56 * 5 + 4 * 2;\n\n// 按钮高 54，toolbar 上下 paading 8，divider 高 9\nconst TOOLBAR_HEIGHT = 54 * 2 + 8 * 2 + 9;\n\ninterface GetPositionParams {\n  targetRect: {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n  };\n  toolbarType: 'row' | 'col';\n}\n\nexport const getToolbarPosition = (params: GetPositionParams) => {\n  const { targetRect, toolbarType } = params;\n  let x = 0;\n  // 将 selectionRect 纠正为表格内部工具栏 Rect\n  if (toolbarType === 'row') {\n    x = targetRect.left;\n  } else {\n    x = targetRect.left + targetRect.width / 2 - TOOLBAR_WIDTH / 2;\n    if (x + TOOLBAR_WIDTH > window.innerWidth) {\n      x = window.innerWidth - MIN_SPACE - TOOLBAR_WIDTH;\n    }\n  }\n  x = Math.max(MIN_SPACE, x);\n\n  // toolbar 距离顶部至少 MIN_TOP_SPACE\n  const targetTop = toolbarType === 'row' ? targetRect.top : targetRect.top - TOOLBAR_ITEM_SIZE_MOBILE;\n  let y = targetTop - TOOLBAR_HEIGHT - SPACE_BETWEEN_TOOLBAR_TABLE;\n  const targetHeight = toolbarType === 'row' ? targetRect.height : TOOLBAR_ITEM_SIZE_MOBILE;\n  if (y < MIN_TOP_SPACE) {\n    y = Math.max(MIN_TOP_SPACE, targetTop + targetHeight + SPACE_BETWEEN_TOOLBAR_TABLE);\n  }\n\n  return {\n    x,\n    y,\n  };\n};\n"],"file":"getToolbarPostion.js"}