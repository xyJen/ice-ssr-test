{"version":3,"sources":["../../../../../../src/bi/mobile/components/toolbar/mobileColToolbar.tsx"],"names":["MobileColToolbar","props","activeRange","selectRange","controller","visible","table","style","propsStyle","colsWidth","preventEvent","e","stopPropagation","preventDefault","handleSelectCol","i","run","setTimeout","setIsFocused","visibility","width","reduce","acc","w","height","TOOLBAR_ITEM_SIZE_MOBILE","map","borderTopLeftRadius","borderTopRightRadius","length","children","end"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAGA;;AAEA;;uBAP4B,a;;AAmBrB,MAAMA,gBAAgB,GAAIC,KAAD,IAAyB;AACvD,QAAM;AAAEC,IAAAA,WAAF;AAAeC,IAAAA,WAAf;AAA4BC,IAAAA,UAA5B;AAAwCC,IAAAA,OAAxC;AAAiDC,IAAAA,KAAjD;AAAwDC,IAAAA,KAAK,EAAEC;AAA/D,MACJP,KADF;AAEA,QAAM,CAACQ,SAAD,IAAc,+BAApB;;AAEA,QAAMC,YAAY,GAAIC,CAAD,IAA4C;AAC/DA,IAAAA,CAAC,CAACC,eAAF;AACAD,IAAAA,CAAC,CAACE,cAAF;AACD,GAHD;;AAIA,QAAMD,eAAe,GAAID,CAAD,IAA4C;AAClEA,IAAAA,CAAC,CAACC,eAAF;AACD,GAFD;;AAGA,QAAME,eAAe,GAAG,CAACH,CAAD,EAAsBI,CAAtB,KAAoC;AAC1DX,IAAAA,UAAU,CAACY,GAAX,CACE,UADF,EAEE,8BAAgBV,KAAhB,EAAuBS,CAAvB,EAA0BA,CAA1B,CAFF;AAIAE,IAAAA,UAAU,CAAC,MAAM;AACfb,MAAAA,UAAU,CAACc,YAAX,CAAwB,KAAxB;AACD,KAFS,CAAV;AAGD,GARD;;AAUA,QAAMX,KAA0B,GAAG,EACjC,GAAGC,UAD8B;AAEjCW,IAAAA,UAAU,EAAEd,OAAO,GAAG,SAAH,GAAe,QAFD;AAGjCe,IAAAA,KAAK,EAAEX,SAAS,CAACY,MAAV,CAAiB,CAACC,GAAD,EAAMC,CAAN,KAAaD,GAAG,GAAGC,CAApC,EAAwC,CAAxC,IAA6C,CAHnB;AAIjCC,IAAAA,MAAM,EAAEC;AAJyB,GAAnC;AAOA,sBACE;AAAK,IAAA,KAAK,EAAElB;AAAZ,KACGE,SAAS,CAACiB,GAAV,CAAc,CAACH,CAAD,EAAIR,CAAJ,kBACb,eAAC,wCAAD;AACE,IAAA,KAAK,EAAE;AACLS,MAAAA,MAAM,EAAEC,mCADH;AAELE,MAAAA,mBAAmB,EAAEZ,CAAC,KAAK,CAAN,GAAU,CAAV,GAAc,CAF9B;AAGLa,MAAAA,oBAAoB,EAAEb,CAAC,KAAKN,SAAS,CAACoB,MAAV,GAAmB,CAAzB,GAA6B,CAA7B,GAAiC;AAHlD,KADT;AAME,IAAA,GAAG,EAAG,GAAEd,CAAE,IAAGQ,CAAE,EANjB;AAOE,IAAA,YAAY,EAAEpB,WAAW,GAAG,CAACA,WAAD,CAAH,GAAmB,IAP9C;AAQE,IAAA,WAAW,EAAED,WARf;AASE,IAAA,KAAK,EAAEa,CATT;AAUE,IAAA,OAAO,EAAGJ,CAAD,IAAOG,eAAe,CAACH,CAAD,EAAII,CAAJ,CAVjC;AAWE,IAAA,YAAY,EAAEL,YAXhB;AAYE,IAAA,WAAW,EAAEE;AAZf,KAcGX,KAAK,CAAC6B,QAdT,EAeGf,CAAC,KAAKZ,WAAW,EAAE4B,GAAnB,iBACC,eAAC,0CAAD;AACE,IAAA,KAAK,EAAEzB,KADT;AAEE,IAAA,UAAU,EAAEF,UAFd;AAGE,IAAA,KAAK,EAAEW;AAHT,IAhBJ,CADD,CADH,CADF;AA6BD,CA1DM","sourcesContent":["import React from 'react';\nimport { TableColToolbarItem } from '../../../components/colToolbar/tableColToolbarItem';\nimport { TOOLBAR_ITEM_SIZE_MOBILE } from '../../../constants';\nimport { usePixelColsWidth } from '../../../../utils/hooks';\nimport type { Range } from '../../../components/rowColToolbarItemRect';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { selectTableCols } from '../../../actions';\nimport Table from '../../../../mo/models';\nimport { ColToolbarDragButton } from './colToolbarDragButton';\n\ntype ToolbarProps = {\n  controller: Controller;\n  table: Table;\n  visible: boolean;\n  // 选区所在行列\n  activeRange?: Range | null;\n  // 选中行列\n  selectRange?: Range | null;\n} & React.HTMLAttributes<HTMLDivElement>;\n\nexport const MobileColToolbar = (props: ToolbarProps) => {\n  const { activeRange, selectRange, controller, visible, table, style: propsStyle } =\n    props;\n  const [colsWidth] = usePixelColsWidth();\n\n  const preventEvent = (e: React.TouchEvent | React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n  const stopPropagation = (e: React.TouchEvent | React.MouseEvent) => {\n    e.stopPropagation();\n  };\n  const handleSelectCol = (e: React.MouseEvent, i: number) => {\n    controller.run(\n      'onAction',\n      selectTableCols(table, i, i),\n    );\n    setTimeout(() => {\n      controller.setIsFocused(false);\n    });\n  };\n\n  const style: React.CSSProperties = {\n    ...propsStyle,\n    visibility: visible ? 'visible' : 'hidden',\n    width: colsWidth.reduce((acc, w) => (acc + w), 0) + 1,\n    height: TOOLBAR_ITEM_SIZE_MOBILE,\n  };\n\n  return (\n    <div style={style}>\n      {colsWidth.map((w, i) => (\n        <TableColToolbarItem\n          style={{\n            height: TOOLBAR_ITEM_SIZE_MOBILE,\n            borderTopLeftRadius: i === 0 ? 4 : 0,\n            borderTopRightRadius: i === colsWidth.length - 1 ? 4 : 0,\n          }}\n          key={`${i}_${w}`}\n          selectRanges={selectRange ? [selectRange] : null}\n          activeRange={activeRange}\n          index={i}\n          onClick={(e) => handleSelectCol(e, i)}\n          onTouchStart={preventEvent}\n          onMouseDown={stopPropagation}\n        >\n          {props.children}\n          {i === selectRange?.end && (\n            <ColToolbarDragButton\n              table={table}\n              controller={controller}\n              index={i}\n            />\n          )}\n        </TableColToolbarItem>\n      ))}\n    </div>\n  );\n};\n"],"file":"mobileColToolbar.js"}