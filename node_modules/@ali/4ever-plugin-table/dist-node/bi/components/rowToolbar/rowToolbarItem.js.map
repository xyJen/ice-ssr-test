{"version":3,"sources":["../../../../../src/bi/components/rowToolbar/rowToolbarItem.tsx"],"names":["useScrollableContainerRect","hooks","RowToolbarItem","props","style","propsStyle","index","table","rowHeight","scale","isSticky","deleteRange","selectRanges","activeRange","width","children","rest","scrollRect","rowsLength","nodes","length","height","TOOLBAR_ITEM_SIZE","borderBottomLeftRadius","wrapperStyle","borderLeftWidth","borderLeft","transform","position","top","Number","isFinite","left","zIndex","borderTop","STICKY_ROW_TOP_HEIGHT","borderRight"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;uBAH4B,a;AAK5B,MAAM;AAAEA,EAAAA;AAAF,IAAiCC,KAAvC;;AAkBA,MAAMC,cAAc,GAAIC,KAAD,IAAkB;AACvC,QAAM;AACJC,IAAAA,KAAK,EAAEC,UAAU,GAAG,EADhB;AAEJC,IAAAA,KAFI;AAGJC,IAAAA,KAHI;AAIJC,IAAAA,SAJI;AAKJC,IAAAA,KAAK,GAAG,CALJ;AAMJC,IAAAA,QANI;AAOJC,IAAAA,WAPI;AAQJC,IAAAA,YARI;AASJC,IAAAA,WATI;AAUJC,IAAAA,KAVI;AAWJC,IAAAA,QAXI;AAYJ,OAAGC;AAZC,MAaFb,KAbJ;AAeA,QAAM,CAACc,UAAD,IAAejB,0BAA0B,EAA/C;AAEA,QAAMkB,UAAU,GAAGX,KAAK,CAACY,KAAN,CAAYC,MAA/B;AACA,QAAMhB,KAAK,GAAG;AACZiB,IAAAA,MAAM,EAAEf,KAAK,KAAK,CAAV,GAAcE,SAAS,GAAGC,KAAZ,GAAoB,CAAlC,GAAsCD,SAAS,GAAGC,KAD9C;AAEZK,IAAAA,KAAK,EAAEQ,+BAAoBb,KAFf;AAGZc,IAAAA,sBAAsB,EAAEjB,KAAK,KAAKY,UAAU,GAAG,CAAvB,GAA2B,IAAIT,KAA/B,GAAuC,EAHnD;AAIZ,OAAGJ;AAJS,GAAd;AAOA,QAAMmB,YAAiC,GAAG,EAA1C;AACA,QAAMC,eAAe,GAAG,EAAxB;;AACA,MAAIf,QAAQ,IAAIJ,KAAK,KAAK,CAA1B,EAA6B;AAC3BkB,IAAAA,YAAY,CAACE,UAAb,GAA2B,GAAED,eAAgB,gBAA7C;AACAD,IAAAA,YAAY,CAACG,SAAb,GAA0B,eAAcF,eAAgB,KAAxD;AACAD,IAAAA,YAAY,CAACI,QAAb,GAAwB,OAAxB;AACAJ,IAAAA,YAAY,CAACK,GAAb,GAAoB,GAAEZ,UAAU,CAACY,GAAI,IAArC;;AACA,QAAIC,MAAM,CAACC,QAAP,CAAgBd,UAAU,CAACe,IAA3B,CAAJ,EAAsC;AACpCR,MAAAA,YAAY,CAACQ,IAAb,GAAqB,GAAEf,UAAU,CAACe,IAAX,GAAmBlB,KAAM,IAAhD;AACD;;AACDU,IAAAA,YAAY,CAACS,MAAb,GAAsB,CAAtB;AACAT,IAAAA,YAAY,CAACU,SAAb,GAA0B,GAAEC,gCAAsB,gBAAlD;AACAX,IAAAA,YAAY,CAACY,WAAb,GAA2B,iBAA3B;AACD;;AAED,sBACE;AAAK,IAAA,GAAG,EAAE9B,KAAV;AAAiB,IAAA,KAAK,EAAEkB;AAAxB,kBACE,eAAC,4CAAD;AACE,IAAA,KAAK,EAAElB,KADT;AAEE,IAAA,IAAI,EAAC,KAFP;AAGE,IAAA,MAAM,EAAEY,UAHV;AAIE,IAAA,KAAK,EAAEd,KAJT;AAKE,IAAA,WAAW,EAAES,WALf;AAME,IAAA,YAAY,EAAED,YANhB;AAOE,IAAA,WAAW,EAAED;AAPf,KAQMK,IARN,GAUGD,QAVH,CADF,CADF;AAgBD,CAzDD;;eA2Deb,c","sourcesContent":["import * as React from 'react';\nimport Table from '../../../mo/models';\nimport { STICKY_ROW_TOP_HEIGHT, TOOLBAR_ITEM_SIZE } from '../../../utils/constants';\nimport * as hooks from '../../../utils/hooks';\nimport { RowColToolbarItemRect, Range } from '../rowColToolbarItemRect';\n\nconst { useScrollableContainerRect } = hooks;\n\ntype Props = {\n  index: number;\n  table: Table;\n  width: number;\n  rowHeight: number;\n  scale?: number;\n  isSticky?: boolean;\n  // 选区所在行列\n  activeRange?: Range | null;\n  // 选中行列\n  selectRanges?: Range[] | null;\n  // 删除行列范围\n  deleteRange?: Range | null;\n  children?: React.ReactNode;\n} & React.HTMLAttributes<HTMLDivElement>;\n\nconst RowToolbarItem = (props: Props) => {\n  const {\n    style: propsStyle = {},\n    index,\n    table,\n    rowHeight,\n    scale = 1,\n    isSticky,\n    deleteRange,\n    selectRanges,\n    activeRange,\n    width,\n    children,\n    ...rest\n  } = props;\n\n  const [scrollRect] = useScrollableContainerRect();\n\n  const rowsLength = table.nodes.length;\n  const style = {\n    height: index === 0 ? rowHeight / scale + 1 : rowHeight / scale,\n    width: TOOLBAR_ITEM_SIZE / scale,\n    borderBottomLeftRadius: index === rowsLength - 1 ? 3 / scale : '',\n    ...propsStyle,\n  };\n\n  const wrapperStyle: React.CSSProperties = {};\n  const borderLeftWidth = 10;\n  if (isSticky && index === 0) {\n    wrapperStyle.borderLeft = `${borderLeftWidth}px solid white`;\n    wrapperStyle.transform = `translateX(-${borderLeftWidth}px)`;\n    wrapperStyle.position = 'fixed';\n    wrapperStyle.top = `${scrollRect.top}px`;\n    if (Number.isFinite(scrollRect.left)) {\n      wrapperStyle.left = `${scrollRect.left! - width}px`;\n    }\n    wrapperStyle.zIndex = 2;\n    wrapperStyle.borderTop = `${STICKY_ROW_TOP_HEIGHT}px solid white`;\n    wrapperStyle.borderRight = '1px solid white';\n  }\n\n  return (\n    <div key={index} style={wrapperStyle}>\n      <RowColToolbarItemRect\n        index={index}\n        type=\"row\"\n        length={rowsLength}\n        style={style}\n        activeRange={activeRange}\n        selectRanges={selectRanges}\n        deleteRange={deleteRange}\n        {...rest}\n      >\n        {children}\n      </RowColToolbarItemRect>\n    </div>\n  );\n};\n\nexport default RowToolbarItem;\n"],"file":"rowToolbarItem.js"}