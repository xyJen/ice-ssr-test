"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var React = _interopRequireWildcard(require("react"));

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _constants = require("../../constants");

/* eslint-disable react/no-find-dom-node */
const _createElement = /*#__PURE__*/React.createElement;
const HEADER_WIDTH = _constants.TOOLBAR_ITEM_SIZE;

const BackgroundLayer = /*#__PURE__*/_styledComponents.default.div(["position:absolute;display:", ";width:", "px;min-width:", "px;max-width:", "px;height:", "px;max-height:48px;min-height:", "px;will-change:left,top;transform:translate(-", "px,-50%);z-index:999;cursor:move;background-color:rgba(255,255,255,0.9);user-select:none;"], p => p.visible ? 'block' : 'none', p => p.width, _constants.MIN_COL_WIDTH + HEADER_WIDTH, 160 + HEADER_WIDTH, p => p.height, _constants.MIN_ROW_HEIGHT, HEADER_WIDTH);

const DragWrapper = /*#__PURE__*/_styledComponents.default.div(["position:absolute;left:0;top:0;width:100%;height:100%;background:", ";border:1px solid ", ";"], _constants.THEME.dragBlue1, _constants.THEME.dragBlue1);

const DragHeader = /*#__PURE__*/_styledComponents.default.div(["height:100%;width:", "px;background-color:", ";opacity:0.5;"], HEADER_WIDTH, _constants.THEME.dragBlue0);

var _ref = /*#__PURE__*/_createElement(DragWrapper, null, /*#__PURE__*/_createElement(DragHeader, null));

const DragElement = (props, ref) => {
  const {
    visible = false,
    height = 0,
    width = 0
  } = props;
  const renderHeight = visible ? height : 0; // PERF: width 是表格宽度，自适应表格宽度可能高频变化。
  // 所以在组件不渲染时，将 render width 置为常量，避免动态 styled-components

  const renderWidth = visible ? width : 0;
  return /*#__PURE__*/_createElement(BackgroundLayer, {
    ref: ref,
    visible: visible,
    height: renderHeight,
    width: renderWidth,
    "data-testid": "table-row-drag-placeholder",
    "data-visible": visible
  }, _ref);
};

var _default = /*#__PURE__*/React.forwardRef(DragElement);

exports.default = _default;
//# sourceMappingURL=dragElement.js.map