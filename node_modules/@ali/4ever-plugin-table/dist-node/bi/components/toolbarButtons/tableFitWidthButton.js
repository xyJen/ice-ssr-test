"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = TableFitWidthButton;

var _react = _interopRequireDefault(require("react"));

var _tableWidthFitContainerButton = _interopRequireDefault(require("../cornerToolbar/tableWidthFitContainerButton"));

var _actions = require("../../actions");

var _getTableSelection = _interopRequireDefault(require("../../utils/getTableSelection"));

var _types = require("../../types");

const _createElement = /*#__PURE__*/_react.default.createElement;

function TableFitWidthButton(props) {
  const {
    controller,
    locale
  } = props;
  const selection = (0, _getTableSelection.default)(controller);
  if (!selection) return null;
  const node = controller.value.document.getNode(selection.key);
  if (!(node && (0, _types.isTable)(node))) return null;

  const handleMenuEvent = () => {
    controller.run('onAction', (0, _actions.resizeTableWidthFitContainer)(node));
  };

  if (controller.query('isSelectWholeTable', {
    node
  })) {
    return /*#__PURE__*/_createElement(_tableWidthFitContainerButton.default, {
      locale: locale,
      onMenuEvent: handleMenuEvent
    });
  }

  return null;
}

TableFitWidthButton.needRender = function (controller) {
  const selection = (0, _getTableSelection.default)(controller);
  if (!selection) return false;
  const node = controller.value.document.getNode(selection.key);
  if (!(node && (0, _types.isTable)(node))) return false;
  return controller.query('isSelectWholeTable', {
    node
  });
};
//# sourceMappingURL=tableFitWidthButton.js.map