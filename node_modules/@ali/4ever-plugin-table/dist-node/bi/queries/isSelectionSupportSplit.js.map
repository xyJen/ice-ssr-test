{"version":3,"sources":["../../../../src/bi/queries/isSelectionSupportSplit.ts"],"names":["isSelectionSupportSplit","controller","node","table","visible","tableSelection","value","has1HiddenCell","selection","canSplit","query"],"mappings":";;;;;;;;;AAEA;;AACA;;AACA;;AAEe,SAASA,uBAAT,CACbC,UADa,EAEb;AAAEC,EAAAA,IAAI,EAAEC,KAAR;AAAeC,EAAAA;AAAf,CAFa,EAGb;AACA,MAAI,CAACD,KAAL,EAAY;AACV,WAAO,KAAP;AACD;;AACD,QAAME,cAAc,GAAG,2CAA6BJ,UAA7B,EAAyCE,KAAzC,KACrB,iDAAmCF,UAAU,CAACK,KAA9C,EAAqDH,KAArD,CADF;;AAGA,MAAI,CAACE,cAAL,EAAqB;AACnB,WAAO,KAAP;AACD;;AAED,QAAME,cAAc,GAAG,8BAAgB,CAAhB,EAAmB,QAAnB,EAA6B;AAClDH,IAAAA,OADkD;AAElDD,IAAAA,KAFkD;AAGlDK,IAAAA,SAAS,EAAEH;AAHuC,GAA7B,CAAvB;;AAMA,MAAI,CAACE,cAAL,EAAqB;AACnB,WAAO,KAAP;AACD;;AAED,QAAME,QAAQ,GAAGR,UAAU,CAACS,KAAX,CACf,4BADe,EAEf;AAAER,IAAAA,IAAI,EAAEC,KAAR;AAAeE,IAAAA;AAAf,GAFe,CAAjB;AAIA,SAAOI,QAAP;AACD","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport Table from '../../mo/models';\nimport isMoreThanNCell from '../utils/isMoreThanNCell';\nimport createTableSelectionForFocusedCell from '../utils/createTableSelectionForFocusedCell';\nimport getDataTableSelectionByTable from '../utils/getDataTableSelectionByTable';\n\nexport default function isSelectionSupportSplit(\n  controller: Controller,\n  { node: table, visible }: { node: Table, visible: boolean },\n) {\n  if (!table) {\n    return false;\n  }\n  const tableSelection = getDataTableSelectionByTable(controller, table) ||\n    createTableSelectionForFocusedCell(controller.value, table);\n\n  if (!tableSelection) {\n    return false;\n  }\n\n  const has1HiddenCell = isMoreThanNCell(1, 'hidden', {\n    visible,\n    table,\n    selection: tableSelection,\n  });\n\n  if (!has1HiddenCell) {\n    return false;\n  }\n\n  const canSplit = controller.query(\n    'isAllSelectedCellsComplete',\n    { node: table, tableSelection },\n  );\n  return canSplit;\n}\n"],"file":"isSelectionSupportSplit.js"}