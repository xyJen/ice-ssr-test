{"version":3,"sources":["../../../../src/bi/queries/isPureTableSelection.ts"],"names":["isPureTableSelection","controller","isByTable","value","selection","data","query","document","_selection","anchor","focus","anchorCell","getClosest","key","TableCell","isTableCell","focusCell"],"mappings":";;;;;;;;;AACA;;AACA;;AAEO,MAAMA,oBAAoB,GAAIC,UAAD,IAA4B;AAC9D,QAAMC,SAAS,GAAGD,UAAU,CAACE,KAAX,CAAiBC,SAAjB,EAA4BC,IAA5B,EAAkCH,SAApD;AACA,QAAME,SAAS,GAAGH,UAAU,CAACK,KAAX,CAAiB,mBAAjB,CAAlB;AAEA,QAAM;AAAEC,IAAAA,QAAF;AAAYH,IAAAA,SAAS,EAAEI;AAAvB,MAAsCP,UAAU,CAACE,KAAvD;AACA,QAAM;AAAEM,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAAoBF,UAA1B;;AAEA,MAAI,CAACC,MAAD,IAAW,CAACC,KAAhB,EAAuB;AACrB,WAAO,KAAP;AACD;;AAED,QAAMC,UAAU,GAAGJ,QAAQ,CAACK,UAAT,CAAoBH,MAAM,CAACI,GAA3B,EAAgCC,mBAAUC,WAA1C,CAAnB;AACA,QAAMC,SAAS,GAAGT,QAAQ,CAACK,UAAT,CAAoBF,KAAK,CAACG,GAA1B,EAA+BC,mBAAUC,WAAzC,CAAlB;;AAEA,MAAIX,SAAJ,EAAe;AACb,QAAIO,UAAU,KAAKK,SAAf,IAA4B,CAACd,SAAjC,EAA4C;AAC1C,aAAO,KAAP;AACD;;AACD,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD,CArBM","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport TableCell from '../../mo/models/tableCell';\n;\n\nexport const isPureTableSelection = (controller: Controller) => {\n  const isByTable = controller.value.selection?.data?.isByTable;\n  const selection = controller.query('getTableSelection');\n\n  const { document, selection: _selection } = controller.value;\n  const { anchor, focus } = _selection;\n\n  if (!anchor || !focus) {\n    return false;\n  }\n\n  const anchorCell = document.getClosest(anchor.key, TableCell.isTableCell);\n  const focusCell = document.getClosest(focus.key, TableCell.isTableCell);\n\n  if (selection) {\n    if (anchorCell === focusCell && !isByTable) {\n      return false;\n    }\n    return true;\n  }\n  return false;\n};\n"],"file":"isPureTableSelection.js"}