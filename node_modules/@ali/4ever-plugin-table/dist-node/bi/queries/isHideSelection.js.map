{"version":3,"sources":["../../../../src/bi/queries/isHideSelection.ts"],"names":["isHideSelection","controller","selection","document","valueSelection","value","sel","anchor","focus","data","isByTable","startCell","getClosest","key","TableCell","isTableCell","startTable","Table","isTable","endCell","undefined","endTable"],"mappings":";;;;;;;;;AACA;;AACA;;AAEA,MAAMA,eAAqC,GAAG,CAC5CC,UAD4C,EAChC;AAAEC,EAAAA;AAAF,IAAgB,EADgB,KAEzC;AACH,QAAM;AAAEC,IAAAA,QAAF;AAAYD,IAAAA,SAAS,EAAEE;AAAvB,MAA0CH,UAAU,CAACI,KAA3D;AACA,QAAMC,GAAG,GAAGJ,SAAS,IAAIE,cAAzB;AACA,QAAM;AAAEG,IAAAA,MAAF;AAAUC,IAAAA,KAAV;AAAiBC,IAAAA;AAAjB,MAA0BH,GAAhC;AACA,QAAM;AAAEI,IAAAA;AAAF,MAAgBD,IAAtB;AACA,QAAME,SAAS,GAAGR,QAAQ,CAACS,UAAT,CAAoBL,MAAM,CAACM,GAA3B,EAAgCC,mBAAUC,WAA1C,CAAlB;;AACA,MAAI,CAACJ,SAAL,EAAgB;AACd,WAAO,KAAP;AACD;;AACD,QAAMK,UAAU,GAAGb,QAAQ,CAACS,UAAT,CAAoBD,SAAS,CAACE,GAA9B,EAAmCI,gBAAMC,OAAzC,CAAnB;;AACA,MAAI,CAACF,UAAL,EAAiB;AACf,WAAO,KAAP;AACD;;AACD,QAAMG,OAAO,GAAGhB,QAAQ,CAACS,UAAT,CAAoBJ,KAAK,CAACK,GAA1B,EAA+BC,mBAAUC,WAAzC,CAAhB;;AACA,MACE,CAACI,OAAD,IAEE,CAACT,SAAD,IACAC,SAAS,CAACE,GAAV,KAAkBM,OAAO,CAACN,GAJ9B,EAME;AACA,WAAOO,SAAP;AACD;;AACD,QAAMC,QAAQ,GAAGlB,QAAQ,CAACS,UAAT,CAAoBO,OAAO,CAACN,GAA5B,EAAiCI,gBAAMC,OAAvC,CAAjB;;AACA,MAAI,CAACG,QAAL,EAAe;AACb,WAAO,KAAP;AACD;;AACD,SAAOL,UAAU,CAACH,GAAX,KAAmBQ,QAAQ,CAACR,GAAnC;AACD,CA9BD;;eAgCeb,e","sourcesContent":["import type { isHideSelectionQuery } from '@ali/4ever-cangjie';\nimport Table from '../../mo/models';\nimport TableCell from '../../mo/models/tableCell';\n\nconst isHideSelection: isHideSelectionQuery = (\n  controller, { selection } = {},\n) => {\n  const { document, selection: valueSelection } = controller.value;\n  const sel = selection || valueSelection;\n  const { anchor, focus, data } = sel;\n  const { isByTable } = data;\n  const startCell = document.getClosest(anchor.key, TableCell.isTableCell);\n  if (!startCell) {\n    return false;\n  }\n  const startTable = document.getClosest(startCell.key, Table.isTable);\n  if (!startTable) {\n    return false;\n  }\n  const endCell = document.getClosest(focus.key, TableCell.isTableCell);\n  if (\n    !endCell ||\n    (\n      !isByTable &&\n      startCell.key === endCell.key\n    )\n  ) {\n    return undefined;\n  }\n  const endTable = document.getClosest(endCell.key, Table.isTable);\n  if (!endTable) {\n    return false;\n  }\n  return startTable.key === endTable.key;\n}\n\nexport default isHideSelection;\n"],"file":"isHideSelection.js"}