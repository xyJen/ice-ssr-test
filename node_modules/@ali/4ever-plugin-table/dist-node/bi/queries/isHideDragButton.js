"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = isHideDragButton;

var _models = _interopRequireDefault(require("../../mo/models"));

var _tableSelection = _interopRequireDefault(require("./tableSelection"));

function isHideDragButton(controller, data) {
  const {
    node
  } = data;
  const tbSelection = (0, _tableSelection.default)(controller); // 选中表格整行时，被选中行的第一个单元格不展示拖拽按钮

  if (tbSelection) {
    const {
      key,
      startColIndex,
      endColIndex,
      startRowIndex,
      endRowIndex
    } = tbSelection;
    const table = controller.value.document.getNode(key);

    if (_models.default.isTable(table) && table.contains(node)) {
      const colsLength = table.data.colsWidth?.length;

      if (colsLength && startColIndex === 0 && endColIndex === colsLength - 1) {
        for (let r = startRowIndex; r <= endRowIndex; r++) {
          const row = table.nodes[r];

          if (!row) {
            continue;
          }

          if (row.nodes[0]?.contains(node)) {
            return true;
          }
        }
      }
    }
  }

  return undefined;
}
//# sourceMappingURL=isHideDragButton.js.map