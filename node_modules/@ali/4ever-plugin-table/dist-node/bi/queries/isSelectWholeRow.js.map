{"version":3,"sources":["../../../../src/bi/queries/isSelectWholeRow.ts"],"names":["isSelectWholeRow","controller","node","tableSelection","query","key","isSelectWholeTable","tableNodes","nodes","tableRow","startRowIndex","endColTableCell","endColIndex","colSpan","data","isSelecedAllColTableCells","Number","length","startColIndex"],"mappings":";;;;;;;AAAA;AACA;AACA;AAIe,SAASA,gBAAT,CAA0BC,UAA1B,EAAkD;AAAEC,EAAAA;AAAF,CAAlD,EAA6E;AAC1F,QAAMC,cAAc,GAAGF,UAAU,CAACG,KAAX,CAAiB,gBAAjB,CAAvB;;AACA,MAAI,CAACD,cAAD,IAAmBA,cAAc,CAACE,GAAf,KAAuBH,IAAI,CAACG,GAAnD,EAAwD;AACtD,WAAO,KAAP;AACD;;AACD,QAAMC,kBAAkB,GAAGL,UAAU,CAACG,KAAX,CAAiB,oBAAjB,EAAuC;AAChEF,IAAAA;AADgE,GAAvC,CAA3B;;AAGA,MAAII,kBAAJ,EAAwB;AACtB,WAAO,KAAP;AACD;;AACD,QAAMC,UAAU,GAAGL,IAAI,CAACM,KAAL,CAAW,CAAX,EAAcA,KAAjC;AACA,QAAMC,QAAQ,GAAGP,IAAI,CAACM,KAAL,CAAWL,cAAc,CAACO,aAA1B,CAAjB;AACA,QAAMC,eAAe,GAAGF,QAAQ,CAACD,KAAT,CAAeL,cAAc,CAACS,WAA9B,CAAxB;;AACA,MAAI,CAACD,eAAL,EAAsB;AACpB,WAAO,IAAP;AACD;;AACD,QAAM;AAAEE,IAAAA,OAAO,GAAG;AAAZ,MAAkBF,eAAe,EAAEG,IAAjB,IAAyB,EAAjD;AACA,QAAMC,yBAAyB,GAAGC,MAAM,CAACb,cAAc,CAACS,WAAhB,CAAN,GAAqCI,MAAM,CAACH,OAAD,CAA3C,KAAyDN,UAAU,CAACU,MAAtG;AACA,SAAOd,cAAc,CAACe,aAAf,KAAiC,CAAjC,IACFH,yBADL;AAED","sourcesContent":["/**\n * 是否选中整行（不包括全选）\n */\nimport { Controller } from '@ali/4ever-cangjie';\nimport Table from '../../mo/models';\n\nexport default function isSelectWholeRow(controller: Controller, { node }: { node: Table }) {\n  const tableSelection = controller.query('tableSelection');\n  if (!tableSelection || tableSelection.key !== node.key) {\n    return false;\n  }\n  const isSelectWholeTable = controller.query('isSelectWholeTable', {\n    node,\n  });\n  if (isSelectWholeTable) {\n    return false;\n  }\n  const tableNodes = node.nodes[0].nodes;\n  const tableRow = node.nodes[tableSelection.startRowIndex];\n  const endColTableCell = tableRow.nodes[tableSelection.endColIndex];\n  if (!endColTableCell) {\n    return true;\n  }\n  const { colSpan = 1 } = endColTableCell?.data || {};\n  const isSelecedAllColTableCells = Number(tableSelection.endColIndex) + Number(colSpan) === tableNodes.length;\n  return tableSelection.startColIndex === 0\n    && isSelecedAllColTableCells;\n}\n"],"file":"isSelectWholeRow.js"}