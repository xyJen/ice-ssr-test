{"version":3,"sources":["../../../../src/bi/queries/isHideDragButton.ts"],"names":["isHideDragButton","controller","data","node","tbSelection","key","startColIndex","endColIndex","startRowIndex","endRowIndex","table","value","document","getNode","Table","isTable","contains","colsLength","colsWidth","length","r","row","nodes","undefined"],"mappings":";;;;;;;;;AACA;;AACA;;AAEe,SAASA,gBAAT,CAA0BC,UAA1B,EAAkDC,IAAlD,EAAwE;AACrF,QAAM;AAAEC,IAAAA;AAAF,MAAWD,IAAjB;AACA,QAAME,WAAW,GAAG,6BAAeH,UAAf,CAApB,CAFqF,CAGrF;;AACA,MAAIG,WAAJ,EAAiB;AACf,UAAM;AAAEC,MAAAA,GAAF;AAAOC,MAAAA,aAAP;AAAsBC,MAAAA,WAAtB;AAAmCC,MAAAA,aAAnC;AAAkDC,MAAAA;AAAlD,QAAkEL,WAAxE;AACA,UAAMM,KAAK,GAAGT,UAAU,CAACU,KAAX,CAAiBC,QAAjB,CAA0BC,OAA1B,CAAkCR,GAAlC,CAAd;;AACA,QAAIS,gBAAMC,OAAN,CAAcL,KAAd,KAAwBA,KAAK,CAACM,QAAN,CAAeb,IAAf,CAA5B,EAAkD;AAChD,YAAMc,UAAU,GAAGP,KAAK,CAACR,IAAN,CAAWgB,SAAX,EAAsBC,MAAzC;;AACA,UAAIF,UAAU,IAAIX,aAAa,KAAK,CAAhC,IAAqCC,WAAW,KAAKU,UAAU,GAAG,CAAtE,EAAyE;AACvE,aAAK,IAAIG,CAAC,GAAGZ,aAAb,EAA4BY,CAAC,IAAIX,WAAjC,EAA8CW,CAAC,EAA/C,EAAmD;AACjD,gBAAMC,GAAG,GAAGX,KAAK,CAACY,KAAN,CAAYF,CAAZ,CAAZ;;AACA,cAAI,CAACC,GAAL,EAAU;AACR;AACD;;AACD,cAAIA,GAAG,CAACC,KAAJ,CAAU,CAAV,GAAcN,QAAd,CAAuBb,IAAvB,CAAJ,EAAkC;AAChC,mBAAO,IAAP;AACD;AACF;AACF;AACF;AACF;;AACD,SAAOoB,SAAP;AACD","sourcesContent":["import { Controller, Node } from '@ali/4ever-cangjie';\nimport Table from '../../mo/models';\nimport tableSelection from './tableSelection';\n\nexport default function isHideDragButton(controller: Controller, data: { node: Node }) {\n  const { node } = data;\n  const tbSelection = tableSelection(controller);\n  // 选中表格整行时，被选中行的第一个单元格不展示拖拽按钮\n  if (tbSelection) {\n    const { key, startColIndex, endColIndex, startRowIndex, endRowIndex } = tbSelection;\n    const table = controller.value.document.getNode(key) as Table;\n    if (Table.isTable(table) && table.contains(node)) {\n      const colsLength = table.data.colsWidth?.length;\n      if (colsLength && startColIndex === 0 && endColIndex === colsLength - 1) {\n        for (let r = startRowIndex; r <= endRowIndex; r++) {\n          const row = table.nodes[r];\n          if (!row) {\n            continue;\n          }\n          if (row.nodes[0]?.contains(node)) {\n            return true;\n          }\n        }\n      }\n    }\n  }\n  return undefined;\n}\n"],"file":"isHideDragButton.js"}