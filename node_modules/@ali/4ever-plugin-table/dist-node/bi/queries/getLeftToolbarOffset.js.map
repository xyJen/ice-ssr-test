{"version":3,"sources":["../../../../src/bi/queries/getLeftToolbarOffset.ts"],"names":["controller","data","node","undefined","document","startBlock","value","cell","getParent","key","row","table","TableRow","isTableRow","isColumns","Table","isTable","sr","TableCell","isTableCell","tb","path","getPath","index","length","moreMargin","contains","x","y"],"mappings":";;;;;;;;;AACA;;AACA;;AACA;;AAEe,kBAAUA,UAAV,EAAkCC,IAAlC,EAAyD;AACtE,QAAM;AAAEC,IAAAA;AAAF,MAAWD,IAAjB;;AACA,MAAI,CAACC,IAAL,EAAW;AACT,WAAOC,SAAP;AACD;;AACD,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,MAA2BL,UAAU,CAACM,KAA5C;AACA,QAAMC,IAAI,GAAGH,QAAQ,CAACI,SAAT,CAAmBN,IAAI,CAACO,GAAxB,CAAb;AACA,QAAMC,GAAG,GAAGN,QAAQ,CAACI,SAAT,CAAmBD,IAAI,CAAEE,GAAzB,CAAZ;AACA,QAAME,KAAK,GAAGC,kBAASC,UAAT,CAAoBH,GAApB,KAA4BN,QAAQ,CAACI,SAAT,CAAmBE,GAAG,CAACD,GAAvB,CAA1C;AACA,QAAMK,SAAS,GAAGC,gBAAMC,OAAN,CAAcL,KAAd,KAAwB,CAAC,CAACA,KAAK,CAACV,IAAN,CAAWgB,EAAvD;;AACA,MAAIV,IAAI,IAAIW,mBAAUC,WAAV,CAAsBZ,IAAtB,CAAR,IAAuC,CAACO,SAA5C,EAAuD;AACrD,UAAMM,EAAE,GAAGhB,QAAQ,CAACI,SAAT,CAAmBJ,QAAQ,CAACI,SAAT,CAAmBD,IAAI,CAACE,GAAxB,EAA8BA,GAAjD,CAAX;AACA,UAAMY,IAAI,GAAGjB,QAAQ,CAACkB,OAAT,CAAiBf,IAAI,CAACE,GAAtB,CAAb;;AACA,QAAIW,EAAE,IAAIC,IAAV,EAAgB;AACd,YAAME,KAAK,GAAGF,IAAI,CAACA,IAAI,CAACG,MAAL,GAAc,CAAf,CAAlB;AACA,YAAMC,UAAU,GAAGF,KAAK,KAAK,CAAV,IAAeH,EAAE,CAACM,QAAH,CAAYrB,UAAZ,CAAlC;AACA,aAAO;AACLsB,QAAAA,CAAC,EAAEF,UAAU,GAAG,CAAC,EAAJ,GAAS,CAAC,CADlB;AAELG,QAAAA,CAAC,EAAE;AAFE,OAAP;AAID;AACF;;AACD,SAAOzB,SAAP;AACD","sourcesContent":["import { Controller, Block } from '@ali/4ever-cangjie';\nimport Table from '../../mo/models';\nimport TableRow from '../../mo/models/tableRow';\nimport TableCell from '../../mo/models/tableCell';\n\nexport default function (controller: Controller, data: { node: Block }) {\n  const { node } = data;\n  if (!node) {\n    return undefined;\n  }\n  const { document, startBlock } = controller.value;\n  const cell = document.getParent(node.key);\n  const row = document.getParent(cell!.key) as TableRow;\n  const table = TableRow.isTableRow(row) && document.getParent(row.key);\n  const isColumns = Table.isTable(table) && !!table.data.sr;\n  if (cell && TableCell.isTableCell(cell) && !isColumns) {\n    const tb = document.getParent(document.getParent(cell.key)!.key);\n    const path = document.getPath(cell.key);\n    if (tb && path) {\n      const index = path[path.length - 1];\n      const moreMargin = index === 0 && tb.contains(startBlock);\n      return {\n        x: moreMargin ? -20 : -6,\n        y: 0,\n      };\n    }\n  }\n  return undefined;\n}\n"],"file":"getLeftToolbarOffset.js"}