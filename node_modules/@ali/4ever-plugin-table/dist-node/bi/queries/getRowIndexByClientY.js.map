{"version":3,"sources":["../../../../src/bi/queries/getRowIndexByClientY.ts"],"names":["getRowIndexByClientY","controller","node","clientY","rowsRect","lastRowRect","length","y","height","findIndex","rect"],"mappings":";;;;;;;;;AACA;;AAEe,SAASA,oBAAT,CACbC,UADa,EAEb;AAAEC,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAFa,EAGb;AACA,QAAMC,QAAQ,GAAG,gCAAkBH,UAAlB,EAA8B;AAAEC,IAAAA;AAAF,GAA9B,CAAjB;AACA,QAAMG,WAAW,GAAGD,QAAQ,CAACA,QAAQ,CAACE,MAAT,GAAkB,CAAnB,CAA5B;;AAEA,MAAIH,OAAO,GAAGC,QAAQ,CAAC,CAAD,CAAR,CAAYG,CAAZ,GAAgBH,QAAQ,CAAC,CAAD,CAAR,CAAYI,MAA1C,EAAkD;AAChD,WAAO,CAAP;AACD;;AAED,MAAIH,WAAW,CAACE,CAAZ,GAAgBJ,OAApB,EAA6B;AAC3B,WAAOC,QAAQ,CAACE,MAAT,GAAkB,CAAzB;AACD;;AAED,SAAOF,QAAQ,CAACK,SAAT,CAAoBC,IAAD,IAAU;AAClC,WAAOA,IAAI,CAACH,CAAL,GAASJ,OAAhB;AACD,GAFM,IAEF,CAFL;AAGD","sourcesContent":["import Table from '../../mo/models';\nimport getAllRowsDomRect from './getAllRowsDomRect';\n\nexport default function getRowIndexByClientY(\n  controller,\n  { node, clientY }: { node: Table; clientY: number },\n) {\n  const rowsRect = getAllRowsDomRect(controller, { node }) as DOMRect[];\n  const lastRowRect = rowsRect[rowsRect.length - 1];\n\n  if (clientY < rowsRect[0].y + rowsRect[0].height) {\n    return 0;\n  }\n\n  if (lastRowRect.y < clientY) {\n    return rowsRect.length - 1;\n  }\n\n  return rowsRect.findIndex((rect) => {\n    return rect.y > clientY;\n  }) - 1;\n}\n"],"file":"getRowIndexByClientY.js"}