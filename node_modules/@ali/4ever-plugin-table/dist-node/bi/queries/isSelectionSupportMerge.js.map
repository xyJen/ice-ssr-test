{"version":3,"sources":["../../../../src/bi/queries/isSelectionSupportMerge.ts"],"names":["isSelectionSupportMerge","controller","node","table","visible","tableSelection","value","has2VisibleCell","selection","canMerge","query"],"mappings":";;;;;;;;;AAEA;;AACA;;AACA;;AAEe,SAASA,uBAAT,CACbC,UADa,EAEb;AAAEC,EAAAA,IAAI,EAAEC,KAAR;AAAeC,EAAAA;AAAf,CAFa,EAGb;AACA,MAAI,CAACD,KAAL,EAAY;AACV,WAAO,KAAP;AACD;;AACD,QAAME,cAAc,GAAG,2CAA6BJ,UAA7B,EAAyCE,KAAzC,KACrB,iDAAmCF,UAAU,CAACK,KAA9C,EAAqDH,KAArD,CADF;;AAGA,MAAI,CAACE,cAAL,EAAqB;AACnB,WAAO,KAAP;AACD;;AAED,QAAME,eAAe,GAAG,8BAAgB,CAAhB,EAAmB,SAAnB,EAA8B;AACpDH,IAAAA,OADoD;AAEpDD,IAAAA,KAFoD;AAGpDK,IAAAA,SAAS,EAAEH;AAHyC,GAA9B,CAAxB;;AAKA,MAAI,CAACE,eAAL,EAAsB;AACpB,WAAO,KAAP;AACD;;AAED,QAAME,QAAQ,GAAGR,UAAU,CAACS,KAAX,CACf,4BADe,EAEf;AAAER,IAAAA,IAAI,EAAEC,KAAR;AAAeE,IAAAA;AAAf,GAFe,CAAjB;AAIA,SAAOI,QAAP;AACD","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport Table from '../../mo/models';\nimport isMoreThanNCell from '../utils/isMoreThanNCell';\nimport createTableSelectionForFocusedCell from '../utils/createTableSelectionForFocusedCell';\nimport getDataTableSelectionByTable from '../utils/getDataTableSelectionByTable';\n\nexport default function isSelectionSupportMerge(\n  controller: Controller,\n  { node: table, visible }: { node: Table; visible: boolean },\n) {\n  if (!table) {\n    return false;\n  }\n  const tableSelection = getDataTableSelectionByTable(controller, table) ||\n    createTableSelectionForFocusedCell(controller.value, table);\n\n  if (!tableSelection) {\n    return false;\n  }\n\n  const has2VisibleCell = isMoreThanNCell(2, 'visible', {\n    visible,\n    table,\n    selection: tableSelection,\n  });\n  if (!has2VisibleCell) {\n    return false;\n  }\n\n  const canMerge = controller.query(\n    'isAllSelectedCellsComplete',\n    { node: table, tableSelection },\n  );\n  return canMerge;\n}\n"],"file":"isSelectionSupportMerge.js"}