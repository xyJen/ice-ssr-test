{"version":3,"sources":["../../../../src/bi/utils/isMoreThanNCell.ts"],"names":["isMoreThanNCell","n","status","tableProps","visible","table","selection","hidden","count","r","startRowIndex","endRowIndex","row","nodes","c","startColIndex","endColIndex","cell","data"],"mappings":";;;;;;;AASe,SAASA,eAAT,CAAyBC,CAAzB,EAAoCC,MAApC,EAAoDC,UAApD,EAA4E;AACzF,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,KAAX;AAAkBC,IAAAA;AAAlB,MAAgCH,UAAtC;;AACA,MAAI,CAACC,OAAD,IAAY,CAACE,SAAb,IAA0B,CAACD,KAA/B,EAAsC;AACpC,WAAO,KAAP;AACD;;AAED,QAAME,MAAM,GAAGL,MAAM,KAAK,QAA1B;AAEA,MAAIM,KAAK,GAAG,CAAZ;;AACA,OAAK,IAAIC,CAAC,GAAGH,SAAS,CAACI,aAAvB,EAAsCD,CAAC,IAAIH,SAAS,CAACK,WAArD,EAAkEF,CAAC,IAAI,CAAvE,EAA0E;AACxE,UAAMG,GAAG,GAAGP,KAAK,CAACQ,KAAN,CAAYJ,CAAZ,CAAZ,CADwE,CAExE;;AACA,QAAI,CAACG,GAAG,EAAEC,KAAV,EAAiB;AACf;AACD;;AAED,SAAK,IAAIC,CAAC,GAAGR,SAAS,CAACS,aAAvB,EAAsCD,CAAC,IAAIR,SAAS,CAACU,WAArD,EAAkEF,CAAC,IAAI,CAAvE,EAA0E;AACxE,YAAMG,IAAI,GAAGL,GAAG,CAACC,KAAJ,CAAUC,CAAV,CAAb;;AACA,UAAI,CAACG,IAAL,EAAW;AACT;AACD;;AAED,UAAI,CAACA,IAAI,CAACC,IAAL,EAAWX,MAAX,IAAqB,KAAtB,MAAiCA,MAArC,EAA6C;AAC3CC,QAAAA,KAAK,IAAI,CAAT;AACD;;AACD,UAAIA,KAAK,IAAIP,CAAb,EAAgB;AACd,eAAO,IAAP;AACD;AACF;AACF;;AACD,SAAO,KAAP;AACD","sourcesContent":["import Table from '../../mo/models';\nimport { ITableSelection } from '../types';\n\ninterface tableProps {\n  visible: boolean;\n  table: Table | null;\n  selection: ITableSelection;\n}\n\nexport default function isMoreThanNCell(n: number, status: string, tableProps: tableProps) {\n  const { visible, table, selection } = tableProps;\n  if (!visible || !selection || !table) {\n    return false;\n  }\n\n  const hidden = status === 'hidden';\n\n  let count = 0;\n  for (let r = selection.startRowIndex; r <= selection.endRowIndex; r += 1) {\n    const row = table.nodes[r];\n    // 多人编辑时，A 拖动完选区后，再点击右键时，B 可能已经把表格选区的部分行列删除了\n    if (!row?.nodes) {\n      break;\n    }\n\n    for (let c = selection.startColIndex; c <= selection.endColIndex; c += 1) {\n      const cell = row.nodes[c];\n      if (!cell) {\n        break;\n      }\n\n      if ((cell.data?.hidden || false) === hidden) {\n        count += 1;\n      }\n      if (count >= n) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n"],"file":"isMoreThanNCell.js"}