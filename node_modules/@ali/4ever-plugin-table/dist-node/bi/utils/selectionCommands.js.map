{"version":3,"sources":["../../../../src/bi/utils/selectionCommands.ts"],"names":["moveToStartOfPreviousSibling","controller","table","prevBlock","value","document","getPreviousSibling","key","selection","s","moveToStartOfNode","command","Commands","select","moveToStartOfNextSibling","nextBlock","getNextSibling","moveToEndOfNode","moveToBeforeOfTable","moveToAfterOfTable","moveToStartOfCell","rowIndex","colIndex","maxRowIndex","nodes","length","rowI","Math","min","max","maxColIndex","colI","cell"],"mappings":"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","sourcesContent":["import { Commands, Controller } from '@ali/4ever-cangjie';\nimport Table from '../../mo/models';\nimport getRealNodeInTable from './getRealNodeInTable';\nimport setSelectionByTable from '../../utils/utils/setSelectionByTable';\n\nexport function moveToStartOfPreviousSibling(controller: Controller, table: Table) {\n  const prevBlock = controller.value.document.getPreviousSibling(table.key);\n  const { selection } = controller.value;\n  let s = selection.moveToStartOfNode(table, controller);\n  if (prevBlock) {\n    s = selection.moveToStartOfNode(prevBlock, controller);\n  }\n  return controller.command(\n    Commands.select,\n    setSelectionByTable(s, false),\n  );\n}\n\nexport function moveToStartOfNextSibling(controller: Controller, table: Table) {\n  const nextBlock = controller.value.document.getNextSibling(table.key);\n  const { selection } = controller.value;\n  let s = selection.moveToEndOfNode(table, controller);\n  if (nextBlock) {\n    s = selection.moveToStartOfNode(nextBlock, controller);\n  }\n  return controller.command(\n    Commands.select,\n    setSelectionByTable(s, false),\n  );\n}\n\nexport function moveToBeforeOfTable(controller: Controller, table: Table) {\n  const { selection } = controller.value;\n  const s = selection.moveToStartOfNode(table, controller);\n  return controller.command(\n    Commands.select,\n    setSelectionByTable(s, false),\n  );\n}\n\nexport function moveToAfterOfTable(controller: Controller, table: Table) {\n  const { selection } = controller.value;\n  const s = selection.moveToEndOfNode(table, controller);\n  return controller.command(\n    Commands.select,\n    setSelectionByTable(s, false),\n  );\n}\n\nexport function moveToStartOfCell(controller: Controller, table: Table, rowIndex: number, colIndex: number) {\n  const maxRowIndex = table.nodes.length - 1;\n  const rowI = Math.min(maxRowIndex, Math.max(0, rowIndex));\n  const maxColIndex = table.nodes[rowI].nodes.length - 1;\n  const colI = Math.min(maxColIndex, Math.max(0, colIndex));\n\n  const cell = getRealNodeInTable(table, rowI, colI);\n  if (!cell) return controller;\n\n  const { selection } = controller.value;\n  const s = selection.moveToStartOfNode(cell, controller);\n  return controller.command(\n    Commands.select,\n    setSelectionByTable(s, false),\n  );\n}\n"],"file":"selectionCommands.js"}