{"version":3,"sources":["../../../../src/bi/utils/getSelectedRangeFromTableSelection.ts"],"names":["getSelectedRowRangeFromTableSelection","controller","table","tableSelection","includeTable","isSelectWholeTable","query","node","startRowIndex","endRowIndex","startColIndex","endColIndex","Array","isArray","data","colsWidth","maxCol","length","start","end","getSelectedColRangeFromTableSelection","nodes","max"],"mappings":";;;;;;;AAIO,MAAMA,qCAAqC,GAAG,CAAC;AACpDC,EAAAA,UADoD;AAEpDC,EAAAA,KAFoD;AAGpDC,EAAAA,cAHoD;AAIpDC,EAAAA,YAAY,GAAG;AAJqC,CAAD,KAU/C;AACJ,MAAI,CAACD,cAAL,EAAqB;AACnB,WAAO,IAAP;AACD;;AACD,QAAME,kBAAkB,GAAGJ,UAAU,CAACK,KAAX,CAAiB,oBAAjB,EAAuC;AAChEC,IAAAA,IAAI,EAAEL;AAD0D,GAAvC,CAA3B;;AAGA,MAAI,CAACE,YAAD,IAAiBC,kBAArB,EAAyC;AACvC,WAAO,IAAP;AACD;;AAED,QAAM;AACJG,IAAAA,aADI;AAEJC,IAAAA,WAFI;AAGJC,IAAAA,aAHI;AAIJC,IAAAA;AAJI,MAKFR,cALJ;;AAMA,MAAI,CAACS,KAAK,CAACC,OAAN,CAAcX,KAAK,CAACY,IAAN,EAAYC,SAA1B,CAAL,EAA2C;AACzC,WAAO,IAAP;AACD;;AACD,QAAMC,MAAM,GAAGd,KAAK,CAACY,IAAN,CAAWC,SAAX,CAAqBE,MAArB,GAA8B,CAA7C;;AACA,MACGP,aAAa,KAAK,CAAlB,IAAuBC,WAAW,KAAKK,MAAxC,IACCN,aAAa,KAAKM,MAAlB,IAA4BL,WAAW,KAAK,CAD7C,IAEAN,kBAHF,EAIE;AACA,WAAO;AACLa,MAAAA,KAAK,EAAEV,aADF;AAELW,MAAAA,GAAG,EAAEV;AAFA,KAAP;AAID;;AACD,SAAO,IAAP;AACD,CA1CM;;;;AA4CA,MAAMW,qCAAqC,GAAG,CAAC;AACpDnB,EAAAA,UADoD;AAEpDC,EAAAA,KAFoD;AAGpDC,EAAAA,cAHoD;AAIpDC,EAAAA,YAAY,GAAG;AAJqC,CAAD,KAU/C;AACJ,MAAI,CAACD,cAAL,EAAqB;AACnB,WAAO,IAAP;AACD;;AACD,QAAME,kBAAkB,GAAGJ,UAAU,CAACK,KAAX,CAAiB,oBAAjB,EAAuC;AAChEC,IAAAA,IAAI,EAAEL;AAD0D,GAAvC,CAA3B;;AAGA,MAAI,CAACE,YAAD,IAAiBC,kBAArB,EAAyC;AACvC,WAAO,IAAP;AACD;;AAED,QAAM;AACJG,IAAAA,aADI;AAEJC,IAAAA,WAFI;AAGJC,IAAAA,aAHI;AAIJC,IAAAA;AAJI,MAKFR,cALJ;;AAMA,MAAI,CAACS,KAAK,CAACC,OAAN,CAAcX,KAAK,CAACmB,KAApB,CAAL,EAAiC;AAC/B,WAAO,IAAP;AACD;;AACD,QAAMC,GAAG,GAAGpB,KAAK,CAACmB,KAAN,CAAYJ,MAAZ,GAAqB,CAAjC;;AACA,MACGT,aAAa,KAAK,CAAlB,IAAuBC,WAAW,KAAKa,GAAxC,IACCd,aAAa,KAAKc,GAAlB,IAAyBb,WAAW,KAAK,CAD1C,IAEAJ,kBAHF,EAIE;AACA,WAAO;AACLa,MAAAA,KAAK,EAAER,aADF;AAELS,MAAAA,GAAG,EAAER;AAFA,KAAP;AAID;;AACD,SAAO,IAAP;AACD,CA1CM","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport Table from '../../mo/models';\nimport { ITableSelection } from '../types';\n\nexport const getSelectedRowRangeFromTableSelection = ({\n  controller,\n  table,\n  tableSelection,\n  includeTable = false,\n}: {\n  controller: Controller;\n  table: Table;\n  tableSelection: ITableSelection | null;\n  includeTable?: boolean;\n}) => {\n  if (!tableSelection) {\n    return null;\n  }\n  const isSelectWholeTable = controller.query('isSelectWholeTable', {\n    node: table,\n  });\n  if (!includeTable && isSelectWholeTable) {\n    return null;\n  }\n\n  const {\n    startRowIndex,\n    endRowIndex,\n    startColIndex,\n    endColIndex,\n  } = tableSelection as ITableSelection;\n  if (!Array.isArray(table.data?.colsWidth)) {\n    return null;\n  }\n  const maxCol = table.data.colsWidth.length - 1;\n  if (\n    (startColIndex === 0 && endColIndex === maxCol) ||\n    (startColIndex === maxCol && endColIndex === 0) ||\n    isSelectWholeTable\n  ) {\n    return {\n      start: startRowIndex,\n      end: endRowIndex,\n    };\n  }\n  return null;\n};\n\nexport const getSelectedColRangeFromTableSelection = ({\n  controller,\n  table,\n  tableSelection,\n  includeTable = false,\n}: {\n  controller: Controller;\n  table: Table;\n  tableSelection: ITableSelection | null;\n  includeTable?: boolean;\n}) => {\n  if (!tableSelection) {\n    return null;\n  }\n  const isSelectWholeTable = controller.query('isSelectWholeTable', {\n    node: table,\n  });\n  if (!includeTable && isSelectWholeTable) {\n    return null;\n  }\n\n  const {\n    startRowIndex,\n    endRowIndex,\n    startColIndex,\n    endColIndex,\n  } = tableSelection as ITableSelection;\n  if (!Array.isArray(table.nodes)) {\n    return null;\n  }\n  const max = table.nodes.length - 1;\n  if (\n    (startRowIndex === 0 && endRowIndex === max) ||\n    (startRowIndex === max && endRowIndex === 0) ||\n    isSelectWholeTable\n  ) {\n    return {\n      start: startColIndex,\n      end: endColIndex,\n    };\n  }\n  return null;\n};\n"],"file":"getSelectedRangeFromTableSelection.js"}