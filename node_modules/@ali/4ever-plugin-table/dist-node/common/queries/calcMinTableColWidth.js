"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = calcMinTableColWidth;

var _models = _interopRequireDefault(require("../../mo/models"));

function calcMinTableColWidth(controller, payload) {
  const {
    node,
    colIndex
  } = payload;
  let key;
  let width;
  _models.default.isTable(node) && node?.nodes.forEach(row => {
    if (!Array.isArray(row.nodes)) {
      return;
    }

    const cell = row.nodes[colIndex];

    if (!cell) {
      return;
    }

    if (!cell.forEachDescendant) {
      return;
    }

    cell.forEachDescendant(n => {
      const colWidth = controller.query('getMinTableColWidth', {
        node: n
      });

      if (typeof colWidth === 'number') {
        width = Math.max(colWidth, width || 0);
        key = n.key;
      }
    });
  });
  return {
    key,
    width
  };
}
//# sourceMappingURL=calcMinTableColWidth.js.map