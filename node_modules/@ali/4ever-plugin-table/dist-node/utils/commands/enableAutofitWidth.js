"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = enableAutofitWidth;

var _everCangjie = require("@ali/4ever-cangjie");

var _models = _interopRequireDefault(require("../../mo/models"));

var _filterValidData = _interopRequireDefault(require("../utils/filterValidData"));

var _constants = require("../constants");

function enableAutofitWidth(controller, table, enable = true) {
  const isAutofit = _models.default.isAutofitWidth(table);

  if (enable === isAutofit) return controller;
  const data = { ...table.data
  };

  if (enable) {
    data.tblW = {
      w: _constants.DEFAULT_PCT_WIDTH,
      type: 'pct'
    };
  } else {
    delete data.tblW;
  }

  return controller.command(_everCangjie.Commands.setNodeByKey, table.key, {
    data: (0, _filterValidData.default)(data)
  });
}
//# sourceMappingURL=enableAutofitWidth.js.map