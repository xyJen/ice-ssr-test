{"version":3,"sources":["../../../../../src/bi/components/toolbarButtons/tableFitWidthButton.tsx"],"names":["React","TableWidthFitContainerButton","resizeTableWidthFitContainer","getTableSelection","isTable","TableFitWidthButton","props","controller","locale","selection","node","value","document","getNode","key","handleMenuEvent","run","query","needRender"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;qBAC4B,a;AAC5B,OAAOC,4BAAP;AACA,SAASC,4BAAT;AACA,OAAOC,iBAAP;AACA,SAASC,OAAT;AAOA,eAAe,SAASC,mBAAT,CAA6BC,KAA7B,EAA8D;AAAA,MACnEC,UADmE,GAC5CD,KAD4C,CACnEC,UADmE;AAAA,MACvDC,MADuD,GAC5CF,KAD4C,CACvDE,MADuD;AAE3E,MAAMC,SAAS,GAAGN,iBAAiB,CAACI,UAAD,CAAnC;AACA,MAAI,CAACE,SAAL,EAAgB,OAAO,IAAP;AAChB,MAAMC,IAAI,GAAGH,UAAU,CAACI,KAAX,CAAiBC,QAAjB,CAA0BC,OAA1B,CAAkCJ,SAAS,CAACK,GAA5C,CAAb;AACA,MAAI,EAAEJ,IAAI,IAAIN,OAAO,CAACM,IAAD,CAAjB,CAAJ,EAA8B,OAAO,IAAP;;AAE9B,MAAMK,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5BR,IAAAA,UAAU,CAACS,GAAX,CAAe,UAAf,EAA2Bd,4BAA4B,CAACQ,IAAD,CAAvD;AACD,GAFD;;AAIA,MAAIH,UAAU,CAACU,KAAX,CAAiB,oBAAjB,EAAuC;AAAEP,IAAAA,IAAI,EAAJA;AAAF,GAAvC,CAAJ,EAAsD;AACpD,wBACE,eAAC,4BAAD;AACE,MAAA,MAAM,EAAEF,MADV;AAEE,MAAA,WAAW,EAAEO;AAFf,MADF;AAMD;;AACD,SAAO,IAAP;AACD;;AAEDV,mBAAmB,CAACa,UAApB,GAAiC,UAAUX,UAAV,EAAkC;AACjE,MAAME,SAAS,GAAGN,iBAAiB,CAACI,UAAD,CAAnC;AACA,MAAI,CAACE,SAAL,EAAgB,OAAO,KAAP;AAChB,MAAMC,IAAI,GAAGH,UAAU,CAACI,KAAX,CAAiBC,QAAjB,CAA0BC,OAA1B,CAAkCJ,SAAS,CAACK,GAA5C,CAAb;AACA,MAAI,EAAEJ,IAAI,IAAIN,OAAO,CAACM,IAAD,CAAjB,CAAJ,EAA8B,OAAO,KAAP;AAC9B,SAAOH,UAAU,CAACU,KAAX,CAAiB,oBAAjB,EAAuC;AAAEP,IAAAA,IAAI,EAAJA;AAAF,GAAvC,CAAP;AACD,CAND","sourcesContent":["import React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport TableWidthFitContainerButton from '../cornerToolbar/tableWidthFitContainerButton';\nimport { resizeTableWidthFitContainer } from '../../actions';\nimport getTableSelection from '../../utils/getTableSelection';\nimport { isTable, TableLocale } from '../../types';\n\nexport interface TableFitWidthButtonProps {\n  controller: Controller;\n  locale?: TableLocale;\n}\n\nexport default function TableFitWidthButton(props: TableFitWidthButtonProps) {\n  const { controller, locale } = props;\n  const selection = getTableSelection(controller);\n  if (!selection) return null;\n  const node = controller.value.document.getNode(selection.key);\n  if (!(node && isTable(node))) return null;\n\n  const handleMenuEvent = () => {\n    controller.run('onAction', resizeTableWidthFitContainer(node));\n  };\n\n  if (controller.query('isSelectWholeTable', { node })) {\n    return (\n      <TableWidthFitContainerButton\n        locale={locale}\n        onMenuEvent={handleMenuEvent}\n      />\n    );\n  }\n  return null;\n}\n\nTableFitWidthButton.needRender = function (controller: Controller) {\n  const selection = getTableSelection(controller);\n  if (!selection) return false;\n  const node = controller.value.document.getNode(selection.key);\n  if (!(node && isTable(node))) return false;\n  return controller.query('isSelectWholeTable', { node });\n};\n"],"file":"tableFitWidthButton.js"}