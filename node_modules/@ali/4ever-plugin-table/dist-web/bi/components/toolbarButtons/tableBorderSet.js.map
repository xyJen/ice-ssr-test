{"version":3,"sources":["../../../../../src/bi/components/toolbarButtons/tableBorderSet.tsx"],"names":["React","BorderSet","TableRole","PluginRoles","setTableBorder","getTable","getTableSelection","setColorPanelMode","lineMap","DEFAULT_TABLE_BORDER_STYLE","TableBorderSet","props","controller","size","showTitle","value","table","selection","setBorder","borderType","borderColor","borderStyle","val","lineType","sz","run","style","height","getColorPanelMode","useCallback","query","mode","handleSelectValueChange","tableBorder"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;qBAC4B,a;AAC5B,SAASC,SAAT,QAA2C,iBAA3C;AACA,SAASC,SAAS,IAAIC,WAAtB;AACA,SAASC,cAAT;AACA,OAAOC,QAAP;AACA,OAAOC,iBAAP;AACA,SAASC,iBAAT,QAAkC,wBAAlC;AACA,SAASC,OAAT,EAAkBC,0BAAlB;AAEA,eAAe,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAAA,MACpCC,UADoC,GACJD,KADI,CACpCC,UADoC;AAAA,MACxBC,IADwB,GACJF,KADI,CACxBE,IADwB;AAAA,MAClBC,SADkB,GACJH,KADI,CAClBG,SADkB;AAAA,MAEpCC,KAFoC,GAE1BH,UAF0B,CAEpCG,KAFoC;AAG5C,MAAMC,KAAK,GAAGX,QAAQ,CAACU,KAAD,CAAtB;AACA,MAAME,SAAS,GAAGX,iBAAiB,CAACM,UAAD,CAAnC;;AAEA,MAAMM,SAAS,GAAG,SAAZA,SAAY,OAA8C;AAAA,QAA3CC,UAA2C,QAA3CA,UAA2C;AAAA,QAA/BC,WAA+B,QAA/BA,WAA+B;AAAA,QAAlBC,WAAkB,QAAlBA,WAAkB;AAC9D,QAAMC,GAAG,GAAGd,OAAO,CAACa,WAAD,CAAP,CAAqBE,QAAjC;AACA,QAAMC,EAAE,GAAGhB,OAAO,CAACa,WAAD,CAAP,CAAqBR,IAAhC;;AACA,QAAIG,KAAJ,EAAW;AACTJ,MAAAA,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BrB,cAAc,CAACY,KAAD,EAAiBC,SAAjB,EAA4BE,UAA5B,EAAwCC,WAAxC,EAAqDI,EAArD,EAAyDF,GAAzD,CAAzC;AACD;AACF,GAND,CAN4C,CAc5C;;;AACA,MAAMI,KAA0B,GAAG,EAAnC;;AACA,MAAIf,KAAK,CAACE,IAAN,KAAe,OAAnB,EAA4B;AAC1Ba,IAAAA,KAAK,CAACC,MAAN,GAAe,EAAf;AACD;;AAED,MAAMC,iBAAiB,GACrB5B,KAAK,CAAC6B,WAAN,CAAkB;AAAA;;AAAA,gCAAMjB,UAAU,CAACkB,KAAX,CAAiB,mBAAjB,CAAN,qBAAM,kBAAuCC,IAA7C;AAAA,GAAlB,EAAqE,CAACnB,UAAD,CAArE,CADF;AAGA,MAAMoB,uBAAuB,GAAGhC,KAAK,CAAC6B,WAAN,CAAkB,UAACE,IAAD,EAA2B;AAC3EnB,IAAAA,UAAU,CAACa,GAAX,CAAe,UAAf,EAA2BlB,iBAAiB,CAAC;AAAEwB,MAAAA,IAAI,EAAJA;AAAF,KAAD,CAA5C;AACD,GAF+B,EAE7B,CAACnB,UAAD,CAF6B,CAAhC;AAIA,sBACE,eAAC,SAAD;AACE,IAAA,IAAI,EAAEC,IADR;AAEE,IAAA,SAAS,EAAEC,SAFb;AAGE,IAAA,YAAY,EAAEN,OAHhB,CAIE;AAJF;AAKE,IAAA,iBAAiB,EAAE,KALrB;AAME,IAAA,QAAQ,EAAEU,SANZ;AAOE,IAAA,kBAAkB,EAAET,0BAPtB;AAQE,IAAA,cAAc,EAAE,EARlB;AASE,IAAA,OAAO,EAAES,SATX;AAUE,IAAA,IAAI,EAAEf,WAAW,CAAC8B,WAVpB;AAWE,IAAA,gBAAgB,MAXlB;AAYE,IAAA,iBAAiB,EAAEL,iBAZrB;AAaE,IAAA,mBAAmB,EAAEI;AAbvB,IADF;AAiBD","sourcesContent":["import React from 'react';\nimport { Block } from '@ali/4ever-cangjie';\nimport { BorderSet, EColorPanelMode } from '@ali/we-toolbar';\nimport { TableRole as PluginRoles } from '../../../utils/role';\nimport { setTableBorder } from '../../actions';\nimport getTable from '../../utils/getTable';\nimport getTableSelection from '../../utils/getTableSelection';\nimport { setColorPanelMode } from '@ali/4ever-plugin-pref';\nimport { lineMap, DEFAULT_TABLE_BORDER_STYLE } from '../../../utils/constants';\n\nexport default function TableBorderSet(props) {\n  const { controller, size, showTitle } = props;\n  const { value } = controller;\n  const table = getTable(value);\n  const selection = getTableSelection(controller);\n\n  const setBorder = ({ borderType, borderColor, borderStyle }) => {\n    const val = lineMap[borderStyle].lineType;\n    const sz = lineMap[borderStyle].size;\n    if (table) {\n      controller.run('onAction', setTableBorder(table as Block, selection, borderType, borderColor, sz, val));\n    }\n  };\n\n  // TODO: BorderSet 不支持size=small，先用style覆盖\n  const style: React.CSSProperties = {};\n  if (props.size === 'small') {\n    style.height = 24;\n  }\n\n  const getColorPanelMode =\n    React.useCallback(() => controller.query('getColorPanelMode')?.mode, [controller]);\n\n  const handleSelectValueChange = React.useCallback((mode: EColorPanelMode) => {\n    controller.run('onAction', setColorPanelMode({ mode }));\n  }, [controller]);\n\n  return (\n    <BorderSet\n      size={size}\n      showTitle={showTitle}\n      borderStyles={lineMap}\n      // @ts-ignore 组件没有 supportConfigSize 属性\n      supportConfigSize={false}\n      onChange={setBorder}\n      defaultBorderStyle={DEFAULT_TABLE_BORDER_STYLE}\n      borderIconSize={20}\n      onClick={setBorder}\n      role={PluginRoles.tableBorder}\n      showToggleSelect\n      getColorPanelMode={getColorPanelMode}\n      onSelectValueChange={handleSelectValueChange}\n    />\n  );\n}\n"],"file":"tableBorderSet.js"}