{"version":3,"sources":["../../../../../src/bi/components/toolbarButtons/tablePickerButton.tsx"],"names":["React","TablePanel","TableButton","TableRole","PluginRoles","isSelectionInTableCell","insertTable","TablePickerButton","props","controller","locale","toolbarMode","rest","value","tableSelection","query","isDisabled","selection","isBlurred","data","edgeSelection","handleChange","useCallback","row","col","run","tablePanel","useMemo","tablePicker"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAC5B,SAASC,UAAT,QAA2B,gBAA3B;AACA,SAASC,WAAT,QAA4B,iBAA5B;AACA,SAASC,SAAS,IAAIC,WAAtB;AACA,OAAOC,sBAAP;AACA,SAASC,WAAT;AASA,eAAe,SAASC,iBAAT,CAA2BC,KAA3B,EAA0D;AAAA,MAC/DC,UAD+D,GAClBD,KADkB,CAC/DC,UAD+D;AAAA,MACnDC,MADmD,GAClBF,KADkB,CACnDE,MADmD;AAAA,MAC3CC,WAD2C,GAClBH,KADkB,CAC3CG,WAD2C;AAAA,MAC3BC,IAD2B,iCAClBJ,KADkB;;AAAA,MAE/DK,KAF+D,GAErDJ,UAFqD,CAE/DI,KAF+D;AAGvE,MAAMC,cAAc,GAAGL,UAAU,CAACM,KAAX,CAAiB,mBAAjB,CAAvB,CAHuE,CAIvE;;AACA,MAAMC,UAAU,GAAGH,KAAK,CAACI,SAAN,CAAgBC,SAAhB,IACZL,KAAK,CAACM,IAAN,CAAWC,aADC,IAEZN,cAFY,IAGZT,sBAAsB,CAACQ,KAAD,CAHV,IAIZJ,UAAU,CAACM,KAAX,CAAiB,mBAAjB,CAJY,IAKZN,UAAU,CAACM,KAAX,CAAiB,sBAAjB,CALY,IAMZN,UAAU,CAACM,KAAX,CAAiB,yBAAjB,CANP;AAQA,MAAMM,YAAY,GAAGrB,KAAK,CAACsB,WAAN,CAAkB,UAACC,GAAD,EAAcC,GAAd,EAA8B;AACnEf,IAAAA,UAAU,CAACgB,GAAX,CAAe,UAAf,EAA2BnB,WAAW,CAACiB,GAAD,EAAMC,GAAN,CAAtC;AACD,GAFoB,EAElB,CAACf,UAAD,CAFkB,CAArB;;AAbuE,0BAkBrE,eAAC,UAAD;AACE,IAAA,GAAG,EAAE,EADP;AAEE,IAAA,GAAG,EAAE,EAFP;AAGE,IAAA,MAAM,EAAEY;AAHV,IAlBqE;;AAiBvE,MAAMK,UAAU,GAAG1B,KAAK,CAAC2B,OAAN,CAAc;AAAA;AAAA,GAAd,EAMhB,CAACN,YAAD,CANgB,CAAnB;AAOA,sBACE,eAAC,WAAD,eACMT,IADN;AAEE,IAAA,MAAM,EAAC,yBAFT;AAGE,IAAA,OAAO,EAAEc,UAHX;AAIE,IAAA,QAAQ,EAAEV,UAJZ;AAKE,IAAA,SAAS,EAAE,IALb;AAME,IAAA,IAAI,EAAEZ,WAAW,CAACwB;AANpB,KADF;AAUD","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { TablePanel } from '@ali/we-design';\nimport { TableButton } from '@ali/we-toolbar';\nimport { TableRole as PluginRoles } from '../../../utils/role';\nimport isSelectionInTableCell from '../../utils/isSelectionInTableCell';\nimport { insertTable } from '../../actions';\nimport { ToolbarMode } from '@ali/4ever-component';\n\nexport interface TablePickerButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n  toolbarMode?: ToolbarMode;\n}\n\nexport default function TablePickerButton(props: TablePickerButtonProps) {\n  const { controller, locale, toolbarMode, ...rest } = props;\n  const { value } = controller;\n  const tableSelection = controller.query('hasTableSelection');\n  // @ts-ignore\n  const isDisabled = value.selection.isBlurred\n      || value.data.edgeSelection\n      || tableSelection\n      || isSelectionInTableCell(value)\n      || controller.query('isSelectionInLink')\n      || controller.query('isSelectionInMention')\n      || controller.query('isSelectionInListSymbol');\n\n  const handleChange = React.useCallback((row: number, col: number) => {\n    controller.run('onAction', insertTable(row, col));\n  }, [controller]);\n\n  const tablePanel = React.useMemo(() => (\n    <TablePanel\n      row={10}\n      col={10}\n      onPick={handleChange}\n    />\n  ), [handleChange]);\n  return (\n    <TableButton\n      {...rest}\n      testid=\"bi-toolbar-table-picker\"\n      overlay={tablePanel}\n      disabled={isDisabled}\n      autoClose={true}\n      role={PluginRoles.tablePicker}\n    />\n  );\n}\n"],"file":"tablePickerButton.js"}