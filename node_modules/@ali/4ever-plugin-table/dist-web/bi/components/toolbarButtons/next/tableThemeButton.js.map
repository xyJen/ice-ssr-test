{"version":3,"sources":["../../../../../../src/bi/components/toolbarButtons/next/tableThemeButton.tsx"],"names":["React","useCallback","TableThemeButton","TableThemeButtonComp","setTableBorder","getTable","getTableSelection","setTableCellFill","lineMap","DEFAULT_BORDER_COLOR","TableRole","PluginRoles","props","controller","locale","rest","value","table","selection","isDisabled","query","backgroundColor","borderColor","handleTableBorderColor","color","val","lineType","sz","size","layout","run","handleTableBgColorChange","fill","tableTheme","borderAndFillColor"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,QAAmC,OAAnC;qBAC4B,a;AAC5B,SAASC,gBAAgB,IAAIC,oBAA7B,QAAyD,sBAAzD;AAEA,SAASC,cAAT;AACA,OAAOC,QAAP;AACA,OAAOC,iBAAP;AACA,SAASC,gBAAT;AACA,SAASC,OAAT,EAAkBC,oBAAlB;AACA,SAASC,SAAS,IAAIC,WAAtB;AAQA,eAAe,SAAST,gBAAT,CAA0BU,KAA1B,EAAyD;AAAA,MAC9DC,UAD8D,GAC9BD,KAD8B,CAC9DC,UAD8D;AAAA,MAClDC,MADkD,GAC9BF,KAD8B,CAClDE,MADkD;AAAA,MACvCC,IADuC,iCAC9BH,KAD8B;;AAAA,MAE9DI,KAF8D,GAEpDH,UAFoD,CAE9DG,KAF8D;AAGtE,MAAMC,KAAK,GAAGZ,QAAQ,CAACW,KAAD,CAAtB;AACA,MAAME,SAAS,GAAGZ,iBAAiB,CAACO,UAAD,CAAnC;AAEA,MAAIM,UAAU,GAAG,EAAED,SAAS,IAAID,KAAf,CAAjB;;AANsE,aAO7BJ,UAAU,CAACO,KAAX,CAAiB,wBAAjB,KAA8C,EAPjB;AAAA,MAO9DC,eAP8D,QAO9DA,eAP8D;AAAA,MAO7CC,WAP6C,QAO7CA,WAP6C;;AAStE,MAAMC,sBAAsB,GAAGtB,WAAW,CAAC,UAACuB,KAAD,EAAW;AACpD,QAAMC,GAAG,GAAGjB,OAAO,CAAC,MAAD,CAAP,CAAgBkB,QAA5B;AACA,QAAMC,EAAE,GAAGnB,OAAO,CAAC,MAAD,CAAP,CAAgBoB,IAA3B;AACA,QAAMC,MAAM,GAAG,KAAf;;AAEA,QAAIZ,KAAJ,EAAW;AACTJ,MAAAA,UAAU,CAACiB,GAAX,CAAe,UAAf,EAA2B1B,cAAc,CAACa,KAAD,EAAiBC,SAAjB,EAA4BW,MAA5B,EAAoCL,KAApC,EAA2CG,EAA3C,EAA+CF,GAA/C,CAAzC;AACD;AACF,GARyC,EAQvC,CAACZ,UAAD,EAAaI,KAAb,EAAoBC,SAApB,CARuC,CAA1C;AAUA,MAAMa,wBAAwB,GAAG/B,KAAK,CAACC,WAAN,CAAkB,UAAC+B,IAAD,EAAkB;AACnEnB,IAAAA,UAAU,CAACiB,GAAX,CAAe,UAAf,EAA2BvB,gBAAgB,CAACU,KAAD,EAAQC,SAAR,EAAmBc,IAAnB,CAA3C;AACD,GAFgC,EAE9B,CAACnB,UAAD,EAAaI,KAAb,EAAoBC,SAApB,CAF8B,CAAjC;AAIA,sBACE,eAAC,oBAAD;AACE,IAAA,wBAAwB,EAAEK,sBAD5B;AAEE,IAAA,oBAAoB,EAAEQ,wBAFxB;AAGE,IAAA,mBAAmB,EAAC,EAHtB;AAIE,IAAA,uBAAuB,EAAEtB,oBAJ3B;AAKE,IAAA,QAAQ,EAAEU,UALZ;AAME,IAAA,YAAY,EAAEE,eANhB;AAOE,IAAA,gBAAgB,EAAEC,WAPpB;AAQE,IAAA,IAAI,EAAEX,WAAW,CAACsB,UARpB;AASE,IAAA,KAAK,EAAE,CAAAnB,MAAM,QAAN,YAAAA,MAAM,CAAEoB,kBAAR,KAA8B;AATvC,KAWOnB,IAXP,EADF;AAgBD","sourcesContent":["import React, { useCallback } from 'react';\nimport type { Block, Controller } from '@ali/4ever-cangjie';\nimport { TableThemeButton as TableThemeButtonComp } from '@ali/4ever-component';\nimport type { IToolbarButtonConfig } from '@ali/4ever-component';\nimport { setTableBorder } from '../../../actions';\nimport getTable from '../../../utils/getTable';\nimport getTableSelection from '../../../utils/getTableSelection';\nimport { setTableCellFill } from '../../../actions';\nimport { lineMap, DEFAULT_BORDER_COLOR } from '../../../../utils/constants';\nimport { TableRole as PluginRoles } from '../../../../utils/role';\n\nexport interface TableBorderButtonProps extends IToolbarButtonConfig {\n  controller: Controller;\n  locale?: Record<string, string>;\n}\n\n\nexport default function TableThemeButton(props: TableBorderButtonProps) {\n  const { controller, locale, ...rest } = props;\n  const { value } = controller;\n  const table = getTable(value);\n  const selection = getTableSelection(controller);\n\n  let isDisabled = !(selection && table)\n  const { backgroundColor, borderColor } = controller.query('getTableSelectionTheme') || {};\n\n  const handleTableBorderColor = useCallback((color) => {\n    const val = lineMap['Thin'].lineType;\n    const sz = lineMap['Thin'].size;\n    const layout = 'all';\n\n    if (table) {\n      controller.run('onAction', setTableBorder(table as Block, selection, layout, color, sz, val));\n    }\n  }, [controller, table, selection]);\n\n  const handleTableBgColorChange = React.useCallback((fill: string) => {\n    controller.run('onAction', setTableCellFill(table, selection, fill));\n  }, [controller, table, selection]);\n\n  return (\n    <TableThemeButtonComp\n      onTableBorderColorChange={handleTableBorderColor}\n      onTableBgColorChange={handleTableBgColorChange}\n      defaultTableBgColor=\"\"\n      defaultTableBorderColor={DEFAULT_BORDER_COLOR}\n      disabled={isDisabled}\n      tableBgColor={backgroundColor}\n      tableBorderColor={borderColor}\n      role={PluginRoles.tableTheme}\n      title={locale?.borderAndFillColor || 'Border and background color'}\n      {\n        ...rest\n      }\n    />\n  );\n}\n"],"file":"tableThemeButton.js"}