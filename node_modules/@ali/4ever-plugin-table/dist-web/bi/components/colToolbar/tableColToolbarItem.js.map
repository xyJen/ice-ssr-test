{"version":3,"sources":["../../../../../src/bi/components/colToolbar/tableColToolbarItem.tsx"],"names":["React","usePixelColsWidth","TOOLBAR_ITEM_SIZE","RowColToolbarItemRect","TableColToolbarItem","props","index","propsStyle","style","scale","activeRange","selectRanges","deleteRange","children","onRectUpdate","rest","ref","useRef","colsWidth","useEffect","dom","current","width","height","borderTopRightRadius","length"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAASC,iBAAT;AACA,SAASC,iBAAT;AACA,SAASC,qBAAT;AAkBA,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,KAAD,EAAmB;AAAA,MAElDC,KAFkD,GAWhDD,KAXgD,CAElDC,KAFkD;AAAA,MAG3CC,UAH2C,GAWhDF,KAXgD,CAGlDG,KAHkD;AAAA,qBAWhDH,KAXgD,CAIlDI,KAJkD;AAAA,MAIlDA,KAJkD,6BAI1C,CAJ0C;AAAA,MAKlDC,WALkD,GAWhDL,KAXgD,CAKlDK,WALkD;AAAA,MAMlDC,YANkD,GAWhDN,KAXgD,CAMlDM,YANkD;AAAA,MAOlDC,WAPkD,GAWhDP,KAXgD,CAOlDO,WAPkD;AAAA,MAQlDC,QARkD,GAWhDR,KAXgD,CAQlDQ,QARkD;AAAA,MASlDC,YATkD,GAWhDT,KAXgD,CASlDS,YATkD;AAAA,MAU/CC,IAV+C,iCAWhDV,KAXgD;;AAapD,MAAMW,GAAG,GAAGhB,KAAK,CAACiB,MAAN,CAA6B,IAA7B,CAAZ;;AAboD,2BAchChB,iBAAiB,EAde;AAAA,MAc7CiB,SAd6C;;AAgBpDlB,EAAAA,KAAK,CAACmB,SAAN,CAAgB,YAAM;AACpB,QAAMC,GAAG,GAAGJ,GAAG,CAACK,OAAhB;AACAP,IAAAA,YAAY,QAAZ,YAAAA,YAAY,CAAGR,KAAH,EAAUc,GAAV,CAAZ;AAEA,WAAO,YAAM;AACXN,MAAAA,YAAY,QAAZ,YAAAA,YAAY,CAAGR,KAAH,EAAUc,GAAV,EAAe,IAAf,CAAZ;AACD,KAFD;AAGD,GAPD;AASA,MAAME,KAAK,GAAGJ,SAAS,CAACZ,KAAD,CAAvB;;AACA,MAAME,KAA0B;AAC9Bc,IAAAA,KAAK,EAAEhB,KAAK,KAAK,CAAV,GAAcgB,KAAK,GAAG,CAAtB,GAA0BA,KADH;AAE9BC,IAAAA,MAAM,EAAErB,iBAAiB,GAAGO,KAFE;AAG9Be,IAAAA,oBAAoB,EAAElB,KAAK,KAAKY,SAAS,CAACO,MAAV,GAAmB,CAA7B,GAAiC,IAAIhB,KAArC,GAA6C,EAHrC;AAI9B,aAAO;AAJuB,KAK3BF,UAL2B,CAAhC;;AAQA,sBACE,eAAC,qBAAD;AACE,IAAA,GAAG,EAAES,GADP;AAEE,IAAA,KAAK,EAAEV,KAFT;AAGE,IAAA,IAAI,EAAC,KAHP;AAIE,IAAA,MAAM,EAAEY,SAAS,CAACO,MAJpB;AAKE,IAAA,KAAK,EAAEjB,KALT;AAME,IAAA,WAAW,EAAEE,WANf;AAOE,IAAA,YAAY,EAAEC,YAPhB;AAQE,IAAA,WAAW,EAAEC;AARf,KASMG,IATN,GAWGF,QAXH,CADF;AAeD,CAjDM","sourcesContent":["import * as React from 'react';\nimport { usePixelColsWidth } from '../../../utils/hooks';\nimport { TOOLBAR_ITEM_SIZE } from '../../constants';\nimport { RowColToolbarItemRect, Range } from '../rowColToolbarItemRect';\n\ntype IProps = {\n  index: number;\n  scale?: number;\n  // 选区所在行列\n  activeRange?: Range | null;\n  // 选中行列\n  selectRanges?: Range[] | null;\n  // 删除行列范围\n  deleteRange?: Range | null;\n  onRectUpdate?: (\n    index: number,\n    colNode: HTMLDivElement,\n    isDelete?: boolean,\n  ) => void;\n} & React.HTMLAttributes<HTMLDivElement>;\n\nexport const TableColToolbarItem = (props: IProps) => {\n  const {\n    index,\n    style: propsStyle,\n    scale = 1,\n    activeRange,\n    selectRanges,\n    deleteRange,\n    children,\n    onRectUpdate,\n    ...rest\n  } = props;\n\n  const ref = React.useRef<HTMLDivElement>(null);\n  const [colsWidth] = usePixelColsWidth();\n\n  React.useEffect(() => {\n    const dom = ref.current!;\n    onRectUpdate?.(index, dom);\n\n    return () => {\n      onRectUpdate?.(index, dom, true);\n    };\n  });\n\n  const width = colsWidth[index];\n  const style: React.CSSProperties = {\n    width: index === 0 ? width + 1 : width,\n    height: TOOLBAR_ITEM_SIZE / scale,\n    borderTopRightRadius: index === colsWidth.length - 1 ? 3 / scale : '',\n    float: 'left',\n    ...propsStyle,\n  };\n\n  return (\n    <RowColToolbarItemRect\n      ref={ref}\n      index={index}\n      type=\"col\"\n      length={colsWidth.length}\n      style={style}\n      activeRange={activeRange}\n      selectRanges={selectRanges}\n      deleteRange={deleteRange}\n      {...rest}\n    >\n      {children}\n    </RowColToolbarItemRect>\n  );\n};\n"],"file":"tableColToolbarItem.js"}