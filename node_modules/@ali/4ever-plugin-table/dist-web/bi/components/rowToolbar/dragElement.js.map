{"version":3,"sources":["../../../../../src/bi/components/rowToolbar/dragElement.tsx"],"names":["React","styled","THEME","MIN_ROW_HEIGHT","TOOLBAR_ITEM_SIZE","MIN_COL_WIDTH","HEADER_WIDTH","BackgroundLayer","div","p","visible","width","height","DragWrapper","dragBlue1","DragHeader","dragBlue0","DragElement","props","ref","renderHeight","renderWidth","forwardRef"],"mappings":"AAAA;AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAA4B,a;AAC5B,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SACEC,KADF,EAEEC,cAFF,EAGEC,iBAHF,EAIEC,aAJF;AAOA,IAAMC,YAAY,GAAGF,iBAArB;AAEA,IAAMG,eAAe,gBAAGN,MAAM,CAACO,GAAV,4QAMR,UAACC,CAAD;AAAA,SAAQA,CAAC,CAACC,OAAF,GAAY,OAAZ,GAAsB,MAA9B;AAAA,CANQ,EAOV,UAACD,CAAD;AAAA,SAAOA,CAAC,CAACE,KAAT;AAAA,CAPU,EAQNN,aAAa,GAAGC,YARV,EASN,MAAMA,YATA,EAUT,UAACG,CAAD;AAAA,SAAOA,CAAC,CAACG,MAAT;AAAA,CAVS,EAYLT,cAZK,EAcKG,YAdL,CAArB;AAqBA,IAAMO,WAAW,gBAAGZ,MAAM,CAACO,GAAV,mGAMDN,KAAK,CAACY,SANL,EAOKZ,KAAK,CAACY,SAPX,CAAjB;AAUA,IAAMC,UAAU,gBAAGd,MAAM,CAACO,GAAV,kEAELF,YAFK,EAGMJ,KAAK,CAACc,SAHZ,CAAhB;;wBAgCM,eAAC,WAAD,qBACE,eAAC,UAAD,OADF,C;;AAnBN,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAClBC,KADkB,EAElBC,GAFkB,EAGf;AAAA,uBACgDD,KADhD,CACKR,OADL;AAAA,MACKA,OADL,+BACe,KADf;AAAA,sBACgDQ,KADhD,CACsBN,MADtB;AAAA,MACsBA,MADtB,8BAC+B,CAD/B;AAAA,qBACgDM,KADhD,CACkCP,KADlC;AAAA,MACkCA,KADlC,6BAC0C,CAD1C;AAEH,MAAMS,YAAY,GAAGV,OAAO,GAAGE,MAAH,GAAY,CAAxC,CAFG,CAGH;AACA;;AACA,MAAMS,WAAW,GAAGX,OAAO,GAAGC,KAAH,GAAW,CAAtC;AAEA,sBACE,eAAC,eAAD;AACE,IAAA,GAAG,EAAEQ,GADP;AAEE,IAAA,OAAO,EAAET,OAFX;AAGE,IAAA,MAAM,EAAEU,YAHV;AAIE,IAAA,KAAK,EAAEC,WAJT;AAKE,mBAAY,4BALd;AAME,oBAAcX;AANhB,UADF;AAcD,CAxBD;;AA0BA,4BAAeV,KAAK,CAACsB,UAAN,CAAiBL,WAAjB,CAAf","sourcesContent":["/* eslint-disable react/no-find-dom-node */\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport {\n  THEME,\n  MIN_ROW_HEIGHT,\n  TOOLBAR_ITEM_SIZE,\n  MIN_COL_WIDTH,\n} from '../../constants';\n\nconst HEADER_WIDTH = TOOLBAR_ITEM_SIZE;\n\nconst BackgroundLayer = styled.div<{\n  visible: boolean;\n  height: number;\n  width: number;\n}>`\n  position: absolute;\n  display: ${(p) => (p.visible ? 'block' : 'none')};\n  width: ${(p) => p.width}px;\n  min-width: ${MIN_COL_WIDTH + HEADER_WIDTH}px;\n  max-width: ${160 + HEADER_WIDTH}px;\n  height: ${(p) => p.height}px;\n  max-height: 48px;\n  min-height: ${MIN_ROW_HEIGHT}px;\n  will-change: left, top;\n  transform: translate(-${HEADER_WIDTH}px, -50%);\n  z-index: 999;\n  cursor: move;\n  background-color: rgba(255, 255, 255, 0.9);\n  user-select: none;\n`;\n\nconst DragWrapper = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: ${THEME.dragBlue1};\n  border: 1px solid ${THEME.dragBlue1};\n`;\n\nconst DragHeader = styled.div`\n  height: 100%;\n  width: ${HEADER_WIDTH}px;\n  background-color: ${THEME.dragBlue0};\n  opacity: 0.5;\n`;\n\ninterface Props {\n  visible: boolean;\n  height: number;\n  width: number;\n}\n\nconst DragElement = (\n  props: Props,\n  ref: React.Ref<HTMLDivElement>,\n) => {\n  const { visible = false, height = 0, width = 0 } = props;\n  const renderHeight = visible ? height : 0;\n  // PERF: width 是表格宽度，自适应表格宽度可能高频变化。\n  // 所以在组件不渲染时，将 render width 置为常量，避免动态 styled-components\n  const renderWidth = visible ? width : 0;\n\n  return (\n    <BackgroundLayer\n      ref={ref}\n      visible={visible}\n      height={renderHeight}\n      width={renderWidth}\n      data-testid=\"table-row-drag-placeholder\"\n      data-visible={visible}\n    >\n      <DragWrapper>\n        <DragHeader />\n      </DragWrapper>\n    </BackgroundLayer>\n  );\n};\n\nexport default React.forwardRef(DragElement);\n"],"file":"dragElement.js"}