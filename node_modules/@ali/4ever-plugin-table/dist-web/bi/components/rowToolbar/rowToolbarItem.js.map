{"version":3,"sources":["../../../../../src/bi/components/rowToolbar/rowToolbarItem.tsx"],"names":["React","STICKY_ROW_TOP_HEIGHT","TOOLBAR_ITEM_SIZE","hooks","RowColToolbarItemRect","useScrollableContainerRect","RowToolbarItem","props","style","propsStyle","index","table","rowHeight","scale","isSticky","deleteRange","selectRanges","activeRange","width","children","rest","scrollRect","rowsLength","nodes","length","height","borderBottomLeftRadius","wrapperStyle","borderLeftWidth","borderLeft","transform","position","top","Number","isFinite","left","zIndex","borderTop","borderRight"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAC5B,SAASC,qBAAT,EAAgCC,iBAAhC;AACA,OAAO,KAAKC,KAAZ;AACA,SAASC,qBAAT;IAEQC,0B,GAA+BF,K,CAA/BE,0B;;AAkBR,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,KAAD,EAAkB;AAAA,qBAcnCA,KAdmC,CAErCC,KAFqC;AAAA,MAE9BC,UAF8B,6BAEjB,EAFiB;AAAA,MAGrCC,KAHqC,GAcnCH,KAdmC,CAGrCG,KAHqC;AAAA,MAIrCC,KAJqC,GAcnCJ,KAdmC,CAIrCI,KAJqC;AAAA,MAKrCC,SALqC,GAcnCL,KAdmC,CAKrCK,SALqC;AAAA,qBAcnCL,KAdmC,CAMrCM,KANqC;AAAA,MAMrCA,KANqC,6BAM7B,CAN6B;AAAA,MAOrCC,QAPqC,GAcnCP,KAdmC,CAOrCO,QAPqC;AAAA,MAQrCC,WARqC,GAcnCR,KAdmC,CAQrCQ,WARqC;AAAA,MASrCC,YATqC,GAcnCT,KAdmC,CASrCS,YATqC;AAAA,MAUrCC,WAVqC,GAcnCV,KAdmC,CAUrCU,WAVqC;AAAA,MAWrCC,KAXqC,GAcnCX,KAdmC,CAWrCW,KAXqC;AAAA,MAYrCC,QAZqC,GAcnCZ,KAdmC,CAYrCY,QAZqC;AAAA,MAalCC,IAbkC,iCAcnCb,KAdmC;;AAAA,8BAgBlBF,0BAA0B,EAhBR;AAAA,MAgBhCgB,UAhBgC;;AAkBvC,MAAMC,UAAU,GAAGX,KAAK,CAACY,KAAN,CAAYC,MAA/B;;AACA,MAAMhB,KAAK;AACTiB,IAAAA,MAAM,EAAEf,KAAK,KAAK,CAAV,GAAcE,SAAS,GAAGC,KAAZ,GAAoB,CAAlC,GAAsCD,SAAS,GAAGC,KADjD;AAETK,IAAAA,KAAK,EAAEhB,iBAAiB,GAAGW,KAFlB;AAGTa,IAAAA,sBAAsB,EAAEhB,KAAK,KAAKY,UAAU,GAAG,CAAvB,GAA2B,IAAIT,KAA/B,GAAuC;AAHtD,KAINJ,UAJM,CAAX;;AAOA,MAAMkB,YAAiC,GAAG,EAA1C;AACA,MAAMC,eAAe,GAAG,EAAxB;;AACA,MAAId,QAAQ,IAAIJ,KAAK,KAAK,CAA1B,EAA6B;AAC3BiB,IAAAA,YAAY,CAACE,UAAb,GAA6BD,eAA7B;AACAD,IAAAA,YAAY,CAACG,SAAb,oBAAwCF,eAAxC;AACAD,IAAAA,YAAY,CAACI,QAAb,GAAwB,OAAxB;AACAJ,IAAAA,YAAY,CAACK,GAAb,GAAsBX,UAAU,CAACW,GAAjC;;AACA,QAAIC,MAAM,CAACC,QAAP,CAAgBb,UAAU,CAACc,IAA3B,CAAJ,EAAsC;AACpCR,MAAAA,YAAY,CAACQ,IAAb,GAAuBd,UAAU,CAACc,IAAX,GAAmBjB,KAA1C;AACD;;AACDS,IAAAA,YAAY,CAACS,MAAb,GAAsB,CAAtB;AACAT,IAAAA,YAAY,CAACU,SAAb,GAA4BpC,qBAA5B;AACA0B,IAAAA,YAAY,CAACW,WAAb,GAA2B,iBAA3B;AACD;;AAED,sBACE;AAAK,IAAA,GAAG,EAAE5B,KAAV;AAAiB,IAAA,KAAK,EAAEiB;AAAxB,kBACE,eAAC,qBAAD;AACE,IAAA,KAAK,EAAEjB,KADT;AAEE,IAAA,IAAI,EAAC,KAFP;AAGE,IAAA,MAAM,EAAEY,UAHV;AAIE,IAAA,KAAK,EAAEd,KAJT;AAKE,IAAA,WAAW,EAAES,WALf;AAME,IAAA,YAAY,EAAED,YANhB;AAOE,IAAA,WAAW,EAAED;AAPf,KAQMK,IARN,GAUGD,QAVH,CADF,CADF;AAgBD,CAzDD;;AA2DA,eAAeb,cAAf","sourcesContent":["import * as React from 'react';\nimport Table from '../../../mo/models';\nimport { STICKY_ROW_TOP_HEIGHT, TOOLBAR_ITEM_SIZE } from '../../../utils/constants';\nimport * as hooks from '../../../utils/hooks';\nimport { RowColToolbarItemRect, Range } from '../rowColToolbarItemRect';\n\nconst { useScrollableContainerRect } = hooks;\n\ntype Props = {\n  index: number;\n  table: Table;\n  width: number;\n  rowHeight: number;\n  scale?: number;\n  isSticky?: boolean;\n  // 选区所在行列\n  activeRange?: Range | null;\n  // 选中行列\n  selectRanges?: Range[] | null;\n  // 删除行列范围\n  deleteRange?: Range | null;\n  children?: React.ReactNode;\n} & React.HTMLAttributes<HTMLDivElement>;\n\nconst RowToolbarItem = (props: Props) => {\n  const {\n    style: propsStyle = {},\n    index,\n    table,\n    rowHeight,\n    scale = 1,\n    isSticky,\n    deleteRange,\n    selectRanges,\n    activeRange,\n    width,\n    children,\n    ...rest\n  } = props;\n\n  const [scrollRect] = useScrollableContainerRect();\n\n  const rowsLength = table.nodes.length;\n  const style = {\n    height: index === 0 ? rowHeight / scale + 1 : rowHeight / scale,\n    width: TOOLBAR_ITEM_SIZE / scale,\n    borderBottomLeftRadius: index === rowsLength - 1 ? 3 / scale : '',\n    ...propsStyle,\n  };\n\n  const wrapperStyle: React.CSSProperties = {};\n  const borderLeftWidth = 10;\n  if (isSticky && index === 0) {\n    wrapperStyle.borderLeft = `${borderLeftWidth}px solid white`;\n    wrapperStyle.transform = `translateX(-${borderLeftWidth}px)`;\n    wrapperStyle.position = 'fixed';\n    wrapperStyle.top = `${scrollRect.top}px`;\n    if (Number.isFinite(scrollRect.left)) {\n      wrapperStyle.left = `${scrollRect.left! - width}px`;\n    }\n    wrapperStyle.zIndex = 2;\n    wrapperStyle.borderTop = `${STICKY_ROW_TOP_HEIGHT}px solid white`;\n    wrapperStyle.borderRight = '1px solid white';\n  }\n\n  return (\n    <div key={index} style={wrapperStyle}>\n      <RowColToolbarItemRect\n        index={index}\n        type=\"row\"\n        length={rowsLength}\n        style={style}\n        activeRange={activeRange}\n        selectRanges={selectRanges}\n        deleteRange={deleteRange}\n        {...rest}\n      >\n        {children}\n      </RowColToolbarItemRect>\n    </div>\n  );\n};\n\nexport default RowToolbarItem;\n"],"file":"rowToolbarItem.js"}