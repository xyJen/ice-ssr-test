{"version":3,"sources":["../../../../src/bi/commands/resizeTableWidth.ts"],"names":["Table","setTableColsWidth","calcResizeColsWidth","enableAutofitWidth","convertFromPercentToPixel","getTableMaxWidthByContainer","resizeTableWidth","controller","table","delta","maxWidth","newTable","isAutofitWidth","containerWidth","pixelColsWidth","tbl","value","document","getNode","key","outputColsWidth"],"mappings":"AACA,OAAOA,KAAP;AACA,OAAOC,iBAAP;AACA,OAAOC,mBAAP;AACA,OAAOC,kBAAP;AACA,SAASC,yBAAT;AACA,OAAOC,2BAAP;AAGA,eAAe,SAASC,gBAAT,CACbC,UADa,EAEbC,KAFa,EAGbC,KAHa,EAIbC,QAJa,EAKb;AACA,MAAIC,QAAQ,GAAGH,KAAf;;AACA,MAAIR,KAAK,CAACY,cAAN,CAAqBJ,KAArB,CAAJ,EAAiC;AAC/B,QAAMK,cAAc,GAAGH,QAAQ,IAAIL,2BAA2B,CAACE,UAAD,EAAaC,KAAb,CAA9D;AACA,QAAI,CAACK,cAAL,EAAqB,OAAON,UAAP;AAErB,QAAMO,cAAc,GAAGV,yBAAyB,CAACI,KAAD,EAAQK,cAAR,CAAhD;AACAV,IAAAA,kBAAkB,CAACI,UAAD,EAAaC,KAAb,EAAoB,KAApB,CAAlB;AACA,QAAMO,GAAG,GAAGR,UAAU,CAACS,KAAX,CAAiBC,QAAjB,CAA0BC,OAA1B,CAAkCV,KAAK,CAACW,GAAxC,CAAZ;AACAlB,IAAAA,iBAAiB,CAACM,UAAD,EAAaQ,GAAb,EAAkBD,cAAlB,CAAjB;AACAH,IAAAA,QAAQ,GAAGJ,UAAU,CAACS,KAAX,CAAiBC,QAAjB,CAA0BC,OAA1B,CAAkCV,KAAK,CAACW,GAAxC,CAAX;AACD;;AAED,MAAMC,eAAe,GAAGlB,mBAAmB,CAACK,UAAD,EAAaI,QAAb,EAAuBF,KAAvB,EAA8BC,QAA9B,CAA3C;AAEA,SAAOT,iBAAiB,CAACM,UAAD,EAAaI,QAAb,EAAuBS,eAAvB,CAAxB;AACD","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport Table from '../../mo/models';\nimport setTableColsWidth from '../utils/setTableColsWidth';\nimport calcResizeColsWidth from '../utils/calcResizeColsWidth';\nimport enableAutofitWidth from '../../utils/commands/enableAutofitWidth';\nimport { convertFromPercentToPixel } from '../../utils/utils/colsWidthConverter';\nimport getTableMaxWidthByContainer from '../../utils/utils/getTableMaxWidthByContainer';\n\n\nexport default function resizeTableWidth(\n  controller: Controller,\n  table: Table,\n  delta: number,\n  maxWidth?: number,\n) {\n  let newTable = table;\n  if (Table.isAutofitWidth(table)) {\n    const containerWidth = maxWidth || getTableMaxWidthByContainer(controller, table);\n    if (!containerWidth) return controller;\n\n    const pixelColsWidth = convertFromPercentToPixel(table, containerWidth);\n    enableAutofitWidth(controller, table, false);\n    const tbl = controller.value.document.getNode(table.key)! as Table;\n    setTableColsWidth(controller, tbl, pixelColsWidth);\n    newTable = controller.value.document.getNode(table.key)! as Table;\n  }\n\n  const outputColsWidth = calcResizeColsWidth(controller, newTable, delta, maxWidth);\n\n  return setTableColsWidth(controller, newTable, outputColsWidth);\n}\n"],"file":"resizeTableWidth.js"}