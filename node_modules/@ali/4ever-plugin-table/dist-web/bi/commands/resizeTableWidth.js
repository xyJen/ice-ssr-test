import Table from "../../mo/models";
import setTableColsWidth from "../utils/setTableColsWidth";
import calcResizeColsWidth from "../utils/calcResizeColsWidth";
import enableAutofitWidth from "../../utils/commands/enableAutofitWidth";
import { convertFromPercentToPixel } from "../../utils/utils/colsWidthConverter";
import getTableMaxWidthByContainer from "../../utils/utils/getTableMaxWidthByContainer";
export default function resizeTableWidth(controller, table, delta, maxWidth) {
  var newTable = table;

  if (Table.isAutofitWidth(table)) {
    var containerWidth = maxWidth || getTableMaxWidthByContainer(controller, table);
    if (!containerWidth) return controller;
    var pixelColsWidth = convertFromPercentToPixel(table, containerWidth);
    enableAutofitWidth(controller, table, false);
    var tbl = controller.value.document.getNode(table.key);
    setTableColsWidth(controller, tbl, pixelColsWidth);
    newTable = controller.value.document.getNode(table.key);
  }

  var outputColsWidth = calcResizeColsWidth(controller, newTable, delta, maxWidth);
  return setTableColsWidth(controller, newTable, outputColsWidth);
}
//# sourceMappingURL=resizeTableWidth.js.map