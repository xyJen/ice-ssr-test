{"version":3,"sources":["../../../../../../src/bi/mobile/components/toolbar/mobileColToolbar.tsx"],"names":["React","TableColToolbarItem","TOOLBAR_ITEM_SIZE_MOBILE","usePixelColsWidth","selectTableCols","ColToolbarDragButton","MobileColToolbar","props","activeRange","selectRange","controller","visible","table","propsStyle","style","colsWidth","preventEvent","e","stopPropagation","preventDefault","handleSelectCol","i","run","setTimeout","setIsFocused","visibility","width","reduce","acc","w","height","map","borderTopLeftRadius","borderTopRightRadius","length","children","end"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { TableColToolbarItem } from '../../../components/colToolbar/tableColToolbarItem';\nimport { TOOLBAR_ITEM_SIZE_MOBILE } from '../../../constants';\nimport { usePixelColsWidth } from '../../../../utils/hooks';\nimport type { Range } from '../../../components/rowColToolbarItemRect';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { selectTableCols } from '../../../actions';\nimport Table from '../../../../mo/models';\nimport { ColToolbarDragButton } from './colToolbarDragButton';\n\ntype ToolbarProps = {\n  controller: Controller;\n  table: Table;\n  visible: boolean;\n  // 选区所在行列\n  activeRange?: Range | null;\n  // 选中行列\n  selectRange?: Range | null;\n} & React.HTMLAttributes<HTMLDivElement>;\n\nexport const MobileColToolbar = (props: ToolbarProps) => {\n  const { activeRange, selectRange, controller, visible, table, style: propsStyle } =\n    props;\n  const [colsWidth] = usePixelColsWidth();\n\n  const preventEvent = (e: React.TouchEvent | React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n  const stopPropagation = (e: React.TouchEvent | React.MouseEvent) => {\n    e.stopPropagation();\n  };\n  const handleSelectCol = (e: React.MouseEvent, i: number) => {\n    controller.run(\n      'onAction',\n      selectTableCols(table, i, i),\n    );\n    setTimeout(() => {\n      controller.setIsFocused(false);\n    });\n  };\n\n  const style: React.CSSProperties = {\n    ...propsStyle,\n    visibility: visible ? 'visible' : 'hidden',\n    width: colsWidth.reduce((acc, w) => (acc + w), 0) + 1,\n    height: TOOLBAR_ITEM_SIZE_MOBILE,\n  };\n\n  return (\n    <div style={style}>\n      {colsWidth.map((w, i) => (\n        <TableColToolbarItem\n          style={{\n            height: TOOLBAR_ITEM_SIZE_MOBILE,\n            borderTopLeftRadius: i === 0 ? 4 : 0,\n            borderTopRightRadius: i === colsWidth.length - 1 ? 4 : 0,\n          }}\n          key={`${i}_${w}`}\n          selectRanges={selectRange ? [selectRange] : null}\n          activeRange={activeRange}\n          index={i}\n          onClick={(e) => handleSelectCol(e, i)}\n          onTouchStart={preventEvent}\n          onMouseDown={stopPropagation}\n        >\n          {props.children}\n          {i === selectRange?.end && (\n            <ColToolbarDragButton\n              table={table}\n              controller={controller}\n              index={i}\n            />\n          )}\n        </TableColToolbarItem>\n      ))}\n    </div>\n  );\n};\n"],"file":"mobileColToolbar.js"}