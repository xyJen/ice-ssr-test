{"version":3,"sources":["../../../../src/bi/queries/isSelectionSupportSplit.ts"],"names":["isMoreThanNCell","createTableSelectionForFocusedCell","getDataTableSelectionByTable","isSelectionSupportSplit","controller","table","node","visible","tableSelection","value","has1HiddenCell","selection","canSplit","query"],"mappings":"AAEA,OAAOA,eAAP;AACA,OAAOC,kCAAP;AACA,OAAOC,4BAAP;AAEA,eAAe,SAASC,uBAAT,CACbC,UADa,QAGb;AAAA,MADQC,KACR,QADEC,IACF;AAAA,MADeC,OACf,QADeA,OACf;;AACA,MAAI,CAACF,KAAL,EAAY;AACV,WAAO,KAAP;AACD;;AACD,MAAMG,cAAc,GAAGN,4BAA4B,CAACE,UAAD,EAAaC,KAAb,CAA5B,IACrBJ,kCAAkC,CAACG,UAAU,CAACK,KAAZ,EAAmBJ,KAAnB,CADpC;;AAGA,MAAI,CAACG,cAAL,EAAqB;AACnB,WAAO,KAAP;AACD;;AAED,MAAME,cAAc,GAAGV,eAAe,CAAC,CAAD,EAAI,QAAJ,EAAc;AAClDO,IAAAA,OAAO,EAAPA,OADkD;AAElDF,IAAAA,KAAK,EAALA,KAFkD;AAGlDM,IAAAA,SAAS,EAAEH;AAHuC,GAAd,CAAtC;;AAMA,MAAI,CAACE,cAAL,EAAqB;AACnB,WAAO,KAAP;AACD;;AAED,MAAME,QAAQ,GAAGR,UAAU,CAACS,KAAX,CACf,4BADe,EAEf;AAAEP,IAAAA,IAAI,EAAED,KAAR;AAAeG,IAAAA,cAAc,EAAdA;AAAf,GAFe,CAAjB;AAIA,SAAOI,QAAP;AACD","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport Table from '../../mo/models';\nimport isMoreThanNCell from '../utils/isMoreThanNCell';\nimport createTableSelectionForFocusedCell from '../utils/createTableSelectionForFocusedCell';\nimport getDataTableSelectionByTable from '../utils/getDataTableSelectionByTable';\n\nexport default function isSelectionSupportSplit(\n  controller: Controller,\n  { node: table, visible }: { node: Table, visible: boolean },\n) {\n  if (!table) {\n    return false;\n  }\n  const tableSelection = getDataTableSelectionByTable(controller, table) ||\n    createTableSelectionForFocusedCell(controller.value, table);\n\n  if (!tableSelection) {\n    return false;\n  }\n\n  const has1HiddenCell = isMoreThanNCell(1, 'hidden', {\n    visible,\n    table,\n    selection: tableSelection,\n  });\n\n  if (!has1HiddenCell) {\n    return false;\n  }\n\n  const canSplit = controller.query(\n    'isAllSelectedCellsComplete',\n    { node: table, tableSelection },\n  );\n  return canSplit;\n}\n"],"file":"isSelectionSupportSplit.js"}