{"version":3,"sources":["../../../../src/bi/queries/isHideSelection.ts"],"names":["Table","TableCell","isHideSelection","controller","selection","value","document","valueSelection","sel","anchor","focus","data","isByTable","startCell","getClosest","key","isTableCell","startTable","isTable","endCell","undefined","endTable"],"mappings":"AACA,OAAOA,KAAP;AACA,OAAOC,SAAP;;AAEA,IAAMC,eAAqC,GAAG,SAAxCA,eAAwC,CAC5CC,UAD4C,SAEzC;AAAA,gCADyB,EACzB;AAAA,MADWC,SACX,QADWA,SACX;;AAAA,0BAC6CD,UAAU,CAACE,KADxD;AAAA,MACKC,QADL,qBACKA,QADL;AAAA,MAC0BC,cAD1B,qBACeH,SADf;AAEH,MAAMI,GAAG,GAAGJ,SAAS,IAAIG,cAAzB;AAFG,MAGKE,MAHL,GAG6BD,GAH7B,CAGKC,MAHL;AAAA,MAGaC,KAHb,GAG6BF,GAH7B,CAGaE,KAHb;AAAA,MAGoBC,IAHpB,GAG6BH,GAH7B,CAGoBG,IAHpB;AAAA,MAIKC,SAJL,GAImBD,IAJnB,CAIKC,SAJL;AAKH,MAAMC,SAAS,GAAGP,QAAQ,CAACQ,UAAT,CAAoBL,MAAM,CAACM,GAA3B,EAAgCd,SAAS,CAACe,WAA1C,CAAlB;;AACA,MAAI,CAACH,SAAL,EAAgB;AACd,WAAO,KAAP;AACD;;AACD,MAAMI,UAAU,GAAGX,QAAQ,CAACQ,UAAT,CAAoBD,SAAS,CAACE,GAA9B,EAAmCf,KAAK,CAACkB,OAAzC,CAAnB;;AACA,MAAI,CAACD,UAAL,EAAiB;AACf,WAAO,KAAP;AACD;;AACD,MAAME,OAAO,GAAGb,QAAQ,CAACQ,UAAT,CAAoBJ,KAAK,CAACK,GAA1B,EAA+Bd,SAAS,CAACe,WAAzC,CAAhB;;AACA,MACE,CAACG,OAAD,IAEE,CAACP,SAAD,IACAC,SAAS,CAACE,GAAV,KAAkBI,OAAO,CAACJ,GAJ9B,EAME;AACA,WAAOK,SAAP;AACD;;AACD,MAAMC,QAAQ,GAAGf,QAAQ,CAACQ,UAAT,CAAoBK,OAAO,CAACJ,GAA5B,EAAiCf,KAAK,CAACkB,OAAvC,CAAjB;;AACA,MAAI,CAACG,QAAL,EAAe;AACb,WAAO,KAAP;AACD;;AACD,SAAOJ,UAAU,CAACF,GAAX,KAAmBM,QAAQ,CAACN,GAAnC;AACD,CA9BD;;AAgCA,eAAeb,eAAf","sourcesContent":["import type { isHideSelectionQuery } from '@ali/4ever-cangjie';\nimport Table from '../../mo/models';\nimport TableCell from '../../mo/models/tableCell';\n\nconst isHideSelection: isHideSelectionQuery = (\n  controller, { selection } = {},\n) => {\n  const { document, selection: valueSelection } = controller.value;\n  const sel = selection || valueSelection;\n  const { anchor, focus, data } = sel;\n  const { isByTable } = data;\n  const startCell = document.getClosest(anchor.key, TableCell.isTableCell);\n  if (!startCell) {\n    return false;\n  }\n  const startTable = document.getClosest(startCell.key, Table.isTable);\n  if (!startTable) {\n    return false;\n  }\n  const endCell = document.getClosest(focus.key, TableCell.isTableCell);\n  if (\n    !endCell ||\n    (\n      !isByTable &&\n      startCell.key === endCell.key\n    )\n  ) {\n    return undefined;\n  }\n  const endTable = document.getClosest(endCell.key, Table.isTable);\n  if (!endTable) {\n    return false;\n  }\n  return startTable.key === endTable.key;\n}\n\nexport default isHideSelection;\n"],"file":"isHideSelection.js"}