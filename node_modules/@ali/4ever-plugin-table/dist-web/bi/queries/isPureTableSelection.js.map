{"version":3,"sources":["../../../../src/bi/queries/isPureTableSelection.ts"],"names":["TableCell","isPureTableSelection","controller","isByTable","value","selection","data","query","document","_selection","anchor","focus","anchorCell","getClosest","key","isTableCell","focusCell"],"mappings":"AACA,OAAOA,SAAP;AACA;AAEA,OAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,UAAD,EAA4B;AAAA;;AAC9D,MAAMC,SAAS,4BAAGD,UAAU,CAACE,KAAX,CAAiBC,SAApB,+CAAG,sBAA4BC,IAA/B,qBAAG,uBAAkCH,SAApD;AACA,MAAME,SAAS,GAAGH,UAAU,CAACK,KAAX,CAAiB,mBAAjB,CAAlB;AAF8D,0BAIlBL,UAAU,CAACE,KAJO;AAAA,MAItDI,QAJsD,qBAItDA,QAJsD;AAAA,MAIjCC,UAJiC,qBAI5CJ,SAJ4C;AAAA,MAKtDK,MALsD,GAKpCD,UALoC,CAKtDC,MALsD;AAAA,MAK9CC,KAL8C,GAKpCF,UALoC,CAK9CE,KAL8C;;AAO9D,MAAI,CAACD,MAAD,IAAW,CAACC,KAAhB,EAAuB;AACrB,WAAO,KAAP;AACD;;AAED,MAAMC,UAAU,GAAGJ,QAAQ,CAACK,UAAT,CAAoBH,MAAM,CAACI,GAA3B,EAAgCd,SAAS,CAACe,WAA1C,CAAnB;AACA,MAAMC,SAAS,GAAGR,QAAQ,CAACK,UAAT,CAAoBF,KAAK,CAACG,GAA1B,EAA+Bd,SAAS,CAACe,WAAzC,CAAlB;;AAEA,MAAIV,SAAJ,EAAe;AACb,QAAIO,UAAU,KAAKI,SAAf,IAA4B,CAACb,SAAjC,EAA4C;AAC1C,aAAO,KAAP;AACD;;AACD,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD,CArBM","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport TableCell from '../../mo/models/tableCell';\n;\n\nexport const isPureTableSelection = (controller: Controller) => {\n  const isByTable = controller.value.selection?.data?.isByTable;\n  const selection = controller.query('getTableSelection');\n\n  const { document, selection: _selection } = controller.value;\n  const { anchor, focus } = _selection;\n\n  if (!anchor || !focus) {\n    return false;\n  }\n\n  const anchorCell = document.getClosest(anchor.key, TableCell.isTableCell);\n  const focusCell = document.getClosest(focus.key, TableCell.isTableCell);\n\n  if (selection) {\n    if (anchorCell === focusCell && !isByTable) {\n      return false;\n    }\n    return true;\n  }\n  return false;\n};\n"],"file":"isPureTableSelection.js"}