{"version":3,"sources":["../../../../src/bi/queries/getLeftToolbarOffset.ts"],"names":["Table","TableRow","TableCell","controller","data","node","undefined","value","document","startBlock","cell","getParent","key","row","table","isTableRow","isColumns","isTable","sr","isTableCell","tb","path","getPath","index","length","moreMargin","contains","x","y"],"mappings":"AACA,OAAOA,KAAP;AACA,OAAOC,QAAP;AACA,OAAOC,SAAP;AAEA,eAAe,UAAUC,UAAV,EAAkCC,IAAlC,EAAyD;AAAA,MAC9DC,IAD8D,GACrDD,IADqD,CAC9DC,IAD8D;;AAEtE,MAAI,CAACA,IAAL,EAAW;AACT,WAAOC,SAAP;AACD;;AAJqE,0BAKrCH,UAAU,CAACI,KAL0B;AAAA,MAK9DC,QAL8D,qBAK9DA,QAL8D;AAAA,MAKpDC,UALoD,qBAKpDA,UALoD;AAMtE,MAAMC,IAAI,GAAGF,QAAQ,CAACG,SAAT,CAAmBN,IAAI,CAACO,GAAxB,CAAb;AACA,MAAMC,GAAG,GAAGL,QAAQ,CAACG,SAAT,CAAmBD,IAAI,CAAEE,GAAzB,CAAZ;AACA,MAAME,KAAK,GAAGb,QAAQ,CAACc,UAAT,CAAoBF,GAApB,KAA4BL,QAAQ,CAACG,SAAT,CAAmBE,GAAG,CAACD,GAAvB,CAA1C;AACA,MAAMI,SAAS,GAAGhB,KAAK,CAACiB,OAAN,CAAcH,KAAd,KAAwB,CAAC,CAACA,KAAK,CAACV,IAAN,CAAWc,EAAvD;;AACA,MAAIR,IAAI,IAAIR,SAAS,CAACiB,WAAV,CAAsBT,IAAtB,CAAR,IAAuC,CAACM,SAA5C,EAAuD;AACrD,QAAMI,EAAE,GAAGZ,QAAQ,CAACG,SAAT,CAAmBH,QAAQ,CAACG,SAAT,CAAmBD,IAAI,CAACE,GAAxB,EAA8BA,GAAjD,CAAX;AACA,QAAMS,IAAI,GAAGb,QAAQ,CAACc,OAAT,CAAiBZ,IAAI,CAACE,GAAtB,CAAb;;AACA,QAAIQ,EAAE,IAAIC,IAAV,EAAgB;AACd,UAAME,KAAK,GAAGF,IAAI,CAACA,IAAI,CAACG,MAAL,GAAc,CAAf,CAAlB;AACA,UAAMC,UAAU,GAAGF,KAAK,KAAK,CAAV,IAAeH,EAAE,CAACM,QAAH,CAAYjB,UAAZ,CAAlC;AACA,aAAO;AACLkB,QAAAA,CAAC,EAAEF,UAAU,GAAG,CAAC,EAAJ,GAAS,CAAC,CADlB;AAELG,QAAAA,CAAC,EAAE;AAFE,OAAP;AAID;AACF;;AACD,SAAOtB,SAAP;AACD","sourcesContent":["import { Controller, Block } from '@ali/4ever-cangjie';\nimport Table from '../../mo/models';\nimport TableRow from '../../mo/models/tableRow';\nimport TableCell from '../../mo/models/tableCell';\n\nexport default function (controller: Controller, data: { node: Block }) {\n  const { node } = data;\n  if (!node) {\n    return undefined;\n  }\n  const { document, startBlock } = controller.value;\n  const cell = document.getParent(node.key);\n  const row = document.getParent(cell!.key) as TableRow;\n  const table = TableRow.isTableRow(row) && document.getParent(row.key);\n  const isColumns = Table.isTable(table) && !!table.data.sr;\n  if (cell && TableCell.isTableCell(cell) && !isColumns) {\n    const tb = document.getParent(document.getParent(cell.key)!.key);\n    const path = document.getPath(cell.key);\n    if (tb && path) {\n      const index = path[path.length - 1];\n      const moreMargin = index === 0 && tb.contains(startBlock);\n      return {\n        x: moreMargin ? -20 : -6,\n        y: 0,\n      };\n    }\n  }\n  return undefined;\n}\n"],"file":"getLeftToolbarOffset.js"}