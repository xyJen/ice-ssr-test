{"version":3,"sources":["../../../../src/bi/queries/isSelectionSupportMerge.ts"],"names":["isMoreThanNCell","createTableSelectionForFocusedCell","getDataTableSelectionByTable","isSelectionSupportMerge","controller","table","node","visible","tableSelection","value","has2VisibleCell","selection","canMerge","query"],"mappings":"AAEA,OAAOA,eAAP;AACA,OAAOC,kCAAP;AACA,OAAOC,4BAAP;AAEA,eAAe,SAASC,uBAAT,CACbC,UADa,QAGb;AAAA,MADQC,KACR,QADEC,IACF;AAAA,MADeC,OACf,QADeA,OACf;;AACA,MAAI,CAACF,KAAL,EAAY;AACV,WAAO,KAAP;AACD;;AACD,MAAMG,cAAc,GAAGN,4BAA4B,CAACE,UAAD,EAAaC,KAAb,CAA5B,IACrBJ,kCAAkC,CAACG,UAAU,CAACK,KAAZ,EAAmBJ,KAAnB,CADpC;;AAGA,MAAI,CAACG,cAAL,EAAqB;AACnB,WAAO,KAAP;AACD;;AAED,MAAME,eAAe,GAAGV,eAAe,CAAC,CAAD,EAAI,SAAJ,EAAe;AACpDO,IAAAA,OAAO,EAAPA,OADoD;AAEpDF,IAAAA,KAAK,EAALA,KAFoD;AAGpDM,IAAAA,SAAS,EAAEH;AAHyC,GAAf,CAAvC;;AAKA,MAAI,CAACE,eAAL,EAAsB;AACpB,WAAO,KAAP;AACD;;AAED,MAAME,QAAQ,GAAGR,UAAU,CAACS,KAAX,CACf,4BADe,EAEf;AAAEP,IAAAA,IAAI,EAAED,KAAR;AAAeG,IAAAA,cAAc,EAAdA;AAAf,GAFe,CAAjB;AAIA,SAAOI,QAAP;AACD","sourcesContent":["import { Controller } from '@ali/4ever-cangjie';\nimport Table from '../../mo/models';\nimport isMoreThanNCell from '../utils/isMoreThanNCell';\nimport createTableSelectionForFocusedCell from '../utils/createTableSelectionForFocusedCell';\nimport getDataTableSelectionByTable from '../utils/getDataTableSelectionByTable';\n\nexport default function isSelectionSupportMerge(\n  controller: Controller,\n  { node: table, visible }: { node: Table; visible: boolean },\n) {\n  if (!table) {\n    return false;\n  }\n  const tableSelection = getDataTableSelectionByTable(controller, table) ||\n    createTableSelectionForFocusedCell(controller.value, table);\n\n  if (!tableSelection) {\n    return false;\n  }\n\n  const has2VisibleCell = isMoreThanNCell(2, 'visible', {\n    visible,\n    table,\n    selection: tableSelection,\n  });\n  if (!has2VisibleCell) {\n    return false;\n  }\n\n  const canMerge = controller.query(\n    'isAllSelectedCellsComplete',\n    { node: table, tableSelection },\n  );\n  return canMerge;\n}\n"],"file":"isSelectionSupportMerge.js"}