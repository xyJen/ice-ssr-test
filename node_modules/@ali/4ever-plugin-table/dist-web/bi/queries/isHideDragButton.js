import Table from "../../mo/models";
import tableSelection from "./tableSelection";
export default function isHideDragButton(controller, data) {
  var node = data.node;
  var tbSelection = tableSelection(controller); // 选中表格整行时，被选中行的第一个单元格不展示拖拽按钮

  if (tbSelection) {
    var key = tbSelection.key,
        startColIndex = tbSelection.startColIndex,
        endColIndex = tbSelection.endColIndex,
        startRowIndex = tbSelection.startRowIndex,
        endRowIndex = tbSelection.endRowIndex;
    var table = controller.value.document.getNode(key);

    if (Table.isTable(table) && table.contains(node)) {
      var _table$data$colsWidth;

      var colsLength = (_table$data$colsWidth = table.data.colsWidth) == null ? void 0 : _table$data$colsWidth.length;

      if (colsLength && startColIndex === 0 && endColIndex === colsLength - 1) {
        for (var r = startRowIndex; r <= endRowIndex; r++) {
          var _row$nodes$;

          var row = table.nodes[r];

          if (!row) {
            continue;
          }

          if ((_row$nodes$ = row.nodes[0]) != null && _row$nodes$.contains(node)) {
            return true;
          }
        }
      }
    }
  }

  return undefined;
}
//# sourceMappingURL=isHideDragButton.js.map