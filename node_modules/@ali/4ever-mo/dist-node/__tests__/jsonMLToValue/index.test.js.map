{"version":3,"sources":["../../../../src/__tests__/jsonMLToValue/index.test.ts"],"names":["expect","extend","toMatchFile","fixturesPath","path","join","__dirname","fixtures","fs","readdirSync","describe","forEach","fixture","it","fixturePath","inputPath","outputPath","strictOutputPath","value","strictValue","require","default","error","input","JSON","parse","readFileSync","toString","generated","Mo","jsonMLToValue","toJSON","expected","toEqual","valueRegenerate","expectedStrict","generatedValidated","strict"],"mappings":";;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEAA,MAAM,CAACC,MAAP,CAAc;AAAEC,EAAAA,WAAW,EAAXA;AAAF,CAAd;AAEA,MAAMC,YAAY,GAAGC,IAAI,CAACC,IAAL,CAAUC,SAAV,EAAqB,UAArB,CAArB;AACA,MAAMC,QAAQ,GAAGC,EAAE,CAACC,WAAH,CAAeN,YAAf,CAAjB;AAEAO,QAAQ,CAAC,kBAAD,EAAqB,MAAM;AACjCH,EAAAA,QAAQ,CAACI,OAAT,CAAkBC,OAAD,IAAa;AAC5BC,IAAAA,EAAE,CAACD,OAAD,EAAU,MAAM;AAChB,YAAME,WAAW,GAAGV,IAAI,CAACC,IAAL,CAAUF,YAAV,EAAwBS,OAAxB,CAApB;AACA,YAAMG,SAAS,GAAGX,IAAI,CAACC,IAAL,CAAUS,WAAV,EAAuB,YAAvB,CAAlB;AACA,YAAME,UAAU,GAAGZ,IAAI,CAACC,IAAL,CAAUS,WAAV,EAAuB,WAAvB,CAAnB;AACA,YAAMG,gBAAgB,GAAGb,IAAI,CAACC,IAAL,CAAUS,WAAV,EAAuB,iBAAvB,CAAzB;AACA,UAAII,KAAJ;AACA,UAAIC,WAAJ;;AACA,UAAI;AACFD,QAAAA,KAAK,GAAGE,OAAO,CAACJ,UAAD,CAAP,CAAoBK,OAA5B;AACD,OAFD,CAEE,OAAOC,KAAP,EAAc,CACd;AACD;;AACD,UAAI;AACFH,QAAAA,WAAW,GAAGC,OAAO,CAACH,gBAAD,CAAP,CAA0BI,OAAxC;AACD,OAFD,CAEE,OAAOC,KAAP,EAAc,CACd;AACD;;AAED,YAAMC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWjB,EAAE,CAACkB,YAAH,CAAgBX,SAAhB,EAA2BY,QAA3B,EAAX,CAAd;;AACA,YAAMC,SAAS,GAAGC,oBAAGC,aAAH,CAAiBP,KAAjB,EAAwBQ,MAAxB,EAAlB;;AACA,YAAMC,QAAQ,GAAGd,KAAK,CAACa,MAAN,EAAjB;AACA/B,MAAAA,MAAM,CAAC4B,SAAD,CAAN,CAAkBK,OAAlB,CAA0BD,QAA1B;AAEA,YAAME,eAAe,GAAG,6BAAgBhB,KAAhB,EAAuBa,MAAvB,EAAxB;AACA/B,MAAAA,MAAM,CAACkC,eAAD,CAAN,CAAwBD,OAAxB,CAAgCD,QAAhC;;AAEA,UAAIb,WAAJ,EAAiB;AACf,cAAMgB,cAAc,GAAGhB,WAAW,CAACY,MAAZ,EAAvB;;AACA,cAAMK,kBAAkB,GAAGP,oBAAGC,aAAH,CAAiBP,KAAjB,EAAwB;AAAEc,UAAAA,MAAM,EAAE;AAAV,SAAxB,EAA0CN,MAA1C,EAA3B;;AACA/B,QAAAA,MAAM,CAACoC,kBAAD,CAAN,CAA2BH,OAA3B,CAAmCE,cAAnC;AACD;AACF,KA/BC,CAAF;AAgCD,GAjCD;AAkCD,CAnCO,CAAR","sourcesContent":["import * as fs from 'fs';\nimport * as path from 'path';\nimport { toMatchFile } from 'jest-file-snapshot';\nimport Mo from '../serializer';\nimport { regenerateValue } from '../helper';\n\nexpect.extend({ toMatchFile });\n\nconst fixturesPath = path.join(__dirname, 'fixtures');\nconst fixtures = fs.readdirSync(fixturesPath);\n\ndescribe('Mo.jsonMLToValue', () => {\n  fixtures.forEach((fixture) => {\n    it(fixture, () => {\n      const fixturePath = path.join(fixturesPath, fixture);\n      const inputPath = path.join(fixturePath, 'input.json');\n      const outputPath = path.join(fixturePath, 'output.js');\n      const strictOutputPath = path.join(fixturePath, 'strictOutput.js');\n      let value;\n      let strictValue;\n      try {\n        value = require(outputPath).default;\n      } catch (error) {\n        // do nothing;\n      }\n      try {\n        strictValue = require(strictOutputPath).default;\n      } catch (error) {\n        // do nothing;\n      }\n\n      const input = JSON.parse(fs.readFileSync(inputPath).toString());\n      const generated = Mo.jsonMLToValue(input).toJSON();\n      const expected = value.toJSON();\n      expect(generated).toEqual(expected);\n\n      const valueRegenerate = regenerateValue(value).toJSON();\n      expect(valueRegenerate).toEqual(expected);\n\n      if (strictValue) {\n        const expectedStrict = strictValue.toJSON();\n        const generatedValidated = Mo.jsonMLToValue(input, { strict: true }).toJSON();\n        expect(generatedValidated).toEqual(expectedStrict);\n      }\n    });\n  });\n});\n"],"file":"index.test.js"}