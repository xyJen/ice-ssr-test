{"version":3,"sources":["../../../src/migrations/createMigration.ts"],"names":["createMigration","prevVersion","nextVersion","algs","upgrade","document","reduce","doc","alg","downgrade"],"mappings":";;;;;;;AAKe,SAASA,eAAT,CACbC,WADa,EAEbC,WAFa,EAGbC,IAHa,EAIF;AACX,SAAO;AACLF,IAAAA,WADK;AAELC,IAAAA,WAFK;AAGLE,IAAAA,OAAO,EAAGC,QAAD,IAAwB;AAC/B,aAAOF,IAAI,CAACG,MAAL,CAAY,CAACC,GAAD,EAAMC,GAAN,KAAcA,GAAG,CAACJ,OAAJ,CAAYG,GAAZ,CAA1B,EAA4CF,QAA5C,CAAP;AACD,KALI;AAMLI,IAAAA,SAAS,EAAGJ,QAAD,IAAwB;AACjC,aAAOF,IAAI,CAACG,MAAL,CAAY,CAACC,GAAD,EAAMC,GAAN,KAAcA,GAAG,CAACC,SAAJ,CAAcF,GAAd,CAA1B,EAA8CF,QAA9C,CAAP;AACD;AARI,GAAP;AAUD","sourcesContent":["import { Value, Document } from '@ali/4ever-cangjie';\nimport { JsonML } from '@ali/4ever-utils';\nimport { moSerializer } from '../serializer';\nimport { MigrateAlg, Migration } from '../type';\n\nexport default function createMigration(\n  prevVersion: number,\n  nextVersion: number,\n  algs: MigrateAlg[],\n): Migration {\n  return {\n    prevVersion,\n    nextVersion,\n    upgrade: (document: Document) => {\n      return algs.reduce((doc, alg) => alg.upgrade(doc), document);\n    },\n    downgrade: (document: Document) => {\n      return algs.reduce((doc, alg) => alg.downgrade(doc), document);\n    },\n  };\n}\n"],"file":"createMigration.js"}