{"version":3,"sources":["../../../src/migrations/createMigration.ts"],"names":["createMigration","prevVersion","nextVersion","algs","upgrade","document","reduce","doc","alg","downgrade"],"mappings":"AAKA,eAAe,SAASA,eAAT,CACbC,WADa,EAEbC,WAFa,EAGbC,IAHa,EAIF;AACX,SAAO;AACLF,IAAAA,WAAW,EAAXA,WADK;AAELC,IAAAA,WAAW,EAAXA,WAFK;AAGLE,IAAAA,OAAO,EAAE,iBAACC,QAAD,EAAwB;AAC/B,aAAOF,IAAI,CAACG,MAAL,CAAY,UAACC,GAAD,EAAMC,GAAN;AAAA,eAAcA,GAAG,CAACJ,OAAJ,CAAYG,GAAZ,CAAd;AAAA,OAAZ,EAA4CF,QAA5C,CAAP;AACD,KALI;AAMLI,IAAAA,SAAS,EAAE,mBAACJ,QAAD,EAAwB;AACjC,aAAOF,IAAI,CAACG,MAAL,CAAY,UAACC,GAAD,EAAMC,GAAN;AAAA,eAAcA,GAAG,CAACC,SAAJ,CAAcF,GAAd,CAAd;AAAA,OAAZ,EAA8CF,QAA9C,CAAP;AACD;AARI,GAAP;AAUD","sourcesContent":["import { Value, Document } from '@ali/4ever-cangjie';\nimport { JsonML } from '@ali/4ever-utils';\nimport { moSerializer } from '../serializer';\nimport { MigrateAlg, Migration } from '../type';\n\nexport default function createMigration(\n  prevVersion: number,\n  nextVersion: number,\n  algs: MigrateAlg[],\n): Migration {\n  return {\n    prevVersion,\n    nextVersion,\n    upgrade: (document: Document) => {\n      return algs.reduce((doc, alg) => alg.upgrade(doc), document);\n    },\n    downgrade: (document: Document) => {\n      return algs.reduce((doc, alg) => alg.downgrade(doc), document);\n    },\n  };\n}\n"],"file":"createMigration.js"}