"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createGetLeftToolbarOffset;

var _everPluginTable = require("@ali/4ever-plugin-table");

var _everPluginListGroup = require("@ali/4ever-plugin-list-group");

const {
  isFoldGroupNode
} = _everPluginListGroup.OldBambooPlugin.utils;

function createGetLeftToolbarOffset(isDisabled) {
  return (controller, data) => {
    if (isDisabled && isDisabled()) {
      return undefined;
    }

    const {
      document
    } = controller.value;
    const {
      node
    } = data;
    const parent = controller.value.document.getParent(node.key);

    if (!_everPluginTable.TableCell.isTableCell(parent)) {
      return undefined;
    }

    const row = document.getParent(parent.key);
    const table = _everPluginTable.TableRow.isTableRow(row) && document.getParent(row.key);
    const isColumns = _everPluginTable.Table.isTable(table) && !!table.data.sr;
    const isFirstLineList = node?.data?.list?.level === 0 && isFoldGroupNode(node, controller);

    if (isColumns && !isFirstLineList) {
      return {
        x: -5,
        y: 0
      };
    }

    return undefined;
  };
}
//# sourceMappingURL=createGetLeftToolbarOffset.js.map