{"version":3,"sources":["../../../../src/utils/queries/createGetLeftToolbarOffset.ts"],"names":["isFoldGroupNode","OldBambooPlugin","utils","createGetLeftToolbarOffset","isDisabled","controller","data","undefined","document","value","node","parent","getParent","key","TableCell","isTableCell","row","table","TableRow","isTableRow","isColumns","Table","isTable","sr","isFirstLineList","list","level","x","y"],"mappings":";;;;;;;AACA;;AAEA;;AAEA,MAAM;AAAEA,EAAAA;AAAF,IAAsBC,qCAAgBC,KAA5C;;AAEe,SAASC,0BAAT,CAAoCC,UAApC,EAA2D;AACxE,SAAO,CAACC,UAAD,EAAyBC,IAAzB,KAAmD;AACxD,QAAIF,UAAU,IAAIA,UAAU,EAA5B,EAAgC;AAC9B,aAAOG,SAAP;AACD;;AAED,UAAM;AAAEC,MAAAA;AAAF,QAAeH,UAAU,CAACI,KAAhC;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAWJ,IAAjB;AACA,UAAMK,MAAM,GAAGN,UAAU,CAACI,KAAX,CAAiBD,QAAjB,CAA0BI,SAA1B,CAAoCF,IAAI,CAACG,GAAzC,CAAf;;AAEA,QAAI,CAACC,2BAAUC,WAAV,CAAsBJ,MAAtB,CAAL,EAAoC;AAClC,aAAOJ,SAAP;AACD;;AAED,UAAMS,GAAG,GAAGR,QAAQ,CAACI,SAAT,CAAmBD,MAAM,CAACE,GAA1B,CAAZ;AACA,UAAMI,KAAK,GAAGC,0BAASC,UAAT,CAAoBH,GAApB,KAA4BR,QAAQ,CAACI,SAAT,CAAmBI,GAAG,CAACH,GAAvB,CAA1C;AACA,UAAMO,SAAS,GAAGC,uBAAMC,OAAN,CAAcL,KAAd,KAAwB,CAAC,CAACA,KAAK,CAACX,IAAN,CAAWiB,EAAvD;AACA,UAAMC,eAAe,GAAGd,IAAI,EAAEJ,IAAN,EAAYmB,IAAZ,EAAkBC,KAAlB,KAA4B,CAA5B,IAAiC1B,eAAe,CAACU,IAAD,EAAOL,UAAP,CAAxE;;AACA,QAAIe,SAAS,IAAI,CAACI,eAAlB,EAAmC;AACjC,aAAO;AACLG,QAAAA,CAAC,EAAE,CAAC,CADC;AAELC,QAAAA,CAAC,EAAE;AAFE,OAAP;AAID;;AAED,WAAOrB,SAAP;AACD,GAzBD;AA0BD","sourcesContent":["import { Controller, Block } from '@ali/4ever-cangjie';\nimport { Table, TableCell, TableRow } from '@ali/4ever-plugin-table';\nimport { List } from '@ali/4ever-plugin-list';\nimport { OldBambooPlugin } from '@ali/4ever-plugin-list-group';\n\nconst { isFoldGroupNode } = OldBambooPlugin.utils;\n\nexport default function createGetLeftToolbarOffset(isDisabled?: Function) {\n  return (controller: Controller, data: { node: Block }) => {\n    if (isDisabled && isDisabled()) {\n      return undefined;\n    }\n\n    const { document } = controller.value;\n    const { node } = data;\n    const parent = controller.value.document.getParent(node.key);\n\n    if (!TableCell.isTableCell(parent)) {\n      return undefined;\n    }\n\n    const row = document.getParent(parent.key) as TableRow;\n    const table = TableRow.isTableRow(row) && document.getParent(row.key);\n    const isColumns = Table.isTable(table) && !!table.data.sr;\n    const isFirstLineList = node?.data?.list?.level === 0 && isFoldGroupNode(node, controller);\n    if (isColumns && !isFirstLineList) {\n      return {\n        x: -5,\n        y: 0,\n      };\n    }\n\n    return undefined;\n  }\n}\n"],"file":"createGetLeftToolbarOffset.js"}