{"version":3,"sources":["../../../src/bi/index.ts"],"names":["biFactory","configs","hotKey","gray","inlineCode","inlineCodeMo","renderNode","renderToolbar","locale","toolbar","commands","queries","actions","onCangjieInput","onKeyDown","onAction"],"mappings":";;;;;;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;AACA,MAAMA,SAAoB,GAAIC,OAAD,IAAa;AACxC,QAAMC,MAAM,GAAG,OAAf;AAEA,QAAMC,IAAa,GAAGF,OAAO,CAACG,UAAR,EAAoBD,IAA1C;AACA,QAAME,YAAY,GAAG,iBAAoB,EAApB,CAArB,CAJwC,CAKxC;;AACA,MAAI,CAACF,IAAL,EAAW;AACT,WAAO;AACLG,MAAAA,UAAU,EAAEA,mBADP;AAELC,MAAAA,aAAa,EAAE,kCAAqBN,OAAO,CAACG,UAAT,EAA4CI,MAAhE,CAFV;AAGLC,MAAAA,OAAO,EAAE,4BAAcR,OAAO,CAACG,UAAtB,CAHJ;AAIL,SAAGC,YAJE;AAKL,SAAG;AALE,KAAP;AAOD,GAduC,CAgBxC;;;AACA,SAAO,EACL,GAAGA,YADE;AAELC,IAAAA,UAAU,EAAEA,mBAFP;AAGLC,IAAAA,aAAa,EAAE,kCAAqBN,OAAO,CAACG,UAAT,EAA4CI,MAAhE,CAHV;AAILC,IAAAA,OAAO,EAAE,4BAAcR,OAAO,CAACG,UAAtB,CAJJ;AAKLM,IAAAA,QAAQ,EAARA,kBALK;AAMLC,IAAAA,OAAO,EAAPA,gBANK;AAOLC,IAAAA,OAAO,EAAPA,gBAPK;AAQLC,IAAAA,cAAc,EAAdA,uBARK;AASLC,IAAAA,SAAS,EAAE,8BAAgBZ,MAAM,IAAI,EAA1B,CATN;AAULa,IAAAA,QAAQ,EAARA;AAVK,GAAP;AAYD,CA7BD;;eA+Bef,S","sourcesContent":["import { BiFactory } from '@ali/4ever-cangjie';\nimport createOnKeyDown from './handlers/createOnKeyDown';\nimport inlineCodeMoFactory from '../mo';\nimport renderNode from './renderNode';\nimport onCangjieInput from './handlers/onCangjieInput';\nimport { commands } from './commands';\nimport onAction from './handlers/onAction';\nimport { default as createOldInlineCodePlugin } from '../oldInlineCode';\nimport { queries } from './queries';\nimport createRenderToolbar from './createRenderToolbar';\nimport createToolbar from './createToolbar';\nimport type { IInlineCodeConfigs } from './types';\nimport { actions } from './actions';\n// @ts-ignore\nconst biFactory: BiFactory = (configs) => {\n  const hotKey = 'mod+e';\n\n  const gray: boolean = configs.inlineCode?.gray;\n  const inlineCodeMo = inlineCodeMoFactory({});\n  // 未命中灰度的情况,仍然使用旧InlineCode\n  if (!gray) {\n    return {\n      renderNode: renderNode as any,\n      renderToolbar: createRenderToolbar((configs.inlineCode as IInlineCodeConfigs)?.locale),\n      toolbar: createToolbar(configs.inlineCode as IInlineCodeConfigs),\n      ...inlineCodeMo,\n      ...createOldInlineCodePlugin(),\n    };\n  }\n\n  // TODO: 命中灰度时，createOldInlineCodePlugin 里的 queries 和 cmd + e 取消旧的 inlineCode 的逻辑也许要保留\n  return {\n    ...inlineCodeMo,\n    renderNode: renderNode as any,\n    renderToolbar: createRenderToolbar((configs.inlineCode as IInlineCodeConfigs)?.locale),\n    toolbar: createToolbar(configs.inlineCode as IInlineCodeConfigs),\n    commands,\n    queries,\n    actions,\n    onCangjieInput,\n    onKeyDown: createOnKeyDown(hotKey || ''),\n    onAction,\n  };\n};\n\nexport default biFactory;\n"],"file":"index.js"}