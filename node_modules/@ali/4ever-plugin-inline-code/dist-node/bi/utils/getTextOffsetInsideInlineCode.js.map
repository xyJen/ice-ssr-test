{"version":3,"sources":["../../../../src/bi/utils/getTextOffsetInsideInlineCode.ts"],"names":["getTextOffsetInsideInlineCode","value","selection","isExpanded","InlineCode","isInlineCode","anchorInline","anchor","isTextPoint","offset"],"mappings":";;;;;;;;;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,6BAAT,CACbC,KADa,EAEE;AACf,QAAM;AAAEC,IAAAA;AAAF,MAAgBD,KAAtB;AACA,MAAI,CAACC,SAAD,IAAcA,SAAS,CAACC,UAA5B,EAAwC,OAAO,IAAP,CAFzB,CAGf;;AACA,MACEC,gBAAWC,YAAX,CAAwBJ,KAAK,CAACK,YAA9B,KACAJ,SAAS,CAACK,MAAV,CAAiBC,WAAjB,EAFF,EAGE;AACA,WAAON,SAAS,CAACK,MAAV,CAAiBE,MAAxB;AACD;;AACD,SAAO,IAAP;AACD","sourcesContent":["import { Value } from '@ali/4ever-cangjie';\nimport InlineCode from '../../mo/models';\n\n/**\n * 首先判断Text节点的左侧/右侧是否有Inline Code\n * 如果有，则计算光标处于Inline Code左右侧Text节点的偏移量\n * @param value\n * @return\n */\nexport default function getTextOffsetInsideInlineCode(\n  value: Value,\n): number | null {\n  const { selection } = value;\n  if (!selection || selection.isExpanded) return null;\n  //若当前选中点为 text 起始，则试探前后一个节点是否为 inline\n  if (\n    InlineCode.isInlineCode(value.anchorInline) &&\n    selection.anchor.isTextPoint()\n  ) {\n    return selection.anchor.offset;\n  }\n  return null;\n}\n"],"file":"getTextOffsetInsideInlineCode.js"}