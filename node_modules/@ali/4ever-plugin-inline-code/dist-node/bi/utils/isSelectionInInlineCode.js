"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = isSelectionInInlineCode;

var _everCangjie = require("@ali/4ever-cangjie");

var _models = _interopRequireDefault(require("../../mo/models"));

function isSelectionInInlineCode(controller) {
  const {
    value
  } = controller;
  const {
    selection,
    document
  } = value;
  if (!selection || selection.isCollapsed) return false; // 收缩选区,当选区选择Inline Code边缘情况时，保证anchor和focus属于Inline Code节点上

  controller.command(_everCangjie.Commands.select, selection.shrinkBoundary(document));
  const {
    selection: newSelection,
    document: newDocument
  } = controller.value;
  const startPoint = newSelection.getStart(newDocument);
  const endPoint = newSelection.getEnd(newDocument);
  const startInline = newDocument.getClosestInline(startPoint.key);
  const endInline = newDocument.getClosestInline(endPoint.key);

  if (!(_models.default.isInlineCode(startInline) && _models.default.isInline(endInline))) {
    return false;
  }

  const startKey = startInline?.key;
  const endKey = endInline?.key;
  return !!(startKey && endKey) ? startKey === endKey : false;
}
//# sourceMappingURL=isSelectionInInlineCode.js.map