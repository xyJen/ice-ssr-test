{"version":3,"sources":["../../../src/idleRender/SimpleLazyLoad.tsx"],"names":["React","Loading","SimpleLazyLoad","promise","props","useReducer","s","forceRender","Result","useRef","useEffect","isAlive","then","R","current","Comp"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;qBAC4B,a;;AAG5B,IAAMC,OAAkB,GAAG,SAArBA,OAAqB;AAAA,SAAM,IAAN;AAAA,CAA3B;;AAEA,SAASC,cAAT,CAAwBC,OAAxB,EAA2D;AACzD,SAAO,UAACC,KAAD,EAAgB;AAAA,4BACGJ,KAAK,CAACK,UAAN,CAAiB,UAACC,CAAD;AAAA,aAAeA,CAAC,GAAG,CAAnB;AAAA,KAAjB,EAAuC,CAAvC,CADH;AAAA,QACZC,WADY;;AAErB,QAAMC,MAAM,GAAGR,KAAK,CAACS,MAAN,CAA+B,IAA/B,CAAf;AACAT,IAAAA,KAAK,CAACU,SAAN,CAAgB,YAAM;AACpB,UAAIC,OAAO,GAAG,IAAd;AACAR,MAAAA,OAAO,GAAGS,IAAV,CAAe,UAACC,CAAD,EAAY;AACzBL,QAAAA,MAAM,CAACM,OAAP,GAAiBD,CAAC,WAAD,IAAaA,CAA9B;AACAN,QAAAA,WAAW;AACZ,OAHD;AAIA,aAAO,YAAM;AACXI,QAAAA,OAAO,GAAG,KAAV;AACD,OAFD;AAGD,KATD,EASG,EATH;AAUA,QAAMI,IAAI,GAAGP,MAAM,CAACM,OAAP,IAAkBb,OAA/B;AACA,wBAAO,eAAC,IAAD,EAAUG,KAAV,CAAP;AACD,GAfD;AAgBD;;AAED,eAAeF,cAAf","sourcesContent":["import React from 'react';\n\ntype Component = React.ComponentType<any>;\n\nconst Loading: Component = () => null;\n\nfunction SimpleLazyLoad(promise: () => Promise<Component>) {\n  return (props: any) => {\n    const [, forceRender] = React.useReducer((s: number) => s + 1, 0);\n    const Result = React.useRef<Component | null>(null);\n    React.useEffect(() => {\n      let isAlive = true;\n      promise().then((R: any) => {\n        Result.current = R.default || R;\n        forceRender();\n      });\n      return () => {\n        isAlive = false;\n      };\n    }, []);\n    const Comp = Result.current || Loading;\n    return <Comp {...props} />;\n  };\n}\n\nexport default SimpleLazyLoad;\n"],"file":"SimpleLazyLoad.js"}