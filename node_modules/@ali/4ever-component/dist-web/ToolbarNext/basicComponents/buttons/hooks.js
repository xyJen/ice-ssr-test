import React from 'react';
export var useRecentColors = function useRecentColors() {
  var RECENT_COLOR_STORAGE_KEY = 'toolbar-recent-color';
  var recentColorsStorage = localStorage.getItem(RECENT_COLOR_STORAGE_KEY);
  var initRecentColors;

  try {
    initRecentColors = recentColorsStorage ? JSON.parse(recentColorsStorage) : [];
  } catch (_unused) {
    initRecentColors = [];
  }

  var _React$useState = React.useState(initRecentColors),
      recentColors = _React$useState[0],
      setRecentColors = _React$useState[1];

  React.useEffect(function () {
    try {
      localStorage.setItem(RECENT_COLOR_STORAGE_KEY, JSON.stringify(recentColors));
    } catch (e) {
      // 空间不足
      console.error(e);
    }
  }, [recentColors]);
  React.useEffect(function () {
    setRecentColors(initRecentColors);
  }, [recentColorsStorage]);

  var addRecentColor = function addRecentColor(color) {
    var newRecentColors = Array.from(new Set([color].concat(recentColors))).splice(0, 10);
    setRecentColors(newRecentColors);
  };

  return [recentColors, addRecentColor];
};
//# sourceMappingURL=hooks.js.map