{"version":3,"sources":["../../../../../src/ToolbarNext/basicComponents/buttons/ScriptSplitButton.tsx"],"names":["React","SplitButton","List","Tooltip","IconSubscript","IconSuperscript","IconSelected","ScriptSplit","props","onVisibleChange","curScript","onScriptChange","disabled","testid","subItem","supItem","icon","rest","useState","overlayVisible","setOverlayVisible","handleOverlayVisible","useCallback","v","splitButtonIcon","handleClick","items","key","map","title","shortCut","description","content","e","tooltip"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { SplitButton, List, Tooltip } from './Basics';\nimport { IconSubscript, IconSuperscript, IconSelected } from '../icons';\n\ntype ScriptType = 'super' | 'sub';\n\ntype ScriptItem = {\n  title?: string;\n  shortCut?: string;\n  description?: string;\n}\n\nexport interface IScriptSplitButtonProps extends\n  Pick<Partial<React.ComponentProps<typeof SplitButton>>, 'onVisibleChange' | 'disabled' | 'testid' | 'role' | 'icon'> {\n  subItem?: ScriptItem;\n  supItem?: ScriptItem;\n  onScriptChange: (script: ScriptType) => void;\n  curScript?: ScriptType;\n}\n\ntype IListProps = React.ComponentProps<typeof List>;\n\nexport const ScriptSplit = (props: IScriptSplitButtonProps) => {\n\n  const {\n    onVisibleChange,\n    curScript,\n    onScriptChange,\n    disabled,\n    testid,\n    subItem = {},\n    supItem = {},\n    icon,\n    ...rest\n  } = props;\n  const [overlayVisible, setOverlayVisible] = React.useState(false);\n\n  const handleOverlayVisible = React.useCallback((v: boolean) => {\n    setOverlayVisible(v);\n    onVisibleChange && onVisibleChange(v);\n  }, [onVisibleChange]);\n\n  const splitButtonIcon = icon || (curScript === 'sub' ? <IconSubscript /> : <IconSuperscript />);\n\n  const handleClick = React.useCallback(() => {\n    onScriptChange(curScript || 'super');\n    handleOverlayVisible(false);\n  }, [curScript, handleOverlayVisible]);\n\n  const items: IListProps['items'] = [{ key: 'super', ...supItem }, { key: 'sub', ...subItem }].map(({key, title, shortCut, description}) => ({\n    key,\n    content: (\n      <Tooltip\n        placement=\"right\"\n        title={`${title}(${shortCut})`}\n        description={description}\n      >\n        <List.Item\n          key={key}\n          prefix={key === 'super' ? <IconSuperscript /> : <IconSubscript />}\n          suffix={curScript === key ? <IconSelected /> : null}\n          onClick={(e) => {\n            onScriptChange(key as ScriptType);\n            handleOverlayVisible(false);\n          }}\n        >\n          {title}\n        </List.Item>\n      </Tooltip>\n    )\n  }));\n\n  const tooltip = curScript === 'sub' ? subItem : supItem;\n\n  return (\n    <SplitButton\n      onClick={handleClick}\n      overlayVisible={overlayVisible}\n      onVisibleChange={handleOverlayVisible}\n      icon={splitButtonIcon}\n      disabled={disabled}\n      overlay={\n        <List\n          items={items}\n        />\n      }\n      autoClose={false}\n      testid={testid}\n      active={!!curScript}\n      tooltip={tooltip}\n      {...rest}\n    />\n  )\n}\n"],"file":"ScriptSplitButton.js"}