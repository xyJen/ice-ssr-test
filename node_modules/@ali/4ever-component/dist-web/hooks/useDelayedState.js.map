{"version":3,"sources":["../../../src/hooks/useDelayedState.ts"],"names":["useState","useRef","useCallback","useEffect","useDelayedState","initialValue","state","setState","timer","setDelayedState","value","delay","current","clearTimeout","window","setTimeout"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,MAAnB,EAA2BC,WAA3B,EAAwCC,SAAxC,QAAyE,OAAzE;AAEA,eAAe,SAASC,eAAT,CAAkCC,YAAlC,EAAmD;AAAA,kBACtCL,QAAQ,CAACK,YAAD,CAD8B;AAAA,MACzDC,KADyD;AAAA,MAClDC,QADkD;;AAEhE,MAAMC,KAAK,GAAGP,MAAM,CAAgB,IAAhB,CAApB;AACA,MAAMQ,eAAe,GAAGP,WAAW,CAAC,UAACQ,KAAD,EAA2BC,KAA3B,EAA8C;AAChF,QAAIH,KAAK,CAACI,OAAV,EAAmB;AACjBC,MAAAA,YAAY,CAACL,KAAK,CAACI,OAAP,CAAZ;AACD;;AACD,QAAID,KAAJ,EAAW;AACTH,MAAAA,KAAK,CAACI,OAAN,GAAgBE,MAAM,CAACC,UAAP,CAAkB;AAAA,eAAMR,QAAQ,CAACG,KAAD,CAAd;AAAA,OAAlB,EAAyCC,KAAzC,CAAhB;AACD,KAFD,MAEO;AACLJ,MAAAA,QAAQ,CAACG,KAAD,CAAR;AACD;AACF,GATkC,EAShC,EATgC,CAAnC;AAWAP,EAAAA,SAAS,CAAC,YAAM;AACd;AACA,WAAO,YAAM;AACX,UAAIK,KAAK,CAACI,OAAV,EAAmB;AACjBC,QAAAA,YAAY,CAACL,KAAK,CAACI,OAAP,CAAZ;AACD;AACF,KAJD;AAKD,GAPQ,EAON,EAPM,CAAT;AASA,SAAO,CAACN,KAAD,EAAQG,eAAR,CAAP;AACD","sourcesContent":["import { useState, useRef, useCallback, useEffect, SetStateAction } from 'react';\n\nexport default function useDelayedState<T = any>(initialValue: T) {\n  const [state, setState] = useState(initialValue);\n  const timer = useRef<number | null>(null);\n  const setDelayedState = useCallback((value: SetStateAction<T>, delay?: number) => {\n    if (timer.current) {\n      clearTimeout(timer.current);\n    }\n    if (delay) {\n      timer.current = window.setTimeout(() => setState(value), delay);\n    } else {\n      setState(value);\n    }\n  }, []);\n\n  useEffect(() => {\n    // 组件卸载时，保证 timer 被正确清理\n    return () => {\n      if (timer.current) {\n        clearTimeout(timer.current);\n      }\n    };\n  }, []);\n\n  return [state, setDelayedState] as [T, typeof setDelayedState];\n}\n"],"file":"useDelayedState.js"}