{"version":3,"sources":["../../../src/Sidebar/SideBar.tsx"],"names":["React","Controller","connectPlugins","LazyRenderer","Sidebar","renderSidebar","props","type","plugins","controller","split","pluginName","toolName","plugin","hash","sidebar","fn","Component","locale","config","s","render","connectController"],"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAA5B,SAAmBC,UAAnB,QAAqC,oBAArC;AACA,SAAmBC,cAAnB;AACA,SAASC,YAAT;;IAYMC,O;;;;;;;;;;;;UACJC,a,GAAgB,YAAM;AAAA,wBACkB,MAAKC,KADvB;AAAA,UACZC,IADY,eACZA,IADY;AAAA,UACNC,OADM,eACNA,OADM;AAAA,UACGC,UADH,eACGA,UADH;;AAAA,wBAEuBF,IAAI,CAACG,KAAL,CAAW,GAAX,CAFvB;AAAA,UAEbC,UAFa;AAAA;AAAA,UAEDC,QAFC,6BAEU,SAFV;;AAGpB,UAAMC,MAAM,GAAGL,OAAO,CAACM,IAAR,CAAaH,UAAb,CAAf;;AACA,UAAI,CAACE,MAAD,IAAW,CAACA,MAAM,CAACE,OAAvB,EAAgC;AAC9B,eAAO,IAAP;AACD,OANmB,CAQpB;;;AACA,UAAI,OAAOF,MAAM,CAACE,OAAd,KAA0B,UAA9B,EAA0C;AACxC,4BACE,eAAC,YAAD;AACE,UAAA,MAAM,EAAE;AACNC,YAAAA,EAAE,EAAE;AAAA,qBAAOH,MAAM,CAACE,OAAR,EAAN;AAAA;AADE,WADV;AAIE,UAAA,MAAM,EAAE,gBAACA,OAAD,EAAkB;AACxB,gBAAME,SAAS,GAAGF,OAAO,CAACH,QAAD,CAAzB;;AACA,gBAAI,CAACK,SAAL,EAAgB;AACd,qBAAO,IAAP;AACD;;AAED,gCACE,eAAC,SAAD;AAAW,cAAA,UAAU,EAAER,UAAvB;AAAmC,cAAA,MAAM,EAAEM,OAAO,CAACG,MAAR,IAAkB,EAA7D;AAAiE,cAAA,MAAM,EAAEH,OAAO,CAACI,MAAR,IAAkB;AAA3F,cADF;AAGD;AAbH,UADF;AAiBD,OAlBD,MAkBO;AACL,YAAMC,CAAC,GAAGP,MAAM,CAACE,OAAjB;AACA,YAAME,SAAS,GAAGG,CAAC,CAACR,QAAD,CAAnB;;AACA,YAAI,CAACK,SAAL,EAAgB;AACd,iBAAO,IAAP;AACD;;AAED,4BACE,eAAC,SAAD;AAAW,UAAA,UAAU,EAAER,UAAvB;AAAmC,UAAA,MAAM,EAAEW,CAAC,CAACF,MAAF,IAAY,EAAvD;AAA2D,UAAA,MAAM,EAAEE,CAAC,CAACD,MAAF,IAAY;AAA/E,UADF;AAGD;AACF,K;;;;;;;SAEDE,M,GAAA,kBAAS;AACP,wBAAO,eAAC,KAAD,CAAO,QAAP,QAAiB,KAAKhB,aAAL,EAAjB,CAAP;AACD,G;;;EA3CmBL,KAAK,CAACiB,S;;AA8C5B,eAAehB,UAAU,CAACqB,iBAAX,CAA6BpB,cAAc,CAACE,OAAD,CAA3C,CAAf","sourcesContent":["import * as React from 'react';\nimport { BiPlugin, Controller } from '@ali/4ever-cangjie';\nimport {  Plugins, connectPlugins } from '../PluginsContext';\nimport { LazyRenderer } from './LazyRenderer';\n\ninterface IContextType {\n  controller?: Controller;\n}\n\nexport interface SidebarProps extends IContextType {\n  type: string; // 插件名称\n  controller: Controller;\n  plugins: Plugins;\n}\n\nclass Sidebar extends React.Component<SidebarProps> {\n  renderSidebar = () => {\n    const { type, plugins, controller } = this.props;\n    const [pluginName, toolName = 'sidebar'] = type.split('.');\n    const plugin = plugins.hash[pluginName] as BiPlugin;\n    if (!plugin || !plugin.sidebar) {\n      return null;\n    }\n\n    // lazy render\n    if (typeof plugin.sidebar === 'function') {\n      return (\n        <LazyRenderer\n          loader={{\n            fn: () => (plugin.sidebar as any)(),\n          }}\n          render={(sidebar: any) => {\n            const Component = sidebar[toolName];\n            if (!Component) {\n              return null;\n            }\n\n            return (\n              <Component controller={controller} locale={sidebar.locale || {}} config={sidebar.config || {}} />\n            );\n          }}\n        />\n      )\n    } else {\n      const s = plugin.sidebar as any;\n      const Component = s[toolName];\n      if (!Component) {\n        return null;\n      }\n\n      return (\n        <Component controller={controller} locale={s.locale || {}} config={s.config || {}} />\n      );\n    }\n  };\n\n  render() {\n    return <React.Fragment>{this.renderSidebar()}</React.Fragment>;\n  }\n}\n\nexport default Controller.connectController(connectPlugins(Sidebar));\n"],"file":"SideBar.js"}