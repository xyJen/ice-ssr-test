import { getRectOfNodeFirstText } from '@ali/4ever-utils';

var defaultRect = function defaultRect(scale) {
  if (scale === void 0) {
    scale = 1;
  }

  return {
    height: 0,
    top: 0,
    left: -25 / scale
  };
};

var containerHeight = 19;
var offset = 6; // 计算函数，用于计算当前所在位置

export default function calcCurrentPos(currentBlock, container, zoom) {
  if (zoom === void 0) {
    zoom = 1;
  }

  var style = {};

  var _container$getBoundin = container.getBoundingClientRect(),
      containerLeft = _container$getBoundin.left,
      containerTop = _container$getBoundin.top,
      containerWidth = _container$getBoundin.width;

  var _ref = getRectOfNodeFirstText(currentBlock) || defaultRect(zoom),
      textTop = _ref.top,
      textLeft = _ref.left,
      textHeight = _ref.height;

  var height = textHeight ? (textHeight - containerHeight) / 2 : 0;
  var top = textTop + height - containerTop;
  var left = textLeft - containerLeft;
  style.right = (containerWidth - left) / zoom + offset;
  style.top = top / zoom;
  return style;
}
//# sourceMappingURL=calcCurrentPos.js.map