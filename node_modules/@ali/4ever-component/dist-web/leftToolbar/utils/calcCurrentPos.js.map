{"version":3,"sources":["../../../../src/leftToolbar/utils/calcCurrentPos.ts"],"names":["getRectOfNodeFirstText","defaultRect","scale","height","top","left","containerHeight","offset","calcCurrentPos","currentBlock","container","zoom","style","getBoundingClientRect","containerLeft","containerTop","containerWidth","width","textTop","textLeft","textHeight","right"],"mappings":"AAEA,SAASA,sBAAT,QAAuC,kBAAvC;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD;AAAA,MAACA,KAAD;AAACA,IAAAA,KAAD,GAAS,CAAT;AAAA;;AAAA,SAAgB;AAClCC,IAAAA,MAAM,EAAE,CAD0B;AAElCC,IAAAA,GAAG,EAAE,CAF6B;AAGlCC,IAAAA,IAAI,EAAE,CAAC,EAAD,GAAMH;AAHsB,GAAhB;AAAA,CAApB;;AAMA,IAAMI,eAAe,GAAG,EAAxB;AACA,IAAMC,MAAM,GAAG,CAAf,C,CAEA;;AACA,eAAe,SAASC,cAAT,CACbC,YADa,EAEbC,SAFa,EAGbC,IAHa,EAIb;AAAA,MADAA,IACA;AADAA,IAAAA,IACA,GADO,CACP;AAAA;;AACA,MAAMC,KAA0B,GAAG,EAAnC;;AADA,8BAE0EF,SAAS,CAACG,qBAAV,EAF1E;AAAA,MAEcC,aAFd,yBAEQT,IAFR;AAAA,MAEkCU,YAFlC,yBAE6BX,GAF7B;AAAA,MAEuDY,cAFvD,yBAEgDC,KAFhD;;AAAA,aAG6DjB,sBAAsB,CAACS,YAAD,CAAtB,IAAwCR,WAAW,CAACU,IAAD,CAHhH;AAAA,MAGaO,OAHb,QAGQd,GAHR;AAAA,MAG4Be,QAH5B,QAGsBd,IAHtB;AAAA,MAG8Ce,UAH9C,QAGsCjB,MAHtC;;AAIA,MAAMA,MAAM,GAAGiB,UAAU,GAAG,CAACA,UAAU,GAAGd,eAAd,IAAiC,CAApC,GAAwC,CAAjE;AACA,MAAMF,GAAG,GAAGc,OAAO,GAAGf,MAAV,GAAmBY,YAA/B;AACA,MAAMV,IAAI,GAAGc,QAAQ,GAAGL,aAAxB;AACAF,EAAAA,KAAK,CAACS,KAAN,GAAc,CAACL,cAAc,GAAGX,IAAlB,IAA0BM,IAA1B,GAAiCJ,MAA/C;AACAK,EAAAA,KAAK,CAACR,GAAN,GAAYA,GAAG,GAAGO,IAAlB;AACA,SAAOC,KAAP;AACD","sourcesContent":["import React from 'react';\nimport { Block } from '@ali/4ever-cangjie';\nimport { getRectOfNodeFirstText } from '@ali/4ever-utils';\n\nconst defaultRect = (scale = 1) => ({\n  height: 0,\n  top: 0,\n  left: -25 / scale,\n});\n\nconst containerHeight = 19;\nconst offset = 6;\n\n// 计算函数，用于计算当前所在位置\nexport default function calcCurrentPos(\n  currentBlock: Block,\n  container: HTMLElement,\n  zoom = 1,\n) {\n  const style: React.CSSProperties = {};\n  const { left: containerLeft, top: containerTop, width: containerWidth } = container.getBoundingClientRect();\n  const { top: textTop, left: textLeft, height: textHeight } = getRectOfNodeFirstText(currentBlock) || defaultRect(zoom);\n  const height = textHeight ? (textHeight - containerHeight) / 2 : 0;\n  const top = textTop + height - containerTop;\n  const left = textLeft - containerLeft;\n  style.right = (containerWidth - left) / zoom + offset;\n  style.top = top / zoom;\n  return style;\n}\n"],"file":"calcCurrentPos.js"}