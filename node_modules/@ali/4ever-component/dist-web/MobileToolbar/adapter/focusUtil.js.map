{"version":3,"sources":["../../../../src/MobileToolbar/adapter/focusUtil.ts"],"names":["constants","getTextArea","controller","key","value","document","window","querySelector","Selector","dockey","enterFocusMode","textArea","blur","setAttribute","run","exitFocusMode","autoFocus","removeAttribute","focus"],"mappings":"AAAA,SAAqBA,SAArB,QAAsC,oBAAtC,C,CAEA;;AACA,SAASC,WAAT,CAAqBC,UAArB,EAA6C;AAAA,MACnCC,GADmC,GAC3BD,UAAU,CAACE,KAAX,CAAiBC,QADU,CACnCF,GADmC;AAE3C,SAAOG,MAAM,CAACD,QAAP,CAAgBE,aAAhB,OACDP,SAAS,CAACQ,QAAV,CAAmBC,MADlB,WAC6BN,GAD7B,SAAP;AAGD,C,CAED;;;AACA,OAAO,SAASO,cAAT,CAAwBR,UAAxB,EAAgD;AACrD,MAAMS,QAAQ,GAAGV,WAAW,CAACC,UAAD,CAA5B;AACAS,EAAAA,QAAQ,QAAR,YAAAA,QAAQ,CAAEC,IAAV;AACAD,EAAAA,QAAQ,QAAR,YAAAA,QAAQ,CAAEE,YAAV,CAAuB,UAAvB,EAAmC,MAAnC;AACAX,EAAAA,UAAU,CAACY,GAAX,CAAe,gBAAf;AACD,C,CAED;;AACA,OAAO,SAASC,aAAT,CAAuBb,UAAvB,EAA+Cc,SAA/C,EAAmE;AACxE,MAAML,QAAQ,GAAGV,WAAW,CAACC,UAAD,CAA5B;AACAS,EAAAA,QAAQ,QAAR,YAAAA,QAAQ,CAAEM,eAAV,CAA0B,UAA1B;;AACA,MAAID,SAAJ,EAAe;AACbL,IAAAA,QAAQ,QAAR,YAAAA,QAAQ,CAAEO,KAAV;AACD;AACF","sourcesContent":["import { Controller, constants } from '@ali/4ever-cangjie';\n\n// 获取 text area dom 节点\nfunction getTextArea(controller: Controller) {\n  const { key } = controller.value.document;\n  return window.document.querySelector(\n    `[${constants.Selector.dockey}=\"${key}\"]`,\n  ) as HTMLTextAreaElement | undefined;\n}\n\n// 进入底部 panel 模式，此时是聚焦状态、但是键盘没有弹出\nexport function enterFocusMode(controller: Controller) {\n  const textArea = getTextArea(controller);\n  textArea?.blur();\n  textArea?.setAttribute('disabled', 'true');\n  controller.run('onCangjieFocus');\n}\n\n// 退出底部 panel 模式\nexport function exitFocusMode(controller: Controller, autoFocus: boolean) {\n  const textArea = getTextArea(controller);\n  textArea?.removeAttribute('disabled');\n  if (autoFocus) {\n    textArea?.focus();\n  }\n}\n"],"file":"focusUtil.js"}