import React from 'react';
import { domUtils, useScrollableContainer, useScrollableContent } from '@ali/4ever-cangjie';
import { BOTTOM_BAR_SIZE, SUBLINE_MARGIN_BOTTOM } from "../constant";
// 在打开二级浮出菜单、底部二级面板时候，处理正文的滚动，避免光标被遮挡
export default function useContentScroll(subLine, panelItem, controller, top) {
  var content = useScrollableContent();
  var container = useScrollableContainer();
  React.useEffect(function () {
    var visualHeight = 0;

    if (subLine) {
      visualHeight = top - SUBLINE_MARGIN_BOTTOM;
    } else if (panelItem) {
      visualHeight = top + BOTTOM_BAR_SIZE;
    } // @ts-ignore


    window._visualHeight = visualHeight;
    return function () {
      // @ts-ignore
      window._visualHeight = 0;
    };
  }, [panelItem, subLine, top]);
  React.useEffect(function () {
    if (subLine) {
      var selection = controller.value.selection;
      var defaultEle = window.document.documentElement;
      var cnt = content || defaultEle;
      var scroller = (container instanceof Window ? defaultEle : container) || defaultEle;
      domUtils.scrollToSelection(selection, cnt, scroller, controller);
    }
  }, [subLine, controller, content, container]);
}
//# sourceMappingURL=useContentScroll.js.map