{"version":3,"sources":["../../../../src/leftToolbar/utils/calcCurrentPos.ts"],"names":["defaultRect","scale","height","top","left","containerHeight","offset","calcCurrentPos","currentBlock","container","zoom","style","containerLeft","containerTop","width","containerWidth","getBoundingClientRect","textTop","textLeft","textHeight","right"],"mappings":";;;;;;;AAEA;;AAEA,MAAMA,WAAW,GAAG,CAACC,KAAK,GAAG,CAAT,MAAgB;AAClCC,EAAAA,MAAM,EAAE,CAD0B;AAElCC,EAAAA,GAAG,EAAE,CAF6B;AAGlCC,EAAAA,IAAI,EAAE,CAAC,EAAD,GAAMH;AAHsB,CAAhB,CAApB;;AAMA,MAAMI,eAAe,GAAG,EAAxB;AACA,MAAMC,MAAM,GAAG,CAAf,C,CAEA;;AACe,SAASC,cAAT,CACbC,YADa,EAEbC,SAFa,EAGbC,IAAI,GAAG,CAHM,EAIb;AACA,QAAMC,KAA0B,GAAG,EAAnC;AACA,QAAM;AAAEP,IAAAA,IAAI,EAAEQ,aAAR;AAAuBT,IAAAA,GAAG,EAAEU,YAA5B;AAA0CC,IAAAA,KAAK,EAAEC;AAAjD,MAAoEN,SAAS,CAACO,qBAAV,EAA1E;AACA,QAAM;AAAEb,IAAAA,GAAG,EAAEc,OAAP;AAAgBb,IAAAA,IAAI,EAAEc,QAAtB;AAAgChB,IAAAA,MAAM,EAAEiB;AAAxC,MAAuD,uCAAuBX,YAAvB,KAAwCR,WAAW,CAACU,IAAD,CAAhH;AACA,QAAMR,MAAM,GAAGiB,UAAU,GAAG,CAACA,UAAU,GAAGd,eAAd,IAAiC,CAApC,GAAwC,CAAjE;AACA,QAAMF,GAAG,GAAGc,OAAO,GAAGf,MAAV,GAAmBW,YAA/B;AACA,QAAMT,IAAI,GAAGc,QAAQ,GAAGN,aAAxB;AACAD,EAAAA,KAAK,CAACS,KAAN,GAAc,CAACL,cAAc,GAAGX,IAAlB,IAA0BM,IAA1B,GAAiCJ,MAA/C;AACAK,EAAAA,KAAK,CAACR,GAAN,GAAYA,GAAG,GAAGO,IAAlB;AACA,SAAOC,KAAP;AACD","sourcesContent":["import React from 'react';\nimport { Block } from '@ali/4ever-cangjie';\nimport { getRectOfNodeFirstText } from '@ali/4ever-utils';\n\nconst defaultRect = (scale = 1) => ({\n  height: 0,\n  top: 0,\n  left: -25 / scale,\n});\n\nconst containerHeight = 19;\nconst offset = 6;\n\n// 计算函数，用于计算当前所在位置\nexport default function calcCurrentPos(\n  currentBlock: Block,\n  container: HTMLElement,\n  zoom = 1,\n) {\n  const style: React.CSSProperties = {};\n  const { left: containerLeft, top: containerTop, width: containerWidth } = container.getBoundingClientRect();\n  const { top: textTop, left: textLeft, height: textHeight } = getRectOfNodeFirstText(currentBlock) || defaultRect(zoom);\n  const height = textHeight ? (textHeight - containerHeight) / 2 : 0;\n  const top = textTop + height - containerTop;\n  const left = textLeft - containerLeft;\n  style.right = (containerWidth - left) / zoom + offset;\n  style.top = top / zoom;\n  return style;\n}\n"],"file":"calcCurrentPos.js"}