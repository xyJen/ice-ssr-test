"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = calcCurrentPos;

var _everUtils = require("@ali/4ever-utils");

const defaultRect = (scale = 1) => ({
  height: 0,
  top: 0,
  left: -25 / scale
});

const containerHeight = 19;
const offset = 6; // 计算函数，用于计算当前所在位置

function calcCurrentPos(currentBlock, container, zoom = 1) {
  const style = {};
  const {
    left: containerLeft,
    top: containerTop,
    width: containerWidth
  } = container.getBoundingClientRect();
  const {
    top: textTop,
    left: textLeft,
    height: textHeight
  } = (0, _everUtils.getRectOfNodeFirstText)(currentBlock) || defaultRect(zoom);
  const height = textHeight ? (textHeight - containerHeight) / 2 : 0;
  const top = textTop + height - containerTop;
  const left = textLeft - containerLeft;
  style.right = (containerWidth - left) / zoom + offset;
  style.top = top / zoom;
  return style;
}
//# sourceMappingURL=calcCurrentPos.js.map