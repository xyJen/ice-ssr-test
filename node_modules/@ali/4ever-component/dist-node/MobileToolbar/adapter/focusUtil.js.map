{"version":3,"sources":["../../../../src/MobileToolbar/adapter/focusUtil.ts"],"names":["getTextArea","controller","key","value","document","window","querySelector","constants","Selector","dockey","enterFocusMode","textArea","blur","setAttribute","run","exitFocusMode","autoFocus","removeAttribute","focus"],"mappings":";;;;;;;;AAAA;;AAEA;AACA,SAASA,WAAT,CAAqBC,UAArB,EAA6C;AAC3C,QAAM;AAAEC,IAAAA;AAAF,MAAUD,UAAU,CAACE,KAAX,CAAiBC,QAAjC;AACA,SAAOC,MAAM,CAACD,QAAP,CAAgBE,aAAhB,CACJ,IAAGC,uBAAUC,QAAV,CAAmBC,MAAO,KAAIP,GAAI,IADjC,CAAP;AAGD,C,CAED;;;AACO,SAASQ,cAAT,CAAwBT,UAAxB,EAAgD;AACrD,QAAMU,QAAQ,GAAGX,WAAW,CAACC,UAAD,CAA5B;AACAU,EAAAA,QAAQ,EAAEC,IAAV;AACAD,EAAAA,QAAQ,EAAEE,YAAV,CAAuB,UAAvB,EAAmC,MAAnC;AACAZ,EAAAA,UAAU,CAACa,GAAX,CAAe,gBAAf;AACD,C,CAED;;;AACO,SAASC,aAAT,CAAuBd,UAAvB,EAA+Ce,SAA/C,EAAmE;AACxE,QAAML,QAAQ,GAAGX,WAAW,CAACC,UAAD,CAA5B;AACAU,EAAAA,QAAQ,EAAEM,eAAV,CAA0B,UAA1B;;AACA,MAAID,SAAJ,EAAe;AACbL,IAAAA,QAAQ,EAAEO,KAAV;AACD;AACF","sourcesContent":["import { Controller, constants } from '@ali/4ever-cangjie';\n\n// 获取 text area dom 节点\nfunction getTextArea(controller: Controller) {\n  const { key } = controller.value.document;\n  return window.document.querySelector(\n    `[${constants.Selector.dockey}=\"${key}\"]`,\n  ) as HTMLTextAreaElement | undefined;\n}\n\n// 进入底部 panel 模式，此时是聚焦状态、但是键盘没有弹出\nexport function enterFocusMode(controller: Controller) {\n  const textArea = getTextArea(controller);\n  textArea?.blur();\n  textArea?.setAttribute('disabled', 'true');\n  controller.run('onCangjieFocus');\n}\n\n// 退出底部 panel 模式\nexport function exitFocusMode(controller: Controller, autoFocus: boolean) {\n  const textArea = getTextArea(controller);\n  textArea?.removeAttribute('disabled');\n  if (autoFocus) {\n    textArea?.focus();\n  }\n}\n"],"file":"focusUtil.js"}