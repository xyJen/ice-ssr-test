{"version":3,"sources":["../../../src/idleRender/SimpleLazyLoad.tsx"],"names":["Loading","SimpleLazyLoad","promise","props","forceRender","React","useReducer","s","Result","useRef","useEffect","isAlive","then","R","current","default","Comp"],"mappings":";;;;;;;;;AAAA;;uBAC4B,a;;AAG5B,MAAMA,OAAkB,GAAG,MAAM,IAAjC;;AAEA,SAASC,cAAT,CAAwBC,OAAxB,EAA2D;AACzD,SAAQC,KAAD,IAAgB;AACrB,UAAM,GAAGC,WAAH,IAAkBC,eAAMC,UAAN,CAAkBC,CAAD,IAAeA,CAAC,GAAG,CAApC,EAAuC,CAAvC,CAAxB;;AACA,UAAMC,MAAM,GAAGH,eAAMI,MAAN,CAA+B,IAA/B,CAAf;;AACAJ,mBAAMK,SAAN,CAAgB,MAAM;AACpB,UAAIC,OAAO,GAAG,IAAd;AACAT,MAAAA,OAAO,GAAGU,IAAV,CAAgBC,CAAD,IAAY;AACzBL,QAAAA,MAAM,CAACM,OAAP,GAAiBD,CAAC,CAACE,OAAF,IAAaF,CAA9B;AACAT,QAAAA,WAAW;AACZ,OAHD;AAIA,aAAO,MAAM;AACXO,QAAAA,OAAO,GAAG,KAAV;AACD,OAFD;AAGD,KATD,EASG,EATH;;AAUA,UAAMK,IAAI,GAAGR,MAAM,CAACM,OAAP,IAAkBd,OAA/B;AACA,wBAAO,eAAC,IAAD,EAAUG,KAAV,CAAP;AACD,GAfD;AAgBD;;eAEcF,c","sourcesContent":["import React from 'react';\n\ntype Component = React.ComponentType<any>;\n\nconst Loading: Component = () => null;\n\nfunction SimpleLazyLoad(promise: () => Promise<Component>) {\n  return (props: any) => {\n    const [, forceRender] = React.useReducer((s: number) => s + 1, 0);\n    const Result = React.useRef<Component | null>(null);\n    React.useEffect(() => {\n      let isAlive = true;\n      promise().then((R: any) => {\n        Result.current = R.default || R;\n        forceRender();\n      });\n      return () => {\n        isAlive = false;\n      };\n    }, []);\n    const Comp = Result.current || Loading;\n    return <Comp {...props} />;\n  };\n}\n\nexport default SimpleLazyLoad;\n"],"file":"SimpleLazyLoad.js"}