{"version":3,"sources":["../../../src/Sidebar/inputNumber.tsx"],"names":["Wrapper","styled","div","Title","InputWrapper","InputUnit","span","InputNumberItem","props","title","unit","onChange","value","max","min","step","style","name","disabled","precision","testid","role","ref","React","useRef","displayValue","setDisplayValue","useState","handleChange","useCallback","change","handleBlur","isNaN","handlePressEnter","current","blur","handleStep","info","useEffect","Number","undefined","CustomInputNumberItem","content"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport { InputNumber } from '@ali/we-design';\nimport { isNumber } from 'lodash-es';\n\ninterface IInputNumberProps {\n  name: string;\n  title?: string;\n  unit?: string;\n  onChange: (value: number | string) => void;\n  min?: number;\n  max?: number;\n  value: number;\n  step?: number;\n  style?: React.CSSProperties;\n  placeholder?: string;\n  disabled?: boolean;\n  precision?: number;\n  testid?: string;\n  role?: string;\n}\n\nconst Wrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 28px;\n  justify-content: space-between;\n`;\nconst Title = styled.div`\n  font-size: 12px;\n  margin-bottom: 4px;\n`;\n\nconst InputWrapper = styled.div`\n  grid-column-start: 1;\n  grid-column-end: 2;\n  .image-sidebar-common-input {\n    flex: 1;\n  }\n`;\n\nconst InputUnit = styled.span`\n  display: inline-block;\n  width: 28px;\n  line-height: 28px;\n  margin-left: 4px;\n`;\n\nexport const InputNumberItem: React.FC<IInputNumberProps> = (props) => {\n  const { title, unit, onChange, value, max, min, step = 1, style, name, disabled, precision = 2, testid, role } = props;\n  const ref = React.useRef<any>();\n  const [displayValue, setDisplayValue] = React.useState(value);\n  const handleChange = React.useCallback((change) => {\n    setDisplayValue(change);\n  }, []);\n\n  const handleBlur = React.useCallback(() => {\n    if (!isNumber(displayValue) || isNaN(displayValue) || (isNumber(max) && displayValue > max) || (isNumber(min) && displayValue < min)) {\n      setDisplayValue(value);\n      return;\n    }\n    onChange(displayValue);\n  }, [displayValue, onChange, value, max, min]);\n\n  const handlePressEnter = React.useCallback(() => {\n    ref?.current?.blur();\n  }, []);\n\n  const handleStep = React.useCallback((value, info) => {\n    onChange(value);\n  }, [onChange]);\n\n  React.useEffect(() => {\n    setDisplayValue(value);\n  }, [value]);\n\n  return (\n    <Wrapper style={style}>\n      <Title>{title}</Title>\n      <InputWrapper data-role={role}>\n        <InputNumber\n          precision={precision}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          onPressEnter={handlePressEnter}\n          onStep={handleStep}\n          value={Number.isNaN(displayValue) ? undefined : displayValue}\n          max={max}\n          min={min}\n          step={step}\n          className=\"image-sidebar-common-input\"\n          ref={ref}\n          name={name}\n          disabled={disabled}\n          testid={testid}\n        />\n      </InputWrapper>\n      {\n        unit && (\n          <InputUnit>\n            {unit}\n          </InputUnit>\n        )\n      }\n    </Wrapper>\n  );\n};\n\nexport interface ICustomInputNumberItemProps {\n  title: string;\n  content: React.ReactNode;\n  style: React.CSSProperties;\n}\n\nexport const CustomInputNumberItem: React.FC<ICustomInputNumberItemProps> = (props) => {\n  const { title, content, style } = props;\n  return (\n    <Wrapper style={style}>\n      <Title>{title}</Title>\n      <InputWrapper>\n        { content }\n      </InputWrapper>\n    </Wrapper>\n  )\n }\n"],"file":"inputNumber.js"}