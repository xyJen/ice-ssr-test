{"version":3,"sources":["../../../../../src/ToolbarNext/basicComponents/buttons/hooks.tsx"],"names":["useRecentColors","RECENT_COLOR_STORAGE_KEY","recentColorsStorage","localStorage","getItem","initRecentColors","JSON","parse","recentColors","setRecentColors","React","useState","useEffect","setItem","stringify","e","console","error","addRecentColor","color","newRecentColors","Array","from","Set","splice"],"mappings":";;;;;;;;;AAAA;;AAEO,MAAMA,eAAe,GAAG,MAAM;AACnC,QAAMC,wBAAwB,GAAG,sBAAjC;AACA,QAAMC,mBAAmB,GAAGC,YAAY,CAACC,OAAb,CAAqBH,wBAArB,CAA5B;AAEA,MAAII,gBAAJ;;AACA,MAAI;AACFA,IAAAA,gBAAgB,GAAGH,mBAAmB,GAAGI,IAAI,CAACC,KAAL,CAAWL,mBAAX,CAAH,GAAqC,EAA3E;AACD,GAFD,CAEE,MAAM;AACNG,IAAAA,gBAAgB,GAAG,EAAnB;AACD;;AAED,QAAM,CAACG,YAAD,EAAeC,eAAf,IAAkCC,eAAMC,QAAN,CAAyBN,gBAAzB,CAAxC;;AAEAK,iBAAME,SAAN,CAAgB,MAAM;AACpB,QAAI;AACFT,MAAAA,YAAY,CAACU,OAAb,CAAqBZ,wBAArB,EAA+CK,IAAI,CAACQ,SAAL,CAAeN,YAAf,CAA/C;AACD,KAFD,CAEE,OAAMO,CAAN,EAAS;AACT;AACAC,MAAAA,OAAO,CAACC,KAAR,CAAcF,CAAd;AACD;AACF,GAPD,EAOG,CAACP,YAAD,CAPH;;AASAE,iBAAME,SAAN,CAAgB,MAAM;AACpBH,IAAAA,eAAe,CAACJ,gBAAD,CAAf;AACD,GAFD,EAEG,CAACH,mBAAD,CAFH;;AAIA,QAAMgB,cAAc,GAAIC,KAAD,IAAmB;AACxC,UAAMC,eAAe,GAAGC,KAAK,CAACC,IAAN,CAAW,IAAIC,GAAJ,CAAQ,CAACJ,KAAD,EAAQ,GAAGX,YAAX,CAAR,CAAX,EAA8CgB,MAA9C,CAAqD,CAArD,EAAwD,EAAxD,CAAxB;AACAf,IAAAA,eAAe,CAACW,eAAD,CAAf;AACD,GAHD;;AAMA,SAAO,CAACZ,YAAD,EAAeU,cAAf,CAAP;AACD,CAjCM","sourcesContent":["import React from 'react';\n\nexport const useRecentColors = () => {\n  const RECENT_COLOR_STORAGE_KEY = 'toolbar-recent-color';\n  const recentColorsStorage = localStorage.getItem(RECENT_COLOR_STORAGE_KEY);\n\n  let initRecentColors: string[];\n  try {\n    initRecentColors = recentColorsStorage ? JSON.parse(recentColorsStorage) : [];\n  } catch {\n    initRecentColors = [];\n  }\n\n  const [recentColors, setRecentColors] = React.useState<string[]>(initRecentColors);\n\n  React.useEffect(() => {\n    try {\n      localStorage.setItem(RECENT_COLOR_STORAGE_KEY, JSON.stringify(recentColors));\n    } catch(e) {\n      // 空间不足\n      console.error(e);\n    }\n  }, [recentColors]);\n\n  React.useEffect(() => {\n    setRecentColors(initRecentColors);\n  }, [recentColorsStorage]);\n\n  const addRecentColor = (color: string) => {\n    const newRecentColors = Array.from(new Set([color, ...recentColors])).splice(0, 10);\n    setRecentColors(newRecentColors);\n  };\n\n\n  return [recentColors, addRecentColor] as [string[], (color: string) => void];\n};"],"file":"hooks.js"}