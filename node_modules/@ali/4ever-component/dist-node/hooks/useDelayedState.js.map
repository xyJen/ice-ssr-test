{"version":3,"sources":["../../../src/hooks/useDelayedState.ts"],"names":["useDelayedState","initialValue","state","setState","timer","setDelayedState","value","delay","current","clearTimeout","window","setTimeout"],"mappings":";;;;;;;AAAA;;AAEe,SAASA,eAAT,CAAkCC,YAAlC,EAAmD;AAChE,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoB,qBAASF,YAAT,CAA1B;AACA,QAAMG,KAAK,GAAG,mBAAsB,IAAtB,CAAd;AACA,QAAMC,eAAe,GAAG,wBAAY,CAACC,KAAD,EAA2BC,KAA3B,KAA8C;AAChF,QAAIH,KAAK,CAACI,OAAV,EAAmB;AACjBC,MAAAA,YAAY,CAACL,KAAK,CAACI,OAAP,CAAZ;AACD;;AACD,QAAID,KAAJ,EAAW;AACTH,MAAAA,KAAK,CAACI,OAAN,GAAgBE,MAAM,CAACC,UAAP,CAAkB,MAAMR,QAAQ,CAACG,KAAD,CAAhC,EAAyCC,KAAzC,CAAhB;AACD,KAFD,MAEO;AACLJ,MAAAA,QAAQ,CAACG,KAAD,CAAR;AACD;AACF,GATuB,EASrB,EATqB,CAAxB;AAWA,wBAAU,MAAM;AACd;AACA,WAAO,MAAM;AACX,UAAIF,KAAK,CAACI,OAAV,EAAmB;AACjBC,QAAAA,YAAY,CAACL,KAAK,CAACI,OAAP,CAAZ;AACD;AACF,KAJD;AAKD,GAPD,EAOG,EAPH;AASA,SAAO,CAACN,KAAD,EAAQG,eAAR,CAAP;AACD","sourcesContent":["import { useState, useRef, useCallback, useEffect, SetStateAction } from 'react';\n\nexport default function useDelayedState<T = any>(initialValue: T) {\n  const [state, setState] = useState(initialValue);\n  const timer = useRef<number | null>(null);\n  const setDelayedState = useCallback((value: SetStateAction<T>, delay?: number) => {\n    if (timer.current) {\n      clearTimeout(timer.current);\n    }\n    if (delay) {\n      timer.current = window.setTimeout(() => setState(value), delay);\n    } else {\n      setState(value);\n    }\n  }, []);\n\n  useEffect(() => {\n    // 组件卸载时，保证 timer 被正确清理\n    return () => {\n      if (timer.current) {\n        clearTimeout(timer.current);\n      }\n    };\n  }, []);\n\n  return [state, setDelayedState] as [T, typeof setDelayedState];\n}\n"],"file":"useDelayedState.js"}