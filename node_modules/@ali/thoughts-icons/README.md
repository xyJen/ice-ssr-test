# @ali/thoughts-icons

Thoughts 基础图标及组件

## 已支持的 iconfont 库

- AT-基础图标
- Thoughts
- Thoughts-color
- Teamedia

## 安装

```sh
# 使用 Yarn
yarn add -D @ali/thoughts-icons

# 使用 npm
npm install -D @ali/thoughts-icons

# 使用 tnpm
tnpm install -D @ali/thoughts-icons
```

非 tnpm 用户需要先配置 registry

```sh
# 使用 Yarn
yarn config set @ali:registry https://registry.npm.alibaba-inc.com

# 使用 npm
npm config set @ali:registry https://registry.npm.alibaba-inc.com

# tnpm 内置了，不用单独配置
```

## 基本使用

```typescript
import { Icon, IconType } from '@ali/thoughts-icons'

// 推荐写法
<Icon type={ IconType.atAddFolder } />

// 等效写法
<Icon type='at-add-folder' />
```

## Demo

> 该 Demo 主要是为了开发验证方便，并未产品化。日常使用推荐 [Fridge](https://thoughts.teambition.com/sharespace/5ee3232afdcb70001a907189)。

执行 `yarn demo` 后访问浏览器（默认为 localhost:5000），你会看到一个简易的 Demo，用于展示所有可用的图标及其类名，并提供基本的检索能力。

![](./doc/demo.jpg)

## 初始化

图标资源发生变更后，需执行以下命令进行初始化。

```sh
yarn setup
```

该命令会读取 `src/iconfonts` 下的文件，并：
- 自动读取各图标库的 `iconfont.js`，生成对应的 `symbol.ts`，用于加载图标的 SVG 资源。
- 自动读取各图标库的 `iconfont.json`，生成枚举类型 `IconType`，写入 `src/declare.ts`，方便开发者调用。

> `yarn dev`、`yarn build` 等命令会自动执行该过程，你也可以通过 `yarn setup` 命令单独执行初始化过程。


## 开发

执行以下命令，即可启动一个支持热更新的本地服务器，对组件的效果进行预览。

```sh
yarn dev
```

## 构建

```sh
yarn build         # 执行完整的构建流程
yarn build:bundle  # 单独构建库文件
yarn build:demo    # 单独构建 Demo
```

## 发布

这里仅演示常规发布，更多发布选项详见 `package.json` 。

```sh
# 一定要构建一下，否则最后发布的还是上一次的内容
yarn build

# 打版本（默认 minor）
yarn release
git push --follow-tags

# 发布到阿里的 npm
tnpm publish
```

## iconfont 的资源有了更新，如何同步到这个库

1. 访问 iconfont 网站，进入到你需要的项目。
2. 点击页面上方的「下载至本地」按钮，下载完整的资源包。
3. 将下载后的内容解压，添加或替换 `src/iconfont` 目录下的文件。
  1. 如果是新增图标库，还需编辑 `src/iconfonts/index.ts`，在文件顶部引入新加入图标库的配置文件，并给 `ICONFONT_CONFIGS`, `SYMBOL_LOADERS` 各新增一项。
4. 重新构建、发布。
