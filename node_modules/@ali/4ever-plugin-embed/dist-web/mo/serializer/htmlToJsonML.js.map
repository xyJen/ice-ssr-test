{"version":3,"sources":["../../../../src/mo/serializer/htmlToJsonML.ts"],"names":["createTextWithString","name","onOpenTag","state","attrs","rawAttrs","src","title","type","mimeType","size","Number","viewType","previewSize","height","embed","push","onCloseTag","video","pop","append"],"mappings":"AAGA,SAAgCA,oBAAhC,QAA4D,oBAA5D;AAEA,eAAe;AACbC,EAAAA,IAAI,EAAE,OADO;AAGbC,EAAAA,SAHa,qBAGHC,KAHG,EAGaF,IAHb,EAG2BG,KAH3B,EAGyD;AACpE,QAAIH,IAAI,KAAK,OAAb,EAAsB,OAAO,KAAP;AAEtB,QAAMI,QAA2E,GAAG;AAClFC,MAAAA,GAAG,EAAEF,KAAK,CAACE,GAAN,IAAa,EADgE;AAElFL,MAAAA,IAAI,EAAEG,KAAK,CAACG,KAAN,GAAcH,KAAK,CAACG,KAApB,GAA4B,EAFgD;AAGlFC,MAAAA,IAAI,EAAE,OAH4E;AAIlFC,MAAAA,QAAQ,EAAE,EAJwE;AAKlFC,MAAAA,IAAI,EAAEC,MAAM,CAACP,KAAK,CAAC,WAAD,CAAN,CAAN,IAA8B,CAL8C;AAMlFQ,MAAAA,QAAQ,EAAE,SANwE;AAOlFC,MAAAA,WAAW,EAAE;AACXC,QAAAA,MAAM,EAAE;AADG;AAPqE,KAApF;AAYA,QAAMC,KAAa,GAAG,CAAC,OAAD,EAAUV,QAAV,EAAoBL,oBAAoB,CAAC,EAAD,CAAxC,CAAtB;AACAG,IAAAA,KAAK,CAACa,IAAN,CAAWD,KAAX;AACA,WAAO,IAAP;AACD,GArBY;AAuBbE,EAAAA,UAvBa,sBAuBFd,KAvBE,EAuBcF,IAvBd,EAuBqC;AAChD,QAAIA,IAAI,KAAK,OAAb,EAAsB,OAAO,KAAP;AAEtB,QAAMiB,KAAK,GAAGf,KAAK,CAACgB,GAAN,EAAd;AACAhB,IAAAA,KAAK,CAACiB,MAAN,CAAaF,KAAb;AACA,WAAO,IAAP;AACD;AA7BY,CAAf","sourcesContent":["import {\n  JsonML,\n} from '@ali/4ever-utils';\nimport { MoState, MoAttributes, createTextWithString } from '@ali/4ever-cangjie';\n\nexport default {\n  name: 'embed',\n\n  onOpenTag(state: MoState, name: string, attrs: MoAttributes): boolean {\n    if (name !== 'video') return false;\n\n    const rawAttrs: Record<string, string | number | Record<string, string | number>> = {\n      src: attrs.src || '',\n      name: attrs.title ? attrs.title : '',\n      type: 'video',\n      mimeType: '',\n      size: Number(attrs['data-size']) || 0,\n      viewType: 'preview',\n      previewSize: {\n        height: 300,\n      },\n    };\n\n    const embed: JsonML = ['embed', rawAttrs, createTextWithString('')] as JsonML;\n    state.push(embed);\n    return true;\n  },\n\n  onCloseTag(state: MoState, name: string): boolean {\n    if (name !== 'video') return false;\n\n    const video = state.pop();\n    state.append(video);\n    return true;\n  },\n};\n"],"file":"htmlToJsonML.js"}