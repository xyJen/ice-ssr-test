"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = usePreviewCopy;

var _react = require("react");

var _everCangjie = require("@ali/4ever-cangjie");

var _isHotkey = require("is-hotkey");

const isCopyHotKey = (0, _isHotkey.isKeyHotkey)('mod+c');
/**
 * 处理只读页面（只读权限 + QuickPreview）无法快捷键复制
 */

function usePreviewCopy(controller) {
  const readOnly = controller.readOnly || controller.query('isQuickPreview');
  const onKeydown = (0, _react.useCallback)(event => {
    const {
      isExpanded
    } = controller.value.selection;

    if (_everCangjie.environment.IS_MOBILE && isExpanded && isCopyHotKey(event)) {
      controller.run('onAction', {
        type: _everCangjie.ContextMenu.ACTION_COPY
      });
    }
  }, [controller]);
  (0, _react.useEffect)(() => {
    readOnly && document.addEventListener('keydown', onKeydown);
    return () => {
      readOnly && document.removeEventListener('keydown', onKeydown);
    };
  }, [onKeydown, readOnly]);
}
//# sourceMappingURL=usePreviewCopy.js.map