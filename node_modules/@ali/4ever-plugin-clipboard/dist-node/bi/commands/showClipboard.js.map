{"version":3,"sources":["../../../../src/bi/commands/showClipboard.ts"],"names":["showClipboard","controller","selection","anchor","focus","value","isTextPoint","setData","data","_clipboardPanel","Date","getTime","run","Decoration","create","start","end","mark","Mark","fromJSON","type","PASTE_DECORATION"],"mappings":";;;;;;;AAAA;;AAMA;;AACA;;AAEO,SAASA,aAAT,CACLC,UADK,EAELC,SAFK,EAGO;AACZ,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAAoBF,SAAS,IAAID,UAAU,CAACI,KAAX,CAAiBH,SAAxD;;AACA,MAAIC,MAAM,CAACG,WAAP,MAAwBF,KAAK,CAACE,WAAN,EAA5B,EAAiD;AAC/CL,IAAAA,UAAU,CACPM,OADH,CACW,EACP,GAAGN,UAAU,CAACI,KAAX,CAAiBG,IADb;AAEPC,MAAAA,eAAe,EAAG,QAAO,IAAIC,IAAJ,GAAWC,OAAX,EAAqB;AAFvC,KADX,EAKGC,GALH,CAMI,UANJ,EAOI,6BACEC,wBAAWC,MAAX,CAAkB;AAChBC,MAAAA,KAAK,EAAEZ,MADS;AAEhBa,MAAAA,GAAG,EAAEZ,KAFW;AAGhBa,MAAAA,IAAI,EAAEC,kBAAKC,QAAL,CAAc;AAAEC,QAAAA,IAAI,EAAEC;AAAR,OAAd;AAHU,KAAlB,CADF,CAPJ;AAeD;;AAED,SAAOpB,UAAP;AACD","sourcesContent":["import {\n  Controller,\n  Decoration,\n  Mark,\n  Selection,\n} from '@ali/4ever-cangjie';\nimport { setDecorations } from '../actions';\nimport { PASTE_DECORATION } from '../../utils/constants';\n\nexport function showClipboard(\n  controller: Controller,\n  selection?: Selection\n): Controller {\n  const { anchor, focus } = selection || controller.value.selection;\n  if (anchor.isTextPoint() && focus.isTextPoint()) {\n    controller\n      .setData({\n        ...controller.value.data,\n        _clipboardPanel: `show-${new Date().getTime()}`,\n      })\n      .run(\n        'onAction',\n        setDecorations(\n          Decoration.create({\n            start: anchor,\n            end: focus,\n            mark: Mark.fromJSON({ type: PASTE_DECORATION }),\n          }),\n        ),\n      );\n  }\n\n  return controller;\n}\n"],"file":"showClipboard.js"}