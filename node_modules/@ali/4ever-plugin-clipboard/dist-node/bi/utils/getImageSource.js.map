{"version":3,"sources":["../../../../src/bi/utils/getImageSource.ts"],"names":["getImageSource","fragment","nodes","length","block","Text","isEmptyText","getFirstNode","getLastNode","Image","isImage","data","src"],"mappings":";;;;;;;AAAA;;AACA;;AAEe,SAASA,cAAT,CAAwBC,QAAxB,EAA4C;AACzD,MAAIA,QAAQ,EAAEC,KAAV,EAAiBC,MAAjB,KAA4B,CAAhC,EAAmC;AACjC,WAAO,IAAP;AACD;;AACD,QAAMC,KAAK,GAAGH,QAAQ,CAACC,KAAT,CAAe,CAAf,CAAd;;AACA,MACEE,KAAK,CAACF,KAAN,CAAYC,MAAZ,KAAuB,CAAvB,IACAE,kBAAKC,WAAL,CAAiBF,KAAK,CAACG,YAAN,EAAjB,CADA,IAEAF,kBAAKC,WAAL,CAAiBF,KAAK,CAACI,WAAN,EAAjB,CAFA,IAGAC,uBAAMC,OAAN,CAAcN,KAAK,CAACF,KAAN,CAAY,CAAZ,CAAd,CAJF,EAKE;AACA,WAAOE,KAAK,CAACF,KAAN,CAAY,CAAZ,EAAeS,IAAf,CAAoBC,GAA3B;AACD;;AACD,MACER,KAAK,CAACF,KAAN,CAAYC,MAAZ,KAAuB,CAAvB,IAA4BM,uBAAMC,OAAN,CAAcN,KAAK,CAACF,KAAN,CAAY,CAAZ,CAAd,CAD9B,EAEE;AACA,WAAOE,KAAK,CAACF,KAAN,CAAY,CAAZ,EAAeS,IAAf,CAAoBC,GAA3B;AACD;;AACD,SAAO,IAAP;AACD","sourcesContent":["import { Document, Text } from '@ali/4ever-cangjie';\nimport { Image } from '@ali/4ever-plugin-image';\n\nexport default function getImageSource(fragment: Document) {\n  if (fragment?.nodes?.length !== 1) {\n    return null;\n  }\n  const block = fragment.nodes[0];\n  if (\n    block.nodes.length === 3 &&\n    Text.isEmptyText(block.getFirstNode()) &&\n    Text.isEmptyText(block.getLastNode()) &&\n    Image.isImage(block.nodes[1])\n  ) {\n    return block.nodes[1].data.src;\n  }\n  if (\n    block.nodes.length === 1 && Image.isImage(block.nodes[0])\n  ) {\n    return block.nodes[0].data.src;\n  }\n  return null;\n}\n"],"file":"getImageSource.js"}