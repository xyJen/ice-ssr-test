{"version":3,"sources":["../../../../src/bi/utils/writeClipboardDataToHtml.ts"],"names":["writeClipboardDataToHtml","html","data","Array","isArray","length","domparser","DOMParser","root","parseFromString","clipboardDataNode","querySelector","DATA_CLIPBORAD_CANGJIE","body","firstElementChild","forEach","key","value","setAttribute","replace","RegExp","SLASH_PLACEHOLDER","innerHTML"],"mappings":";;;;;;;AAAA;;AAEA;AACA;AACA;AACA,SAASA,wBAAT,CAAkCC,IAAlC,EAAgDC,IAAhD,EAA0E;AACxE,MAAI,CAACC,KAAK,CAACC,OAAN,CAAcF,IAAd,CAAD,IAAwBA,IAAI,CAACG,MAAL,KAAgB,CAA5C,EAA+C;AAC7C,WAAOJ,IAAP;AACD;;AACD,QAAMK,SAAS,GAAG,IAAIC,SAAJ,EAAlB;AACA,QAAMC,IAAI,GAAGF,SAAS,CAACG,eAAV,CAA0BR,IAA1B,EAAgC,WAAhC,CAAb;AAEA,QAAMS,iBAAiB,GAAGF,IAAI,CAACG,aAAL,CAAoB,IAAGC,mCAAuB,GAA9C,CAA1B;;AAEA,MAAIF,iBAAiB,IAAIF,IAAI,CAACK,IAAL,CAAUC,iBAAV,KAAgCJ,iBAAzD,EAA4E;AAC1ER,IAAAA,IAAI,CAACa,OAAL,CAAa,CAAC,CAACC,GAAD,EAAMC,KAAN,CAAD,KAAkB;AAC7B,UAAI,OAAOD,GAAP,KAAe,QAAf,IAA2B,OAAOC,KAAP,KAAiB,QAAhD,EAA0D;AACxDP,QAAAA,iBAAiB,CAACQ,YAAlB,CACG,mBAAkBF,GAAG,CAACG,OAAJ,CAAY,IAAIC,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAZ,EAAmCC,8BAAnC,CAAsD,EAD3E,EAEEJ,KAFF;AAID;AACF,KAPD;AAQD;;AACD,SAAOT,IAAI,CAACK,IAAL,CAAUS,SAAjB;AACD;;eAEctB,wB","sourcesContent":["import { DATA_CLIPBORAD_CANGJIE, SLASH_PLACEHOLDER } from '@ali/4ever-cangjie';\n\n/**\n * @description 自定义的 mime type 数据，挂载到 html 上\n */\nfunction writeClipboardDataToHtml(html: string, data: [string, string][]) {\n  if (!Array.isArray(data) || data.length === 0) {\n    return html;\n  }\n  const domparser = new DOMParser();\n  const root = domparser.parseFromString(html, 'text/html');\n\n  const clipboardDataNode = root.querySelector(`[${DATA_CLIPBORAD_CANGJIE}]`);\n\n  if (clipboardDataNode && root.body.firstElementChild === clipboardDataNode) {\n    data.forEach(([key, value]) => {\n      if (typeof key === 'string' && typeof value === 'string') {\n        clipboardDataNode.setAttribute(\n          `data-identifier-${key.replace(new RegExp('/', 'gm'), SLASH_PLACEHOLDER)}`,\n          value,\n        );\n      }\n    });\n  }\n  return root.body.innerHTML;\n}\n\nexport default writeClipboardDataToHtml;\n"],"file":"writeClipboardDataToHtml.js"}