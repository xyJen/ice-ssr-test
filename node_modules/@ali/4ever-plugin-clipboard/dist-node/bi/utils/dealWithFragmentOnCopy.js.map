{"version":3,"sources":["../../../../src/bi/utils/dealWithFragmentOnCopy.ts"],"names":["dealWithFragmentOnCopy","props","controller","fragment","value","data","selectedCallout"],"mappings":";;;;;;;AACA;;AAKA;;AAUO,SAASA,sBAAT,CAAgCC,KAAhC,EAAqE;AAC1E,QAAM;AAAEC,IAAAA,UAAF;AAAcC,IAAAA;AAAd,MAA2BF,KAAjC;;AACA,MACE,uCAAuBC,UAAvB,KACA,kCAAgBC,QAAhB,CADA,IAEA,EAAE,qCAAqBD,UAArB,KAAoC,mCAAmBA,UAAnB,CAAtC,CAFA,IAGA,CAACA,UAAU,CAACE,KAAX,CAAiBC,IAAjB,CAAsBC,eAJzB,EAKE;AACA;AACJ;AACA;AACA;AACI,WAAO,sCAAoBH,QAApB,CAAP;AACD;;AACD,SAAOA,QAAP;AACD","sourcesContent":["import { Controller, Document } from '@ali/4ever-cangjie';\nimport {\n  isSelectionAtSameBlock,\n  isAtStartOfParagraph,\n  isAtEndOfParagraph,\n} from '@ali/4ever-utils';\nimport {\n  isSingleSection,\n  unwrapSingleSection,\n} from './isParagraph';\n\nexport interface IDealWithFragmentOnCopyProps {\n  controller: Controller;\n  fragment: Document;\n}\n\nexport function dealWithFragmentOnCopy(props: IDealWithFragmentOnCopyProps) {\n  const { controller, fragment } = props;\n  if (\n    isSelectionAtSameBlock(controller) &&\n    isSingleSection(fragment) &&\n    !(isAtStartOfParagraph(controller) && isAtEndOfParagraph(controller)) &&\n    !controller.value.data.selectedCallout\n  ) {\n    /**\n     * 当选区在同一段落，但未选中整个段落时，筛除掉多余的数据。\n     * 如：选中部分列表，复制出来只是选中部分的文字，选中整个列表，复制出来是个列表项\n     * */\n    return unwrapSingleSection(fragment);\n  }\n  return fragment;\n}\n"],"file":"dealWithFragmentOnCopy.js"}