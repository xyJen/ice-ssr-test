import { useEffect, useCallback } from 'react';
import { ContextMenu, environment } from '@ali/4ever-cangjie';
import { isKeyHotkey } from 'is-hotkey';
var isCopyHotKey = isKeyHotkey('mod+c');
/**
 * 处理只读页面（只读权限 + QuickPreview）无法快捷键复制
 */

export default function usePreviewCopy(controller) {
  var readOnly = controller.readOnly || controller.query('isQuickPreview');
  var onKeydown = useCallback(function (event) {
    var isExpanded = controller.value.selection.isExpanded;

    if (environment.IS_MOBILE && isExpanded && isCopyHotKey(event)) {
      controller.run('onAction', {
        type: ContextMenu.ACTION_COPY
      });
    }
  }, [controller]);
  useEffect(function () {
    readOnly && document.addEventListener('keydown', onKeydown);
    return function () {
      readOnly && document.removeEventListener('keydown', onKeydown);
    };
  }, [onKeydown, readOnly]);
}
//# sourceMappingURL=usePreviewCopy.js.map