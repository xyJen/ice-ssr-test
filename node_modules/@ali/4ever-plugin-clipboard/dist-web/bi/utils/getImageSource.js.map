{"version":3,"sources":["../../../../src/bi/utils/getImageSource.ts"],"names":["Text","Image","getImageSource","fragment","nodes","length","block","isEmptyText","getFirstNode","getLastNode","isImage","data","src"],"mappings":"AAAA,SAAmBA,IAAnB,QAA+B,oBAA/B;AACA,SAASC,KAAT,QAAsB,yBAAtB;AAEA,eAAe,SAASC,cAAT,CAAwBC,QAAxB,EAA4C;AAAA;;AACzD,MAAI,CAAAA,QAAQ,QAAR,+BAAAA,QAAQ,CAAEC,KAAV,qCAAiBC,MAAjB,MAA4B,CAAhC,EAAmC;AACjC,WAAO,IAAP;AACD;;AACD,MAAMC,KAAK,GAAGH,QAAQ,CAACC,KAAT,CAAe,CAAf,CAAd;;AACA,MACEE,KAAK,CAACF,KAAN,CAAYC,MAAZ,KAAuB,CAAvB,IACAL,IAAI,CAACO,WAAL,CAAiBD,KAAK,CAACE,YAAN,EAAjB,CADA,IAEAR,IAAI,CAACO,WAAL,CAAiBD,KAAK,CAACG,WAAN,EAAjB,CAFA,IAGAR,KAAK,CAACS,OAAN,CAAcJ,KAAK,CAACF,KAAN,CAAY,CAAZ,CAAd,CAJF,EAKE;AACA,WAAOE,KAAK,CAACF,KAAN,CAAY,CAAZ,EAAeO,IAAf,CAAoBC,GAA3B;AACD;;AACD,MACEN,KAAK,CAACF,KAAN,CAAYC,MAAZ,KAAuB,CAAvB,IAA4BJ,KAAK,CAACS,OAAN,CAAcJ,KAAK,CAACF,KAAN,CAAY,CAAZ,CAAd,CAD9B,EAEE;AACA,WAAOE,KAAK,CAACF,KAAN,CAAY,CAAZ,EAAeO,IAAf,CAAoBC,GAA3B;AACD;;AACD,SAAO,IAAP;AACD","sourcesContent":["import { Document, Text } from '@ali/4ever-cangjie';\nimport { Image } from '@ali/4ever-plugin-image';\n\nexport default function getImageSource(fragment: Document) {\n  if (fragment?.nodes?.length !== 1) {\n    return null;\n  }\n  const block = fragment.nodes[0];\n  if (\n    block.nodes.length === 3 &&\n    Text.isEmptyText(block.getFirstNode()) &&\n    Text.isEmptyText(block.getLastNode()) &&\n    Image.isImage(block.nodes[1])\n  ) {\n    return block.nodes[1].data.src;\n  }\n  if (\n    block.nodes.length === 1 && Image.isImage(block.nodes[0])\n  ) {\n    return block.nodes[0].data.src;\n  }\n  return null;\n}\n"],"file":"getImageSource.js"}