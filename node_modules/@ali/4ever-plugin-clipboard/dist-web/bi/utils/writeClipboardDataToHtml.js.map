{"version":3,"sources":["../../../../src/bi/utils/writeClipboardDataToHtml.ts"],"names":["DATA_CLIPBORAD_CANGJIE","SLASH_PLACEHOLDER","writeClipboardDataToHtml","html","data","Array","isArray","length","domparser","DOMParser","root","parseFromString","clipboardDataNode","querySelector","body","firstElementChild","forEach","key","value","setAttribute","replace","RegExp","innerHTML"],"mappings":"AAAA,SAASA,sBAAT,EAAiCC,iBAAjC,QAA0D,oBAA1D;AAEA;AACA;AACA;;AACA,SAASC,wBAAT,CAAkCC,IAAlC,EAAgDC,IAAhD,EAA0E;AACxE,MAAI,CAACC,KAAK,CAACC,OAAN,CAAcF,IAAd,CAAD,IAAwBA,IAAI,CAACG,MAAL,KAAgB,CAA5C,EAA+C;AAC7C,WAAOJ,IAAP;AACD;;AACD,MAAMK,SAAS,GAAG,IAAIC,SAAJ,EAAlB;AACA,MAAMC,IAAI,GAAGF,SAAS,CAACG,eAAV,CAA0BR,IAA1B,EAAgC,WAAhC,CAAb;AAEA,MAAMS,iBAAiB,GAAGF,IAAI,CAACG,aAAL,OAAuBb,sBAAvB,OAA1B;;AAEA,MAAIY,iBAAiB,IAAIF,IAAI,CAACI,IAAL,CAAUC,iBAAV,KAAgCH,iBAAzD,EAA4E;AAC1ER,IAAAA,IAAI,CAACY,OAAL,CAAa,gBAAkB;AAAA,UAAhBC,GAAgB;AAAA,UAAXC,KAAW;;AAC7B,UAAI,OAAOD,GAAP,KAAe,QAAf,IAA2B,OAAOC,KAAP,KAAiB,QAAhD,EAA0D;AACxDN,QAAAA,iBAAiB,CAACO,YAAlB,sBACqBF,GAAG,CAACG,OAAJ,CAAY,IAAIC,MAAJ,CAAW,GAAX,EAAgB,IAAhB,CAAZ,EAAmCpB,iBAAnC,CADrB,EAEEiB,KAFF;AAID;AACF,KAPD;AAQD;;AACD,SAAOR,IAAI,CAACI,IAAL,CAAUQ,SAAjB;AACD;;AAED,eAAepB,wBAAf","sourcesContent":["import { DATA_CLIPBORAD_CANGJIE, SLASH_PLACEHOLDER } from '@ali/4ever-cangjie';\n\n/**\n * @description 自定义的 mime type 数据，挂载到 html 上\n */\nfunction writeClipboardDataToHtml(html: string, data: [string, string][]) {\n  if (!Array.isArray(data) || data.length === 0) {\n    return html;\n  }\n  const domparser = new DOMParser();\n  const root = domparser.parseFromString(html, 'text/html');\n\n  const clipboardDataNode = root.querySelector(`[${DATA_CLIPBORAD_CANGJIE}]`);\n\n  if (clipboardDataNode && root.body.firstElementChild === clipboardDataNode) {\n    data.forEach(([key, value]) => {\n      if (typeof key === 'string' && typeof value === 'string') {\n        clipboardDataNode.setAttribute(\n          `data-identifier-${key.replace(new RegExp('/', 'gm'), SLASH_PLACEHOLDER)}`,\n          value,\n        );\n      }\n    });\n  }\n  return root.body.innerHTML;\n}\n\nexport default writeClipboardDataToHtml;\n"],"file":"writeClipboardDataToHtml.js"}