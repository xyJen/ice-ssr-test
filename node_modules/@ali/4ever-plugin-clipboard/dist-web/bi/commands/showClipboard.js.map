{"version":3,"sources":["../../../../src/bi/commands/showClipboard.ts"],"names":["Decoration","Mark","setDecorations","PASTE_DECORATION","showClipboard","controller","selection","value","anchor","focus","isTextPoint","setData","data","_clipboardPanel","Date","getTime","run","create","start","end","mark","fromJSON","type"],"mappings":";AAAA,SAEEA,UAFF,EAGEC,IAHF,QAKO,oBALP;AAMA,SAASC,cAAT;AACA,SAASC,gBAAT;AAEA,OAAO,SAASC,aAAT,CACLC,UADK,EAELC,SAFK,EAGO;AAAA,aACcA,SAAS,IAAID,UAAU,CAACE,KAAX,CAAiBD,SAD5C;AAAA,MACJE,MADI,QACJA,MADI;AAAA,MACIC,KADJ,QACIA,KADJ;;AAEZ,MAAID,MAAM,CAACE,WAAP,MAAwBD,KAAK,CAACC,WAAN,EAA5B,EAAiD;AAC/CL,IAAAA,UAAU,CACPM,OADH,cAEON,UAAU,CAACE,KAAX,CAAiBK,IAFxB;AAGIC,MAAAA,eAAe,YAAU,IAAIC,IAAJ,GAAWC,OAAX;AAH7B,QAKGC,GALH,CAMI,UANJ,EAOId,cAAc,CACZF,UAAU,CAACiB,MAAX,CAAkB;AAChBC,MAAAA,KAAK,EAAEV,MADS;AAEhBW,MAAAA,GAAG,EAAEV,KAFW;AAGhBW,MAAAA,IAAI,EAAEnB,IAAI,CAACoB,QAAL,CAAc;AAAEC,QAAAA,IAAI,EAAEnB;AAAR,OAAd;AAHU,KAAlB,CADY,CAPlB;AAeD;;AAED,SAAOE,UAAP;AACD","sourcesContent":["import {\n  Controller,\n  Decoration,\n  Mark,\n  Selection,\n} from '@ali/4ever-cangjie';\nimport { setDecorations } from '../actions';\nimport { PASTE_DECORATION } from '../../utils/constants';\n\nexport function showClipboard(\n  controller: Controller,\n  selection?: Selection\n): Controller {\n  const { anchor, focus } = selection || controller.value.selection;\n  if (anchor.isTextPoint() && focus.isTextPoint()) {\n    controller\n      .setData({\n        ...controller.value.data,\n        _clipboardPanel: `show-${new Date().getTime()}`,\n      })\n      .run(\n        'onAction',\n        setDecorations(\n          Decoration.create({\n            start: anchor,\n            end: focus,\n            mark: Mark.fromJSON({ type: PASTE_DECORATION }),\n          }),\n        ),\n      );\n  }\n\n  return controller;\n}\n"],"file":"showClipboard.js"}