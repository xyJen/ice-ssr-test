{"version":3,"sources":["../../../../src/bi/components/mentionButton.tsx"],"names":["isDisabled","controller","value","isCollapsedAtEdge","selection","query","Boolean","MentionButton","props","locale","handleClick","run","buttonTitle","MentionRole","mention"],"mappings":";;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;uBAJ4B,a;;AAW5B,MAAMA,UAAU,GAAIC,UAAD,IAA4B;AAC7C,QAAM;AAAEC,IAAAA;AAAF,MAAYD,UAAlB;AACA,QAAM;AAAEE,IAAAA;AAAF,MAAwBF,UAAU,CAACC,KAAX,CAAiBE,SAA/C;AACA,QAAMJ,UAAU,GACdG,iBAAiB,IACjB,mCAAqBD,KAArB,CADA,IAEAD,UAAU,CAACI,KAAX,CAAiB,mBAAjB,CAFA,IAGAJ,UAAU,CAACI,KAAX,CAAiB,oBAAjB,CAHA,IAIAJ,UAAU,CAACI,KAAX,CAAiB,uBAAjB,CAJA,IAKAJ,UAAU,CAACI,KAAX,CAAiB,iBAAjB,CANF;AAOA,SAAOC,OAAO,CAACN,UAAD,CAAd;AACD,CAXD;;wBAsBY,eAAC,2BAAD,O;;AATG,SAASO,aAAT,CAAuBC,KAAvB,EAAkD;AAC/D,QAAM;AAAEP,IAAAA,UAAF;AAAcQ,IAAAA;AAAd,MAAyBD,KAA/B;;AACA,QAAME,WAAW,GAAG,MAAMT,UAAU,CAACU,GAAX,CAAe,UAAf,EAA2B,6BAA3B,CAA1B;;AAEA,sBACE,eAAC,gBAAD;AACE,IAAA,KAAK,EAAEF,MAAM,CAACG,WADhB;AAEE,IAAA,QAAQ,EAAE,KAFZ;AAGE,IAAA,MAAM,EAAC,oBAHT;AAIE,IAAA,IAAI,MAJN;AAKE,IAAA,QAAQ,EAAEZ,UAAU,CAACC,UAAD,CALtB;AAME,IAAA,OAAO,EAAES,WANX;AAOE,IAAA,IAAI,EAAEG,kBAAYC;AAPpB,IADF;AAWD","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { Button, MentionBetaNormal } from '@ali/we-design';\nimport isSelectionInMention from '../utils/isSelectionInMention';\nimport { activeMention, } from '../actions';\nimport { MentionRole } from '../../utils/role';\n\nexport interface MentionButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n}\n\nconst isDisabled = (controller: Controller) => {\n  const { value } = controller;\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled =\n    isCollapsedAtEdge ||\n    isSelectionInMention(value) ||\n    controller.query('isSelectionInLink') ||\n    controller.query('isSelectionInImage') ||\n    controller.query('isSelectionInLinkCard') ||\n    controller.query('isSelectionInHr');\n  return Boolean(isDisabled);\n};\n\nexport default function MentionButton(props: MentionButtonProps) {\n  const { controller, locale } = props;\n  const handleClick = () => controller.run('onAction', activeMention());\n\n  return (\n    <Button\n      title={locale.buttonTitle}\n      bordered={false}\n      testid=\"bi-toolbar-mention\"\n      icon={<MentionBetaNormal />}\n      disabled={isDisabled(controller)}\n      onClick={handleClick}\n      role={MentionRole.mention}\n    />\n  );\n}\n"],"file":"mentionButton.js"}