{"version":3,"sources":["../../../../../src/bi/components/next/mentionButton.tsx"],"names":["isMentionDisabled","controller","value","isCollapsedAtEdge","selection","isDisabled","query","Boolean","createMentionButton","props","locale","icon","title","tooltip","badgeDot","disabled","handleClick","run","buttonConfig","onClick","buttonTitle","testid"],"mappings":";;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;uBAH4B,a;;AAU5B,MAAMA,iBAAiB,GAAIC,UAAD,IAA4B;AACpD,QAAM;AAAEC,IAAAA;AAAF,MAAYD,UAAlB;AACA,QAAM;AAAEE,IAAAA;AAAF,MAAwBF,UAAU,CAACC,KAAX,CAAiBE,SAA/C;AACA,QAAMC,UAAU,GACdF,iBAAiB,IACjB,mCAAqBD,KAArB,CADA,IAEAD,UAAU,CAACK,KAAX,CAAiB,mBAAjB,CAFA,IAGAL,UAAU,CAACK,KAAX,CAAiB,oBAAjB,CAHA,IAIAL,UAAU,CAACK,KAAX,CAAiB,uBAAjB,CAJA,IAKAL,UAAU,CAACK,KAAX,CAAiB,iBAAjB,CANF;AAOA,SAAOC,OAAO,CAACF,UAAD,CAAd;AACD,CAXD;;wBAqBkB,eAAC,0BAAD,O;;AARH,SAASG,mBAAT,CAA6BC,KAA7B,EAAsE;AACnF,QAAM;AAAER,IAAAA,UAAF;AAAcS,IAAAA,MAAd;AAAsBC,IAAAA,IAAtB;AAA4BC,IAAAA,KAA5B;AAAmCC,IAAAA,OAAnC;AAA4CC,IAAAA,QAA5C;AAAsDC,IAAAA;AAAtD,MAAmEN,KAAzE;;AAEA,QAAMO,WAAW,GAAG,MAAMf,UAAU,CAACgB,GAAX,CAAe,UAAf,EAA2B,6BAA3B,CAA1B;;AAEA,QAAMZ,UAAU,GAAGU,QAAQ,IAAIf,iBAAiB,CAACC,UAAD,CAAhD;AAEA,QAAMiB,YAA0B,GAAI;AAClCP,IAAAA,IAAI,EAAEA,IAAI,QADwB;AAElCQ,IAAAA,OAAO,EAAEH,WAFyB;AAGlCJ,IAAAA,KAAK,EAAEA,KAAK,IAAIF,MAAM,EAAEU,WAHU;AAIlCP,IAAAA,OAAO,EAAEA,OAJyB;AAKlCC,IAAAA,QALkC;AAMlCC,IAAAA,QAAQ,EAAEV,UANwB;AAOlCgB,IAAAA,MAAM,EAAE;AAP0B,GAApC;AAUA,SAAOH,YAAP;AAED","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { IBasicButton, IToolbarButtonConfig, IconMention } from '@ali/4ever-component';\nimport { activeMention, } from '../../actions';\nimport isSelectionInMention from '../../utils/isSelectionInMention';\n\nexport interface MentionButtonProps extends IToolbarButtonConfig {\n  controller: Controller;\n  locale?: Record<string, string>;\n}\n\nconst isMentionDisabled = (controller: Controller) => {\n  const { value } = controller;\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled =\n    isCollapsedAtEdge ||\n    isSelectionInMention(value) ||\n    controller.query('isSelectionInLink') ||\n    controller.query('isSelectionInImage') ||\n    controller.query('isSelectionInLinkCard') ||\n    controller.query('isSelectionInHr');\n  return Boolean(isDisabled);\n};\n\nexport default function createMentionButton(props: MentionButtonProps): IBasicButton {\n  const { controller, locale, icon, title, tooltip, badgeDot, disabled } = props;\n\n  const handleClick = () => controller.run('onAction', activeMention());\n\n  const isDisabled = disabled || isMentionDisabled(controller);\n\n  const buttonConfig: IBasicButton = ({\n    icon: icon || <IconMention />,\n    onClick: handleClick,\n    title: title || locale?.buttonTitle,\n    tooltip: tooltip,\n    badgeDot,\n    disabled: isDisabled,\n    testid: \"bi-toolbar-mention\"\n  });\n\n  return buttonConfig;\n\n}\n\n"],"file":"mentionButton.js"}