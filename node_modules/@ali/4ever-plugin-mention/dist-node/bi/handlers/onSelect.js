"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = onSelect;

var _removeMention = _interopRequireDefault(require("../commands/removeMention"));

function onSelect(event, controller, next) {
  const {
    value
  } = controller;
  const {
    selection,
    decorations
  } = value;
  const mentionDecorations = decorations.find(item => item.mark.type === 'mention');
  const {
    isCollapsed
  } = selection;
  const focus = selection.focus;

  if (!isCollapsed) {
    (0, _removeMention.default)(controller);
  }

  if (isCollapsed && mentionDecorations) {
    if (focus.offset > mentionDecorations.start.offset || focus.offset < mentionDecorations.end.offset) {
      (0, _removeMention.default)(controller);
    }
  }

  return next();
}
//# sourceMappingURL=onSelect.js.map