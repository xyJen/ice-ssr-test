"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createOnCangjiePaste;

var _everCangjie = require("@ali/4ever-cangjie");

function createOnCangjiePaste(config) {
  return function onCangjiePaste(event, controller, next) {
    if (_everCangjie.environment.IS_MOBILE) {
      return next();
    }

    const hasPopup = controller.value.decorations.some(d => d.mark.type === 'mention' || d.mark.type === 'quick-insert');

    if (!hasPopup) {
      return next();
    }

    const clipboardData = controller.query('getClipboardData', event);
    const fragment = clipboardData?.getFragment();

    if (!fragment) {
      return next();
    }

    return controller.command(_everCangjie.Commands.insertText, fragment.text);
  };
}
//# sourceMappingURL=onCangjiePaste.js.map