"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = insertMentions;

var _everCangjie = require("@ali/4ever-cangjie");

var _utils = require("../utils");

function insertMention(controller, suggestion) {
  return controller.command(_everCangjie.Commands.insertInline, {
    type: 'mention',
    data: suggestion
  }).command(_everCangjie.Commands.moveToStartOfNextText).command(_everCangjie.Commands.insertText, ' ');
}

function insertMentions(controller, suggestions) {
  controller.command(_everCangjie.Commands.focus);
  const {
    value
  } = controller;
  const {
    selection,
    document
  } = value;
  const start = selection.getStart(document);
  const at = (0, _utils.nearsetAt)(value.endText.text, start.offset);
  const mentionLength = start.offset - at;
  controller.command(_everCangjie.Commands.deleteBackward, mentionLength);
  suggestions.forEach(suggestion => {
    controller.command(insertMention, suggestion);
  });
  return controller;
}
//# sourceMappingURL=insertMentions.js.map