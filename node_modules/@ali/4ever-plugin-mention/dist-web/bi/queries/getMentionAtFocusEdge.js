import { Inline } from '@ali/4ever-cangjie';
/**
 * 获取 focus 边缘的 mention 节点
 * @param controller
 * @param dir 方向
 */

export default function getMentionAtFocusEdge(controller, dir) {
  var _controller$value = controller.value,
      selection = _controller$value.selection,
      focusText = _controller$value.focusText,
      document = _controller$value.document;
  if (!selection || !focusText) return null;
  var start = selection.getStart(document);

  if (dir === 'backward' && start.isAtStartOfNode(focusText)) {
    var preNode = document.getPreviousSibling(focusText.key);
    if (preNode && Inline.isInline(preNode) && preNode.type === 'mention') return preNode;
  } else if (dir === 'forward' && start.isAtEndOfNode(focusText)) {
    var nextNode = document.getNextSibling(focusText.key);
    if (nextNode && Inline.isInline(nextNode) && nextNode.type === 'mention') return nextNode;
  }

  return null;
}
//# sourceMappingURL=getMentionAtFocusEdge.js.map