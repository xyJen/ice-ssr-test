{"version":3,"sources":["../../../../src/bi/quickInsert/index.tsx"],"names":["renderMention","onKeyDown","createOnAction","onSelect","QUICK_INSERT_SET","insertMention","createQuickInsertConfig","menubar","isSelectionInMentionSuggestion","createOnCangjiePaste","creatMentionPlugin","config","mentionLocale","mention","locale","mentionConfig","quickInsertMention","mentionId","getMentionId","onAction","renderNode","onCangjiePaste","action","controller","next","type","payload","plugin","command","quickInsert","queries","models"],"mappings":";AACA,OAAOA,aAAP;AACA,OAAOC,SAAP;AACA,OAAOC,cAAP;AACA,OAAOC,QAAP;AACA,SAASC,gBAAT,QAAiC,+BAAjC;AAEA,OAAOC,aAAP;AACA,OAAOC,uBAAP;AACA,OAAOC,OAAP;AACA,OAAOC,8BAAP;AACA,OAAOC,oBAAP;AAEA,eAAe,SAASC,kBAAT,CAA4BC,MAA5B,EAGZ;AAAA;;AACD,MAAMC,aAAa,GAAG,oBAAAD,MAAM,CAACE,OAAP,qCAAgBC,MAAhB,KAA0B,EAAhD;;AAEA,MAAMC,aAAkC;AACtCD,IAAAA,MAAM,EAAEF;AAD8B,KAEnCD,MAAM,CAACK,kBAF4B,CAAxC;;AAIA,MAAMC,SAAS,GACbF,aAAa,IAAIA,aAAa,CAACG,YAA/B,GACIH,aAAa,CAACG,YAAd,EADJ,GAEI,EAHN;;AAIA,MAAMC,SAAQ,GAAGjB,cAAc,CAACa,aAAD,CAA/B;;AAEA,SAAO;AACLK,IAAAA,UAAU,EAAEpB,aAAa,CAACiB,SAAD,EAAYF,aAAZ,CADpB;AAELM,IAAAA,cAAc,EAAEZ,oBAAoB,CAACE,MAAD,CAF/B;AAGLQ,IAAAA,QAAQ,EAAE,kBAACG,MAAD,EAAiBC,UAAjB,EAAyCC,IAAzC,EAAkD;AAAA,UAClDC,IADkD,GAChCH,MADgC,CAClDG,IADkD;AAAA,UAC5CC,OAD4C,GAChCJ,MADgC,CAC5CI,OAD4C;;AAE1D,UACED,IAAI,KAAKrB,gBAAT,IACA,CAAAsB,OAAO,QAAP,YAAAA,OAAO,CAAEC,MAAT,MAAoB,oBAFtB,EAGE;AACA,eAAOJ,UAAU,CAACK,OAAX,CAAmBvB,aAAnB,CAAP;AACD;;AACD,aAAOc,SAAQ,CAACG,MAAD,EAASC,UAAT,EAAqBC,IAArB,CAAf;AACD,KAZI;AAaLvB,IAAAA,SAAS,EAATA,SAbK;AAcLE,IAAAA,QAAQ,EAARA,QAdK;AAeL0B,IAAAA,WAAW,EAAEvB,uBAAuB,CAACS,aAAD,CAf/B;AAgBLR,IAAAA,OAAO,EAAPA,OAhBK;AAiBLuB,IAAAA,OAAO,EAAE;AACPtB,MAAAA,8BAA8B,EAA9BA;AADO,KAjBJ;AAoBLuB,IAAAA,MAAM,EAAE;AApBH,GAAP;AAsBD","sourcesContent":["import { Controller, Action } from '@ali/4ever-cangjie';\nimport renderMention from '../renderNode';\nimport onKeyDown from '../handlers/onKeyDown';\nimport createOnAction from '../handlers/createOnAction';\nimport onSelect from '../handlers/onSelect';\nimport { QUICK_INSERT_SET } from '@ali/4ever-plugin-quickinsert';\nimport { MentionPluginConfig } from '../types';\nimport insertMention from '../commands/insertMention';\nimport createQuickInsertConfig from './createQuickInsertConfig';\nimport menubar from './menubar';\nimport isSelectionInMentionSuggestion from '../queries/isSelectionInMentionSuggestion';\nimport createOnCangjiePaste from '../handlers/onCangjiePaste';\n\nexport default function creatMentionPlugin(config: {\n  quickInsertMention: MentionPluginConfig;\n  mention: Record<string, any>;\n}) {\n  const mentionLocale = config.mention?.locale || {}\n\n  const mentionConfig: MentionPluginConfig = {\n    locale: mentionLocale,\n    ...config.quickInsertMention,\n  };\n  const mentionId =\n    mentionConfig && mentionConfig.getMentionId\n      ? mentionConfig.getMentionId()\n      : '';\n  const onAction = createOnAction(mentionConfig);\n\n  return {\n    renderNode: renderMention(mentionId, mentionConfig),\n    onCangjiePaste: createOnCangjiePaste(config),\n    onAction: (action: Action, controller: Controller, next) => {\n      const { type, payload } = action;\n      if (\n        type === QUICK_INSERT_SET &&\n        payload?.plugin === 'quickInsertMention'\n      ) {\n        return controller.command(insertMention);\n      }\n      return onAction(action, controller, next);\n    },\n    onKeyDown,\n    onSelect,\n    quickInsert: createQuickInsertConfig(mentionConfig),\n    menubar,\n    queries: {\n      isSelectionInMentionSuggestion,\n    },\n    models: [],\n  };\n}\n"],"file":"index.js"}