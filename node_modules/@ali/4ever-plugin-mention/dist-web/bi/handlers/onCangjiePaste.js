import { Commands, environment } from '@ali/4ever-cangjie';
export default function createOnCangjiePaste(config) {
  return function onCangjiePaste(event, controller, next) {
    if (environment.IS_MOBILE) {
      return next();
    }

    var hasPopup = controller.value.decorations.some(function (d) {
      return d.mark.type === 'mention' || d.mark.type === 'quick-insert';
    });

    if (!hasPopup) {
      return next();
    }

    var clipboardData = controller.query('getClipboardData', event);
    var fragment = clipboardData == null ? void 0 : clipboardData.getFragment();

    if (!fragment) {
      return next();
    }

    return controller.command(Commands.insertText, fragment.text);
  };
}
//# sourceMappingURL=onCangjiePaste.js.map