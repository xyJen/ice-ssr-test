import { Commands } from '@ali/4ever-cangjie';
import { nearsetAt } from "../utils";

function insertMention(controller, suggestion) {
  return controller.command(Commands.insertInline, {
    type: 'mention',
    data: suggestion
  }).command(Commands.moveToStartOfNextText).command(Commands.insertText, ' ');
}

export default function insertMentions(controller, suggestions) {
  controller.command(Commands.focus);
  var value = controller.value;
  var selection = value.selection,
      document = value.document;
  var start = selection.getStart(document);
  var at = nearsetAt(value.endText.text, start.offset);
  var mentionLength = start.offset - at;
  controller.command(Commands.deleteBackward, mentionLength);
  suggestions.forEach(function (suggestion) {
    controller.command(insertMention, suggestion);
  });
  return controller;
}
//# sourceMappingURL=insertMentions.js.map