{"version":3,"sources":["../../../../../src/bi/components/next/mentionButton.tsx"],"names":["React","IconMention","activeMention","isSelectionInMention","isMentionDisabled","controller","value","isCollapsedAtEdge","selection","isDisabled","query","Boolean","createMentionButton","props","locale","icon","title","tooltip","badgeDot","disabled","handleClick","run","buttonConfig","onClick","buttonTitle","testid"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAC5B,SAA6CC,WAA7C,QAAgE,sBAAhE;AACA,SAASC,aAAT;AACA,OAAOC,oBAAP;;AAOA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,UAAD,EAA4B;AAAA,MAC5CC,KAD4C,GAClCD,UADkC,CAC5CC,KAD4C;AAAA,MAE5CC,iBAF4C,GAEtBF,UAAU,CAACC,KAAX,CAAiBE,SAFK,CAE5CD,iBAF4C;AAGpD,MAAME,UAAU,GACdF,iBAAiB,IACjBJ,oBAAoB,CAACG,KAAD,CADpB,IAEAD,UAAU,CAACK,KAAX,CAAiB,mBAAjB,CAFA,IAGAL,UAAU,CAACK,KAAX,CAAiB,oBAAjB,CAHA,IAIAL,UAAU,CAACK,KAAX,CAAiB,uBAAjB,CAJA,IAKAL,UAAU,CAACK,KAAX,CAAiB,iBAAjB,CANF;AAOA,SAAOC,OAAO,CAACF,UAAD,CAAd;AACD,CAXD;;wBAqBkB,eAAC,WAAD,O;;AARlB,eAAe,SAASG,mBAAT,CAA6BC,KAA7B,EAAsE;AAAA,MAC3ER,UAD2E,GACVQ,KADU,CAC3ER,UAD2E;AAAA,MAC/DS,MAD+D,GACVD,KADU,CAC/DC,MAD+D;AAAA,MACvDC,IADuD,GACVF,KADU,CACvDE,IADuD;AAAA,MACjDC,KADiD,GACVH,KADU,CACjDG,KADiD;AAAA,MAC1CC,OAD0C,GACVJ,KADU,CAC1CI,OAD0C;AAAA,MACjCC,QADiC,GACVL,KADU,CACjCK,QADiC;AAAA,MACvBC,QADuB,GACVN,KADU,CACvBM,QADuB;;AAGnF,MAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA,WAAMf,UAAU,CAACgB,GAAX,CAAe,UAAf,EAA2BnB,aAAa,EAAxC,CAAN;AAAA,GAApB;;AAEA,MAAMO,UAAU,GAAGU,QAAQ,IAAIf,iBAAiB,CAACC,UAAD,CAAhD;AAEA,MAAMiB,YAA0B,GAAI;AAClCP,IAAAA,IAAI,EAAEA,IAAI,QADwB;AAElCQ,IAAAA,OAAO,EAAEH,WAFyB;AAGlCJ,IAAAA,KAAK,EAAEA,KAAK,KAAIF,MAAJ,oBAAIA,MAAM,CAAEU,WAAZ,CAHsB;AAIlCP,IAAAA,OAAO,EAAEA,OAJyB;AAKlCC,IAAAA,QAAQ,EAARA,QALkC;AAMlCC,IAAAA,QAAQ,EAAEV,UANwB;AAOlCgB,IAAAA,MAAM,EAAE;AAP0B,GAApC;AAUA,SAAOH,YAAP;AAED","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { IBasicButton, IToolbarButtonConfig, IconMention } from '@ali/4ever-component';\nimport { activeMention, } from '../../actions';\nimport isSelectionInMention from '../../utils/isSelectionInMention';\n\nexport interface MentionButtonProps extends IToolbarButtonConfig {\n  controller: Controller;\n  locale?: Record<string, string>;\n}\n\nconst isMentionDisabled = (controller: Controller) => {\n  const { value } = controller;\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled =\n    isCollapsedAtEdge ||\n    isSelectionInMention(value) ||\n    controller.query('isSelectionInLink') ||\n    controller.query('isSelectionInImage') ||\n    controller.query('isSelectionInLinkCard') ||\n    controller.query('isSelectionInHr');\n  return Boolean(isDisabled);\n};\n\nexport default function createMentionButton(props: MentionButtonProps): IBasicButton {\n  const { controller, locale, icon, title, tooltip, badgeDot, disabled } = props;\n\n  const handleClick = () => controller.run('onAction', activeMention());\n\n  const isDisabled = disabled || isMentionDisabled(controller);\n\n  const buttonConfig: IBasicButton = ({\n    icon: icon || <IconMention />,\n    onClick: handleClick,\n    title: title || locale?.buttonTitle,\n    tooltip: tooltip,\n    badgeDot,\n    disabled: isDisabled,\n    testid: \"bi-toolbar-mention\"\n  });\n\n  return buttonConfig;\n\n}\n\n"],"file":"mentionButton.js"}