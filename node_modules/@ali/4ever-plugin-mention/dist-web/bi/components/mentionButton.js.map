{"version":3,"sources":["../../../../src/bi/components/mentionButton.tsx"],"names":["React","Button","MentionBetaNormal","isSelectionInMention","activeMention","MentionRole","isDisabled","controller","value","isCollapsedAtEdge","selection","query","Boolean","MentionButton","props","locale","handleClick","run","buttonTitle","mention"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;qBAC4B,a;AAC5B,SAASC,MAAT,EAAiBC,iBAAjB,QAA0C,gBAA1C;AACA,OAAOC,oBAAP;AACA,SAASC,aAAT;AACA,SAASC,WAAT;;AAOA,IAAMC,UAAU,GAAG,oBAACC,UAAD,EAA4B;AAAA,MACrCC,KADqC,GAC3BD,UAD2B,CACrCC,KADqC;AAAA,MAErCC,iBAFqC,GAEfF,UAAU,CAACC,KAAX,CAAiBE,SAFF,CAErCD,iBAFqC;AAG7C,MAAMH,UAAU,GACdG,iBAAiB,IACjBN,oBAAoB,CAACK,KAAD,CADpB,IAEAD,UAAU,CAACI,KAAX,CAAiB,mBAAjB,CAFA,IAGAJ,UAAU,CAACI,KAAX,CAAiB,oBAAjB,CAHA,IAIAJ,UAAU,CAACI,KAAX,CAAiB,uBAAjB,CAJA,IAKAJ,UAAU,CAACI,KAAX,CAAiB,iBAAjB,CANF;AAOA,SAAOC,OAAO,CAACN,UAAD,CAAd;AACD,CAXD;;wBAsBY,eAAC,iBAAD,O;;AATZ,eAAe,SAASO,aAAT,CAAuBC,KAAvB,EAAkD;AAAA,MACvDP,UADuD,GAChCO,KADgC,CACvDP,UADuD;AAAA,MAC3CQ,MAD2C,GAChCD,KADgC,CAC3CC,MAD2C;;AAE/D,MAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA,WAAMT,UAAU,CAACU,GAAX,CAAe,UAAf,EAA2Bb,aAAa,EAAxC,CAAN;AAAA,GAApB;;AAEA,sBACE,eAAC,MAAD;AACE,IAAA,KAAK,EAAEW,MAAM,CAACG,WADhB;AAEE,IAAA,QAAQ,EAAE,KAFZ;AAGE,IAAA,MAAM,EAAC,oBAHT;AAIE,IAAA,IAAI,MAJN;AAKE,IAAA,QAAQ,EAAEZ,UAAU,CAACC,UAAD,CALtB;AAME,IAAA,OAAO,EAAES,WANX;AAOE,IAAA,IAAI,EAAEX,WAAW,CAACc;AAPpB,IADF;AAWD","sourcesContent":["import * as React from 'react';\nimport { Controller } from '@ali/4ever-cangjie';\nimport { Button, MentionBetaNormal } from '@ali/we-design';\nimport isSelectionInMention from '../utils/isSelectionInMention';\nimport { activeMention, } from '../actions';\nimport { MentionRole } from '../../utils/role';\n\nexport interface MentionButtonProps {\n  controller: Controller;\n  locale: Record<string, string>;\n}\n\nconst isDisabled = (controller: Controller) => {\n  const { value } = controller;\n  const { isCollapsedAtEdge } = controller.value.selection;\n  const isDisabled =\n    isCollapsedAtEdge ||\n    isSelectionInMention(value) ||\n    controller.query('isSelectionInLink') ||\n    controller.query('isSelectionInImage') ||\n    controller.query('isSelectionInLinkCard') ||\n    controller.query('isSelectionInHr');\n  return Boolean(isDisabled);\n};\n\nexport default function MentionButton(props: MentionButtonProps) {\n  const { controller, locale } = props;\n  const handleClick = () => controller.run('onAction', activeMention());\n\n  return (\n    <Button\n      title={locale.buttonTitle}\n      bordered={false}\n      testid=\"bi-toolbar-mention\"\n      icon={<MentionBetaNormal />}\n      disabled={isDisabled(controller)}\n      onClick={handleClick}\n      role={MentionRole.mention}\n    />\n  );\n}\n"],"file":"mentionButton.js"}