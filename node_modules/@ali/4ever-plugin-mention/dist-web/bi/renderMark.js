import _extends from "@babel/runtime/helpers/extends";
import * as React from 'react';
var _createElement = /*#__PURE__*/React.createElement;
import MentionSuggestionPortal from "./components/suggestionPortal";
export default (function (config) {
  return function renderMark(props, controller, next) {
    // 如果有 quickInsert 面板显示，则不显示 mention 面板
    var isHidden = controller.query('isSelectionInQuickInsert');
    if (isHidden) return next();
    var mark = props.mark,
        markText = props.text;

    if (mark.type === 'mention' && !controller.query('isDisableMentionPanel')) {
      var text = controller.query('getMentionKeyword'); // 某些场景 mark 会被分割，此时需要只有第一个 mark 唤起面板

      if (text[0] !== markText[0]) return next();
      return /*#__PURE__*/_createElement(MentionSuggestionPortal, _extends({}, props, config, {
        text: text,
        isComposing: !!controller.value.composing,
        controller: controller
      }));
    }

    return next();
  };
});
//# sourceMappingURL=renderMark.js.map