import { v4 as uuid } from 'uuid';
import { createTextWithString } from '@ali/4ever-cangjie';
export default {
  name: 'formula',
  onOpenTag: function onOpenTag(state, name, attrs) {
    var value = attrs.value,
        mode = attrs.mode,
        type = attrs.type;
    if (name !== 'span' || type !== 'formula') return false;
    var metadata = {
      id: uuid(),
      type: 'application/x-alidocs-plugin-formula',
      formula: value
    };
    var formulaTag = ['tag', {
      tagType: 'hetu',
      metadata: metadata
    }, createTextWithString('')];
    var formula = mode === 'inline' ? formulaTag : ['p', {
      jc: 'center'
    }, createTextWithString(''), formulaTag, createTextWithString('')];
    state.push(formula);
    return true;
  },
  onCloseTag: function onCloseTag(state, name, attrs) {
    if (name !== 'span' || attrs.type !== 'formula') return false;
    var formula = state.pop();
    state.append(formula);
    return true;
  }
};
//# sourceMappingURL=htmlToJsonML.js.map