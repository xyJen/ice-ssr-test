'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

const loadingMap = new Map();
const loadedMap = new Map();
function getAsync(id, getter) {
  if (isLoaded(id)) {
    return getLoaded(id);
  }

  let promise = loadingMap.get(id);

  if (promise) {
    return promise;
  }

  promise = getter();
  loadingMap.set(id, promise);
  promise.then(value => {
    loadedMap.set(id, value);
    loadingMap.delete(id);
  }, () => {
    loadingMap.delete(id);
  });
  return promise;
}
function isLoaded(id) {
  return loadedMap.has(id);
}
function isLoading(id) {
  return loadingMap.has(id);
}
function getLoaded(id) {
  return loadedMap.get(id);
}
function removeLoaded(id) {
  if (isLoaded(id)) {
    loadedMap.delete(id);
  }

  if (isLoading(id)) {
    loadingMap.get(id).then(() => {
      loadedMap.delete(id);
    });
  }
}

exports.default = getAsync;
exports.getLoaded = getLoaded;
exports.isLoaded = isLoaded;
exports.isLoading = isLoading;
exports.removeLoaded = removeLoaded;
//# sourceMappingURL=index.js.map
